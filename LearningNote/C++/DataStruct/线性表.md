# 线性表
---
## 1. 是什么?
特殊的数据对象
#### 表现：
* 零个，或 多个数据元素组成的集合
* 数据元素 在位置上 是有序排列
* 数据元素个数有限
* 数据元素类型相同

#### 抽象定义：
线性表 是： 具有相同类型的 n(>= 0) 个数据元素的有限序列
```
(a0, a1, a2, ... an-1)
ai 是表项 (数据元素)
n 是表长度
```

## 2. 有什么?
* a0 为线性表的第一个元素，只有一个后继
* an-1为线性表的最后一个元素，只有一个前驱
* 除 a0 和 an-1 外的 ai， 既有前驱，又有后继
* 直接支持 **逐项访问** 和 **顺序存取**


#### 操作
* 增(插入)
* 删（删除元素）
* 改（修改元素）
* 查（获取目标位置元素的值）
* 获取长度（获取表长度）
* 清空（清空线性表）

---
## 3 如何实现：
### 3.1 顺序存储 -> 顺序表
#### 定义
用一段地址连续的存储单元一次存储线性表中的数据元素

#### 设计思路
* 用一维数组来实现 顺序存储结构
  * 存储空间： T* m_array;
  * 当前长度: int m_length;

  ```C++
  template<typename T>
  class SeqList : public List<T>
  {
  protected:
    T* m_array;
    int m_length;
  };
  ```

#### 获取操作：
* 判断目标位置是否合法
* 将目标位置作为数组 下标获取元素

#### 插入操作
* 判断目标位置是否合法
* 将目标位置之后的所有元素后移一个位置
* 将新元素插入目标位置
* 线性表长度 +1

#### 删除操作
* 判断目标位置是否合法
* 将目标位置后的所有元素前移一个位置
* 线性表长度 -1


#### find
这个操作往往很频繁，但是，代码往往很重复，所以可以在这里
* ```int find(const T& e) const ```
* e :待查找的数据元素
* 返回值
  * >=0: 数据元素在线性表中 **第一次** 出现的位置
  * -1 : 数据元素不存在
---
### 3.2 顺序存储的抽象实现
#### 设计要点
* 抽象类模板，存储空间的 位置 和 大小 由子类完成
* 实现顺序结构线性表的 关键操作
* 提供数组操作符，方便快速获取元素

#### 3.2.1 StaticList 设计要点
* 使用原生数组作为顺序存储空间
* 使用模板参数决定数组大小

#### 3.2.2 DynamicList 设计要点
* 申请连续堆空间作为顺序存储空间
* 动态设置顺序存储空间的大小
* 保证重置顺序存储空间时的异常安全性

---
### 3.3 链式存储 -> 链表
#### 定义（是什么）：
* 为了表示每个数据元素 与 其后继元素之间的 **逻辑关系**
  * 数据元素 除了存储本身的信息 ，还要存储 后继的信息
  ```
  (a0， a1地址), （a1, a2地址), a2, ... ai, ai+1...
  ai 与 ai+1 在物理内存中无相邻关系
  ```
  * 每个结点：
    * 数据域 ：存储数据元素本身
    * 指针域 ：存储相邻结点的地址

#### 有什么：
* 单链表
* 循环链表
* 双向链表
* 双向循环链表

#### 链表几个基本概念
* **头结点**
  * 链表中的辅助结点， 包含 指向第一个数据元素的指针
* **数据结点**
  * 链表中代表数据元素的结点， 一般为: (数据元素， 地址)
* **尾结点**
  * 链表中最后一个数据结点， 地址为空

#### 定义单链表中的结点
```C++
struct Node : public Object
{
  T value;          // T为任意类型  存放数据
  Node* next;      // 指向 后继结点 的指针
};
```

#### 头结点作用 或者说 意义：
* 辅助数据元素的定位，方便插入 和 删除 操作
* 自己不存储实际数据元素

#### 插入操作(增)
* 1. 找位置：  从 头结点 开始， 通过 current指针 定位到目标位置
* 2. 申请结点： 从对空间申请Node结点
* 3. 插入: (老三步)
  * 先赋值 : Node->value = e
  * 定位后继： Node->next = current->next
  * 定位前驱： current->next = node

#### 删除操作(删)
* 1. 找位置 ： 从头结点开始， 通过 current指针 定位到目标位置
* 2. 删除
```C++
Del = current->next;
current->next = Det->next;
delete Del;
```

---
#### LinkList 设计要点
* 通过头结点 访问 后继节点
* 定义 内部结点类型Node， 用于描述数据域 和 指针域
* 实现 线性表的 关键操作(增删改查...)
