# 构造XASM汇编器
```
* 设计文档
* 实现创建
```
---
## XASM (XtremeScript Assmbler)
### 做什么
把xvm汇编语言写的脚本 汇编成 可以在 XtremeScript 虚拟机上运行 的可执行代码。
```
myScript.xss ->  XtremeScript Compiler -> MyScript.xasm -> XASM -> MyScript.xse
```

本质上：
* 输入： 人类可读的 源代码
* 输出： 可执行的 机器代码

---
## 1. 汇编器 是 如何工作的

### 主要步骤：
* (1) 根据指令 **查找表** 把每个指令助记符 **简化成** 与它相应的 操作码
* (2) 根据所有 **变量 和 数组引用** 所在的 作用域， 把它们 **转变成** 相关的 堆栈索引
* (3) 注意指令流中的行标签的索引， 把那些指令(跳转指令 和 Call指令) 后面的引用 都转换成 索引
* (4) **丢弃** 所有无关的 或 人类可读的内容 比如说 空白符、逗号、 和其他分隔符号。  换句话说： 就是把所有的东西都简化为与ASCLL码相对应的二进制格式
* (5) 把输出写到一个二进制文件，采用XML可以识别的结构化的格式，并把它作为可执行文件

#### 术语
指令流(Instruction Stream) : 汇编程序的输出就是指令流，就是，当你连接所有的操作码和操作数并且连续不断地 把它们有序地组合在一起 从而出现的数据。


### 1.1 指令的 汇编
首先 汇编程序 把 指令助记符 映射成 操作码

#### 表的主要组成

### 1.2 变量的汇编
变量或者数组索引 就是一个 符号名
