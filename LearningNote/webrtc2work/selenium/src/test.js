!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=86)}([function(e,t){var n=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(2),i=n(0),a=n(8),o=n(9),s=n(11),c=function(e,t,n){var u,l,d,f=e&c.F,p=e&c.G,h=e&c.S,m=e&c.P,v=e&c.B,g=e&c.W,y=p?i:i[t]||(i[t]={}),b=y.prototype,w=p?r:h?r[t]:(r[t]||{}).prototype;for(u in p&&(n=t),n)(l=!f&&w&&void 0!==w[u])&&s(y,u)||(d=l?w[u]:n[u],y[u]=p&&"function"!=typeof w[u]?n[u]:v&&l?a(d,r):g&&w[u]==d?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(d):m&&"function"==typeof d?a(Function.call,d):d,m&&((y.virtual||(y.virtual={}))[u]=d,e&c.R&&b&&!b[u]&&o(b,u,d)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var r=n(41)("wks"),i=n(29),a=n(2).Symbol,o="function"==typeof a;(e.exports=function(e){return r[e]||(r[e]=o&&a[e]||(o?a:i)("Symbol."+e))}).store=r},function(e,t,n){var r=n(7),i=n(52),a=n(35),o=Object.defineProperty;t.f=n(6)?Object.defineProperty:function(e,t,n){if(r(e),t=a(t,!0),r(n),i)try{return o(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(10)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(5);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){var r=n(17);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var r=n(4),i=n(18);e.exports=n(6)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(38);e.exports=function(e){return Object(r(e))}},function(e,t,n){"use strict";var r=n(105)(!0);n(46)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},function(e,t,n){var r=n(37),i=n(38);e.exports=function(e){return r(i(e))}},function(e,t){e.exports={}},function(e,t,n){n(107);for(var r=n(2),i=n(9),a=n(15),o=n(3)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),c=0;c<s.length;c++){var u=s[c],l=r[u],d=l&&l.prototype;d&&!d[o]&&i(d,o,u),a[u]=a.Array}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=!0},function(e,t,n){var r=n(4).f,i=n(11),a=n(3)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,a)&&r(e,a,{configurable:!0,value:t})}},function(e,t,n){t.f=n(3)},function(e,t,n){var r=n(55),i=n(42);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t){},function(e,t,n){var r=n(8),i=n(67),a=n(68),o=n(7),s=n(28),c=n(47),u={},l={};(t=e.exports=function(e,t,n,d,f){var p,h,m,v,g=f?function(){return e}:c(e),y=r(n,d,t?2:1),b=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(a(g)){for(p=s(e.length);p>b;b++)if((v=t?y(o(h=e[b])[0],h[1]):y(e[b]))===u||v===l)return v}else for(m=g.call(e);!(h=m.next()).done;)if((v=i(m,y,h.value,t))===u||v===l)return v}).BREAK=u,t.RETURN=l},function(e,t,n){"use strict";t.__esModule=!0;var r=o(n(61)),i=o(n(82)),a="function"==typeof i.default&&"symbol"==typeof r.default?function(e){return typeof e}:function(e){return e&&"function"==typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":typeof e};function o(e){return e&&e.__esModule?e:{default:e}}t.default="function"==typeof i.default&&"symbol"===a(r.default)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":void 0===e?"undefined":a(e)}},function(e,t,n){e.exports={default:n(162),__esModule:!0}},function(e,t,n){var r=n(39),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var r=n(7),i=n(99),a=n(42),o=n(40)("IE_PROTO"),s=function(){},c=function(){var e,t=n(34)("iframe"),r=a.length;for(t.style.display="none",n(59).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),c=e.F;r--;)delete c.prototype[a[r]];return c()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[o]=e):n=c(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(19),i=n(3)("toStringTag"),a="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,o;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?n:a?r(t):"Object"==(o=r(t))&&"function"==typeof t.callee?"Arguments":o}},function(e,t,n){e.exports={default:n(158),__esModule:!0}},function(e,t,n){var r=n(5),i=n(2).document,a=r(i)&&r(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},function(e,t,n){var r=n(5);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r=n(1),i=n(0),a=n(10);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],o={};o[e]=t(n),r(r.S+r.F*a((function(){n(1)})),"Object",o)}},function(e,t,n){var r=n(19);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(41)("keys"),i=n(29);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t,n){var r=n(0),i=n(2),a=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(20)?"pure":"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(29)("meta"),i=n(5),a=n(11),o=n(4).f,s=0,c=Object.isExtensible||function(){return!0},u=!n(10)((function(){return c(Object.preventExtensions({}))})),l=function(e){o(e,r,{value:{i:"O"+ ++s,w:{}}})},d=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,r)){if(!c(e))return"F";if(!t)return"E";l(e)}return e[r].i},getWeak:function(e,t){if(!a(e,r)){if(!c(e))return!0;if(!t)return!1;l(e)}return e[r].w},onFreeze:function(e){return u&&d.NEED&&c(e)&&!a(e,r)&&l(e),e}}},function(e,t,n){var r=n(2),i=n(0),a=n(20),o=n(22),s=n(4).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=a?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:o.f(e)})}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){"use strict";var r=n(20),i=n(1),a=n(57),o=n(9),s=n(15),c=n(106),u=n(21),l=n(62),d=n(3)("iterator"),f=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,n,h,m,v,g){c(n,t,h);var y,b,w,_=function(e){if(!f&&e in C)return C[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},k=t+" Iterator",x="values"==m,S=!1,C=e.prototype,$=C[d]||C["@@iterator"]||m&&C[m],R=$||_(m),M=m?x?_("entries"):R:void 0,P="Array"==t&&C.entries||$;if(P&&(w=l(P.call(new e)))!==Object.prototype&&w.next&&(u(w,k,!0),r||"function"==typeof w[d]||o(w,d,p)),x&&$&&"values"!==$.name&&(S=!0,R=function(){return $.call(this)}),r&&!g||!f&&!S&&C[d]||o(C,d,R),s[t]=R,s[k]=p,m)if(y={values:x?R:_("values"),keys:v?R:_("keys"),entries:M},g)for(b in y)b in C||a(C,b,y[b]);else i(i.P+i.F*(f||S),t,y);return y}},function(e,t,n){var r=n(32),i=n(3)("iterator"),a=n(15);e.exports=n(0).getIteratorMethod=function(e){if(null!=e)return e[i]||e["@@iterator"]||a[r(e)]}},function(e,t,n){var r=n(9);e.exports=function(e,t,n){for(var i in t)n&&e[i]?e[i]=t[i]:r(e,i,t[i]);return e}},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(5);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){"use strict";var r=n(17);e.exports.f=function(e){return new function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)}(e)}},function(e,t,n){e.exports=!n(6)&&!n(10)((function(){return 7!=Object.defineProperty(n(34)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(14),i=n(54).f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return o&&"[object Window]"==a.call(e)?function(e){try{return i(e)}catch(e){return o.slice()}}(e):i(r(e))}},function(e,t,n){var r=n(55),i=n(42).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){var r=n(11),i=n(14),a=n(94)(!1),o=n(40)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),c=0,u=[];for(n in s)n!=o&&r(s,n)&&u.push(n);for(;t.length>c;)r(s,n=t[c++])&&(~a(u,n)||u.push(n));return u}},function(e,t,n){"use strict";var r=n(2),i=n(11),a=n(6),o=n(1),s=n(57),c=n(43).KEY,u=n(10),l=n(41),d=n(21),f=n(29),p=n(3),h=n(22),m=n(44),v=n(98),g=n(58),y=n(7),b=n(5),w=n(12),_=n(14),k=n(35),x=n(18),S=n(31),C=n(53),$=n(60),R=n(45),M=n(4),P=n(23),T=$.f,E=M.f,I=C.f,D=r.Symbol,A=r.JSON,O=A&&A.stringify,L=p("_hidden"),F=p("toPrimitive"),j={}.propertyIsEnumerable,N=l("symbol-registry"),B=l("symbols"),U=l("op-symbols"),V=Object.prototype,q="function"==typeof D&&!!R.f,H=r.QObject,z=!H||!H.prototype||!H.prototype.findChild,K=a&&u((function(){return 7!=S(E({},"a",{get:function(){return E(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=T(V,t);r&&delete V[t],E(e,t,n),r&&e!==V&&E(V,t,r)}:E,G=function(e){var t=B[e]=S(D.prototype);return t._k=e,t},W=q&&"symbol"==typeof D.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof D},J=function(e,t,n){return e===V&&J(U,t,n),y(e),t=k(t,!0),y(n),i(B,t)?(n.enumerable?(i(e,L)&&e[L][t]&&(e[L][t]=!1),n=S(n,{enumerable:x(0,!1)})):(i(e,L)||E(e,L,x(1,{})),e[L][t]=!0),K(e,t,n)):E(e,t,n)},Y=function(e,t){y(e);for(var n,r=v(t=_(t)),i=0,a=r.length;a>i;)J(e,n=r[i++],t[n]);return e},Q=function(e){var t=j.call(this,e=k(e,!0));return!(this===V&&i(B,e)&&!i(U,e))&&(!(t||!i(this,e)||!i(B,e)||i(this,L)&&this[L][e])||t)},X=function(e,t){if(e=_(e),t=k(t,!0),e!==V||!i(B,t)||i(U,t)){var n=T(e,t);return!n||!i(B,t)||i(e,L)&&e[L][t]||(n.enumerable=!0),n}},Z=function(e){for(var t,n=I(_(e)),r=[],a=0;n.length>a;)i(B,t=n[a++])||t==L||t==c||r.push(t);return r},ee=function(e){for(var t,n=e===V,r=I(n?U:_(e)),a=[],o=0;r.length>o;)!i(B,t=r[o++])||n&&!i(V,t)||a.push(B[t]);return a};q||(s((D=function(){if(this instanceof D)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0),t=function(n){this===V&&t.call(U,n),i(this,L)&&i(this[L],e)&&(this[L][e]=!1),K(this,e,x(1,n))};return a&&z&&K(V,e,{configurable:!0,set:t}),G(e)}).prototype,"toString",(function(){return this._k})),$.f=X,M.f=J,n(54).f=C.f=Z,n(30).f=Q,R.f=ee,a&&!n(20)&&s(V,"propertyIsEnumerable",Q,!0),h.f=function(e){return G(p(e))}),o(o.G+o.W+o.F*!q,{Symbol:D});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)p(te[ne++]);for(var re=P(p.store),ie=0;re.length>ie;)m(re[ie++]);o(o.S+o.F*!q,"Symbol",{for:function(e){return i(N,e+="")?N[e]:N[e]=D(e)},keyFor:function(e){if(!W(e))throw TypeError(e+" is not a symbol!");for(var t in N)if(N[t]===e)return t},useSetter:function(){z=!0},useSimple:function(){z=!1}}),o(o.S+o.F*!q,"Object",{create:function(e,t){return void 0===t?S(e):Y(S(e),t)},defineProperty:J,defineProperties:Y,getOwnPropertyDescriptor:X,getOwnPropertyNames:Z,getOwnPropertySymbols:ee});var ae=u((function(){R.f(1)}));o(o.S+o.F*ae,"Object",{getOwnPropertySymbols:function(e){return R.f(w(e))}}),A&&o(o.S+o.F*(!q||u((function(){var e=D();return"[null]"!=O([e])||"{}"!=O({a:e})||"{}"!=O(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(b(t)||void 0!==e)&&!W(e))return g(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!W(t))return t}),r[1]=t,O.apply(A,r)}}),D.prototype[F]||n(9)(D.prototype,F,D.prototype.valueOf),d(D,"Symbol"),d(Math,"Math",!0),d(r.JSON,"JSON",!0)},function(e,t,n){e.exports=n(9)},function(e,t,n){var r=n(19);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(2).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(30),i=n(18),a=n(14),o=n(35),s=n(11),c=n(52),u=Object.getOwnPropertyDescriptor;t.f=n(6)?u:function(e,t){if(e=a(e),t=o(t,!0),c)try{return u(e,t)}catch(e){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t,n){e.exports={default:n(104),__esModule:!0}},function(e,t,n){var r=n(11),i=n(12),a=n(40)("IE_PROTO"),o=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?o:null}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){e.exports={default:n(109),__esModule:!0}},function(e,t,n){e.exports={default:n(118),__esModule:!0}},function(e,t,n){"use strict";var r=n(4).f,i=n(31),a=n(48),o=n(8),s=n(49),c=n(25),u=n(46),l=n(63),d=n(69),f=n(6),p=n(43).fastKey,h=n(50),m=f?"_s":"size",v=function(e,t){var n,r=p(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,u){var l=e((function(e,r){s(e,l,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[m]=0,null!=r&&c(r,n,e[u],e)}));return a(l.prototype,{clear:function(){for(var e=h(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var n=h(this,t),r=v(n,e);if(r){var i=r.n,a=r.p;delete n._i[r.i],r.r=!0,a&&(a.n=i),i&&(i.p=a),n._f==r&&(n._f=i),n._l==r&&(n._l=a),n[m]--}return!!r},forEach:function(e){h(this,t);for(var n,r=o(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!v(h(this,t),e)}}),f&&r(l.prototype,"size",{get:function(){return h(this,t)[m]}}),l},def:function(e,t,n){var r,i,a=v(e,t);return a?a.v=n:(e._l=a={i:i=p(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=a),r&&(r.n=a),e[m]++,"F"!==i&&(e._i[i]=a)),e},getEntry:v,setStrong:function(e,t,n){u(e,t,(function(e,n){this._t=h(e,t),this._k=n,this._l=void 0}),(function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?l(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,l(1))}),n?"entries":"values",!n,!0),d(t)}}},function(e,t,n){var r=n(7);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var a=e.return;throw void 0!==a&&r(a.call(e)),t}}},function(e,t,n){var r=n(15),i=n(3)("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||a[i]===e)}},function(e,t,n){"use strict";var r=n(2),i=n(0),a=n(4),o=n(6),s=n(3)("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:r[e];o&&t&&!t[s]&&a.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){"use strict";var r=n(2),i=n(1),a=n(43),o=n(10),s=n(9),c=n(48),u=n(25),l=n(49),d=n(5),f=n(21),p=n(4).f,h=n(123)(0),m=n(6);e.exports=function(e,t,n,v,g,y){var b=r[e],w=b,_=g?"set":"add",k=w&&w.prototype,x={};return m&&"function"==typeof w&&(y||k.forEach&&!o((function(){(new w).entries().next()})))?(w=t((function(t,n){l(t,w,e,"_c"),t._c=new b,null!=n&&u(n,g,t[_],t)})),h("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),(function(e){var t="add"==e||"set"==e;e in k&&(!y||"clear"!=e)&&s(w.prototype,e,(function(n,r){if(l(this,w,e),!t&&y&&!d(n))return"get"==e&&void 0;var i=this._c[e](0===n?0:n,r);return t?this:i}))})),y||p(w.prototype,"size",{get:function(){return this._c.size}})):(w=v.getConstructor(t,e,g,_),c(w.prototype,n),a.NEED=!0),f(w,e),x[e]=w,i(i.G+i.W+i.F,x),y||v.setStrong(w,e,g),w}},function(e,t,n){var r=n(32),i=n(127);e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},function(e,t,n){"use strict";var r=n(1);e.exports=function(e){r(r.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,n){"use strict";var r=n(1),i=n(17),a=n(8),o=n(25);e.exports=function(e){r(r.S,e,{from:function(e){var t,n,r,s,c=arguments[1];return i(this),(t=void 0!==c)&&i(c),null==e?new this:(n=[],t?(r=0,s=a(c,arguments[2],2),o(e,!1,(function(e){n.push(s(e,r++))}))):o(e,!1,n.push,n),new this(n))}})}},function(e,t,n){e.exports={default:n(134),__esModule:!0}},function(e,t,n){var r=n(3)("iterator"),i=!1;try{var a=[7][r]();a.return=function(){i=!0},Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var a=[7],o=a[r]();o.next=function(){return{done:n=!0}},a[r]=function(){return o},e(a)}catch(e){}return n}},function(e,t,n){e.exports={default:n(137),__esModule:!0}},function(e,t,n){var r=n(7),i=n(17),a=n(3)("species");e.exports=function(e,t){var n,o=r(e).constructor;return void 0===o||null==(n=r(o)[a])?t:i(n)}},function(e,t,n){var r,i,a,o=n(8),s=n(139),c=n(59),u=n(34),l=n(2),d=l.process,f=l.setImmediate,p=l.clearImmediate,h=l.MessageChannel,m=l.Dispatch,v=0,g={},y=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e],t()}},b=function(e){y.call(e.data)};f&&p||(f=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return g[++v]=function(){s("function"==typeof e?e:Function(e),t)},r(v),v},p=function(e){delete g[e]},"process"==n(19)(d)?r=function(e){d.nextTick(o(y,e,1))}:m&&m.now?r=function(e){m.now(o(y,e,1))}:h?(a=(i=new h).port2,i.port1.onmessage=b,r=o(a.postMessage,a,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(e){l.postMessage(e+"","*")},l.addEventListener("message",b,!1)):r="onreadystatechange"in u("script")?function(e){c.appendChild(u("script")).onreadystatechange=function(){c.removeChild(this),y.call(e)}}:function(e){setTimeout(o(y,e,1),0)}),e.exports={set:f,clear:p}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){var r=n(7),i=n(5),a=n(51);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=a.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){e.exports={default:n(151),__esModule:!0}},function(e,t,n){e.exports={default:n(154),__esModule:!0}},function(e,t,n){e.exports={default:n(160),__esModule:!0}},function(e,t,n){e.exports={default:n(165),__esModule:!0}},function(e,t,n){"use strict";var r;!function(e){e&&e.__esModule}(n(26)),function(i){function a(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function o(e,t,n,r,i,o){return a(function(e,t){return e<<t|e>>>32-t}(a(a(t,e),a(r,o)),i),n)}function s(e,t,n,r,i,a,s){return o(t&n|~t&r,e,t,i,a,s)}function c(e,t,n,r,i,a,s){return o(t&r|n&~r,e,t,i,a,s)}function u(e,t,n,r,i,a,s){return o(t^n^r,e,t,i,a,s)}function l(e,t,n,r,i,a,s){return o(n^(t|~r),e,t,i,a,s)}function d(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var n,r,i,o,d,f=1732584193,p=-271733879,h=-1732584194,m=271733878;for(n=0;n<e.length;n+=16)r=f,i=p,o=h,d=m,p=l(p=l(p=l(p=l(p=u(p=u(p=u(p=u(p=c(p=c(p=c(p=c(p=s(p=s(p=s(p=s(p,h=s(h,m=s(m,f=s(f,p,h,m,e[n],7,-680876936),p,h,e[n+1],12,-389564586),f,p,e[n+2],17,606105819),m,f,e[n+3],22,-1044525330),h=s(h,m=s(m,f=s(f,p,h,m,e[n+4],7,-176418897),p,h,e[n+5],12,1200080426),f,p,e[n+6],17,-1473231341),m,f,e[n+7],22,-45705983),h=s(h,m=s(m,f=s(f,p,h,m,e[n+8],7,1770035416),p,h,e[n+9],12,-1958414417),f,p,e[n+10],17,-42063),m,f,e[n+11],22,-1990404162),h=s(h,m=s(m,f=s(f,p,h,m,e[n+12],7,1804603682),p,h,e[n+13],12,-40341101),f,p,e[n+14],17,-1502002290),m,f,e[n+15],22,1236535329),h=c(h,m=c(m,f=c(f,p,h,m,e[n+1],5,-165796510),p,h,e[n+6],9,-1069501632),f,p,e[n+11],14,643717713),m,f,e[n],20,-373897302),h=c(h,m=c(m,f=c(f,p,h,m,e[n+5],5,-701558691),p,h,e[n+10],9,38016083),f,p,e[n+15],14,-660478335),m,f,e[n+4],20,-405537848),h=c(h,m=c(m,f=c(f,p,h,m,e[n+9],5,568446438),p,h,e[n+14],9,-1019803690),f,p,e[n+3],14,-187363961),m,f,e[n+8],20,1163531501),h=c(h,m=c(m,f=c(f,p,h,m,e[n+13],5,-1444681467),p,h,e[n+2],9,-51403784),f,p,e[n+7],14,1735328473),m,f,e[n+12],20,-1926607734),h=u(h,m=u(m,f=u(f,p,h,m,e[n+5],4,-378558),p,h,e[n+8],11,-2022574463),f,p,e[n+11],16,1839030562),m,f,e[n+14],23,-35309556),h=u(h,m=u(m,f=u(f,p,h,m,e[n+1],4,-1530992060),p,h,e[n+4],11,1272893353),f,p,e[n+7],16,-155497632),m,f,e[n+10],23,-1094730640),h=u(h,m=u(m,f=u(f,p,h,m,e[n+13],4,681279174),p,h,e[n],11,-358537222),f,p,e[n+3],16,-722521979),m,f,e[n+6],23,76029189),h=u(h,m=u(m,f=u(f,p,h,m,e[n+9],4,-640364487),p,h,e[n+12],11,-421815835),f,p,e[n+15],16,530742520),m,f,e[n+2],23,-995338651),h=l(h,m=l(m,f=l(f,p,h,m,e[n],6,-198630844),p,h,e[n+7],10,1126891415),f,p,e[n+14],15,-1416354905),m,f,e[n+5],21,-57434055),h=l(h,m=l(m,f=l(f,p,h,m,e[n+12],6,1700485571),p,h,e[n+3],10,-1894986606),f,p,e[n+10],15,-1051523),m,f,e[n+1],21,-2054922799),h=l(h,m=l(m,f=l(f,p,h,m,e[n+8],6,1873313359),p,h,e[n+15],10,-30611744),f,p,e[n+6],15,-1560198380),m,f,e[n+13],21,1309151649),h=l(h,m=l(m,f=l(f,p,h,m,e[n+4],6,-145523070),p,h,e[n+11],10,-1120210379),f,p,e[n+2],15,718787259),m,f,e[n+9],21,-343485551),f=a(f,r),p=a(p,i),h=a(h,o),m=a(m,d);return[f,p,h,m]}function f(e){var t,n="",r=32*e.length;for(t=0;t<r;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function p(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var r=8*e.length;for(t=0;t<r;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function h(e){var t,n,r="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),r+="0123456789abcdef".charAt(t>>>4&15)+"0123456789abcdef".charAt(15&t);return r}function m(e){return unescape(encodeURIComponent(e))}function v(e){return function(e){return f(d(p(e),8*e.length))}(m(e))}function g(e,t){return function(e,t){var n,r,i=p(e),a=[],o=[];for(a[15]=o[15]=void 0,i.length>16&&(i=d(i,8*e.length)),n=0;n<16;n+=1)a[n]=909522486^i[n],o[n]=1549556828^i[n];return r=d(a.concat(p(t)),512+8*t.length),f(d(o.concat(r),640))}(m(e),m(t))}function y(e,t,n){return t?n?g(t,e):function(e,t){return h(g(e,t))}(t,e):n?v(e):function(e){return h(v(e))}(e)}void 0===(r=function(){return y}.call(t,n,t,e))||(e.exports=r)}()},function(e,t,n){"use strict";n(87),n(169),n(170),n(171),n(172),n(173),n(174),n(175),n(176),n(177),n(178),n(179),n(180),n(181);var r=angular.module("routingDemoApp",["ngRoute","myApp.init","myApp.meetingRoom","myApp.cameraSetting","myApp.audioSetting","myApp.networkDetection","myApp.networkOptimization","myApp.inviteController"]);r.config(["$routeProvider",function(e){e.when("/",{templateUrl:"MeetingManage/meetingRoom.html",controller:r.meetingRoom}).when("/meetingRoom",{templateUrl:"MeetingManage/meetingRoom.html",controller:r.meetingRoom}).when("/cameraSetting",{templateUrl:"CameraSetting/cameraSetting.html",controller:r.cameraSetting}).when("/audioSetting",{templateUrl:"AudioSetting/audioSetting.html",controller:r.audioSetting}).when("/networkDetection",{templateUrl:"NetworkDetection/networkDetection.html",controller:r.networkDetection}).when("/networkOptimization",{templateUrl:"NetworkOptimization/networkOptimization.html",controller:r.networkOptimization}).when("/invite",{templateUrl:"Invite/invite.html",controller:r.inviteController})}]),r.run(["$templateCache",function(e){e.put("Init/init.html",n(182)),e.put("MeetingManage/meetingRoom.html",n(183)),e.put("CameraSetting/cameraSetting.html",n(184)),e.put("AudioSetting/audioSetting.html",n(185)),e.put("NetworkDetection/networkDetection.html",n(186)),e.put("NetworkOptimization/networkOptimization.html",n(187)),e.put("Invite/invite.html",n(188))}]),r.controller("rootCtr",["$scope",function(e){var t=document.getElementById("tabmenu").getElementsByTagName("li");t[0].className="current";for(var n=0;n<t.length;n++)t[n].onclick=function(){r(this)};function r(e){for(var n=0;n<t.length;n++)t[n]==e?t[n].className="current":t[n].className=""}}])},function(e,t,n){"use strict";var r=E(n(88)),i=E(n(91)),a=E(n(96)),o=E(n(100)),s=E(n(61)),c=E(n(64)),u=E(n(112)),l=E(n(114)),d=E(n(120)),f=E(n(130)),p=E(n(133)),h=E(n(76)),m=E(n(144)),v=E(n(74)),g=E(n(145)),y=E(n(81)),b=E(n(153)),w=E(n(157)),_=E(n(83)),k=E(n(65)),x=E(n(27)),S=E(n(163)),C=E(n(164)),$=E(n(33)),R=E(n(26)),M=E(n(167)),P=E(n(82)),T=E(n(84));function E(e){return e&&e.__esModule?e:{default:e}}!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||(0,T.default)(e,t,{enumerable:!0,get:r})},n.r=function(e){void 0!==P.default&&M.default&&(0,T.default)(e,M.default,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==(void 0===e?"undefined":(0,R.default)(e))&&e&&e.__esModule)return e;var r=(0,$.default)(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=50)}([function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(87),i="mediasoup-client";t.Logger=function(){function e(t){(0,S.default)(this,e),t?(this._debug=r.default(i+":"+t),this._warn=r.default(i+":WARN:"+t),this._error=r.default(i+":ERROR:"+t)):(this._debug=r.default(i),this._warn=r.default(i+":WARN"),this._error=r.default(i+":ERROR")),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}return(0,C.default)(e,[{key:"debug",get:function(){return this._debug}},{key:"warn",get:function(){return this._warn}},{key:"error",get:function(){return this._error}}]),e}()},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.clone=function(e){return"object"!=(void 0===e?"undefined":(0,R.default)(e))?{}:JSON.parse((0,x.default)(e))},t.generateRandomNumber=function(){return Math.round(1e7*Math.random())}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(90),i=n(1);function a(e){var t=new RegExp("^(audio|video)/(.+)","i");if("object"!=(void 0===e?"undefined":(0,R.default)(e)))throw new TypeError("codec is not an object");if(!e.mimeType||"string"!=typeof e.mimeType)throw new TypeError("missing codec.mimeType");var n=t.exec(e.mimeType);if(!n)throw new TypeError("invalid codec.mimeType");if(e.kind=n[1].toLowerCase(),e.preferredPayloadType&&"number"!=typeof e.preferredPayloadType)throw new TypeError("invalid codec.preferredPayloadType");if("number"!=typeof e.clockRate)throw new TypeError("missing codec.clockRate");"audio"===e.kind?"number"!=typeof e.channels&&(e.channels=1):delete e.channels,e.parameters&&"object"==(0,R.default)(e.parameters)||(e.parameters={});var r=!0,i=!1,a=void 0;try{for(var s,c=(0,k.default)((0,_.default)(e.parameters));!(r=(s=c.next()).done);r=!0){var u=s.value,l=e.parameters[u];if(void 0===l&&(e.parameters[u]="",l=""),"string"!=typeof l&&"number"!=typeof l)throw new TypeError("invalid codec parameter [key:"+u+"s, value:"+l+"]");if("apt"===u&&"number"!=typeof l)throw new TypeError("invalid codec apt parameter")}}catch(e){i=!0,a=e}finally{try{!r&&c.return&&c.return()}finally{if(i)throw a}}e.rtcpFeedback&&Array.isArray(e.rtcpFeedback)||(e.rtcpFeedback=[]);var d=!0,f=!1,p=void 0;try{for(var h,m=(0,k.default)(e.rtcpFeedback);!(d=(h=m.next()).done);d=!0)o(h.value)}catch(e){f=!0,p=e}finally{try{!d&&m.return&&m.return()}finally{if(f)throw p}}}function o(e){if("object"!=(void 0===e?"undefined":(0,R.default)(e)))throw new TypeError("fb is not an object");if(!e.type||"string"!=typeof e.type)throw new TypeError("missing fb.type");e.parameter&&"string"==typeof e.parameter||(e.parameter="")}function s(e){if("object"!=(void 0===e?"undefined":(0,R.default)(e)))throw new TypeError("ext is not an object");if(e.kind&&"string"==typeof e.kind||(e.kind=""),""!==e.kind&&"audio"!==e.kind&&"video"!==e.kind)throw new TypeError("invalid ext.kind");if(!e.uri||"string"!=typeof e.uri)throw new TypeError("missing ext.uri");if("number"!=typeof e.preferredId)throw new TypeError("missing ext.preferredId");if(e.preferredEncrypt&&"boolean"!=typeof e.preferredEncrypt)throw new TypeError("invalid ext.preferredEncrypt");if(e.preferredEncrypt||(e.preferredEncrypt=!1),e.direction&&"string"!=typeof e.direction)throw new TypeError("invalid ext.direction");e.direction||(e.direction="sendrecv")}function c(e){if("object"!=(void 0===e?"undefined":(0,R.default)(e)))throw new TypeError("params is not an object");if(e.mid&&"string"!=typeof e.mid)throw new TypeError("params.mid is not a string");if(!Array.isArray(e.codecs))throw new TypeError("missing params.codecs");var t=!0,n=!1,r=void 0;try{for(var i,a=(0,k.default)(e.codecs);!(t=(i=a.next()).done);t=!0)u(i.value)}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}if(e.headerExtensions&&!Array.isArray(e.headerExtensions))throw new TypeError("params.headerExtensions is not an array");e.headerExtensions||(e.headerExtensions=[]);var o=!0,s=!1,c=void 0;try{for(var p,h=(0,k.default)(e.headerExtensions);!(o=(p=h.next()).done);o=!0)l(p.value)}catch(e){s=!0,c=e}finally{try{!o&&h.return&&h.return()}finally{if(s)throw c}}if(e.encodings&&!Array.isArray(e.encodings))throw new TypeError("params.encodings is not an array");e.encodings||(e.encodings=[]);var m=!0,v=!1,g=void 0;try{for(var y,b=(0,k.default)(e.encodings);!(m=(y=b.next()).done);m=!0)d(y.value)}catch(e){v=!0,g=e}finally{try{!m&&b.return&&b.return()}finally{if(v)throw g}}if(e.rtcp&&"object"!=(0,R.default)(e.rtcp))throw new TypeError("params.rtcp is not an object");e.rtcp||(e.rtcp={}),f(e.rtcp)}function u(e){var t=new RegExp("^(audio|video)/(.+)","i");if("object"!=(void 0===e?"undefined":(0,R.default)(e)))throw new TypeError("codec is not an object");if(!e.mimeType||"string"!=typeof e.mimeType)throw new TypeError("missing codec.mimeType");var n=t.exec(e.mimeType);if(!n)throw new TypeError("invalid codec.mimeType");if("number"!=typeof e.payloadType)throw new TypeError("missing codec.payloadType");if("number"!=typeof e.clockRate)throw new TypeError("missing codec.clockRate");"audio"===n[1].toLowerCase()?"number"!=typeof e.channels&&(e.channels=1):delete e.channels,e.parameters&&"object"==(0,R.default)(e.parameters)||(e.parameters={});var r=!0,i=!1,a=void 0;try{for(var s,c=(0,k.default)((0,_.default)(e.parameters));!(r=(s=c.next()).done);r=!0){var u=s.value,l=e.parameters[u];if(void 0===l&&(e.parameters[u]="",l=""),"string"!=typeof l&&"number"!=typeof l)throw new TypeError("invalid codec parameter [key:"+u+"s, value:"+l+"]");if("apt"===u&&"number"!=typeof l)throw new TypeError("invalid codec apt parameter")}}catch(e){i=!0,a=e}finally{try{!r&&c.return&&c.return()}finally{if(i)throw a}}e.rtcpFeedback&&Array.isArray(e.rtcpFeedback)||(e.rtcpFeedback=[]);var d=!0,f=!1,p=void 0;try{for(var h,m=(0,k.default)(e.rtcpFeedback);!(d=(h=m.next()).done);d=!0)o(h.value)}catch(e){f=!0,p=e}finally{try{!d&&m.return&&m.return()}finally{if(f)throw p}}}function l(e){if("object"!=(void 0===e?"undefined":(0,R.default)(e)))throw new TypeError("ext is not an object");if(!e.uri||"string"!=typeof e.uri)throw new TypeError("missing ext.uri");if("number"!=typeof e.id)throw new TypeError("missing ext.id");if(e.encrypt&&"boolean"!=typeof e.encrypt)throw new TypeError("invalid ext.encrypt");e.encrypt||(e.encrypt=!1),e.parameters&&"object"==(0,R.default)(e.parameters)||(e.parameters={});var t=!0,n=!1,r=void 0;try{for(var i,a=(0,k.default)((0,_.default)(e.parameters));!(t=(i=a.next()).done);t=!0){var o=i.value,s=e.parameters[o];if(void 0===s&&(e.parameters[o]="",s=""),"string"!=typeof s&&"number"!=typeof s)throw new TypeError("invalid header extension parameter")}}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}}function d(e){if("object"!=(void 0===e?"undefined":(0,R.default)(e)))throw new TypeError("encoding is not an object");if(e.ssrc&&"number"!=typeof e.ssrc)throw new TypeError("invalid encoding.ssrc");if(e.rid&&"string"!=typeof e.rid)throw new TypeError("invalid encoding.rid");if(e.rtx&&"object"!=(0,R.default)(e.rtx))throw new TypeError("invalid encoding.rtx");if(e.rtx&&"number"!=typeof e.rtx.ssrc)throw new TypeError("missing encoding.rtx.ssrc");if(e.dtx&&"boolean"==typeof e.dtx||(e.dtx=!1),e.scalabilityMode&&"string"!=typeof e.scalabilityMode)throw new TypeError("invalid encoding.scalabilityMode")}function f(e){if("object"!=(void 0===e?"undefined":(0,R.default)(e)))throw new TypeError("rtcp is not an object");if(e.cname&&"string"!=typeof e.cname)throw new TypeError("invalid rtcp.cname");e.reducedSize&&"boolean"==typeof e.reducedSize||(e.reducedSize=!0)}function p(e){if("object"!=(void 0===e?"undefined":(0,R.default)(e)))throw new TypeError("numStreams is not an object");if("number"!=typeof e.OS)throw new TypeError("missing numStreams.OS");if("number"!=typeof e.MIS)throw new TypeError("missing numStreams.MIS")}function h(e){return!!e&&/.+\/rtx$/i.test(e.mimeType)}function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.strict,a=void 0!==i&&i,o=n.modify,s=void 0!==o&&o,c=e.mimeType.toLowerCase();if(c!==t.mimeType.toLowerCase())return!1;if(e.clockRate!==t.clockRate)return!1;if(e.channels!==t.channels)return!1;switch(c){case"video/h264":if((e.parameters["packetization-mode"]||0)!==(t.parameters["packetization-mode"]||0))return!1;if(a){if(!r.isSameProfile(e.parameters,t.parameters))return!1;var u=void 0;try{u=r.generateProfileLevelIdForAnswer(e.parameters,t.parameters)}catch(e){return!1}s&&(u?e.parameters["profile-level-id"]=u:delete e.parameters["profile-level-id"])}break;case"video/vp9":if(a&&(e.parameters["profile-id"]||0)!==(t.parameters["profile-id"]||0))return!1}return!0}t.validateRtpCapabilities=function(e){if("object"!=(void 0===e?"undefined":(0,R.default)(e)))throw new TypeError("caps is not an object");if(e.codecs&&!Array.isArray(e.codecs))throw new TypeError("caps.codecs is not an array");e.codecs||(e.codecs=[]);var t=!0,n=!1,r=void 0;try{for(var i,o=(0,k.default)(e.codecs);!(t=(i=o.next()).done);t=!0)a(i.value)}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}if(e.headerExtensions&&!Array.isArray(e.headerExtensions))throw new TypeError("caps.headerExtensions is not an array");e.headerExtensions||(e.headerExtensions=[]);var c=!0,u=!1,l=void 0;try{for(var d,f=(0,k.default)(e.headerExtensions);!(c=(d=f.next()).done);c=!0)s(d.value)}catch(e){u=!0,l=e}finally{try{!c&&f.return&&f.return()}finally{if(u)throw l}}},t.validateRtpCodecCapability=a,t.validateRtcpFeedback=o,t.validateRtpHeaderExtension=s,t.validateRtpParameters=c,t.validateRtpCodecParameters=u,t.validateRtpHeaderExtensionParameters=l,t.validateRtpEncodingParameters=d,t.validateRtcpParameters=f,t.validateSctpCapabilities=function(e){if("object"!=(void 0===e?"undefined":(0,R.default)(e)))throw new TypeError("caps is not an object");if(!e.numStreams||"object"!=(0,R.default)(e.numStreams))throw new TypeError("missing caps.numStreams");p(e.numStreams)},t.validateNumSctpStreams=p,t.validateSctpParameters=function(e){if("object"!=(void 0===e?"undefined":(0,R.default)(e)))throw new TypeError("params is not an object");if("number"!=typeof e.port)throw new TypeError("missing params.port");if("number"!=typeof e.OS)throw new TypeError("missing params.OS");if("number"!=typeof e.MIS)throw new TypeError("missing params.MIS");if("number"!=typeof e.maxMessageSize)throw new TypeError("missing params.maxMessageSize")},t.validateSctpStreamParameters=function(e){if("object"!=(void 0===e?"undefined":(0,R.default)(e)))throw new TypeError("params is not an object");if("number"!=typeof e.streamId)throw new TypeError("missing params.streamId");var t=!1;if("boolean"==typeof e.ordered?t=!0:e.ordered=!0,e.maxPacketLifeTime&&"number"!=typeof e.maxPacketLifeTime)throw new TypeError("invalid params.maxPacketLifeTime");if(e.maxRetransmits&&"number"!=typeof e.maxRetransmits)throw new TypeError("invalid params.maxRetransmits");if(e.maxPacketLifeTime&&e.maxRetransmits)throw new TypeError("cannot provide both maxPacketLifeTime and maxRetransmits");if(t&&e.ordered&&(e.maxPacketLifeTime||e.maxRetransmits))throw new TypeError("cannot be ordered with maxPacketLifeTime or maxRetransmits");if(t||!e.maxPacketLifeTime&&!e.maxRetransmits||(e.ordered=!1),e.priority&&"string"!=typeof e.priority)throw new TypeError("invalid params.priority");if(e.label&&"string"!=typeof e.label)throw new TypeError("invalid params.label");if(e.protocol&&"string"!=typeof e.protocol)throw new TypeError("invalid params.protocol")},t.getExtendedRtpCapabilities=function(e,t){var n={codecs:[],headerExtensions:[]},r=function(t){if(h(t))return"continue";var r=(e.codecs||[]).find((function(e){return m(e,t,{strict:!0,modify:!0})}));if(!r)return"continue";var i={mimeType:r.mimeType,kind:r.kind,clockRate:r.clockRate,channels:r.channels,localPayloadType:r.preferredPayloadType,localRtxPayloadType:void 0,remotePayloadType:t.preferredPayloadType,remoteRtxPayloadType:void 0,localParameters:r.parameters,remoteParameters:t.parameters,rtcpFeedback:function(e,t){var n=[],r=function(e){var r=(t.rtcpFeedback||[]).find((function(t){return t.type===e.type&&(t.parameter===e.parameter||!t.parameter&&!e.parameter)}));r&&n.push(r)},i=!0,a=!1,o=void 0;try{for(var s,c=(0,k.default)(e.rtcpFeedback||[]);!(i=(s=c.next()).done);i=!0)r(s.value)}catch(e){a=!0,o=e}finally{try{!i&&c.return&&c.return()}finally{if(a)throw o}}return n}(r,t)};n.codecs.push(i)},i=!0,a=!1,o=void 0;try{for(var s,c=(0,k.default)(t.codecs||[]);!(i=(s=c.next()).done);i=!0)r(s.value)}catch(e){a=!0,o=e}finally{try{!i&&c.return&&c.return()}finally{if(a)throw o}}var u=function(n){var r=e.codecs.find((function(e){return h(e)&&e.parameters.apt===n.localPayloadType})),i=t.codecs.find((function(e){return h(e)&&e.parameters.apt===n.remotePayloadType}));r&&i&&(n.localRtxPayloadType=r.preferredPayloadType,n.remoteRtxPayloadType=i.preferredPayloadType)},l=!0,d=!1,f=void 0;try{for(var p,v=(0,k.default)(n.codecs);!(l=(p=v.next()).done);l=!0)u(p.value)}catch(e){d=!0,f=e}finally{try{!l&&v.return&&v.return()}finally{if(d)throw f}}var g=function(t){var r=e.headerExtensions.find((function(e){return function(e,t){return!(e.kind&&t.kind&&e.kind!==t.kind||e.uri!==t.uri)}(e,t)}));if(!r)return"continue";var i={kind:t.kind,uri:t.uri,sendId:r.preferredId,recvId:t.preferredId,encrypt:r.preferredEncrypt,direction:"sendrecv"};switch(t.direction){case"sendrecv":i.direction="sendrecv";break;case"recvonly":i.direction="sendonly";break;case"sendonly":i.direction="recvonly";break;case"inactive":i.direction="inactive"}n.headerExtensions.push(i)},y=!0,b=!1,w=void 0;try{for(var _,x=(0,k.default)(t.headerExtensions);!(y=(_=x.next()).done);y=!0)g(_.value)}catch(e){b=!0,w=e}finally{try{!y&&x.return&&x.return()}finally{if(b)throw w}}return n},t.getRecvRtpCapabilities=function(e){var t={codecs:[],headerExtensions:[]},n=!0,r=!1,i=void 0;try{for(var a,o=(0,k.default)(e.codecs);!(n=(a=o.next()).done);n=!0){var s=a.value,c={mimeType:s.mimeType,kind:s.kind,preferredPayloadType:s.remotePayloadType,clockRate:s.clockRate,channels:s.channels,parameters:s.localParameters,rtcpFeedback:s.rtcpFeedback};if(t.codecs.push(c),s.remoteRtxPayloadType){var u={mimeType:s.kind+"/rtx",kind:s.kind,preferredPayloadType:s.remoteRtxPayloadType,clockRate:s.clockRate,parameters:{apt:s.remotePayloadType},rtcpFeedback:[]};t.codecs.push(u)}}}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}var l=!0,d=!1,f=void 0;try{for(var p,h=(0,k.default)(e.headerExtensions);!(l=(p=h.next()).done);l=!0){var m=p.value;if("sendrecv"===m.direction||"recvonly"===m.direction){var v={kind:m.kind,uri:m.uri,preferredId:m.recvId,preferredEncrypt:m.encrypt,direction:m.direction};t.headerExtensions.push(v)}}}catch(e){d=!0,f=e}finally{try{!l&&h.return&&h.return()}finally{if(d)throw f}}return t},t.getSendingRtpParameters=function(e,t){var n={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}},r=!0,i=!1,a=void 0;try{for(var o,s=(0,k.default)(t.codecs);!(r=(o=s.next()).done);r=!0){var c=o.value;if(c.kind===e){var u={mimeType:c.mimeType,payloadType:c.localPayloadType,clockRate:c.clockRate,channels:c.channels,parameters:c.localParameters,rtcpFeedback:c.rtcpFeedback};if(n.codecs.push(u),c.localRtxPayloadType){var l={mimeType:c.kind+"/rtx",payloadType:c.localRtxPayloadType,clockRate:c.clockRate,parameters:{apt:c.localPayloadType},rtcpFeedback:[]};n.codecs.push(l)}}}}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}var d=!0,f=!1,p=void 0;try{for(var h,m=(0,k.default)(t.headerExtensions);!(d=(h=m.next()).done);d=!0){var v=h.value;if(!(v.kind&&v.kind!==e||"sendrecv"!==v.direction&&"sendonly"!==v.direction)){var g={uri:v.uri,id:v.sendId,encrypt:v.encrypt,parameters:{}};n.headerExtensions.push(g)}}}catch(e){f=!0,p=e}finally{try{!d&&m.return&&m.return()}finally{if(f)throw p}}return n},t.getSendingRemoteRtpParameters=function(e,t){var n={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}},r=!0,i=!1,a=void 0;try{for(var o,s=(0,k.default)(t.codecs);!(r=(o=s.next()).done);r=!0){var c=o.value;if(c.kind===e){var u={mimeType:c.mimeType,payloadType:c.localPayloadType,clockRate:c.clockRate,channels:c.channels,parameters:c.remoteParameters,rtcpFeedback:c.rtcpFeedback};if(n.codecs.push(u),c.localRtxPayloadType){var l={mimeType:c.kind+"/rtx",payloadType:c.localRtxPayloadType,clockRate:c.clockRate,parameters:{apt:c.localPayloadType},rtcpFeedback:[]};n.codecs.push(l)}}}}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}var d=!0,f=!1,p=void 0;try{for(var h,m=(0,k.default)(t.headerExtensions);!(d=(h=m.next()).done);d=!0){var v=h.value;if(!(v.kind&&v.kind!==e||"sendrecv"!==v.direction&&"sendonly"!==v.direction)){var g={uri:v.uri,id:v.sendId,encrypt:v.encrypt,parameters:{}};n.headerExtensions.push(g)}}}catch(e){f=!0,p=e}finally{try{!d&&m.return&&m.return()}finally{if(f)throw p}}if(n.headerExtensions.some((function(e){return"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.uri}))){var y=!0,b=!1,w=void 0;try{for(var _,x=(0,k.default)(n.codecs);!(y=(_=x.next()).done);y=!0){var S=_.value;S.rtcpFeedback=(S.rtcpFeedback||[]).filter((function(e){return"goog-remb"!==e.type}))}}catch(e){b=!0,w=e}finally{try{!y&&x.return&&x.return()}finally{if(b)throw w}}}else if(n.headerExtensions.some((function(e){return"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===e.uri}))){var C=!0,$=!1,R=void 0;try{for(var M,P=(0,k.default)(n.codecs);!(C=(M=P.next()).done);C=!0){var T=M.value;T.rtcpFeedback=(T.rtcpFeedback||[]).filter((function(e){return"transport-cc"!==e.type}))}}catch(e){$=!0,R=e}finally{try{!C&&P.return&&P.return()}finally{if($)throw R}}}else{var E=!0,I=!1,D=void 0;try{for(var A,O=(0,k.default)(n.codecs);!(E=(A=O.next()).done);E=!0){var L=A.value;L.rtcpFeedback=(L.rtcpFeedback||[]).filter((function(e){return"transport-cc"!==e.type&&"goog-remb"!==e.type}))}}catch(e){I=!0,D=e}finally{try{!E&&O.return&&O.return()}finally{if(I)throw D}}}return n},t.reduceCodecs=function(e,t){var n=[];if(t){for(var r=0;r<e.length;++r)if(m(e[r],t)){n.push(e[r]),h(e[r+1])&&n.push(e[r+1]);break}if(0===n.length)throw new TypeError("no matching codec found")}else n.push(e[0]),h(e[1])&&n.push(e[1]);return n},t.generateProbatorRtpParameters=function(e){c(e=i.clone(e));var t={mid:"probator",codecs:[],headerExtensions:[],encodings:[{ssrc:1234}],rtcp:{cname:"probator"}};return t.codecs.push(e.codecs[0]),t.codecs[0].payloadType=127,t.headerExtensions=e.headerExtensions,t},t.canSend=function(e,t){return t.codecs.some((function(t){return t.kind===e}))},t.canReceive=function(e,t){if(c(e),0===e.codecs.length)return!1;var n=e.codecs[0];return t.codecs.some((function(e){return e.remotePayloadType===n.payloadType}))}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(e){var n;return(0,S.default)(this,t),(n=(0,b.default)(this,(t.__proto__||(0,y.default)(t)).call(this,e))).name="UnsupportedError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(n,t):n.stack=new Error(e).stack,n}return(0,w.default)(t,e),t}(Error);t.UnsupportedError=r;var i=function(e){function t(e){var n;return(0,S.default)(this,t),(n=(0,b.default)(this,(t.__proto__||(0,y.default)(t)).call(this,e))).name="InvalidStateError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(n,t):n.stack=new Error(e).stack,n}return(0,w.default)(t,e),t}(Error);t.InvalidStateError=i},function(e,t,n){var r=n(97),i=n(98);t.write=i,t.parse=r.parse,t.parseParams=r.parseParams,t.parseFmtpConfig=r.parseFmtpConfig,t.parsePayloads=r.parsePayloads,t.parseRemoteCandidates=r.parseRemoteCandidates,t.parseImageAttributes=r.parseImageAttributes,t.parseSimulcastStreamList=r.parseSimulcastStreamList},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return(0,S.default)(this,t),(0,b.default)(this,(t.__proto__||(0,y.default)(t)).call(this))}return(0,w.default)(t,e),t}(n(10).EnhancedEventEmitter);t.HandlerInterface=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(4);t.extractRtpCapabilities=function(e){var t=e.sdpObject,n=new g.default,i=[],a=!1,o=!1,s=!0,c=!1,u=void 0;try{for(var l,d=(0,k.default)(t.media);!(s=(l=d.next()).done);s=!0){var f=l.value,p=f.type;switch(p){case"audio":if(a)continue;a=!0;break;case"video":if(o)continue;o=!0;break;default:continue}var h=!0,m=!1,y=void 0;try{for(var b,w=(0,k.default)(f.rtp);!(h=(b=w.next()).done);h=!0){var _=b.value,x={kind:p,mimeType:p+"/"+_.codec,preferredPayloadType:_.payload,clockRate:_.rate,channels:_.encoding,parameters:{},rtcpFeedback:[]};n.set(x.preferredPayloadType,x)}}catch(e){m=!0,y=e}finally{try{!h&&w.return&&w.return()}finally{if(m)throw y}}var S=!0,C=!1,$=void 0;try{for(var R,M=(0,k.default)(f.fmtp||[]);!(S=(R=M.next()).done);S=!0){var P=R.value,T=r.parseParams(P.config),E=n.get(P.payload);E&&(T&&T["profile-level-id"]&&(T["profile-level-id"]=String(T["profile-level-id"])),E.parameters=T)}}catch(e){C=!0,$=e}finally{try{!S&&M.return&&M.return()}finally{if(C)throw $}}var I=!0,D=!1,A=void 0;try{for(var O,L=(0,k.default)(f.rtcpFb||[]);!(I=(O=L.next()).done);I=!0){var F=O.value,j=n.get(F.payload);if(j){var N={type:F.type,parameter:F.subtype};N.parameter||delete N.parameter,j.rtcpFeedback.push(N)}}}catch(e){D=!0,A=e}finally{try{!I&&L.return&&L.return()}finally{if(D)throw A}}var B=!0,U=!1,V=void 0;try{for(var q,H=(0,k.default)(f.ext||[]);!(B=(q=H.next()).done);B=!0){var z=q.value;if(!z["encrypt-uri"]){var K={kind:p,uri:z.uri,preferredId:z.value};i.push(K)}}}catch(e){U=!0,V=e}finally{try{!B&&H.return&&H.return()}finally{if(U)throw V}}}}catch(e){c=!0,u=e}finally{try{!s&&d.return&&d.return()}finally{if(c)throw u}}return{codecs:(0,v.default)(n.values()),headerExtensions:i}},t.extractDtlsParameters=function(e){var t=e.sdpObject,n=(t.media||[]).find((function(e){return e.iceUfrag&&0!==e.port}));if(!n)throw new Error("no active media section found");var r=n.fingerprint||t.fingerprint,i=void 0;switch(n.setup){case"active":i="client";break;case"passive":i="server";break;case"actpass":i="auto"}return{role:i,fingerprints:[{algorithm:r.type,value:r.hash}]}},t.getCname=function(e){var t=(e.offerMediaObject.ssrcs||[]).find((function(e){return"cname"===e.attribute}));return t?t.value:""},t.applyCodecParameters=function(e){var t=e.offerRtpParameters,n=e.answerMediaObject,i=function(e){var t=e.mimeType.toLowerCase();if("audio/opus"!==t)return"continue";if(!(n.rtp||[]).find((function(t){return t.payload===e.payloadType})))return"continue";n.fmtp=n.fmtp||[];var i=n.fmtp.find((function(t){return t.payload===e.payloadType}));i||(i={payload:e.payloadType,config:""},n.fmtp.push(i));var a=r.parseParams(i.config);switch(t){case"audio/opus":var o=e.parameters["sprop-stereo"];void 0!==o&&(a.stereo=o?1:0)}i.config="";var s=!0,c=!1,u=void 0;try{for(var l,d=(0,k.default)((0,_.default)(a));!(s=(l=d.next()).done);s=!0){var f=l.value;i.config&&(i.config+=";"),i.config+=f+"="+a[f]}}catch(e){c=!0,u=e}finally{try{!s&&d.return&&d.return()}finally{if(c)throw u}}},a=!0,o=!1,s=void 0;try{for(var c,u=(0,k.default)(t.codecs);!(a=(c=u.next()).done);a=!0)i(c.value)}catch(e){o=!0,s=e}finally{try{!a&&u.return&&u.return()}finally{if(o)throw s}}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=n(0),a=n(99),o=new i.Logger("RemoteSdp");t.RemoteSdp=function(){function e(t){var n=t.iceParameters,r=t.iceCandidates,i=t.dtlsParameters,a=t.sctpParameters,o=t.plainRtpParameters,s=t.planB,c=void 0!==s&&s;if((0,S.default)(this,e),this._mediaSections=[],this._midToIndex=new g.default,this._iceParameters=n,this._iceCandidates=r,this._dtlsParameters=i,this._sctpParameters=a,this._plainRtpParameters=o,this._planB=c,this._sdpObject={version:0,origin:{address:"0.0.0.0",ipVer:4,netType:"IN",sessionId:1e4,sessionVersion:0,username:"mediasoup-client"},name:"-",timing:{start:0,stop:0},media:[]},n&&n.iceLite&&(this._sdpObject.icelite="ice-lite"),i){this._sdpObject.msidSemantic={semantic:"WMS",token:"*"};var u=this._dtlsParameters.fingerprints.length;this._sdpObject.fingerprint={type:i.fingerprints[u-1].algorithm,hash:i.fingerprints[u-1].value},this._sdpObject.groups=[{type:"BUNDLE",mids:""}]}o&&(this._sdpObject.origin.address=o.ip,this._sdpObject.origin.ipVer=o.ipVersion)}return(0,C.default)(e,[{key:"updateIceParameters",value:function(e){o.debug("updateIceParameters() [iceParameters:%o]",e),this._iceParameters=e,this._sdpObject.icelite=e.iceLite?"ice-lite":void 0;var t=!0,n=!1,r=void 0;try{for(var i,a=(0,k.default)(this._mediaSections);!(t=(i=a.next()).done);t=!0)i.value.setIceParameters(e)}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}}},{key:"updateDtlsRole",value:function(e){o.debug("updateDtlsRole() [role:%s]",e),this._dtlsParameters.role=e;var t=!0,n=!1,r=void 0;try{for(var i,a=(0,k.default)(this._mediaSections);!(t=(i=a.next()).done);t=!0)i.value.setDtlsRole(e)}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}}},{key:"getNextMediaSectionIdx",value:function(){for(var e=0;e<this._mediaSections.length;++e){var t=this._mediaSections[e];if(t.closed)return{idx:e,reuseMid:t.mid}}return{idx:this._mediaSections.length}}},{key:"send",value:function(e){var t=e.offerMediaObject,n=e.reuseMid,r=e.offerRtpParameters,i=e.answerRtpParameters,o=e.codecOptions,s=e.extmapAllowMixed,c=void 0!==s&&s,u=new a.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,offerMediaObject:t,offerRtpParameters:r,answerRtpParameters:i,codecOptions:o,extmapAllowMixed:c});n?this._replaceMediaSection(u,n):this._midToIndex.has(u.mid)?this._replaceMediaSection(u):this._addMediaSection(u)}},{key:"receive",value:function(e){var t=e.mid,n=e.kind,r=e.offerRtpParameters,i=e.streamId,o=e.trackId,s=this._midToIndex.get(t),c=void 0;void 0!==s&&(c=this._mediaSections[s]),c?(c.planBReceive({offerRtpParameters:r,streamId:i,trackId:o}),this._replaceMediaSection(c)):(c=new a.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,mid:t,kind:n,offerRtpParameters:r,streamId:i,trackId:o}),this._addMediaSection(c))}},{key:"disableMediaSection",value:function(e){var t=this._midToIndex.get(e);if(void 0===t)throw new Error("no media section found with mid '"+e+"'");this._mediaSections[t].disable()}},{key:"closeMediaSection",value:function(e){var t=this._midToIndex.get(e);if(void 0===t)throw new Error("no media section found with mid '"+e+"'");var n=this._mediaSections[t];if(e===this._firstMid)return o.debug("closeMediaSection() | cannot close first media section, disabling it instead [mid:%s]",e),void this.disableMediaSection(e);n.close(),this._regenerateBundleMids()}},{key:"planBStopReceiving",value:function(e){var t=e.mid,n=e.offerRtpParameters,r=this._midToIndex.get(t);if(void 0===r)throw new Error("no media section found with mid '"+t+"'");var i=this._mediaSections[r];i.planBStopReceiving({offerRtpParameters:n}),this._replaceMediaSection(i)}},{key:"sendSctpAssociation",value:function(e){var t=e.offerMediaObject,n=new a.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,offerMediaObject:t});this._addMediaSection(n)}},{key:"receiveSctpAssociation",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).oldDataChannelSpec,t=void 0!==e&&e,n=new a.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,mid:"datachannel",kind:"application",oldDataChannelSpec:t});this._addMediaSection(n)}},{key:"getSdp",value:function(){return this._sdpObject.origin.sessionVersion++,r.write(this._sdpObject)}},{key:"_addMediaSection",value:function(e){this._firstMid||(this._firstMid=e.mid),this._mediaSections.push(e),this._midToIndex.set(e.mid,this._mediaSections.length-1),this._sdpObject.media.push(e.getObject()),this._regenerateBundleMids()}},{key:"_replaceMediaSection",value:function(e,t){if("string"==typeof t){var n=this._midToIndex.get(t);if(void 0===n)throw new Error("no media section found for reuseMid '"+t+"'");var r=this._mediaSections[n];this._mediaSections[n]=e,this._midToIndex.delete(r.mid),this._midToIndex.set(e.mid,n),this._sdpObject.media[n]=e.getObject(),this._regenerateBundleMids()}else{var i=this._midToIndex.get(e.mid);if(void 0===i)throw new Error("no media section found with mid '"+e.mid+"'");this._mediaSections[i]=e,this._sdpObject.media[i]=e.getObject()}}},{key:"_regenerateBundleMids",value:function(){this._dtlsParameters&&(this._sdpObject.groups[0].mids=this._mediaSections.filter((function(e){return!e.closed})).map((function(e){return e.mid})).join(" "))}}]),e}()},function(e,t,n){function r(e){return null==e}Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=void 0;var i=function(e,t,n){void 0===t&&(t=4),void 0===n&&(n=4),this.moduleName=r(e)?"butelLogger":e,this.printLevel=r(t)?4:t,this.writeLevel=r(n)?4:n};t.Logger=i;var a=i.prototype;a.error=function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("ã"+this.moduleName+"ã"),e.unshift("ã"+(new Date).toLocaleString()+"ã");for(var t="",n=0,r=e;n<r.length;n++){var i=r[n];t+=" <---\x3e "+("object"==(void 0===i?"undefined":(0,R.default)(i))?(0,x.default)(i):i)}window.console.error(t)},a.warn=function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("ã"+this.moduleName+"ã"),e.unshift("ã"+(new Date).toLocaleString()+"ã");for(var t="",n=0,r=e;n<r.length;n++){var i=r[n];t+=" <---\x3e "+("object"==(void 0===i?"undefined":(0,R.default)(i))?(0,x.default)(i):i)}this.printLevel>1&&window.console.warn(t)},a.info=function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("ã"+this.moduleName+"ã"),e.unshift("ã"+(new Date).toLocaleString()+"ã");for(var t="",n=0,r=e;n<r.length;n++){var i=r[n];t+="object"==(void 0===i?"undefined":(0,R.default)(i))?(0,x.default)(i):i}this.printLevel>2&&window.console.info(t)},a.log=function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("ã"+this.moduleName+"ã"),e.unshift("ã"+(new Date).toLocaleString()+"ã");for(var t="",n=0,r=e;n<r.length;n++){var i=r[n];t+=" <---\x3e "+("object"==(void 0===i?"undefined":(0,R.default)(i))?(0,x.default)(i):i)}this.printLevel>3&&window.console.log(t)}},function(e,t,n){var r,i=n(70),a=n(33),o=n(72),s=n(73),c=n(74);"undefined"!=typeof ArrayBuffer&&(r=n(75));var u="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),l="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),d=u||l;t.protocol=3;var f=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},p=i(f),h={type:"error",data:"parser error"},m=n(76);function v(e,t,n){for(var r=new Array(e.length),i=s(e.length,n),a=function(e,n,i){t(n,(function(t,n){r[e]=n,i(t,r)}))},o=0;o<e.length;o++)a(o,e[o],i)}t.encodePacket=function(e,n,r,i){"function"==typeof n&&(i=n,n=!1),"function"==typeof r&&(i=r,r=null);var a=void 0===e.data?void 0:e.data.buffer||e.data;if("undefined"!=typeof ArrayBuffer&&a instanceof ArrayBuffer)return function(e,n,r){if(!n)return t.encodeBase64Packet(e,r);var i=e.data,a=new Uint8Array(i),o=new Uint8Array(1+i.byteLength);o[0]=f[e.type];for(var s=0;s<a.length;s++)o[s+1]=a[s];return r(o.buffer)}(e,n,i);if(void 0!==m&&a instanceof m)return function(e,n,r){if(!n)return t.encodeBase64Packet(e,r);if(d)return function(e,n,r){if(!n)return t.encodeBase64Packet(e,r);var i=new FileReader;return i.onload=function(){t.encodePacket({type:e.type,data:i.result},n,!0,r)},i.readAsArrayBuffer(e.data)}(e,n,r);var i=new Uint8Array(1);return i[0]=f[e.type],r(new m([i.buffer,e.data]))}(e,n,i);if(a&&a.base64)return function(e,n){return i("b"+t.packets[e.type]+e.data.data)}(e);var o=f[e.type];return void 0!==e.data&&(o+=r?c.encode(String(e.data),{strict:!1}):String(e.data)),i(""+o)},t.encodeBase64Packet=function(e,n){var r,i="b"+t.packets[e.type];if(void 0!==m&&e.data instanceof m){var a=new FileReader;return a.onload=function(){var e=a.result.split(",")[1];n(i+e)},a.readAsDataURL(e.data)}try{r=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(t){for(var o=new Uint8Array(e.data),s=new Array(o.length),c=0;c<o.length;c++)s[c]=o[c];r=String.fromCharCode.apply(null,s)}return i+=btoa(r),n(i)},t.decodePacket=function(e,n,r){if(void 0===e)return h;if("string"==typeof e){if("b"===e.charAt(0))return t.decodeBase64Packet(e.substr(1),n);if(r&&!1===(e=function(e){try{e=c.decode(e,{strict:!1})}catch(e){return!1}return e}(e)))return h;var i=e.charAt(0);return Number(i)==i&&p[i]?e.length>1?{type:p[i],data:e.substring(1)}:{type:p[i]}:h}i=new Uint8Array(e)[0];var a=o(e,1);return m&&"blob"===n&&(a=new m([a])),{type:p[i],data:a}},t.decodeBase64Packet=function(e,t){var n=p[e.charAt(0)];if(!r)return{type:n,data:{base64:!0,data:e.substr(1)}};var i=r.decode(e.substr(1));return"blob"===t&&m&&(i=new m([i])),{type:n,data:i}},t.encodePayload=function(e,n,r){"function"==typeof n&&(r=n,n=null);var i=a(e);return n&&i?m&&!d?t.encodePayloadAsBlob(e,r):t.encodePayloadAsArrayBuffer(e,r):e.length?void v(e,(function(e,r){t.encodePacket(e,!!i&&n,!1,(function(e){r(null,function(e){return e.length+":"+e}(e))}))}),(function(e,t){return r(t.join(""))})):r("0:")},t.decodePayload=function(e,n,r){if("string"!=typeof e)return t.decodePayloadAsBinary(e,n,r);var i;if("function"==typeof n&&(r=n,n=null),""===e)return r(h,0,1);for(var a,o,s="",c=0,u=e.length;c<u;c++){var l=e.charAt(c);if(":"===l){if(""===s||s!=(a=Number(s)))return r(h,0,1);if(s!=(o=e.substr(c+1,a)).length)return r(h,0,1);if(o.length){if(i=t.decodePacket(o,n,!1),h.type===i.type&&h.data===i.data)return r(h,0,1);if(!1===r(i,c+a,u))return}c+=a,s=""}else s+=l}return""!==s?r(h,0,1):void 0},t.encodePayloadAsArrayBuffer=function(e,n){if(!e.length)return n(new ArrayBuffer(0));v(e,(function(e,n){t.encodePacket(e,!0,!0,(function(e){return n(null,e)}))}),(function(e,t){var r=t.reduce((function(e,t){var n;return e+(n="string"==typeof t?t.length:t.byteLength).toString().length+n+2}),0),i=new Uint8Array(r),a=0;return t.forEach((function(e){var t="string"==typeof e,n=e;if(t){for(var r=new Uint8Array(e.length),o=0;o<e.length;o++)r[o]=e.charCodeAt(o);n=r.buffer}i[a++]=t?0:1;var s=n.byteLength.toString();for(o=0;o<s.length;o++)i[a++]=parseInt(s[o]);for(i[a++]=255,r=new Uint8Array(n),o=0;o<r.length;o++)i[a++]=r[o]})),n(i.buffer)}))},t.encodePayloadAsBlob=function(e,n){v(e,(function(e,n){t.encodePacket(e,!0,!0,(function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var r=new Uint8Array(e.length),i=0;i<e.length;i++)r[i]=e.charCodeAt(i);e=r.buffer,t[0]=0}var a=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),o=new Uint8Array(a.length+1);for(i=0;i<a.length;i++)o[i]=parseInt(a[i]);if(o[a.length]=255,m){var s=new m([t.buffer,o.buffer,e]);n(null,s)}}))}),(function(e,t){return n(new m(t))}))},t.decodePayloadAsBinary=function(e,n,r){"function"==typeof n&&(r=n,n=null);for(var i=e,a=[];i.byteLength>0;){for(var s=new Uint8Array(i),c=0===s[0],u="",l=1;255!==s[l];l++){if(u.length>310)return r(h,0,1);u+=s[l]}i=o(i,2+u.length),u=parseInt(u);var d=o(i,0,u);if(c)try{d=String.fromCharCode.apply(null,new Uint8Array(d))}catch(e){var f=new Uint8Array(d);for(d="",l=0;l<f.length;l++)d+=String.fromCharCode(f[l])}a.push(d),i=o(i,u)}var p=a.length;a.forEach((function(e,i){r(t.decodePacket(e,n,!0),i,p)}))}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(95),i=new(n(0).Logger)("EnhancedEventEmitter"),a=function(e){function t(){var e;return(0,S.default)(this,t),(e=(0,b.default)(this,(t.__proto__||(0,y.default)(t)).call(this))).setMaxListeners(1/0),e}return(0,w.default)(t,e),(0,C.default)(t,[{key:"safeEmit",value:function(e){var t=this.listenerCount(e);try{for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return this.emit.apply(this,[e].concat(r))}catch(r){return i.error("safeEmit() | event listener threw an error [event:%s]:%o",e,r),Boolean(t)}}},{key:"safeEmitAsPromise",value:function(){var e=(0,m.default)(f.default.mark((function e(t){for(var n=this,r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new h.default((function(e,r){return n.safeEmit.apply(n,[t].concat((0,p.default)(i),[e,r]))})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(r.EventEmitter);t.EnhancedEventEmitter=a},function(e,t){var n,r,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var c,u=[],l=!1,d=-1;function f(){l&&c&&(l=!1,c.length?u=c.concat(u):d=-1,u.length&&p())}function p(){if(!l){var e=s(f);l=!0;for(var t=u.length;t;){for(c=u,u=[];++d<t;)c&&c[d].run();d=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new h(e,t)),1!==u.length||l||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){var r;
/*!
   * EventEmitter v5.2.9 - git.io/ee
   * Unlicense - http://unlicense.org/
   * Oliver Caldwell - https://oli.me.uk/
   * @preserve
   */!function(t){function i(){}var a=i.prototype,o=t.EventEmitter;function s(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function c(e){return function(){return this[e].apply(this,arguments)}}a.getListeners=function(e){var t,n,r=this._getEvents();if(e instanceof RegExp)for(n in t={},r)r.hasOwnProperty(n)&&e.test(n)&&(t[n]=r[n]);else t=r[e]||(r[e]=[]);return t},a.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},a.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&((t={})[e]=n),t||n},a.addListener=function(e,t){if(!function e(t){return"function"==typeof t||t instanceof RegExp||!(!t||"object"!=(void 0===t?"undefined":(0,R.default)(t)))&&e(t.listener)}(t))throw new TypeError("listener must be a function");var n,r=this.getListenersAsObject(e),i="object"==(void 0===t?"undefined":(0,R.default)(t));for(n in r)r.hasOwnProperty(n)&&-1===s(r[n],t)&&r[n].push(i?t:{listener:t,once:!1});return this},a.on=c("addListener"),a.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},a.once=c("addOnceListener"),a.defineEvent=function(e){return this.getListeners(e),this},a.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},a.removeListener=function(e,t){var n,r,i=this.getListenersAsObject(e);for(r in i)i.hasOwnProperty(r)&&-1!==(n=s(i[r],t))&&i[r].splice(n,1);return this},a.off=c("removeListener"),a.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},a.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},a.manipulateListeners=function(e,t,n){var r,i,a=e?this.removeListener:this.addListener,o=e?this.removeListeners:this.addListeners;if("object"!=(void 0===t?"undefined":(0,R.default)(t))||t instanceof RegExp)for(r=n.length;r--;)a.call(this,t,n[r]);else for(r in t)t.hasOwnProperty(r)&&(i=t[r])&&("function"==typeof i?a.call(this,r,i):o.call(this,r,i));return this},a.removeEvent=function(e){var t,n=void 0===e?"undefined":(0,R.default)(e),r=this._getEvents();if("string"===n)delete r[e];else if(e instanceof RegExp)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},a.removeAllListeners=c("removeEvent"),a.emitEvent=function(e,t){var n,r,i,a,o=this.getListenersAsObject(e);for(a in o)if(o.hasOwnProperty(a))for(n=o[a].slice(0),i=0;i<n.length;i++)!0===(r=n[i]).once&&this.removeListener(e,r.listener),r.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,r.listener);return this},a.trigger=c("emitEvent"),a.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},a.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},a._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},a._getEvents=function(){return this._events||(this._events={})},i.noConflict=function(){return t.EventEmitter=o,i},void 0===(r=function(){return i}.call(t,n,t,e))||(e.exports=r)}("undefined"!=typeof window?window:this||{})},function(e,t,n){(function(r){t.log=function(){var e;return"object"==("undefined"==typeof console?"undefined":(0,R.default)(console))&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),this.useColors){var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&"%c"===e&&(i=++r)})),t.splice(i,0,n)}},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){var e=void 0;try{e=t.storage.getItem("debug")}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=n(55)(t),e.exports.formatters.j=function(e){try{return(0,x.default)(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this,n(11))},function(e,t){t.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},t.decode=function(e){for(var t={},n=e.split("&"),r=0,i=n.length;r<i;r++){var a=n[r].split("=");t[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return t}},function(e,t){e.exports=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){(function(r){t.log=function(){var e;return"object"==("undefined"==typeof console?"undefined":(0,R.default)(console))&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),this.useColors){var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&"%c"===e&&(i=++r)})),t.splice(i,0,n)}},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){var e=void 0;try{e=t.storage.getItem("debug")}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=n(77)(t),e.exports.formatters.j=function(e){try{return(0,x.default)(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this,n(11))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getRtpEncodings=function(e){var t=e.offerMediaObject,n=new d.default,r=!0,i=!1,a=void 0;try{for(var o,s=(0,k.default)(t.ssrcs||[]);!(r=(o=s.next()).done);r=!0){var c=o.value.id;n.add(c)}}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}if(0===n.size)throw new Error("no a=ssrc lines found");var u=new g.default,f=!0,p=!1,h=void 0;try{for(var m,v=(0,k.default)(t.ssrcGroups||[]);!(f=(m=v.next()).done);f=!0){var y=m.value;if("FID"===y.semantics){var b=y.ssrcs.split(/\s+/),w=(0,l.default)(b,2),_=w[0],x=w[1];_=Number(_),x=Number(x),n.has(_)&&(n.delete(_),n.delete(x),u.set(_,x))}}}catch(e){p=!0,h=e}finally{try{!f&&v.return&&v.return()}finally{if(p)throw h}}var S=!0,C=!1,$=void 0;try{for(var R,M=(0,k.default)(n);!(S=(R=M.next()).done);S=!0){var P=R.value;u.set(P,null)}}catch(e){C=!0,$=e}finally{try{!S&&M.return&&M.return()}finally{if(C)throw $}}var T=[],E=!0,I=!1,D=void 0;try{for(var A,O=(0,k.default)(u);!(E=(A=O.next()).done);E=!0){var L=A.value,F=(0,l.default)(L,2),j=F[0],N=F[1],B={ssrc:j};N&&(B.rtx={ssrc:N}),T.push(B)}}catch(e){I=!0,D=e}finally{try{!E&&O.return&&O.return()}finally{if(I)throw D}}return T},t.addLegacySimulcast=function(e){var t=e.offerMediaObject,n=e.numStreams;if(n<=1)throw new TypeError("numStreams must be greater than 1");var r=(t.ssrcs||[]).find((function(e){return"msid"===e.attribute}));if(!r)throw new Error("a=ssrc line with msid information not found");var i=(0,l.default)(r.value.split(" ")[0],2),a=i[0],o=i[1],s=r.id,c=void 0;(t.ssrcGroups||[]).some((function(e){if("FID"!==e.semantics)return!1;var t=e.ssrcs.split(/\s+/);return Number(t[0])===s&&(c=Number(t[1]),!0)}));var u=t.ssrcs.find((function(e){return"cname"===e.attribute}));if(!u)throw new Error("a=ssrc line with cname information not found");for(var d=u.value,f=[],p=[],h=0;h<n;++h)f.push(s+h),c&&p.push(c+h);t.ssrcGroups=[],t.ssrcs=[],t.ssrcGroups.push({semantics:"SIM",ssrcs:f.join(" ")});for(var m=0;m<f.length;++m){var v=f[m];t.ssrcs.push({id:v,attribute:"cname",value:d}),t.ssrcs.push({id:v,attribute:"msid",value:a+" "+o})}for(var g=0;g<p.length;++g){var y=f[g],b=p[g];t.ssrcs.push({id:b,attribute:"cname",value:d}),t.ssrcs.push({id:b,attribute:"msid",value:a+" "+o}),t.ssrcGroups.push({semantics:"FID",ssrcs:y+" "+b})}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getRtpEncodings=function(e){var t=e.offerMediaObject,n=e.track,r=void 0,i=new d.default,a=!0,o=!1,s=void 0;try{for(var c,u=(0,k.default)(t.ssrcs||[]);!(a=(c=u.next()).done);a=!0){var f=c.value;if("msid"===f.attribute&&f.value.split(" ")[1]===n.id){var p=f.id;i.add(p),r||(r=p)}}}catch(e){o=!0,s=e}finally{try{!a&&u.return&&u.return()}finally{if(o)throw s}}if(0===i.size)throw new Error("a=ssrc line with msid information not found [track.id:"+n.id+"]");var h=new g.default,m=!0,v=!1,y=void 0;try{for(var b,w=(0,k.default)(t.ssrcGroups||[]);!(m=(b=w.next()).done);m=!0){var _=b.value;if("FID"===_.semantics){var x=_.ssrcs.split(/\s+/),S=(0,l.default)(x,2),C=S[0],$=S[1];C=Number(C),$=Number($),i.has(C)&&(i.delete(C),i.delete($),h.set(C,$))}}}catch(e){v=!0,y=e}finally{try{!m&&w.return&&w.return()}finally{if(v)throw y}}var R=!0,M=!1,P=void 0;try{for(var T,E=(0,k.default)(i);!(R=(T=E.next()).done);R=!0){var I=T.value;h.set(I,null)}}catch(e){M=!0,P=e}finally{try{!R&&E.return&&E.return()}finally{if(M)throw P}}var D=[],A=!0,O=!1,L=void 0;try{for(var F,j=(0,k.default)(h);!(A=(F=j.next()).done);A=!0){var N=F.value,B=(0,l.default)(N,2),U=B[0],V=B[1],q={ssrc:U};V&&(q.rtx={ssrc:V}),D.push(q)}}catch(e){O=!0,L=e}finally{try{!A&&j.return&&j.return()}finally{if(O)throw L}}return D},t.addLegacySimulcast=function(e){var t=e.offerMediaObject,n=e.track,r=e.numStreams;if(r<=1)throw new TypeError("numStreams must be greater than 1");var i=void 0,a=void 0,o=void 0;if(!(t.ssrcs||[]).find((function(e){return"msid"===e.attribute&&e.value.split(" ")[1]===n.id&&(i=e.id,o=e.value.split(" ")[0],!0)})))throw new Error("a=ssrc line with msid information not found [track.id:"+n.id+"]");(t.ssrcGroups||[]).some((function(e){if("FID"!==e.semantics)return!1;var t=e.ssrcs.split(/\s+/);return Number(t[0])===i&&(a=Number(t[1]),!0)}));var s=t.ssrcs.find((function(e){return"cname"===e.attribute&&e.id===i}));if(!s)throw new Error("a=ssrc line with cname information not found [track.id:"+n.id+"]");for(var c=s.value,u=[],l=[],d=0;d<r;++d)u.push(i+d),a&&l.push(a+d);t.ssrcGroups=t.ssrcGroups||[],t.ssrcs=t.ssrcs||[],t.ssrcGroups.push({semantics:"SIM",ssrcs:u.join(" ")});for(var f=0;f<u.length;++f){var p=u[f];t.ssrcs.push({id:p,attribute:"cname",value:c}),t.ssrcs.push({id:p,attribute:"msid",value:o+" "+n.id})}for(var h=0;h<l.length;++h){var m=u[h],v=l[h];t.ssrcs.push({id:v,attribute:"cname",value:c}),t.ssrcs.push({id:v,attribute:"msid",value:o+" "+n.id}),t.ssrcGroups.push({semantics:"FID",ssrcs:m+" "+v})}}},function(e,t,n){var r=n(57)("socket.io-parser"),i=n(60),a=n(61),o=n(28),s=n(29);function c(){}t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=c,t.Decoder=d;var u=t.ERROR+'"encode error"';function l(e){var n=""+e.type;if(t.BINARY_EVENT!==e.type&&t.BINARY_ACK!==e.type||(n+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(n+=e.nsp+","),null!=e.id&&(n+=e.id),null!=e.data){var i=function(e){try{return(0,x.default)(e)}catch(e){return!1}}(e.data);if(!1===i)return u;n+=i}return r("encoded %j as %s",e,n),n}function d(){this.reconstructor=null}function f(e){this.reconPack=e,this.buffers=[]}function p(e){return{type:t.ERROR,data:"parser error: "+e}}c.prototype.encode=function(e,n){r("encoding packet %j",e),t.BINARY_EVENT===e.type||t.BINARY_ACK===e.type?function(e,t){a.removeBlobs(e,(function(e){var n=a.deconstructPacket(e),r=l(n.packet),i=n.buffers;i.unshift(r),t(i)}))}(e,n):n([l(e)])},i(d.prototype),d.prototype.add=function(e){var n;if("string"==typeof e)n=function(e){var n=0,i={type:Number(e.charAt(0))};if(null==t.types[i.type])return p("unknown packet type "+i.type);if(t.BINARY_EVENT===i.type||t.BINARY_ACK===i.type){for(var a="";"-"!==e.charAt(++n)&&(a+=e.charAt(n),n!=e.length););if(a!=Number(a)||"-"!==e.charAt(n))throw new Error("Illegal attachments");i.attachments=Number(a)}if("/"===e.charAt(n+1))for(i.nsp="";++n&&","!==(c=e.charAt(n))&&(i.nsp+=c,n!==e.length););else i.nsp="/";var s=e.charAt(n+1);if(""!==s&&Number(s)==s){for(i.id="";++n;){var c;if(null==(c=e.charAt(n))||Number(c)!=c){--n;break}if(i.id+=e.charAt(n),n===e.length)break}i.id=Number(i.id)}if(e.charAt(++n)){var u=function(e){try{return JSON.parse(e)}catch(e){return!1}}(e.substr(n));if(!1===u||i.type!==t.ERROR&&!o(u))return p("invalid payload");i.data=u}return r("decoded %s as %j",e,i),i}(e),t.BINARY_EVENT===n.type||t.BINARY_ACK===n.type?(this.reconstructor=new f(n),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!s(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",n))}},d.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},f.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=a.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},f.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(e,t,n){(function(e){
/*!
     * The buffer module from node.js, for the browser.
     *
     * @author   Feross Aboukhadijeh <http://feross.org>
     * @license  MIT
     */
var r=n(63),i=n(64),a=n(65);function o(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return l(this,e,t,n)}function l(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=p(e,t),e}(e,t,n,r):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|m(t,n),i=(e=s(e,r)).write(t,n);return i!==r&&(e=e.slice(0,i)),e}(e,t,n):function(e,t){if(c.isBuffer(t)){var n=0|h(t.length);return 0===(e=s(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?s(e,0):p(e,t);if("Buffer"===t.type&&a(t.data))return p(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function d(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t){if(d(t),e=s(e,t<0?0:0|h(t)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function p(e,t){var n=t.length<0?0:0|h(t.length);e=s(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function h(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function m(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return q(e).length;default:if(r)return V(e).length;t=(""+t).toLowerCase(),r=!0}}function v(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function g(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:y(e,t,n,r,i);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):y(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function y(e,t,n,r,i){var a,o=1,s=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,s/=2,c/=2,n/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var l=-1;for(a=n;a<s;a++)if(u(e,a)===u(t,-1===l?0:a-l)){if(-1===l&&(l=a),a-l+1===c)return l*o}else-1!==l&&(a-=a-l),l=-1}else for(n+c>s&&(n=s-c),a=n;a>=0;a--){for(var d=!0,f=0;f<c;f++)if(u(e,a+f)!==u(t,f)){d=!1;break}if(d)return a}return-1}function b(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[n+o]=s}return o}function w(e,t,n,r){return H(V(t,e.length-n),e,n,r)}function _(e,t,n,r){return H(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function k(e,t,n,r){return _(e,t,n,r)}function x(e,t,n,r){return H(q(t),e,n,r)}function S(e,t,n,r){return H(function(e,t){for(var n,r,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)r=(n=e.charCodeAt(o))>>8,i=n%256,a.push(i),a.push(r);return a}(t,e.length-n),e,n,r)}function C(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function $(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var a,o,s,c,u=e[i],l=null,d=u>239?4:u>223?3:u>191?2:1;if(i+d<=n)switch(d){case 1:u<128&&(l=u);break;case 2:128==(192&(a=e[i+1]))&&(c=(31&u)<<6|63&a)>127&&(l=c);break;case 3:a=e[i+1],o=e[i+2],128==(192&a)&&128==(192&o)&&(c=(15&u)<<12|(63&a)<<6|63&o)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:a=e[i+1],o=e[i+2],s=e[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&(c=(15&u)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&c<1114112&&(l=c)}null===l?(l=65533,d=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=d}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return n}(r)}function R(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function M(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function E(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=t;a<n;++a)i+=U(e[a]);return i}function I(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function D(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function A(e,t,n,r,i,a){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function O(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-n,2);i<a;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function L(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-n,4);i<a;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function F(e,t,n,r,i,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function j(e,t,n,r,a){return a||F(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function N(e,t,n,r,a){return a||F(e,0,n,8),i.write(e,t,n,r,52,8),n+8}t.Buffer=c,t.SlowBuffer=function(e){return+e!=e&&(e=0),c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=o(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,n){return l(null,e,t,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,void 0!==P.default&&u.default&&c[u.default]===c&&(0,T.default)(c,u.default,{value:null,configurable:!0})),c.alloc=function(e,t,n){return function(e,t,n,r){return d(t),t<=0?s(e,t):void 0!==n?"string"==typeof r?s(e,t).fill(n,r):s(e,t).fill(n):s(e,t)}(null,e,t,n)},c.allocUnsafe=function(e){return f(null,e)},c.allocUnsafeSlow=function(e){return f(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=c.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(!c.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},c.byteLength=m,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?$(this,0,e):function(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return E(this,t,n);case"utf8":case"utf-8":return $(this,t,n);case"ascii":return R(this,t,n);case"latin1":case"binary":return M(this,t,n);case"base64":return C(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,n,r,i){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0),s=Math.min(a,o),u=this.slice(r,i),l=e.slice(t,n),d=0;d<s;++d)if(u[d]!==l[d]){a=u[d],o=l[d];break}return a<o?-1:o<a?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return g(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return g(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":return _(this,e,t,n);case"latin1":case"binary":return k(this,e,t,n);case"base64":return x(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},c.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=c.prototype;else{var i=t-e;n=new c(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+e]}return n},c.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},c.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},c.prototype.readUInt8=function(e,t){return t||D(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||D(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||D(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=t,i=1,a=this[e+--r];r>0&&(i*=256);)a+=this[e+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},c.prototype.readInt8=function(e,t){return t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||D(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){t||D(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||D(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||D(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||D(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||D(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||A(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},c.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||A(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},c.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||A(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||A(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):O(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||A(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):O(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||A(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):L(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||A(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);A(this,e,t,n,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);A(this,e,t,n,i-1,-i)}var a=n-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||A(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||A(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):O(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||A(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):O(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||A(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):L(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||A(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,n){return j(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return j(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return N(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return N(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,a=r-n;if(this===e&&n<t&&t<r)for(i=a-1;i>=0;--i)e[i+t]=this[i+n];else if(a<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},c.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var o=c.isBuffer(e)?e:V(new c(e,r).toString()),s=o.length;for(a=0;a<n-t;++a)this[a+t]=o[a%s]}return this};var B=/[^+\/0-9A-Za-z-_]/g;function U(e){return e<16?"0"+e.toString(16):e.toString(16)}function V(e,t){var n;t=t||1/0;for(var r=e.length,i=null,a=[],o=0;o<r;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function q(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(B,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function H(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(62))},function(e,t,n){var r=n(68),i=n(22);e.exports=function(e){var t=e.xdomain,n=e.xscheme,a=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||r))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!n&&a)return new XDomainRequest}catch(e){}if(!t)try{return new(i[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}},function(e,t){e.exports="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},function(e,t,n){var r=n(9),i=n(24);function a(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.isReactNative=e.isReactNative,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}e.exports=a,i(a.prototype),a.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},a.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},a.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},a.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},a.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},a.prototype.onData=function(e){var t=r.decodePacket(e,this.socket.binaryType);this.onPacket(t)},a.prototype.onPacket=function(e){this.emit("packet",e)},a.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(e,t,n){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=new RegExp("^[LS]([1-9]\\d{0,1})T([1-9]\\d{0,1})");t.parse=function(e){var t=r.exec(e||"");return t?{spatialLayers:Number(t[1]),temporalLayers:Number(t[2])}:{spatialLayers:1,temporalLayers:1}}},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=c.default||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?(0,$.default)(t):(n.prototype=t.prototype,new n)}),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=h.default))((function(i,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof P.default&&(a[s.default]=function(){return this}),a;function c(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Session=t.MeetingMode=void 0;var l,d=u(n(12)),f=n(8),p=n(53),m=n(40).request,v=n(40).response,g=new f.Logger("Session");!function(e){e[e.Free=1]="Free",e[e.Host=2]="Host"}(l=t.MeetingMode||(t.MeetingMode={}));var y=function(e){function t(){var t=e.call(this)||this;return t.socketConnected=!1,t}return i(t,e),t.prototype.init=function(e,t,n){return a(this,void 0,void 0,(function(){var r,i;return o(this,(function(a){switch(a.label){case 0:return this.socketConnected?(g.error("session has inited"),[2,{ret:-3}]):/*!this.validateIP(gw) ||*/t<0||t>65535||""===n?(g.error("invalidate input parameter, gw:"+e+",gwListenPort:"+t+",path:"+n),[2,{ret:-1}]):(r="https://"+e+":"+t,g.info("init session and connect gw server:"+r),[4,this.connect(r,n)]);case 1:return 0===(i=a.sent()).ret?(g.info("init session success"),this.startListener(),this.socketConnected=!0,[2,{ret:0}]):(g.info("init session fail,code:"+i.ret),[2,{ret:-1}])}}))}))},t.prototype.destroy=function(){this.socketConnected&&(this.disconnect(),this.stopListener(),this.socketConnected=!1)},t.prototype.connect=function(e,t){return a(this,void 0,void 0,(function(){var n,r=this;return o(this,(function(i){return n={path:"/"+t,reconnectionAttempts:5,transports:["polling","websocket"],query:{uuid:this.uuidFast()},forceBase64:!0,timestampRequests:!0},this.socket=p(e,n),this.socket.request=m(this.socket),this.socket.response=v(this.socket),[2,new h.default((function(e,t){r.socket.on("connect",(function(){r.socketConnected||(g.info("connect gw server success"),e({ret:0}))})),r.socket.on("reconnect_failed",(function(){r.socketConnected?(g.error("disconnect from gw server"),r.disconnect(),r.stopListener(),r.socketConnected=!1,r.emit("disconnect_notify")):(g.error("connect from gw server fail"),e({ret:-1}))})),r.socket.on("reconnect_attempt",(function(e){g.warn("reconnect gw server, count:"+e)})),r.socket.on("disconnect",(function(e){g.warn("disconnect from gw server, error:"+e)})),r.socket.on("error",(function(e){g.error("socket error:",e)})),r.socket.on("ping",(function(){g.error("socket ping")})),r.socket.on("pong",(function(e){g.error("socket pang, latency:"+e+" ms")}))}))]}))}))},t.prototype.disconnect=function(){return a(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,this.socket.close()];case 1:return e.sent(),[2]}}))}))},t.prototype.join_meeting=function(e,t,n,r,i){return a(this,void 0,void 0,(function(){return o(this,(function(a){switch(a.label){case 0:return this.socketConnected?[4,this.socket.request("join_meeting",{userId:e,token:t,meetingId:n,isSpeak:r,nickName:i})]:[2,{ret:-3}];case 1:return[2,a.sent()]}}))}))},t.prototype.exit_meeting=function(){return a(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,this.socket.request("exit_meeting")];case 1:return[2,e.sent()]}}))}))},t.prototype.ask_for_speak=function(){return a(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,this.socket.request("ask_for_speak")];case 1:return[2,e.sent()]}}))}))},t.prototype.raise_hand_for_speak=function(){return a(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,this.socket.request("raise_hand_for_speak")];case 1:return[2,e.sent()]}}))}))},t.prototype.ask_for_stop_speak=function(){return a(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,this.socket.request("ask_for_stop_speak")];case 1:return[2,e.sent()]}}))}))},t.prototype.produce_connect=function(e){return a(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this.socket.request("produce_connect",{dtlsParameters:e})];case 1:return[2,t.sent()]}}))}))},t.prototype.produce=function(e,t,n){return a(this,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return[4,this.socket.request("produce",{kind:e,rtpParameters:t,params:n})];case 1:return[2,r.sent()]}}))}))},t.prototype.close_produce=function(e){return a(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this.socket.request("close_produce",{kind:e})];case 1:return[2,t.sent()]}}))}))},t.prototype.cosume_connect=function(e){return a(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this.socket.request("cosume_connect",{dtlsParameters:e})];case 1:return[2,t.sent()]}}))}))},t.prototype.consume=function(e,t,n){return a(this,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return[4,this.socket.request("consume",{userId:e,kind:t,rtpCapabilities:n})];case 1:return[2,r.sent()]}}))}))},t.prototype.close_consume=function(e,t){return a(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return[4,this.socket.request("close_consume",{userId:e,kind:t})];case 1:return[2,n.sent()]}}))}))},t.prototype.consume_resume=function(e,t){return a(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return[4,this.socket.request("consume_resume",{userId:e,kind:t})];case 1:return[2,n.sent()]}}))}))},t.prototype.get_all_user=function(){return a(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,this.socket.request("get_all_user")];case 1:return[2,e.sent()]}}))}))},t.prototype.send_ui_message=function(e,t,n){return a(this,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return[4,this.socket.request("send_ui_message",{userId:e,msgId:t,msgData:n})];case 1:return[2,r.sent()]}}))}))},t.prototype.set_speaker=function(e,t){return a(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return[4,this.socket.request("set_speaker",{userId:e,cancelUserId:t})];case 1:return[2,n.sent()]}}))}))},t.prototype.kick_out_user=function(e){return a(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this.socket.request("kick_out_user",{userId:e})];case 1:return[2,t.sent()]}}))}))},t.prototype.set_meeting_mode=function(e){return a(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this.socket.request("set_meeting_mode",{mode:e})];case 1:return[2,t.sent()]}}))}))},t.prototype.restartIce=function(e){return a(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this.socket.request("restart_ice",{transportType:e})];case 1:return[2,t.sent()]}}))}))},t.prototype.uuidFast=function(){for(var e,t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=new Array(36),r=0,i=0;i<36;i++)8==i||13==i||18==i||23==i?n[i]="-":14==i?n[i]="4":(r<=2&&(r=33554432+16777216*Math.random()|0),e=15&r,r>>=4,n[i]=t[19==i?3&e|8:e]);return n.join("")},t.prototype.startListener=function(){var e=this;this.socket.response("start_speak_notify",(function(){e.emit("start_speak_notify")})),this.socket.response("stop_speak_notify",(function(){e.emit("stop_speak_notify")})),this.socket.response("kick_out_notify",(function(){e.emit("kick_out_notify")})),this.socket.response("user_join_notify",(function(t){t.userId&&t.nickName||g.error("user_join_notify params error",t),e.emit("user_join_notify",t)})),this.socket.response("user_leave_notify",(function(t){t.userId||g.error("user_leave_notify params error",t),e.emit("user_leave_notify",t)})),this.socket.response("meeting_mode_change_notify",(function(t){t.mode||g.error("user_leave_notify params error",t);var n=l.Free;1==t.mode?n=l.Free:2==t.mode&&(n=l.Host),e.emit("meeting_mode_change_notify",n)})),this.socket.response("host_control_notify",(function(t){t.op||g.error("host_control_notify params error",t),e.emit("host_control_notify",t)})),this.socket.response("raise_hand_notify",(function(t){t.userId&&t.userName||g.error("raise_hand_notify params error",t),e.emit("raise_hand_notify",t)})),this.socket.response("host_transfer_notify",(function(t){t.hostId&&t.hostName||g.error("host_transfer_notify params error",t),e.emit("host_transfer_notify",t)})),this.socket.response("recv_ui_msg_notify",(function(t){t.userId&&t.msgid&&t.msg&&t.msgLen||g.error("recv_ui_msg_notify params error",t),e.emit("recv_ui_msg_notify",t)})),this.socket.response("user_start_speak_notify",(function(t){t.userId&&t.nickName||g.error("user_start_speak_notify params error",t),e.emit("user_start_speak_notify",t)})),this.socket.response("user_stop_speak_notify",(function(t){t.userId||g.error("user_stop_speak_notify params error",t),e.emit("user_stop_speak_notify",t)})),this.socket.response("meeting_end_notify",(function(){e.emit("meeting_end_notify")})),this.socket.response("meeting_exception_notify",(function(){e.emit("meeting_exception_notify")})),this.socket.response("user_publish_video_notify",(function(t){t.userId||g.error("user_publish_video_notify params error",t),e.emit("user_publish_video_notify",t)})),this.socket.response("user_unpublish_video_notify",(function(t){t.userId||g.error("user_unpublish_video_notify params error",t),e.emit("user_unpublish_video_notify",t)})),this.socket.response("user_publish_audio_notify",(function(t){t.userId||g.error("user_publish_audio_notify params error",t),e.emit("user_publish_audio_notify",t)})),this.socket.response("user_unpublish_audio_notify",(function(t){t.userId||g.error("user_unpublish_audio_notify params error",t),e.emit("user_unpublish_audio_notify",t)})),this.socket.response("user_publish_share_notify",(function(t){t.userId||g.error("user_publish_share_notify params error",t),e.emit("user_publish_share_notify",t)})),this.socket.response("user_unpublish_share_notify",(function(t){t.userId||g.error("user_unpublish_share_notify params error",t),e.emit("user_unpublish_share_notify",t)})),this.socket.response("meeting_restore_notify",(function(t){e.emit("meeting_restore_notify",t)}))},t.prototype.stopListener=function(){this.socket.removeAllListeners()},t.prototype.validateIP=function(e){return/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/.test(e)},t}(d.default);t.Session=y},function(e,t){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var t=e,i=e.indexOf("["),a=e.indexOf("]");-1!=i&&-1!=a&&(e=e.substring(0,i)+e.substring(i,a).replace(/:/g,";")+e.substring(a,e.length));for(var o=n.exec(e||""),s={},c=14;c--;)s[r[c]]=o[c]||"";return-1!=i&&-1!=a&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){(function(t){e.exports=function(e){return n&&t.isBuffer(e)||r&&(e instanceof ArrayBuffer||function(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer}(e))};var n="function"==typeof t&&"function"==typeof t.isBuffer,r="function"==typeof ArrayBuffer}).call(this,n(20).Buffer)},function(e,t,n){var r=n(66),i=n(36),a=n(37),o=n(19),s=n(38),c=n(39),u=n(13)("socket.io-client:manager"),l=n(35),d=n(83),f=Object.prototype.hasOwnProperty;function p(e,t){if(!(this instanceof p))return new p(e,t);e&&"object"==(void 0===e?"undefined":(0,R.default)(e))&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new d({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=t.parser||o;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}e.exports=p,p.prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)f.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},p.prototype.updateSocketIds=function(){for(var e in this.nsps)f.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},p.prototype.generateId=function(e){return("/"===e?"":e+"#")+this.engine.id},a(p.prototype),p.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},p.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},p.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},p.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},p.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},p.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},p.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},p.prototype.open=p.prototype.connect=function(e,t){if(u("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;u("opening %s",this.uri),this.engine=r(this.uri,this.opts);var n=this.engine,i=this;this.readyState="opening",this.skipReconnect=!1;var a=s(n,"open",(function(){i.onopen(),e&&e()})),o=s(n,"error",(function(t){if(u("connect_error"),i.cleanup(),i.readyState="closed",i.emitAll("connect_error",t),e){var n=new Error("Connection error");n.data=t,e(n)}else i.maybeReconnectOnOpen()}));if(!1!==this._timeout){var c=this._timeout;u("connect attempt will timeout after %d",c);var l=setTimeout((function(){u("connect attempt timed out after %d",c),a.destroy(),n.close(),n.emit("error","timeout"),i.emitAll("connect_timeout",c)}),c);this.subs.push({destroy:function(){clearTimeout(l)}})}return this.subs.push(a),this.subs.push(o),this},p.prototype.onopen=function(){u("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(s(e,"data",c(this,"ondata"))),this.subs.push(s(e,"ping",c(this,"onping"))),this.subs.push(s(e,"pong",c(this,"onpong"))),this.subs.push(s(e,"error",c(this,"onerror"))),this.subs.push(s(e,"close",c(this,"onclose"))),this.subs.push(s(this.decoder,"decoded",c(this,"ondecoded")))},p.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},p.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},p.prototype.ondata=function(e){this.decoder.add(e)},p.prototype.ondecoded=function(e){this.emit("packet",e)},p.prototype.onerror=function(e){u("error",e),this.emitAll("error",e)},p.prototype.socket=function(e,t){var n=this.nsps[e];if(!n){n=new i(this,e,t),this.nsps[e]=n;var r=this;n.on("connecting",a),n.on("connect",(function(){n.id=r.generateId(e)})),this.autoConnect&&a()}function a(){~l(r.connecting,n)||r.connecting.push(n)}return n},p.prototype.destroy=function(e){var t=l(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},p.prototype.packet=function(e){u("writing packet %j",e);var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,(function(n){for(var r=0;r<n.length;r++)t.engine.write(n[r],e.options);t.encoding=!1,t.processPacketQueue()})))},p.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},p.prototype.cleanup=function(){u("cleanup");for(var e=this.subs.length,t=0;t<e;t++)this.subs.shift().destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},p.prototype.close=p.prototype.disconnect=function(){u("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},p.prototype.onclose=function(e){u("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},p.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)u("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();u("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout((function(){e.skipReconnect||(u("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open((function(t){t?(u("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(u("reconnect success"),e.onreconnect())})))}),t);this.subs.push({destroy:function(){clearTimeout(n)}})}},p.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},function(e,t,n){var r=n(21),i=n(69),a=n(79),o=n(80);t.polling=function(e){var t=!1,n=!1,o=!1!==e.jsonp;if("undefined"!=typeof location){var s="https:"===location.protocol,c=location.port;c||(c=s?443:80),t=e.hostname!==location.hostname||c!==e.port,n=e.secure!==s}if(e.xdomain=t,e.xscheme=n,"open"in new r(e)&&!e.forceJSONP)return new i(e);if(!o)throw new Error("JSONP disabled");return new a(e)},t.websocket=o},function(e,t,n){var r=n(23),i=n(14),a=n(9),o=n(15),s=n(34),c=n(16)("engine.io-client:polling");e.exports=l;var u=null!=new(n(21))({xdomain:!1}).responseType;function l(e){var t=e&&e.forceBase64;u&&!t||(this.supportsBinary=!1),r.call(this,e)}o(l,r),l.prototype.name="polling",l.prototype.doOpen=function(){this.poll()},l.prototype.pause=function(e){var t=this;function n(){c("paused"),t.readyState="paused",e()}if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(c("we are currently polling - waiting to pause"),r++,this.once("pollComplete",(function(){c("pre-pause polling complete"),--r||n()}))),this.writable||(c("we are currently writing - waiting to pause"),r++,this.once("drain",(function(){c("pre-pause writing complete"),--r||n()})))}else n()},l.prototype.poll=function(){c("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},l.prototype.onData=function(e){var t=this;c("polling got data %s",e),a.decodePayload(e,this.socket.binaryType,(function(e,n,r){if("opening"===t.readyState&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():c('ignoring poll - transport state "%s"',this.readyState))},l.prototype.doClose=function(){var e=this;function t(){c("writing close packet"),e.write([{type:"close"}])}"open"===this.readyState?(c("transport open - closing"),t()):(c("transport not open - deferring close"),this.once("open",t))},l.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")};a.encodePayload(e,this.supportsBinary,(function(e){t.doWrite(e,n)}))},l.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(e[this.timestampParam]=s()),this.supportsBinary||e.sid||(e.b64=1),e=i.encode(e),this.port&&("https"===t&&443!==Number(this.port)||"http"===t&&80!==Number(this.port))&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e}},function(e,t,n){(function(t){var r=n(71),i=Object.prototype.toString,a="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===i.call(Blob),o="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===i.call(File);e.exports=function e(n){if(!n||"object"!=(void 0===n?"undefined":(0,R.default)(n)))return!1;if(r(n)){for(var i=0,s=n.length;i<s;i++)if(e(n[i]))return!0;return!1}if("function"==typeof t&&t.isBuffer&&t.isBuffer(n)||"function"==typeof ArrayBuffer&&n instanceof ArrayBuffer||a&&n instanceof Blob||o&&n instanceof File)return!0;if(n.toJSON&&"function"==typeof n.toJSON&&1===arguments.length)return e(n.toJSON(),!0);for(var c in n)if(Object.prototype.hasOwnProperty.call(n,c)&&e(n[c]))return!0;return!1}}).call(this,n(20).Buffer)},function(e,t,n){var r,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),a={},o=0,s=0;function c(e){var t="";do{t=i[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function u(){var e=c(+new Date);return e!==r?(o=0,r=e):e+"."+c(o++)}for(;s<64;s++)a[i[s]]=s;u.encode=c,u.decode=function(e){var t=0;for(s=0;s<e.length;s++)t=64*t+a[e.charAt(s)];return t},e.exports=u},function(e,t){var n=[].indexOf;e.exports=function(e,t){if(n)return e.indexOf(t);for(var r=0;r<e.length;++r)if(e[r]===t)return r;return-1}},function(e,t,n){var r=n(19),i=n(37),a=n(82),o=n(38),s=n(39),c=n(13)("socket.io-client:socket"),u=n(14),l=n(33);e.exports=p;var d={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},f=i.prototype.emit;function p(e,t,n){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}i(p.prototype),p.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[o(e,"open",s(this,"onopen")),o(e,"packet",s(this,"onpacket")),o(e,"close",s(this,"onclose"))]}},p.prototype.open=p.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},p.prototype.send=function(){var e=a(arguments);return e.unshift("message"),this.emit.apply(this,e),this},p.prototype.emit=function(e){if(d.hasOwnProperty(e))return f.apply(this,arguments),this;var t=a(arguments),n={type:(void 0!==this.flags.binary?this.flags.binary:l(t))?r.BINARY_EVENT:r.EVENT,data:t,options:{}};return n.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(c("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),this.flags={},this},p.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},p.prototype.onopen=function(){if(c("transport is open - connecting"),"/"!==this.nsp)if(this.query){var e="object"==(0,R.default)(this.query)?u.encode(this.query):this.query;c("sending connect packet with query %s",e),this.packet({type:r.CONNECT,query:e})}else this.packet({type:r.CONNECT})},p.prototype.onclose=function(e){c("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},p.prototype.onpacket=function(e){var t=e.nsp===this.nsp,n=e.type===r.ERROR&&"/"===e.nsp;if(t||n)switch(e.type){case r.CONNECT:this.onconnect();break;case r.EVENT:case r.BINARY_EVENT:this.onevent(e);break;case r.ACK:case r.BINARY_ACK:this.onack(e);break;case r.DISCONNECT:this.ondisconnect();break;case r.ERROR:this.emit("error",e.data)}},p.prototype.onevent=function(e){var t=e.data||[];c("emitting event %j",t),null!=e.id&&(c("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?f.apply(this,t):this.receiveBuffer.push(t)},p.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var i=a(arguments);c("sending ack %j",i),t.packet({type:l(i)?r.BINARY_ACK:r.ACK,id:e,data:i})}}},p.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(c("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):c("bad ack %s",e.id)},p.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},p.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)f.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},p.prototype.ondisconnect=function(){c("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},p.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},p.prototype.close=p.prototype.disconnect=function(){return this.connected&&(c("performing disconnect (%s)",this.nsp),this.packet({type:r.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},p.prototype.compress=function(e){return this.flags.compress=e,this},p.prototype.binary=function(e){return this.flags.binary=e,this}},function(e,t,n){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t);return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t){e.exports=function(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}},function(e,t){var n=[].slice;e.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var r=n.call(arguments,2);return function(){return t.apply(e,r.concat(n.call(arguments)))}}},function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=h.default))((function(i,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof P.default&&(a[s.default]=function(){return this}),a;function c(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=new(n(8).Logger)("socket.io-promise");t.request=function(e){return function(t,n){return void 0===n&&(n={}),r(this,void 0,void 0,(function(){var r,o,s;return i(this,(function(i){switch(i.label){case 0:if(""===t)return a.error("cmd request invalidate parameter, cmd:"+t),[2,{ret:-1}];r=(0,x.default)(n),a.info("cmd request, cmd:"+t+",cmd body:"+r),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,new h.default((function(n){e.emit(t,r,n)}))];case 2:return""===(o=i.sent())?(a.error("cmdResponse invalidate, is empty"),[2,{ret:-1}]):(a.info("cmd:"+t+" Response:"+o),[2,JSON.parse(o)]);case 3:return s=i.sent(),a.error("cmd request exception, cmd:"+t+",error:"+s),[2,{ret:-2}];case 4:return[2]}}))}))}},t.response=function(e){return function(t,n){e.on(t,(function(e){a.info("notify("+t+")from gw server,notifyBody:"+e),e?n(JSON.parse(e)):n()}))}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(86),i=n(0),a=n(3),o=n(2),s=n(42),c=n(96),u=n(100),l=n(101),d=n(102),p=n(103),h=n(104),v=n(105),g=n(106),y=n(108),b=new i.Logger("Device");function w(){if("object"==("undefined"==typeof navigator?"undefined":(0,R.default)(navigator))&&"ReactNative"===navigator.product)return"undefined"==typeof RTCPeerConnection?void b.warn("this._detectDevice() | unsupported ReactNative without RTCPeerConnection"):(b.debug("this._detectDevice() | ReactNative handler chosen"),"ReactNative");if("object"!=("undefined"==typeof navigator?"undefined":(0,R.default)(navigator))||"string"!=typeof navigator.userAgent)b.warn("this._detectDevice() | unknown device");else{var e=navigator.userAgent,t=r.getParser(e),n=t.getEngine();if(t.satisfies({chrome:">=74",chromium:">=74"}))return"Chrome74";if(t.satisfies({chrome:">=70",chromium:">=70"}))return"Chrome70";if(t.satisfies({chrome:">=67",chromium:">=67"}))return"Chrome67";if(t.satisfies({chrome:">=55",chromium:">=55"}))return"Chrome55";if(t.satisfies({firefox:">=60"}))return"Firefox60";if(t.satisfies({safari:">=12.0"})&&"undefined"!=typeof RTCRtpTransceiver&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(t.satisfies({safari:">=11"}))return"Safari11";if(t.satisfies({"microsoft edge":">=11"})&&t.satisfies({"microsoft edge":"<=18"}))return"Edge11";if(n.name&&"blink"===n.name.toLowerCase()){var i=e.match(/(?:(?:Chrome|Chromium))[ /](\w+)/i);if(i){var a=Number(i[1]);return a>=74?"Chrome74":a>=70?"Chrome70":a>=67?"Chrome67":"Chrome55"}return"Chrome74"}b.warn("this._detectDevice() | browser not supported [name:%s, version:%s]",t.getBrowserName(),t.getBrowserVersion())}}t.detectDevice=w,t.Device=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.handlerName,r=t.handlerFactory,i=t.Handler;if((0,S.default)(this,e),this._loaded=!1,b.debug("constructor()"),i){if(b.warn("constructor() | Handler option is DEPRECATED, use handlerName or handlerFactory instead"),"string"!=typeof i)throw new TypeError("non string Handler option no longer supported, use handlerFactory instead");n=i}if(n&&r)throw new TypeError("just one of handlerName or handlerInterface can be given");if(r)this._handlerFactory=r;else{if(n)b.debug("constructor() | handler given: %s",n);else{if(!(n=w()))throw new a.UnsupportedError("device not supported");b.debug("constructor() | detected handler: %s",n)}switch(n){case"Chrome74":this._handlerFactory=c.Chrome74.createFactory();break;case"Chrome70":this._handlerFactory=u.Chrome70.createFactory();break;case"Chrome67":this._handlerFactory=l.Chrome67.createFactory();break;case"Chrome55":this._handlerFactory=d.Chrome55.createFactory();break;case"Firefox60":this._handlerFactory=p.Firefox60.createFactory();break;case"Safari12":this._handlerFactory=h.Safari12.createFactory();break;case"Safari11":this._handlerFactory=v.Safari11.createFactory();break;case"Edge11":this._handlerFactory=g.Edge11.createFactory();break;case"ReactNative":this._handlerFactory=y.ReactNative.createFactory();break;default:throw new TypeError('unknown handlerName "'+n+'"')}}var o=this._handlerFactory();this._handlerName=o.name,o.close(),this._extendedRtpCapabilities=void 0,this._recvRtpCapabilities=void 0,this._canProduceByKind={audio:!1,video:!1},this._sctpCapabilities=void 0}return(0,C.default)(e,[{key:"load",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,r,i=t.routerRtpCapabilities;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=void 0,b.debug("load() [routerRtpCapabilities:%o]",i),e.prev=2,!this._loaded){e.next=5;break}throw new a.InvalidStateError("already loaded");case 5:return o.validateRtpCapabilities(i),n=this._handlerFactory(),e.next=8,n.getNativeRtpCapabilities();case 8:return r=e.sent,b.debug("load() | got native RTP capabilities:%o",r),o.validateRtpCapabilities(r),this._extendedRtpCapabilities=o.getExtendedRtpCapabilities(r,i),b.debug("load() | got extended RTP capabilities:%o",this._extendedRtpCapabilities),this._canProduceByKind.audio=o.canSend("audio",this._extendedRtpCapabilities),this._canProduceByKind.video=o.canSend("video",this._extendedRtpCapabilities),this._recvRtpCapabilities=o.getRecvRtpCapabilities(this._extendedRtpCapabilities),o.validateRtpCapabilities(this._recvRtpCapabilities),b.debug("load() | got receiving RTP capabilities:%o",this._recvRtpCapabilities),e.next=20,n.getNativeSctpCapabilities();case 20:this._sctpCapabilities=e.sent,b.debug("load() | got native SCTP capabilities:%o",this._sctpCapabilities),o.validateSctpCapabilities(this._sctpCapabilities),b.debug("load() succeeded"),this._loaded=!0,n.close(),e.next=31;break;case 28:throw e.prev=28,e.t0=e.catch(2),n&&n.close(),e.t0;case 31:case"end":return e.stop()}}),e,this,[[2,28]])})));return function(t){return e.apply(this,arguments)}}()},{key:"canProduce",value:function(e){if(!this._loaded)throw new a.InvalidStateError("not loaded");if("audio"!==e&&"video"!==e)throw new TypeError('invalid kind "'+e+'"');return this._canProduceByKind[e]}},{key:"createSendTransport",value:function(e){var t=e.id,n=e.iceParameters,r=e.iceCandidates,i=e.dtlsParameters,a=e.sctpParameters,o=e.iceServers,s=e.iceTransportPolicy,c=e.additionalSettings,u=e.proprietaryConstraints,l=e.appData,d=void 0===l?{}:l;return b.debug("createSendTransport()"),this._createTransport({direction:"send",id:t,iceParameters:n,iceCandidates:r,dtlsParameters:i,sctpParameters:a,iceServers:o,iceTransportPolicy:s,additionalSettings:c,proprietaryConstraints:u,appData:d})}},{key:"createRecvTransport",value:function(e){var t=e.id,n=e.iceParameters,r=e.iceCandidates,i=e.dtlsParameters,a=e.sctpParameters,o=e.iceServers,s=e.iceTransportPolicy,c=e.additionalSettings,u=e.proprietaryConstraints,l=e.appData,d=void 0===l?{}:l;return b.debug("createRecvTransport()"),this._createTransport({direction:"recv",id:t,iceParameters:n,iceCandidates:r,dtlsParameters:i,sctpParameters:a,iceServers:o,iceTransportPolicy:s,additionalSettings:c,proprietaryConstraints:u,appData:d})}},{key:"_createTransport",value:function(e){var t=e.direction,n=e.id,r=e.iceParameters,i=e.iceCandidates,o=e.dtlsParameters,c=e.sctpParameters,u=e.iceServers,l=e.iceTransportPolicy,d=e.additionalSettings,f=e.proprietaryConstraints,p=e.appData,h=void 0===p?{}:p;if(!this._loaded)throw new a.InvalidStateError("not loaded");if("string"!=typeof n)throw new TypeError("missing id");if("object"!=(void 0===r?"undefined":(0,R.default)(r)))throw new TypeError("missing iceParameters");if(!Array.isArray(i))throw new TypeError("missing iceCandidates");if("object"!=(void 0===o?"undefined":(0,R.default)(o)))throw new TypeError("missing dtlsParameters");if(c&&"object"!=(void 0===c?"undefined":(0,R.default)(c)))throw new TypeError("wrong sctpParameters");if(h&&"object"!=(void 0===h?"undefined":(0,R.default)(h)))throw new TypeError("if given, appData must be an object");return new s.Transport({direction:t,id:n,iceParameters:r,iceCandidates:i,dtlsParameters:o,sctpParameters:c,iceServers:u,iceTransportPolicy:l,additionalSettings:d,proprietaryConstraints:f,appData:h,handlerFactory:this._handlerFactory,extendedRtpCapabilities:this._extendedRtpCapabilities,canProduceByKind:this._canProduceByKind})}},{key:"handlerName",get:function(){return this._handlerName}},{key:"loaded",get:function(){return this._loaded}},{key:"rtpCapabilities",get:function(){if(!this._loaded)throw new a.InvalidStateError("not loaded");return this._recvRtpCapabilities}},{key:"sctpCapabilities",get:function(){if(!this._loaded)throw new a.InvalidStateError("not loaded");return this._sctpCapabilities}}]),e}()},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(94),i=n(0),a=n(10),o=n(3),s=n(1),c=n(2),u=n(43),l=n(44),d=n(45),p=n(46),h=new i.Logger("Transport"),v=function(e){function t(e){var n,i=e.direction,a=e.id,c=e.iceParameters,u=e.iceCandidates,l=e.dtlsParameters,d=e.sctpParameters,f=e.iceServers,p=e.iceTransportPolicy,m=e.additionalSettings,v=e.proprietaryConstraints,w=e.appData,_=e.handlerFactory,k=e.extendedRtpCapabilities,x=e.canProduceByKind;return(0,S.default)(this,t),(n=(0,b.default)(this,(t.__proto__||(0,y.default)(t)).call(this)))._closed=!1,n._connectionState="new",n._producers=new g.default,n._consumers=new g.default,n._dataProducers=new g.default,n._dataConsumers=new g.default,n._probatorConsumerCreated=!1,n._awaitQueue=new r.AwaitQueue({ClosedErrorClass:o.InvalidStateError}),h.debug("constructor() [id:%s, direction:%s]",a,i),n._id=a,n._direction=i,n._extendedRtpCapabilities=k,n._canProduceByKind=x,n._maxSctpMessageSize=d?d.maxMessageSize:null,delete(m=s.clone(m)).iceServers,delete m.iceTransportPolicy,delete m.bundlePolicy,delete m.rtcpMuxPolicy,delete m.sdpSemantics,n._handler=_(),n._handler.run({direction:i,iceParameters:c,iceCandidates:u,dtlsParameters:l,sctpParameters:d,iceServers:f,iceTransportPolicy:p,additionalSettings:m,proprietaryConstraints:v,extendedRtpCapabilities:k}),n._appData=w,n._handleHandler(),n}return(0,w.default)(t,e),(0,C.default)(t,[{key:"close",value:function(){if(!this._closed){h.debug("close()"),this._closed=!0,this._awaitQueue.close(),this._handler.close();var e=!0,t=!1,n=void 0;try{for(var r,i=(0,k.default)(this._producers.values());!(e=(r=i.next()).done);e=!0)r.value.transportClosed()}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}this._producers.clear();var a=!0,o=!1,s=void 0;try{for(var c,u=(0,k.default)(this._consumers.values());!(a=(c=u.next()).done);a=!0)c.value.transportClosed()}catch(e){o=!0,s=e}finally{try{!a&&u.return&&u.return()}finally{if(o)throw s}}this._consumers.clear();var l=!0,d=!1,f=void 0;try{for(var p,m=(0,k.default)(this._dataProducers.values());!(l=(p=m.next()).done);l=!0)p.value.transportClosed()}catch(e){d=!0,f=e}finally{try{!l&&m.return&&m.return()}finally{if(d)throw f}}this._dataProducers.clear();var v=!0,g=!1,y=void 0;try{for(var b,w=(0,k.default)(this._dataConsumers.values());!(v=(b=w.next()).done);v=!0)b.value.transportClosed()}catch(e){g=!0,y=e}finally{try{!v&&w.return&&w.return()}finally{if(g)throw y}}this._dataConsumers.clear()}}},{key:"getStats",value:function(){var e=(0,m.default)(f.default.mark((function e(){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._closed){e.next=2;break}throw new o.InvalidStateError("closed");case 2:return e.abrupt("return",this._handler.getTransportStats());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"restartIce",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n=this,r=t.iceParameters;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h.debug("restartIce()"),!this._closed){e.next=2;break}throw new o.InvalidStateError("closed");case 2:if(r){e.next=4;break}throw new TypeError("missing iceParameters");case 4:return e.abrupt("return",this._awaitQueue.push((0,m.default)(f.default.mark((function e(){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n._handler.restartIce(r));case 1:case"end":return e.stop()}}),e,n)})))));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateIceServers",value:function(){var e=(0,m.default)(f.default.mark((function e(){var t=this,n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).iceServers;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h.debug("updateIceServers()"),!this._closed){e.next=2;break}throw new o.InvalidStateError("closed");case 2:if(Array.isArray(n)){e.next=4;break}throw new TypeError("missing iceServers");case 4:return e.abrupt("return",this._awaitQueue.push((0,m.default)(f.default.mark((function e(){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t._handler.updateIceServers(n));case 1:case"end":return e.stop()}}),e,t)})))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"produce",value:function(){var e=(0,m.default)(f.default.mark((function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.track,i=n.encodings,a=n.codecOptions,s=n.codec,l=n.stopTracks,d=void 0===l||l,p=n.disableTrackOnPause,v=void 0===p||p,g=n.zeroRtpOnPause,y=void 0!==g&&g,b=n.appData,w=void 0===b?{}:b;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h.debug("produce() [track:%o]",r),r){e.next=2;break}throw new TypeError("missing track");case 2:if("send"===this._direction){e.next=4;break}throw new o.UnsupportedError("not a sending Transport");case 4:if(this._canProduceByKind[r.kind]){e.next=6;break}throw new o.UnsupportedError("cannot produce "+r.kind);case 6:if("ended"!==r.readyState){e.next=8;break}throw new o.InvalidStateError("track ended");case 8:if(0!==this.listenerCount("connect")||"new"!==this._connectionState){e.next=10;break}throw new TypeError('no "connect" listener set into this transport');case 10:if(0!==this.listenerCount("produce")){e.next=12;break}throw new TypeError('no "produce" listener set into this transport');case 12:if(!w||"object"==(void 0===w?"undefined":(0,R.default)(w))){e.next=14;break}throw new TypeError("if given, appData must be an object");case 14:return e.abrupt("return",this._awaitQueue.push((0,m.default)(f.default.mark((function e(){var n,o,l,p,h,m,g,b;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=void 0,!i||Array.isArray(i)){e.next=3;break}throw TypeError("encodings must be an array");case 3:return i&&0===i.length?n=void 0:i&&(n=i.map((function(e){var t={active:!0};return!1===e.active&&(t.active=!1),"boolean"==typeof e.dtx&&(t.dtx=e.dtx),"string"==typeof e.scalabilityMode&&(t.scalabilityMode=e.scalabilityMode),"number"==typeof e.scaleResolutionDownBy&&(t.scaleResolutionDownBy=e.scaleResolutionDownBy),"number"==typeof e.maxBitrate&&(t.maxBitrate=e.maxBitrate),"number"==typeof e.maxFramerate&&(t.maxFramerate=e.maxFramerate),"boolean"==typeof e.adaptivePtime&&(t.adaptivePtime=e.adaptivePtime),"string"==typeof e.priority&&(t.priority=e.priority),"string"==typeof e.networkPriority&&(t.networkPriority=e.networkPriority),t}))),e.next=6,t._handler.send({track:r,encodings:n,codecOptions:a,codec:s});case 6:return o=e.sent,l=o.localId,p=o.rtpParameters,h=o.rtpSender,e.prev=10,c.validateRtpParameters(p),e.next=14,t.safeEmitAsPromise("produce",{kind:r.kind,rtpParameters:p,appData:w});case 14:return m=e.sent,g=m.id,b=new u.Producer({id:g,localId:l,rtpSender:h,track:r,rtpParameters:p,stopTracks:d,disableTrackOnPause:v,zeroRtpOnPause:y,appData:w}),e.abrupt("return",(t._producers.set(b.id,b),t._handleProducer(b),b));case 20:throw e.prev=20,e.t0=e.catch(10),t._handler.stopSending(l).catch((function(){})),e.t0;case 23:case"end":return e.stop()}}),e,t,[[10,20]])})))).catch((function(e){if(d)try{r.stop()}catch(e){}throw e})));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"consume",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n=this,r=t.id,i=t.producerId,a=t.kind,s=t.rtpParameters,u=t.appData,d=void 0===u?{}:u;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h.debug("consume()"),!this._closed){e.next=2;break}throw new o.InvalidStateError("closed");case 2:if("recv"===this._direction){e.next=4;break}throw new o.UnsupportedError("not a receiving Transport");case 4:if("string"==typeof r){e.next=6;break}throw new TypeError("missing id");case 6:if("string"==typeof i){e.next=8;break}throw new TypeError("missing producerId");case 8:if("audio"===a||"video"===a){e.next=10;break}throw new TypeError("invalid kind '"+a+"'");case 10:if(0!==this.listenerCount("connect")||"new"!==this._connectionState){e.next=12;break}throw new TypeError('no "connect" listener set into this transport');case 12:if(!d||"object"==(void 0===d?"undefined":(0,R.default)(d))){e.next=14;break}throw new TypeError("if given, appData must be an object");case 14:return e.abrupt("return",this._awaitQueue.push((0,m.default)(f.default.mark((function e(){var t,u,p,m,v,g;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.canReceive(s,n._extendedRtpCapabilities)){e.next=2;break}throw new o.UnsupportedError("cannot consume this Producer");case 2:return e.next=4,n._handler.receive({trackId:r,kind:a,rtpParameters:s});case 4:if(t=e.sent,u=t.localId,p=t.rtpReceiver,m=t.track,v=new l.Consumer({id:r,localId:u,producerId:i,rtpReceiver:p,track:m,rtpParameters:s,appData:d}),n._consumers.set(v.id,v),n._handleConsumer(v),n._probatorConsumerCreated||"video"!==a){e.next=21;break}return e.prev=10,g=c.generateProbatorRtpParameters(v.rtpParameters),e.next=14,n._handler.receive({trackId:"probator",kind:"video",rtpParameters:g});case 14:h.debug("consume() | Consumer for RTP probation created"),n._probatorConsumerCreated=!0,e.next=21;break;case 18:e.prev=18,e.t0=e.catch(10),h.error("consume() | failed to create Consumer for RTP probation:%o",e.t0);case 21:return e.abrupt("return",v);case 22:case"end":return e.stop()}}),e,n,[[10,18]])})))));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"produceData",value:function(){var e=(0,m.default)(f.default.mark((function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.ordered,i=void 0===r||r,a=n.maxPacketLifeTime,s=n.maxRetransmits,u=n.priority,l=void 0===u?"low":u,p=n.label,v=void 0===p?"":p,g=n.protocol,y=void 0===g?"":g,b=n.appData,w=void 0===b?{}:b;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h.debug("produceData()"),"send"===this._direction){e.next=2;break}throw new o.UnsupportedError("not a sending Transport");case 2:if(this._maxSctpMessageSize){e.next=4;break}throw new o.UnsupportedError("SCTP not enabled by remote Transport");case 4:if(["very-low","low","medium","high"].includes(l)){e.next=6;break}throw new TypeError("wrong priority");case 6:if(0!==this.listenerCount("connect")||"new"!==this._connectionState){e.next=8;break}throw new TypeError('no "connect" listener set into this transport');case 8:if(0!==this.listenerCount("producedata")){e.next=10;break}throw new TypeError('no "producedata" listener set into this transport');case 10:if(!w||"object"==(void 0===w?"undefined":(0,R.default)(w))){e.next=12;break}throw new TypeError("if given, appData must be an object");case 12:return e.abrupt("return",((a||s)&&(i=!1),this._awaitQueue.push((0,m.default)(f.default.mark((function e(){var n,r,o,u,p,h;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._handler.sendDataChannel({ordered:i,maxPacketLifeTime:a,maxRetransmits:s,priority:l,label:v,protocol:y});case 2:return n=e.sent,r=n.dataChannel,o=n.sctpStreamParameters,c.validateSctpStreamParameters(o),e.next=8,t.safeEmitAsPromise("producedata",{sctpStreamParameters:o,label:v,protocol:y,appData:w});case 8:return u=e.sent,p=u.id,h=new d.DataProducer({id:p,dataChannel:r,sctpStreamParameters:o,appData:w}),e.abrupt("return",(t._dataProducers.set(h.id,h),t._handleDataProducer(h),h));case 12:case"end":return e.stop()}}),e,t)}))))));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"consumeData",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n=this,r=t.id,i=t.dataProducerId,a=t.sctpStreamParameters,s=t.label,u=void 0===s?"":s,l=t.protocol,d=void 0===l?"":l,v=t.appData,g=void 0===v?{}:v;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h.debug("consumeData()"),!this._closed){e.next=2;break}throw new o.InvalidStateError("closed");case 2:if("recv"===this._direction){e.next=4;break}throw new o.UnsupportedError("not a receiving Transport");case 4:if(this._maxSctpMessageSize){e.next=6;break}throw new o.UnsupportedError("SCTP not enabled by remote Transport");case 6:if("string"==typeof r){e.next=8;break}throw new TypeError("missing id");case 8:if("string"==typeof i){e.next=10;break}throw new TypeError("missing dataProducerId");case 10:if(0!==this.listenerCount("connect")||"new"!==this._connectionState){e.next=12;break}throw new TypeError('no "connect" listener set into this transport');case 12:if(!g||"object"==(void 0===g?"undefined":(0,R.default)(g))){e.next=14;break}throw new TypeError("if given, appData must be an object");case 14:return e.abrupt("return",(c.validateSctpStreamParameters(a),this._awaitQueue.push((0,m.default)(f.default.mark((function e(){var t,o,s;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._handler.receiveDataChannel({sctpStreamParameters:a,label:u,protocol:d});case 2:return t=e.sent,o=t.dataChannel,s=new p.DataConsumer({id:r,dataProducerId:i,dataChannel:o,sctpStreamParameters:a,appData:g}),e.abrupt("return",(n._dataConsumers.set(s.id,s),n._handleDataConsumer(s),s));case 6:case"end":return e.stop()}}),e,n)}))))));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_handleHandler",value:function(){var e=this,t=this._handler;t.on("@connect",(function(t,n,r){var i=t.dtlsParameters;e._closed?r(new o.InvalidStateError("closed")):e.safeEmit("connect",{dtlsParameters:i},n,r)})),t.on("@connectionstatechange",(function(t){t!==e._connectionState&&(h.debug("connection state changed to %s",t),e._connectionState=t,e._closed||e.safeEmit("connectionstatechange",t))}))}},{key:"_handleProducer",value:function(e){var t=this;e.on("@close",(function(){t._producers.delete(e.id),t._closed||t._awaitQueue.push((0,m.default)(f.default.mark((function n(){return f.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",t._handler.stopSending(e.localId));case 1:case"end":return n.stop()}}),n,t)})))).catch((function(e){return h.warn("producer.close() failed:%o",e)}))})),e.on("@replacetrack",(function(n,r,i){t._awaitQueue.push((0,m.default)(f.default.mark((function r(){return f.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",t._handler.replaceTrack(e.localId,n));case 1:case"end":return r.stop()}}),r,t)})))).then(r).catch(i)})),e.on("@setmaxspatiallayer",(function(n,r,i){t._awaitQueue.push((0,m.default)(f.default.mark((function r(){return f.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",t._handler.setMaxSpatialLayer(e.localId,n));case 1:case"end":return r.stop()}}),r,t)})))).then(r).catch(i)})),e.on("@setrtpencodingparameters",(function(n,r,i){t._awaitQueue.push((0,m.default)(f.default.mark((function r(){return f.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",t._handler.setRtpEncodingParameters(e.localId,n));case 1:case"end":return r.stop()}}),r,t)})))).then(r).catch(i)})),e.on("@getstats",(function(n,r){if(t._closed)return r(new o.InvalidStateError("closed"));t._handler.getSenderStats(e.localId).then(n).catch(r)}))}},{key:"_handleConsumer",value:function(e){var t=this;e.on("@close",(function(){t._consumers.delete(e.id),t._closed||t._awaitQueue.push((0,m.default)(f.default.mark((function n(){return f.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",t._handler.stopReceiving(e.localId));case 1:case"end":return n.stop()}}),n,t)})))).catch((function(){}))})),e.on("@getstats",(function(n,r){if(t._closed)return r(new o.InvalidStateError("closed"));t._handler.getReceiverStats(e.localId).then(n).catch(r)}))}},{key:"_handleDataProducer",value:function(e){var t=this;e.on("@close",(function(){t._dataProducers.delete(e.id)}))}},{key:"_handleDataConsumer",value:function(e){var t=this;e.on("@close",(function(){t._dataConsumers.delete(e.id)}))}},{key:"id",get:function(){return this._id}},{key:"closed",get:function(){return this._closed}},{key:"direction",get:function(){return this._direction}},{key:"handler",get:function(){return this._handler}},{key:"connectionState",get:function(){return this._connectionState}},{key:"appData",get:function(){return this._appData},set:function(e){throw new Error("cannot override appData object")}}]),t}(a.EnhancedEventEmitter);t.Transport=v},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(10),a=n(3),o=new r.Logger("Producer"),s=function(e){function t(e){var n,r=e.id,i=e.localId,a=e.rtpSender,s=e.track,c=e.rtpParameters,u=e.stopTracks,l=e.disableTrackOnPause,d=e.zeroRtpOnPause,f=e.appData;return(0,S.default)(this,t),(n=(0,b.default)(this,(t.__proto__||(0,y.default)(t)).call(this)))._closed=!1,o.debug("constructor()"),n._id=r,n._localId=i,n._rtpSender=a,n._track=s,n._kind=s.kind,n._rtpParameters=c,n._paused=!!l&&!s.enabled,n._maxSpatialLayer=void 0,n._stopTracks=u,n._disableTrackOnPause=l,n._zeroRtpOnPause=d,n._appData=f,n._onTrackEnded=n._onTrackEnded.bind(n),n._handleTrack(),n}return(0,w.default)(t,e),(0,C.default)(t,[{key:"close",value:function(){this._closed||(o.debug("close()"),this._closed=!0,this._destroyTrack(),this.emit("@close"))}},{key:"transportClosed",value:function(){this._closed||(o.debug("transportClosed()"),this._closed=!0,this._destroyTrack(),this.safeEmit("transportclose"))}},{key:"getStats",value:function(){var e=(0,m.default)(f.default.mark((function e(){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._closed){e.next=2;break}throw new a.InvalidStateError("closed");case 2:return e.abrupt("return",this.safeEmitAsPromise("@getstats"));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pause",value:function(){o.debug("pause()"),this._closed?o.error("pause() | Producer closed"):(this._paused=!0,this._track&&this._disableTrackOnPause&&(this._track.enabled=!1),this._zeroRtpOnPause&&this.safeEmitAsPromise("@replacetrack",null).catch((function(){})))}},{key:"resume",value:function(){o.debug("resume()"),this._closed?o.error("resume() | Producer closed"):(this._paused=!1,this._track&&this._disableTrackOnPause&&(this._track.enabled=!0),this._zeroRtpOnPause&&this.safeEmitAsPromise("@replacetrack",this._track).catch((function(){})))}},{key:"replaceTrack",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n=t.track;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.debug("replaceTrack() [track:%o]",n),!this._closed){e.next=3;break}if(n&&this._stopTracks)try{n.stop()}catch(e){}throw new a.InvalidStateError("closed");case 3:if(!n||"ended"!==n.readyState){e.next=5;break}throw new a.InvalidStateError("track ended");case 5:if(n===this._track){e.next=16;break}if(e.t0=this._zeroRtpOnPause&&this._paused,e.t0){e.next=10;break}return e.next=10,this.safeEmitAsPromise("@replacetrack",n);case 10:this._destroyTrack(),this._track=n,this._track&&this._disableTrackOnPause&&(this._paused?this._paused&&(this._track.enabled=!1):this._track.enabled=!0),this._handleTrack(),e.next=17;break;case 16:o.debug("replaceTrack() | same track, ignored");case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setMaxSpatialLayer",value:function(){var e=(0,m.default)(f.default.mark((function e(t){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._closed){e.next=2;break}throw new a.InvalidStateError("closed");case 2:if("video"===this._kind){e.next=4;break}throw new a.UnsupportedError("not a video Producer");case 4:if("number"==typeof t){e.next=6;break}throw new TypeError("invalid spatialLayer");case 6:if(e.t0=t!==this._maxSpatialLayer,!e.t0){e.next=11;break}return e.next=10,this.safeEmitAsPromise("@setmaxspatiallayer",t);case 10:this._maxSpatialLayer=t;case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setRtpEncodingParameters",value:function(){var e=(0,m.default)(f.default.mark((function e(t){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._closed){e.next=2;break}throw new a.InvalidStateError("closed");case 2:if("object"==(void 0===t?"undefined":(0,R.default)(t))){e.next=4;break}throw new TypeError("invalid params");case 4:return e.next=6,this.safeEmitAsPromise("@setrtpencodingparameters",t);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_onTrackEnded",value:function(){o.debug('track "ended" event'),this.safeEmit("trackended")}},{key:"_handleTrack",value:function(){this._track&&this._track.addEventListener("ended",this._onTrackEnded)}},{key:"_destroyTrack",value:function(){if(this._track)try{this._track.removeEventListener("ended",this._onTrackEnded),this._stopTracks&&this._track.stop()}catch(e){}}},{key:"id",get:function(){return this._id}},{key:"localId",get:function(){return this._localId}},{key:"closed",get:function(){return this._closed}},{key:"kind",get:function(){return this._kind}},{key:"rtpSender",get:function(){return this._rtpSender}},{key:"track",get:function(){return this._track}},{key:"rtpParameters",get:function(){return this._rtpParameters}},{key:"paused",get:function(){return this._paused}},{key:"maxSpatialLayer",get:function(){return this._maxSpatialLayer}},{key:"appData",get:function(){return this._appData},set:function(e){throw new Error("cannot override appData object")}}]),t}(i.EnhancedEventEmitter);t.Producer=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(10),a=n(3),o=new r.Logger("Consumer"),s=function(e){function t(e){var n,r=e.id,i=e.localId,a=e.producerId,s=e.rtpReceiver,c=e.track,u=e.rtpParameters,l=e.appData;return(0,S.default)(this,t),(n=(0,b.default)(this,(t.__proto__||(0,y.default)(t)).call(this)))._closed=!1,o.debug("constructor()"),n._id=r,n._localId=i,n._producerId=a,n._rtpReceiver=s,n._track=c,n._rtpParameters=u,n._paused=!c.enabled,n._appData=l,n._onTrackEnded=n._onTrackEnded.bind(n),n._handleTrack(),n}return(0,w.default)(t,e),(0,C.default)(t,[{key:"close",value:function(){this._closed||(o.debug("close()"),this._closed=!0,this._destroyTrack(),this.emit("@close"))}},{key:"transportClosed",value:function(){this._closed||(o.debug("transportClosed()"),this._closed=!0,this._destroyTrack(),this.safeEmit("transportclose"))}},{key:"getStats",value:function(){var e=(0,m.default)(f.default.mark((function e(){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._closed){e.next=2;break}throw new a.InvalidStateError("closed");case 2:return e.abrupt("return",this.safeEmitAsPromise("@getstats"));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pause",value:function(){o.debug("pause()"),this._closed?o.error("pause() | Consumer closed"):(this._paused=!0,this._track.enabled=!1)}},{key:"resume",value:function(){o.debug("resume()"),this._closed?o.error("resume() | Consumer closed"):(this._paused=!1,this._track.enabled=!0)}},{key:"_onTrackEnded",value:function(){o.debug('track "ended" event'),this.safeEmit("trackended")}},{key:"_handleTrack",value:function(){this._track.addEventListener("ended",this._onTrackEnded)}},{key:"_destroyTrack",value:function(){try{this._track.removeEventListener("ended",this._onTrackEnded),this._track.stop()}catch(e){}}},{key:"id",get:function(){return this._id}},{key:"localId",get:function(){return this._localId}},{key:"producerId",get:function(){return this._producerId}},{key:"closed",get:function(){return this._closed}},{key:"kind",get:function(){return this._track.kind}},{key:"rtpReceiver",get:function(){return this._rtpReceiver}},{key:"track",get:function(){return this._track}},{key:"rtpParameters",get:function(){return this._rtpParameters}},{key:"paused",get:function(){return this._paused}},{key:"appData",get:function(){return this._appData},set:function(e){throw new Error("cannot override appData object")}}]),t}(i.EnhancedEventEmitter);t.Consumer=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(10),a=n(3),o=new r.Logger("DataProducer"),s=function(e){function t(e){var n,r=e.id,i=e.dataChannel,a=e.sctpStreamParameters,s=e.appData;return(0,S.default)(this,t),(n=(0,b.default)(this,(t.__proto__||(0,y.default)(t)).call(this)))._closed=!1,o.debug("constructor()"),n._id=r,n._dataChannel=i,n._sctpStreamParameters=a,n._appData=s,n._handleDataChannel(),n}return(0,w.default)(t,e),(0,C.default)(t,[{key:"close",value:function(){this._closed||(o.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"))}},{key:"transportClosed",value:function(){this._closed||(o.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"))}},{key:"send",value:function(e){if(o.debug("send()"),this._closed)throw new a.InvalidStateError("closed");this._dataChannel.send(e)}},{key:"_handleDataChannel",value:function(){var e=this;this._dataChannel.addEventListener("open",(function(){e._closed||(o.debug('DataChannel "open" event'),e.safeEmit("open"))})),this._dataChannel.addEventListener("error",(function(t){if(!e._closed){var n=t.error;n||(n=new Error("unknown DataChannel error")),"sctp-failure"===n.errorDetail?o.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",n.sctpCauseCode,n.message):o.error('DataChannel "error" event: %o',n),e.safeEmit("error",n)}})),this._dataChannel.addEventListener("close",(function(){e._closed||(o.warn('DataChannel "close" event'),e._closed=!0,e.emit("@close"),e.safeEmit("close"))})),this._dataChannel.addEventListener("message",(function(){e._closed||o.warn('DataChannel "message" event in a DataProducer, message discarded')})),this._dataChannel.addEventListener("bufferedamountlow",(function(){e._closed||e.safeEmit("bufferedamountlow")}))}},{key:"id",get:function(){return this._id}},{key:"closed",get:function(){return this._closed}},{key:"sctpStreamParameters",get:function(){return this._sctpStreamParameters}},{key:"readyState",get:function(){return this._dataChannel.readyState}},{key:"label",get:function(){return this._dataChannel.label}},{key:"protocol",get:function(){return this._dataChannel.protocol}},{key:"bufferedAmount",get:function(){return this._dataChannel.bufferedAmount}},{key:"bufferedAmountLowThreshold",get:function(){return this._dataChannel.bufferedAmountLowThreshold},set:function(e){this._dataChannel.bufferedAmountLowThreshold=e}},{key:"appData",get:function(){return this._appData},set:function(e){throw new Error("cannot override appData object")}}]),t}(i.EnhancedEventEmitter);t.DataProducer=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(10),a=new r.Logger("DataConsumer"),o=function(e){function t(e){var n,r=e.id,i=e.dataProducerId,o=e.dataChannel,s=e.sctpStreamParameters,c=e.appData;return(0,S.default)(this,t),(n=(0,b.default)(this,(t.__proto__||(0,y.default)(t)).call(this)))._closed=!1,a.debug("constructor()"),n._id=r,n._dataProducerId=i,n._dataChannel=o,n._sctpStreamParameters=s,n._appData=c,n._handleDataChannel(),n}return(0,w.default)(t,e),(0,C.default)(t,[{key:"close",value:function(){this._closed||(a.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"))}},{key:"transportClosed",value:function(){this._closed||(a.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"))}},{key:"_handleDataChannel",value:function(){var e=this;this._dataChannel.addEventListener("open",(function(){e._closed||(a.debug('DataChannel "open" event'),e.safeEmit("open"))})),this._dataChannel.addEventListener("error",(function(t){if(!e._closed){var n=t.error;n||(n=new Error("unknown DataChannel error")),"sctp-failure"===n.errorDetail?a.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",n.sctpCauseCode,n.message):a.error('DataChannel "error" event: %o',n),e.safeEmit("error",n)}})),this._dataChannel.addEventListener("close",(function(){e._closed||(a.warn('DataChannel "close" event'),e._closed=!0,e.emit("@close"),e.safeEmit("close"))})),this._dataChannel.addEventListener("message",(function(t){e._closed||e.safeEmit("message",t.data)}))}},{key:"id",get:function(){return this._id}},{key:"dataProducerId",get:function(){return this._dataProducerId}},{key:"closed",get:function(){return this._closed}},{key:"sctpStreamParameters",get:function(){return this._sctpStreamParameters}},{key:"readyState",get:function(){return this._dataChannel.readyState}},{key:"label",get:function(){return this._dataChannel.label}},{key:"protocol",get:function(){return this._dataChannel.protocol}},{key:"binaryType",get:function(){return this._dataChannel.binaryType},set:function(e){this._dataChannel.binaryType=e}},{key:"appData",get:function(){return this._appData},set:function(e){throw new Error("cannot override appData object")}}]),t}(i.EnhancedEventEmitter);t.DataConsumer=o},function(e,t){var n=e.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%d trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),(t+=null!=e["network-id"]?" network-id %d":"%v")+(null!=e["network-cost"]?" network-cost %d":"%v")}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(null!=e.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return t+=null!=e.id?"id=%s %s":"%v%s",t+=null!=e.mediaClockValue?"=%s":"",(t+=null!=e.rateNumerator?" rate=%s":"")+(null!=e.rateDenominator?"/%s":"")}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};(0,_.default)(n).forEach((function(e){n[e].forEach((function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")}))}))},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=c.default||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?(0,$.default)(t):(n.prototype=t.prototype,new n)}),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=h.default))((function(i,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof P.default&&(a[s.default]=function(){return this}),a;function c(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MediaDevice=t.QualityLevel=void 0;var l,d=u(n(12)),f=new(n(8).Logger)("MediaDevice");!function(e){e[e.Smooth=0]="Smooth",e[e.Standard=1]="Standard",e[e.High=2]="High",e[e.Super=3]="Super"}(l=t.QualityLevel||(t.QualityLevel={}));var p=[{width:192,height:144,fps:15,bps:153600},{width:640,height:480,fps:15,bps:307200},{width:1280,height:720,fps:25,bps:1258291.2},{width:1920,height:1080,fps:25,bps:2097152}],m=function(e){function t(){var t=e.call(this)||this;return t.currentVideoInputDevice=void 0,t.currentAudioInputDevice=void 0,t.currentAudioOuptDevice=void 0,t.devices=[],t.defaultLevel=l.Smooth,t}return i(t,e),t.prototype.Init=function(){return a(this,void 0,void 0,(function(){var e,t,n,r;return o(this,(function(i){switch(i.label){case 0:return[4,this.GetDevices()];case 1:for(i.sent(),e=0,t=this.devices;e<t.length;e++)"audioinput"===(n=t[e]).kind&&void 0===this.currentAudioInputDevice&&(this.currentAudioInputDevice=n),"videoinput"===n.kind&&void 0===this.currentVideoInputDevice&&(this.currentVideoInputDevice=n),"audiooutput"===n.kind&&void 0===this.currentAudioOuptDevice&&(this.currentAudioOuptDevice=n);return r=this,navigator.mediaDevices.ondevicechange=function(e){f.info("media device recv devicechange event from system, eventId:"+e),console.log(e),r.emit("DeviceChange")},[2]}}))}))},t.prototype.Destroy=function(){return a(this,void 0,void 0,(function(){return o(this,(function(e){return this.currentAudioInputDevice=void 0,this.currentVideoInputDevice=void 0,this.currentAudioOuptDevice=void 0,this.devices=[],this.defaultLevel=l.Smooth,[2]}))}))},t.prototype.GetDevices=function(){return a(this,void 0,void 0,(function(){var e,t,n,r,i,a,s;return o(this,(function(o){switch(o.label){case 0:if(e=[],!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return f.error("don't support mediaDevices enumerateDevices function"),[2,e];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,navigator.mediaDevices.getUserMedia({video:!0,audio:!0})];case 2:for(t=o.sent(),n=t.getTracks(),r=0,i=n;r<i.length;r++)(a=i[r]).stop(),t.removeTrack(a);return[3,4];case 3:return s=o.sent(),f.error("getUserMedia() failed name:"+s.name+",message:"+s.message),[2,e];case 4:return[4,navigator.mediaDevices.enumerateDevices()];case 5:return o.sent().forEach((function(t){e.push({deviceId:t.deviceId,deviceName:t.label,kind:t.kind})})),this.devices=e,[2,this.devices]}}))}))},t.prototype.GetUserMedia=function(e){return a(this,void 0,void 0,(function(){var t,n,r,i,a,s,c,u,l,d,h,m;return o(this,(function(o){switch(o.label){case 0:t={},this.currentVideoInputDevice&&void 0!==this.currentVideoInputDevice.deviceId&&""!==this.currentVideoInputDevice.deviceId&&(t={exact:this.currentVideoInputDevice.deviceId}),n={width:{ideal:p[this.defaultLevel].width},height:{ideal:p[this.defaultLevel].height},deviceId:t,frameRate:{ideal:p[this.defaultLevel].fps}},r={},this.currentAudioInputDevice&&void 0!==this.currentAudioInputDevice.deviceId&&""!==this.currentAudioInputDevice.deviceId&&(r={exact:this.currentAudioInputDevice.deviceId}),i={deviceId:r,sampleRate:48e3,sampleSize:16,channelCount:1,volume:1,echoCancellation:!0,autoGainControl:!0,noiseSuppression:!0},f.info("video device:",n),f.info("audio device:",i),a={video:!1,audio:!1},e?e.video?a.video=n:a.audio=i:(a.video=n,a.audio=i),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,navigator.mediaDevices.getUserMedia(a)];case 2:return s=o.sent(),[3,4];case 3:return c=o.sent(),f.error("getUserMedia() failed name:"+c.name+",message:"+c.message),[2,[]];case 4:for(u=s.getTracks(),l=0,d=u;l<d.length;l++)"video"===(h=d[l]).kind?(m=h.getSettings(),f.info("current video track info,deviceId:"+m.deviceId+",width:"+m.width+",height:"+m.height+",fps:"+m.frameRate),this.currentVideoInputDevice&&m.deviceId!==this.currentVideoInputDevice.deviceId&&f.error("current video track device id not equals setting device id")):"audio"===h.kind&&(m=h.getSettings(),f.info("current audio track info,deviceId:"+m.deviceId+",channelCount:"+m.channelCount+",sampleRate:"+m.sampleRate+",sampleSize:"+m.sampleSize),this.currentAudioInputDevice&&m.deviceId!==this.currentAudioInputDevice.deviceId&&f.error("current audio track device id not equals setting device id"));return[2,u]}}))}))},t.prototype.SwitchCamera=function(e){var t;return a(this,void 0,void 0,(function(){var n,r,i;return o(this,(function(a){if(this.devices.length<=0)return[2,!1];if((null===(t=this.currentVideoInputDevice)||void 0===t?void 0:t.deviceId)===e)return[2,!1];for(n=0,r=this.devices;n<r.length;n++)if("videoinput"===(i=r[n]).kind&&i.deviceId===e)return this.currentVideoInputDevice=i,[2,!0];return[2,!1]}))}))},t.prototype.SwitchAudio=function(e){var t;return a(this,void 0,void 0,(function(){var n,r,i;return o(this,(function(a){if(this.devices.length<=0)return[2,!1];if((null===(t=this.currentAudioInputDevice)||void 0===t?void 0:t.deviceId)===e)return[2,!1];for(n=0,r=this.devices;n<r.length;n++)if("audioinput"===(i=r[n]).kind&&i.deviceId===e)return this.currentAudioInputDevice=i,[2,!0];return[2,!1]}))}))},t.prototype.SetUserVideoQuality=function(e){return void 0===e&&(e=l.Smooth),!(e<l.Smooth||e>l.Super||(this.defaultLevel=e,0))},t.prototype.SetDefaultDevice=function(){this.currentAudioInputDevice=void 0,this.currentVideoInputDevice=void 0,this.currentAudioOuptDevice=void 0,this.defaultLevel=l.Smooth},t.prototype.GetUserMediaBitrate=function(){return p[this.defaultLevel].bps},t.prototype.GetCurrentCameraInputDevice=function(){return this.currentVideoInputDevice},t.prototype.GetCurrentAudioInputDevice=function(){return this.currentAudioInputDevice},t}(d.default);t.MediaDevice=m},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0,t.config={version:"V1.4",appKey:"616727c94be34418bc3951f35cf470cc",auth:"https://brtc.butel.com:31001/BaikuUserCenterV2HongyunHuiyi",meeting:"https://brtc.butel.com:31001/MeetingManageHongyunHuiyi",login:"/auth",createMeeting:"/callService",gw:"brtc.butel.com",gwListenPort:3e3,gwPath:"BRTCGateway"},t.default=t.config},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(51),i={version:n(49).config.version,CreateInstance:function(){return new r.ButelMeetingConnect}};t.default=i,window.ButelRTCSDK=i},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=c.default||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?(0,$.default)(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ButelMeetingConnect=void 0;var o,s=a(n(12)),u=n(52),l=n(111),d=n(112),f=n(49),p=n(8),h=n(48),m=new p.Logger("ButelMeetingConnect");!function(e){e[e.Init=1]="Init",e[e.JoinMeeting=2]="JoinMeeting",e[e.ExitMeeting=3]="ExitMeeting",e[e.Destroy=4]="Destroy"}(o||(o={}));var v=function(e){function t(){var t=e.call(this)||this;return t.meetingConnect=new u.MeetingConnect,t.butelMeetingConnectState=o.Destroy,t}return i(t,e),t.prototype.Init=function(e,t,n,r){var i=this;if(this.butelMeetingConnectState!=o.Destroy)return m.error("butelmeetingconnect sdk has already init"),{ret:-1};this.butelMeetingConnectState=o.Init,m.info("butelmeetingconnect sdk init, version:"+f.config.version+",appKey:"+f.config.appKey+",auth:"+f.config.auth+",meeting:"+f.config.meeting+",gw:"+f.config.gw+",gwListenPort:"+f.config.gwListenPort);var a={params:{account:e+"|"+f.config.appKey,password:t,imei:"imei",productId:"all",deviceType:"mobinp_JIHY",appType:"pc"},service:"authorize"},s=f.config.auth+f.config.login+"?"+d._objToParamAndSerialize(a);l._ajax({url:s,method:"post",headers:{"Content-Type":"text/plain;charset=utf-8"},success:function(t){0==+t.status?(m.info("butelmeetingconnect sdk auth success"),i.currentBussnissId=e,i.currentUserId=t.user.nubeNumber,i.currentNickName="",i.currentUserToken=t.user.accessToken,i.meetingConnect.init(i.currentUserId,i.currentUserToken,f.config.gw,f.config.gwListenPort,f.config.gwPath).then((function(e){0===e.ret?(m.info("init meetingconnect success"),i.startListener(),n({userId:i.currentUserId,token:i.currentUserToken})):(m.info("initmeetingconnect fail, errorCode:"+e.ret),i.currentBussnissId="",i.currentUserId="",i.currentNickName="",i.currentUserToken="",i.butelMeetingConnectState=o.Destroy,r({ret:-2,desc:""}))}))):-79==+t.status?(i.butelMeetingConnectState=o.Destroy,r({ret:-999,desc:"service internal error"})):-1==+t.status?(i.butelMeetingConnectState=o.Destroy,r({ret:-3,desc:"param error"})):(i.butelMeetingConnectState=o.Destroy,r({ret:t.status,desc:t.message}))},error:function(e){this.butelMeetingConnectState=o.Destroy,r({code:-4,desc:e})}})},t.prototype.Release=function(){if(this.butelMeetingConnectState!=o.Destroy){var e=this;this.meetingConnect.destroy().then((function(){e.stopListener(),e.currentBussnissId="",e.currentUserId="",e.currentNickName="",e.currentUserToken="",e.butelMeetingConnectState=o.Destroy}))}else m.error("butelmeetingconnect sdk has already destroy")},t.prototype.InitWithToken=function(e,t,n,r){var i=this;if(this.butelMeetingConnectState!=o.Destroy)return m.error("butelmeetingconnect sdk has already init"),void r({ret:-1,desc:""});this.butelMeetingConnectState=o.Init,m.info("butelmeetingconnect sdk init, version:"+f.config.version+",gw:"+f.config.gw+",gwListenPort:"+f.config.gwListenPort+",userId:"+e),this.currentUserId=e,this.currentNickName="",this.currentUserToken=t,this.meetingConnect.init(this.currentUserId,this.currentUserToken,f.config.gw,f.config.gwListenPort,f.config.gwPath).then((function(e){0===e.ret?(m.info("åå§åmeetingconnectæå"),i.startListener(),n({userId:i.currentUserId})):(m.info("åå§åmeetingconnectå¤±è´¥,errorCode:"+e.ret),i.currentBussnissId="",i.currentUserId="",i.currentNickName="",i.currentUserToken="",i.butelMeetingConnectState=o.Destroy,r({ret:-2,desc:""}))}))},t.prototype.CreateMeeting=function(e,t){var n=Math.floor(Date.now()/1e3),r=n+31536e3,i={service:"CreateMeeting",params:{token:this.currentUserToken,meetingType:2,app:"JHY_MOBILE",topic:"123456",invotedUsers:[],beginDateTime:""+n,endDateTime:""+r,speakersNum:9}},a=f.config.meeting+f.config.createMeeting+"?"+d._objToParamAndSerialize(i);l._ajax({url:a,method:"post",success:function(n){if(0===n.result.rc){var r=n.response.meetingId;e(String(r))}else-999===n.result.rc?t({code:-999,desc:"service internal error"}):-903==+n.result.rc||-902==+n.result.rc||-923==+n.result.rc?t({code:-2,desc:"ticket invalid "+n.result.rc}):t({code:n.status,desc:n.message})},error:function(e){t(e)}})},t.prototype.JoinMeeting=function(e,t,n,r,i){var a=this;if(this.butelMeetingConnectState==o.JoinMeeting)return m.error("butelmeetingconnect sdk instance already join meeting"),void i({ret:-1,desc:""});this.butelMeetingConnectState=o.JoinMeeting,this.currentNickName=n,this.meetingConnect.join_meeting(e,n,t).then((function(e){var t=e.mode,n=e.hostId,s=e.hostName,c=e.maxSpeaker,u=e.speakers;0==e.ret?r({mode:t,hostId:n,hostName:s,speakersMax:c,speakerList:u}):(a.butelMeetingConnectState=o.Init,i({ret:e.ret}))})).catch((function(e){a.butelMeetingConnectState=o.Init,i({ret:-1,desc:e})}))},t.prototype.LeaveMeeting=function(e,t){if(this.butelMeetingConnectState!=o.JoinMeeting)return m.error("butelmeetingconnect sdk instance already exit meeting"),void t({ret:-1,desc:""});this.butelMeetingConnectState=o.ExitMeeting,this.meetingConnect.exit_meeting().then((function(){e()})).catch((function(){t()}))},t.prototype.AskForSpeak=function(e,t){this.meetingConnect.ask_for_speak().then((function(n){0==n.ret?(e(),m.info("AskForSpeak success")):(t(n),m.info("AskForSpeak error",n))})).catch((function(e){t(e),m.info("AskForSpeak error",e)}))},t.prototype.AskForStopSpeak=function(e,t){this.meetingConnect.ask_for_stop_speak().then((function(n){0==n.ret?(e(n),m.info("AskForStopSpeak success",n)):(t(n),m.info("AskForStopSpeak error",n))})).catch((function(e){t(e),m.info("AskForStopSpeak error",e)}))},t.prototype.RaiseHand=function(e,t){this.meetingConnect.raise_hand_for_speak().then((function(n){0==n.ret?(e(),m.info("RaiseHand success",n)):(t(n),m.info("RaiseHand error",n))})).catch((function(e){t(e),m.info("RaiseHand error",e)}))},t.prototype.GetAllUsers=function(e,t){this.meetingConnect.get_all_user().then((function(n){0==n.ret?(e(n.MeetingUsers),m.info("GetAllUsers success",n.MeetingUsers)):(t(n),m.info("GetAllUsers error",n))})).catch((function(e){t(e),m.info("GetAllUsers error",e)}))},t.prototype.SendUIMsg=function(e,t,n,r,i){this.meetingConnect.send_ui_message(e,t,n).then((function(e){0==e.ret?(r(),m.info("SendUIMsg success",e)):(i(),m.info("SendUIMsg error",e))})).catch((function(e){i(e),m.info("SendUIMsg error",e)}))},t.prototype.SetSpeaker=function(e,t,n,r){this.meetingConnect.set_speaker(e,t).then((function(e){0==e.ret?(n(),m.info("SetSpeaker success",e)):(r(e),m.info("SetSpeaker error",e))})).catch((function(e){r(e),m.info("SetSpeaker error",e)}))},t.prototype.KickoutUser=function(e,t,n){this.meetingConnect.kick_out_user(e).then((function(e){0==e.ret?(t(),m.info("KickoutUser success",e)):(n(e),m.info("KickoutUser error",e))})).catch((function(e){n(e),m.info("KickoutUser error",e)}))},t.prototype.SetMeetingMode=function(e,t,n){this.meetingConnect.set_meeting_mode(e).then((function(e){0==e.ret?(t(),m.info("SetMeetingMode success",e)):(n(e),m.info("SetMeetingMode error",e))})).catch((function(e){n(e),m.info("SetMeetingMode error",e)}))},t.prototype.StartLocalPreview=function(e){this.meetingConnect.StartLocalPreview(e).then((function(){m.info("StartLocalPreview success")})).catch((function(e){m.info("StartLocalPreview error",e)}))},t.prototype.StopLocalPreview=function(){this.meetingConnect.StopLocalPreview().then((function(){m.info("StopLocalPreview success")})).catch((function(e){m.info("StopLocalPreview error",e)}))},t.prototype.StartRemoteVideo=function(e,t){this.meetingConnect.StartRemoteVideo(e,t).then((function(){m.info("StartRemoteVideo success")})).catch((function(e){m.info("StartRemoteVideo error",e)}))},t.prototype.StopRemoteVideo=function(e){this.meetingConnect.StopRemoteVideo(e).then((function(){m.info("StopRemoteVideo success")})).catch((function(e){m.info("StopRemoteVideo error",e)}))},t.prototype.StartRemoteShareVideo=function(e,t){this.meetingConnect.StartRemoteShareVideo(e,t).then((function(e){m.info("StartRemoteShareVideo success",e)})).catch((function(e){m.info("StartRemoteShareVideo error",e)}))},t.prototype.StopRemoteShareVideo=function(e){this.meetingConnect.StopRemoteShareVideo(e).then((function(e){m.info("StopRemoteShareVideo success",e)})).catch((function(e){m.info("StopRemoteShareVideo error",e)}))},t.prototype.GetDevices=function(e,t){if(this.butelMeetingConnectState==o.Destroy)return m.error("butelmeetingconnect sdk isn't init"),void t({ret:-1,desc:""});this.meetingConnect.GetDevices().then((function(t){e(t)}))},t.prototype.GetCurrentCameraInputDevice=function(){if(this.butelMeetingConnectState!=o.Destroy)return this.meetingConnect.GetCurrentCameraInputDevice();m.error("butelmeetingconnect sdk isn't init")},t.prototype.GetCurrentAudioInputDevice=function(){if(this.butelMeetingConnectState!=o.Destroy)return this.meetingConnect.GetCurrentAudioInputDevice();m.error("butelmeetingconnect sdk isn't init")},t.prototype.SetUserVideoQuality=function(e){void 0===e&&(e=h.QualityLevel.Smooth),this.butelMeetingConnectState!=o.Destroy?this.meetingConnect.SetUserVideoQuality(e):m.error("butelmeetingconnect sdk isn't init")},t.prototype.SwitchCamera=function(e,t,n,r){if(this.butelMeetingConnectState==o.Destroy)return m.error("butelmeetingconnect sdk isn't init"),void r({ret:-1,desc:""});this.meetingConnect.SwitchCamera(e,t).then((function(e){e?n():r()}))},t.prototype.SwitchAudio=function(e,t,n,r){if(this.butelMeetingConnectState==o.Destroy)return m.error("butelmeetingconnect sdk isn't init"),void r({ret:-1,desc:""});this.meetingConnect.SwitchAudio(e,t).then((function(e){e?n():r()}))},t.prototype.EnableCamera=function(e,t,n){if(this.butelMeetingConnectState==o.Destroy)return m.error("butelmeetingconnect sdk isn't init"),void n();this.meetingConnect.EnableCamera(e).then((function(e){e?t():n()}))},t.prototype.EnableAudio=function(e,t,n){if(this.butelMeetingConnectState==o.Destroy)return m.error("butelmeetingconnect sdk isn't init"),void n();this.meetingConnect.EnableAduio(e).then((function(e){e?t():n()}))},t.prototype.StartScreenShare=function(e,t){this.meetingConnect.StartScreenShare().then((function(t){m.info("StartScreenShare success",t),e(t)})).catch((function(e){m.info("StartScreenShare error",e),t(e)}))},t.prototype.StopScreenShare=function(){this.meetingConnect.StopScreenShare().then((function(e){m.info("StopScreenShare success",e)})).catch((function(e){m.info("StopScreenShare error",e)}))},t.prototype.GetLocalMicVol=function(){return this.meetingConnect.GetLocalMicVol()},t.prototype.GetRemoteMicVol=function(e){return this.meetingConnect.GetRemoteMicVol(e)},t.prototype.SetShareVideoQuality=function(e){this.meetingConnect.SetShareVideoQuality(e)},t.prototype.SetConfig=function(e){e.appKey&&(f.config.appKey=e.appKey),e.auth&&(f.config.auth=e.auth),e.meeting&&(f.config.meeting=e.meeting),e.gw&&(f.config.gw=e.gw),e.gwListenPort&&(f.config.gwListenPort=e.gwListenPort)},t.prototype.startListener=function(){var e=this;this.meetingConnect.on("onStartSpeak",(function(t){e.emit("onStartSpeak",t),m.info("onStartSpeak",t)})),this.meetingConnect.on("onStopSpeak",(function(t){e.emit("onStopSpeak",t)})),this.meetingConnect.on("onUserStartSpeak",(function(t){e.emit("onUserStartSpeak",t),m.info("onUserStartSpeak",t)})),this.meetingConnect.on("onUserStopSpeak",(function(t){e.emit("onUserStopSpeak",t),m.info("onUserStopSpeak",t)})),this.meetingConnect.on("onMeetingEnd",(function(t){e.butelMeetingConnectState=o.ExitMeeting,e.emit("onMeetingEnd",t),m.info("onMeetingEnd",t)})),this.meetingConnect.on("onUserJoin",(function(t){e.emit("onUserJoin",t),m.info("onUserJoin",t)})),this.meetingConnect.on("onUserLeave",(function(t){e.emit("onUserLeave",t),m.info("onUserLeave",t)})),this.meetingConnect.on("onUserOpenCamera",(function(t){e.emit("onUserOpenCamera",t),m.info("onUserOpenCamera",t)})),this.meetingConnect.on("onUserCloseCamera",(function(t){e.emit("onUserCloseCamera",t),m.info("onUserCloseCamera",t)})),this.meetingConnect.on("onUserOpenMic",(function(t){e.emit("onUserOpenMic",t),m.info("onUserOpenMic",t)})),this.meetingConnect.on("onUserCloseMic",(function(t){e.emit("onUserCloseMic",t),m.info("onUserCloseMic",t)})),this.meetingConnect.on("onUserOpenShare",(function(t){e.emit("onUserOpenShare",t),m.info("onUserOpenShare",t)})),this.meetingConnect.on("onUserCloseShare",(function(t){e.emit("onUserCloseShare",t),m.info("onUserCloseShare",t)})),this.meetingConnect.on("onMeetingModeChange",(function(t){e.emit("onMeetingModeChange",t),m.info("onMeetingModeChange",t)})),this.meetingConnect.on("onHostControl",(function(t){e.emit("onHostControl",t),m.info("onHostControl",t)})),this.meetingConnect.on("onRaiseHand",(function(t){e.emit("onRaiseHand",t),m.info("onRaiseHand",t)})),this.meetingConnect.on("onHostTransfer",(function(t){e.emit("onHostTransfer",t),m.info("onHostTransfer",t)})),this.meetingConnect.on("onRecvUIMsg",(function(t){e.emit("onRecvUIMsg",t),m.info("onRecvUIMsg",t)})),this.meetingConnect.on("onMediaAdapterRequest",(function(t){e.emit("onMediaAdapterRequest",t),m.info("onMediaAdapterRequest",t)})),this.meetingConnect.on("onRemoteSpeakerForMaxVol",(function(t){e.emit("onRemoteSpeakerForMaxVol",t),m.info("onRemoteSpeakerForMaxVol",t)})),this.meetingConnect.on("onMeetingRestoreNotify",(function(t){e.emit("onMeetingRestoreNotify",t),m.info("onMeetingRestoreNotify",t)}))},t.prototype.stopListener=function(){this.meetingConnect.removeAllListeners()},t}(s.default);t.ButelMeetingConnect=v},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=c.default||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?(0,$.default)(t):(n.prototype=t.prototype,new n)}),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=h.default))((function(i,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof P.default&&(a[s.default]=function(){return this}),a;function c(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MeetingConnect=void 0;var l,d=u(n(12)),f=n(26),p=n(26),m=n(84),v=n(8),y=n(110),b=n(48),w=new v.Logger("MeetingConnect"),_=function(){},k=function(){};!function(e){e[e.Init=1]="Init",e[e.JoinMeeting=2]="JoinMeeting",e[e.ExitMeeting=3]="ExitMeeting",e[e.Destroy=4]="Destroy"}(l||(l={}));var x=function(e){function t(){var t=e.call(this)||this;return t.meetingConnectState=l.Destroy,t.currentUserToken="",t.deviceManage=new b.MediaDevice,t.deviceManage.on("DeviceChange",(function(){})),t}return i(t,e),t.prototype.init=function(e,t,n,r,i){return a(this,void 0,void 0,(function(){var a;return o(this,(function(o){switch(o.label){case 0:return w.info("meeting connect init"),l.Init==this.meetingConnectState?(w.error("meeting connect has already init"),[2,{ret:-1}]):(this.meetingConnectState=l.Init,this.session=new f.Session,[4,this.session.init(n,r,i)]);case 1:return 0!=(a=o.sent()).ret?(w.error("meeting connect call session init function fail, code:"+a.ret),this.meetingConnectState=l.Destroy,[2,{ret:-1}]):(this.libMediasoupClient=new m.LibMediasoupClient,0!=(a=this.libMediasoupClient.init(this.session)).ret?(w.error("meeting connect call mediasoupclient function fail, code:"+a.ret),this.session.destroy(),this.meetingConnectState=l.Destroy,[2,{ret:-1}]):[4,this.deviceManage.Init()]);case 2:return o.sent(),this.speakerInfoMap=new g.default,this.localSpeakerUserResource=new k,this.remoteSpeakerUserResourceMap=new g.default,this.hostUserId="",this.hostNickName="",this.meetingMode=p.MeetingMode.Free,this.currentUserId=e,this.currentUserToken=t,this.startListener(),[2,{ret:0}]}}))}))},t.prototype.destroy=function(){return a(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return w.info("meeting connect destroy"),l.Destroy==this.meetingConnectState?(w.error("meeting connect has already destroy"),[2]):[4,this.exit_meeting()];case 1:return e.sent(),this.session.destroy(),this.libMediasoupClient.destroy(),this.deviceManage.Destroy(),this.stopListener(),this.meetingConnectState=l.Destroy,[2]}}))}))},t.prototype.DestroyLocalUserResource=function(e){return a(this,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return e.video||e.audio?e.video?[4,this.unpublish("video")]:[3,2]:[3,5];case 1:n.sent(),e.video=!1,n.label=2;case 2:return e.audio?[4,this.unpublish("audio")]:[3,4];case 3:n.sent(),e.audio=!1,n.label=4;case 4:(t=this.localSpeakerUserResource.userVideoDom).parentNode&&(t.srcObject=null,t.parentNode.removeChild(t)),this.localSpeakerUserResource.userVideoDom=null,this.localSpeakerUserResource.userMediaStream=void 0,n.label=5;case 5:return e.docVideo||e.docAudio?e.docVideo?[4,this.unpublish("docVideo")]:[3,7]:[3,10];case 6:n.sent(),e.docVideo=!1,n.label=7;case 7:return e.docAudio?[4,this.unpublish("docAudio")]:[3,9];case 8:n.sent(),e.docAudio=!1,n.label=9;case 9:(t=this.localSpeakerUserResource.docVideoDom).parentNode&&(t.srcObject=null,t.parentNode.removeChild(t)),this.localSpeakerUserResource.docVideoDom=null,this.localSpeakerUserResource.docMediaStream=void 0,n.label=10;case 10:return[2]}}))}))},t.prototype.DestroyRemoteUserResource=function(e){return a(this,void 0,void 0,(function(){var t,n,r,i,a,s,c,u,l,d;return o(this,(function(o){switch(o.label){case 0:return(t=this.speakerInfoMap.get(e))?(this.speakerInfoMap.delete(e),t.video||t.audio?t.video?[4,this.libMediasoupClient.unsubscribe(e,"video")]:[3,2]:[3,5]):(w.warn("user isn't speakingï¼userId:",e),[2]);case 1:o.sent(),t.video=!1,o.label=2;case 2:return t.audio?[4,this.libMediasoupClient.unsubscribe(e,"audio")]:[3,4];case 3:o.sent(),t.audio=!1,o.label=4;case 4:if(i=this.remoteSpeakerUserResourceMap.get(e)){if(a=i.userMediaStream)for(s=a.getTracks(),n=0,r=s;n<r.length;n++)l=r[n],a.removeTrack(l);(d=i.userVideoDom)&&d.parentNode&&(d.srcObject=null,d.parentNode.removeChild(d)),this.remoteSpeakerUserResourceMap.delete(e)}o.label=5;case 5:return t.docVideo||t.docAudio?t.docVideo?[4,this.libMediasoupClient.unsubscribe(e,"docVideo")]:[3,7]:[3,10];case 6:o.sent(),t.docVideo=!1,o.label=7;case 7:return t.docAudio?[4,this.libMediasoupClient.unsubscribe(e,"docAudio")]:[3,9];case 8:o.sent(),t.docAudio=!1,o.label=9;case 9:if(i=this.remoteSpeakerUserResourceMap.get(e+"doc")){if(a=i.docMediaStream)for(s=a.getTracks(),c=0,u=s;c<u.length;c++)l=u[c],a.removeTrack(l);(d=i.docVideoDom)&&d.parentNode&&(d.srcObject=null,d.parentNode.removeChild(d)),this.remoteSpeakerUserResourceMap.delete(e)}o.label=10;case 10:return[2]}}))}))},t.prototype.start_speak_notify=function(){return a(this,void 0,void 0,(function(){var e,t,n,r,i;return o(this,(function(a){switch(a.label){case 0:return w.info("current user recv start_speak_notify event"),this.speakerInfoMap.get(this.currentUserId)?(w.warn("current user already is speaking"),[2]):(this.localSpeakerUserResource.userVideoDom=y.createVideo(this.currentUserId,"local"),this.localSpeakerUserResource.userMediaStream=new MediaStream,this.localSpeakerUserResource.userVideoDom.srcObject=this.localSpeakerUserResource.userMediaStream,(e=new _).userId=this.currentUserId,e.nickName=this.currentNickName,this.speakerInfoMap.set(this.currentUserId,e),[4,this.deviceManage.GetUserMedia()]);case 1:t=a.sent(),w.info("media track size:"+t.length),n=0,r=t,a.label=2;case 2:return n<r.length?(i=r[n])?[4,this.libMediasoupClient.publish(i.kind,i,this.deviceManage.GetUserMediaBitrate())]:[3,4]:[3,5];case 3:0===a.sent().ret&&(this.localSpeakerUserResource.userMediaStream.addTrack(i),"video"===i.kind?e.video=!0:"audio"===i.kind&&(e.audio=!0)),a.label=4;case 4:return n++,[3,2];case 5:return this.emit("onStartSpeak",{userId:this.currentUserId,nickName:this.currentNickName}),[2]}}))}))},t.prototype.stop_speak_notify=function(){return a(this,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return w.info("stop_speak_notify event from gateway"),(e=this.speakerInfoMap.get(this.currentUserId))?(this.speakerInfoMap.delete(this.currentUserId),[4,this.DestroyLocalUserResource(e)]):(w.warn("current user:"+this.currentUserId+" not in speaking"),[2]);case 1:return t.sent(),this.emit("onStopSpeak",{userId:this.currentUserId,nickName:this.currentNickName}),[2]}}))}))},t.prototype.user_leave_notify=function(e){return a(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return w.info("user(userId:"+e+") leave meeting"),[4,this.DestroyRemoteUserResource(e)];case 1:return t.sent(),this.emit("onUserLeave",{userId:e}),[2]}}))}))},t.prototype.user_start_speak_notify=function(e,t){return a(this,void 0,void 0,(function(){var n,r;return o(this,(function(i){return w.info("recv user_start_speak_notify, userId:",e),this.speakerInfoMap.get(e)?(w.warn("user(userId:"+e+")  is already speaking"),[2]):((n=new _).userId=e,n.nickName=t,n.video=!1,n.audio=!1,n.docVideo=!1,n.docAudio=!1,this.speakerInfoMap.set(e,n),(r=new k).userVideoDom=y.createVideo(e),r.userMediaStream=new MediaStream,r.userVideoDom.srcObject=r.userMediaStream,this.remoteSpeakerUserResourceMap.set(e,r),this.emit("onUserStartSpeak",{userId:e}),[2])}))}))},t.prototype.user_stop_speak_notify=function(e){return a(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return w.info("recv user_stop_speak_notify event, userId:"+e),[4,this.DestroyRemoteUserResource(e)];case 1:return t.sent(),this.emit("onUserStopSpeak",{userId:e}),[2]}}))}))},t.prototype.user_publish_video_notify=function(e){return a(this,void 0,void 0,(function(){var t,n,r;return o(this,(function(i){switch(i.label){case 0:return w.info("recv user_publish_video_notify event, userId:"+e),(t=this.speakerInfoMap.get(e))?t.video?(w.warn("user(userId:"+e+")  is already publish video"),[2]):(t.video=!0,(n=this.remoteSpeakerUserResourceMap.get(e))?[4,this.subscribe(e,"video")]:(t.video=!1,w.error("don't create speaker resource for user, userId:"+e),[2])):(w.warn("user isn't speakingï¼userId:",e),[2]);case 1:return 0!==(r=i.sent()).ret?(t.video=!1,w.error("subscribe user("+e+") video fail, error code:"+r.ret),[2]):r.track&&n.userMediaStream?(n.userMediaStream.addTrack(r.track),[4,this.libMediasoupClient.resumeVideo(e,"video")]):[3,3];case 2:i.sent(),i.label=3;case 3:return this.emit("onUserOpenCamera",{userId:e}),[2]}}))}))},t.prototype.user_publish_audio_notify=function(e){return a(this,void 0,void 0,(function(){var t,n,r;return o(this,(function(i){switch(i.label){case 0:return w.info("recv user_publish_audio_notify, userId:"+e),(t=this.speakerInfoMap.get(e))?t.audio?(w.warn("user(userId:"+e+")  is already publish audio"),[2]):(t.audio=!0,(n=this.remoteSpeakerUserResourceMap.get(e))?[4,this.subscribe(e,"audio")]:(t.audio=!1,w.error("don't create speaker resource for user, userId:"+e),[2])):(w.warn("user isn't speakingï¼userId:",e),[2]);case 1:return 0!==(r=i.sent()).ret?(t.audio=!1,w.error("subscribe user("+e+") audio fail, error code:"+r.ret),[2]):(r.track&&n.userMediaStream&&n.userMediaStream.addTrack(r.track),this.emit("onUserOpenMic",{userId:e}),[2])}}))}))},t.prototype.user_unpublish_video_notify=function(e){return a(this,void 0,void 0,(function(){var t,n,r,i;return o(this,(function(a){switch(a.label){case 0:return w.info("recv user_unpublish_video_notify, userId:"+e),(t=this.speakerInfoMap.get(e))?t.video?(t.video=!1,(n=this.remoteSpeakerUserResourceMap.get(e))?[4,this.libMediasoupClient.unsubscribe(e,"video")]:(t.video=!0,w.error("don't create speaker resource for user, userId:"+e),[2])):(w.warn("user(userId:"+e+")  is already unpublish video"),[2]):(w.warn("user isn't speakingï¼userId:",e),[2]);case 1:return a.sent(),n.userMediaStream&&(r=n.userMediaStream.getTracks(),i=r.find((function(e){return"video"===e.kind})),r&&i&&n.userMediaStream.removeTrack(i)),this.emit("onUserCloseCamera",{userId:e}),[2]}}))}))},t.prototype.user_unpublish_audio_notify=function(e){return a(this,void 0,void 0,(function(){var t,n,r,i;return o(this,(function(a){switch(a.label){case 0:return w.info("recv user_unpublish_audio_notify, userId:"+e),(t=this.speakerInfoMap.get(e))?t.audio?(t.audio=!1,(n=this.remoteSpeakerUserResourceMap.get(e))?[4,this.libMediasoupClient.unsubscribe(e,"audio")]:(t.audio=!0,w.error("don't create speaker resource for user, userId:"+e),[2])):(w.warn("user(userId:"+e+")  is already publish audio"),[2]):(w.warn("user isn't speakingï¼userId:",e),[2]);case 1:return a.sent(),n.userMediaStream&&(r=n.userMediaStream.getTracks(),i=r.find((function(e){return"audio"===e.kind})),r&&i&&n.userMediaStream.removeTrack(i)),this.emit("onUserCloseMic",{userId:e}),[2]}}))}))},t.prototype.meeting_end=function(e){return a(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this.exit_meeting(!1)];case 1:return t.sent(),this.emit("onMeetingEnd",{reason:e}),[2]}}))}))},t.prototype.startListener=function(){var e=this;this.session.on("start_speak_notify",(function(){e.start_speak_notify()})),this.session.on("stop_speak_notify",(function(){return a(e,void 0,void 0,(function(){return o(this,(function(e){return this.stop_speak_notify(),[2]}))}))})),this.session.on("user_join_notify",(function(t){e.emit("onUserJoin",{userId:t.userId,nickName:t.nickName})})),this.session.on("user_leave_notify",(function(t){e.user_leave_notify(t.userId)})),this.session.on("user_start_speak_notify",(function(t){e.user_start_speak_notify(t.userId,t.nickName)})),this.session.on("user_stop_speak_notify",(function(t){e.user_stop_speak_notify(t.userId)})),this.session.on("user_publish_video_notify",(function(t){e.user_publish_video_notify(t.userId)})),this.session.on("user_publish_audio_notify",(function(t){e.user_publish_audio_notify(t.userId)})),this.session.on("user_unpublish_video_notify",(function(t){return a(e,void 0,void 0,(function(){return o(this,(function(e){return this.user_unpublish_video_notify(t.userId),[2]}))}))})),this.session.on("user_unpublish_audio_notify",(function(t){return a(e,void 0,void 0,(function(){return o(this,(function(e){return this.user_unpublish_audio_notify(t.userId),[2]}))}))})),this.session.on("user_publish_share_notify",(function(t){return a(e,void 0,void 0,(function(){return o(this,(function(e){return w.info(t,"user_publish_share_notify"),this.emit("onUserOpenShare",t),[2]}))}))})),this.session.on("user_unpublish_share_notify",(function(t){return a(e,void 0,void 0,(function(){return o(this,(function(e){return w.info(t,"user_unpublish_share_notify"),this.emit("onUserCloseShare",t),[2]}))}))})),this.session.on("meeting_mode_change_notify",(function(t){e.meetingMode=t,e.emit("onMeetingModeChange",t)})),this.session.on("host_control_notify",(function(t){p.MeetingMode.Host==e.meetingMode?e.currentUserId!=e.hostUserId?e.emit("onHostControl",t):w.warn("current user is host, ignore host_control_notify"):w.warn("current meeting not in host mode, ignore host_control_notify")})),this.session.on("raise_hand_notify",(function(t){p.MeetingMode.Host==e.meetingMode?e.currentUserId==e.hostUserId?e.emit("onRaiseHand",{userId:t.userId}):w.warn("current user is not host, ignore raise_hand_notify"):w.warn("current meeting not in host mode, ignore raise_hand_notify")})),this.session.on("host_transfer_notify",(function(t){p.MeetingMode.Host==e.meetingMode?(e.hostUserId=t.hostId,e.hostNickName=t.hostName,e.emit("onHostTransfer",t)):w.warn("current meeting not in host mode, ignore host_transfer_notify")})),this.session.on("recv_ui_msg_notify",(function(t){w.info(t,"recv_ui_msg_notify"),e.emit("onRecvUIMsg",t)})),this.session.on("meeting_end_notify",(function(){w.info("recv meeting_end_notify, meetingId:"+e.currentMeetingId+", userId:"+e.currentUserId),e.meeting_end(1)})),this.session.on("meeting_exception_notify",(function(){w.info("recv meeting_exception_notify, meetingId:"+e.currentMeetingId+", userId:"+e.currentUserId),e.meeting_end(2)})),this.session.on("kick_out_notify",(function(){w.info("recv kick_out_notify, meetingId:"+e.currentMeetingId+", userId:"+e.currentUserId),e.meeting_end(3)})),this.session.on("meeting_restore_notify",(function(t){w.info("recv meeting_restore_notify"),e.emit("onMeetingRestoreNotify",t)}))},t.prototype.stopListener=function(){this.session.removeAllListeners()},t.prototype.subscribe=function(e,t){return a(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return[4,this.libMediasoupClient.subscribe(e,t)];case 1:return[2,n.sent()]}}))}))},t.prototype.unpublish=function(e,t){return void 0===t&&(t=!1),a(this,void 0,void 0,(function(){var n,r,i;return o(this,(function(a){switch(a.label){case 0:return w.info("unpublish"+e+" mediastream and remove track"),[4,this.libMediasoupClient.unpublish(e,t)];case 1:return a.sent(),n=void 0,"video"===e||"audio"===e?n=this.localSpeakerUserResource.userMediaStream:(n=this.localSpeakerUserResource.docMediaStream,"docVideo"===e&&(e="video"),"docAideo"===e&&(e="audio")),n&&((r=n.getTracks())||w.warn("local stream has no any tracks"),(i=r.find((function(t){return t.kind===e})))||w.warn("local stream has no "+e+" track"),n.removeTrack(i)),[2]}}))}))},t.prototype.join_meeting=function(e,t,n){return a(this,void 0,void 0,(function(){var r,i,a,s,c,u,d,f,h,m,v,g;return o(this,(function(o){switch(o.label){case 0:return w.info("join meeting nickName:"+t+",meetingId:"+e+",isSpeak:"+n),this.meetingConnectState==l.JoinMeeting?(w.error("current meeting connect instance already join meeting,meetingId:"+this.currentMeetingId),[2,{ret:-1}]):(this.meetingConnectState=l.JoinMeeting,this.currentNickName=t,this.currentMeetingId=e,[4,this.session.join_meeting(this.currentUserId,this.currentUserToken,e,n,t)]);case 1:if(0!==(r=o.sent()).ret)return w.error("call join meeting from gateway server, error code:"+r.ret),this.meetingConnectState=l.Init,[2,{ret:-1}];for(this.meetingInfo=r,this.hostUserId=r.hostId,this.hostNickName=r.hostName,1==r.mode?this.meetingMode=p.MeetingMode.Free:2==r.mode&&(this.meetingMode=p.MeetingMode.Host),i=0,a=r.speakers.length;i<a;i++)m=r.speakers[i],(s=new _).userId=m.userid,s.nickName=m.nickName,s.video=1===m.videostate,s.audio=1===m.audiostate,s.docVideo=!1,s.docAudio=!1,this.speakerInfoMap.set(m.userid,s);return w.info("current speaker user count:"+this.speakerInfoMap.size),[4,this.libMediasoupClient.loadDevice(r.routerRtpCapabilities)];case 2:if(!o.sent())return w.error("brower capability has no overlap with gateway capability"),this.meetingConnectState=l.Init,[2,{ret:-2}];for(c=0;c<this.meetingInfo.transportPramas.length;c++)u=this.meetingInfo.transportPramas[c],w.info("transportPrama.direction:"+u.direction),0===u.direction?(d={id:u.transportId,iceParameters:u.iceParameters,iceCandidates:u.iceCandidates,dtlsParameters:u.dtlsParameters},this.libMediasoupClient.createSendTransport(d)):1===u.direction&&(d={id:u.transportId,iceParameters:u.iceParameters,iceCandidates:u.iceCandidates,dtlsParameters:u.dtlsParameters},this.libMediasoupClient.createRecvTransport(d));f=this.speakerInfoMap.keys(),i=0,o.label=3;case 3:return i<this.speakerInfoMap.size?(h=f.next().value,(m=this.speakerInfoMap.get(h))?(w.info("speakerInfoList userId:"+h+",speaker.id:"+m.userId+",speaker.nickName:"+m.nickName+",speaker.video:"+m.video+",speaker.audio:"+m.audio),(v={}).userVideoDom=y.createVideo(m.userId),v.userMediaStream=new MediaStream,v.userVideoDom.srcObject=v.userMediaStream,m.video&&m.userId?[4,this.subscribe(m.userId,"video")]:[3,7]):[3,16]):[3,17];case 4:return 0===(g=o.sent()).ret&&g.track?(v.userMediaStream.addTrack(g.track),[4,this.libMediasoupClient.resumeVideo(m.userId,"video")]):[3,6];case 5:return o.sent(),[3,7];case 6:w.error("subscribe user: "+m.userId+",media video fail"),o.label=7;case 7:return m.audio&&m.userId?[4,this.subscribe(m.userId,"audio")]:[3,9];case 8:0===(g=o.sent()).ret&&g.track?v.userMediaStream.addTrack(g.track):w.error("subscribe user: "+m.userId+",media audio fail"),o.label=9;case 9:return m.docVideo||m.docAudio?(v.docVideoDom=y.createVideo(m.userId+"doc"),v.docMediaStream=new MediaStream,v.docVideoDom.srcObject=v.docMediaStream,m.docVideo&&m.userId?[4,this.subscribe(m.userId,"docVideo")]:[3,13]):[3,15];case 10:return 0===(g=o.sent()).ret&&g.track?(v.docMediaStream.addTrack(g.track),[4,this.libMediasoupClient.resumeVideo(m.userId,"docVideo")]):[3,12];case 11:return o.sent(),[3,13];case 12:w.error("subscribe user: "+m.userId+",media docVideo fail"),o.label=13;case 13:return m.docAudio&&m.userId?[4,this.subscribe(m.userId,"docAudio")]:[3,15];case 14:0===(g=o.sent()).ret&&g.track?v.docMediaStream.addTrack(g.track):w.error("subscribe user: "+m.userId+",media docAudio fail"),o.label=15;case 15:m.userId&&this.remoteSpeakerUserResourceMap.set(m.userId,v),o.label=16;case 16:return i++,[3,3];case 17:return[2,r]}}))}))},t.prototype.exit_meeting=function(e){return void 0===e&&(e=!0),a(this,void 0,void 0,(function(){var t,n,r,i,a;return o(this,(function(o){switch(o.label){case 0:return w.info("leave meeting, current user:"+this.currentUserId),this.meetingConnectState!=l.JoinMeeting?(w.error("current meeting connect instance already exit meeting"),[2]):(this.meetingConnectState=l.ExitMeeting,e?(w.info("call exit_meeting from session"),[4,this.session.exit_meeting()]):[3,2]);case 1:o.sent(),w.info("leave meeting sucess"),o.label=2;case 2:return(t=this.speakerInfoMap.get(this.currentUserId))?(w.info("leave meeting,release local speaker resource"),this.speakerInfoMap.delete(this.currentUserId),[4,this.DestroyLocalUserResource(t)]):[3,4];case 3:o.sent(),o.label=4;case 4:n=this.speakerInfoMap.size,r=this.speakerInfoMap.keys(),i=0,o.label=5;case 5:return i<n?(a=r.next().value,w.info("release remote speaker resource, userId:"+a),[4,this.DestroyRemoteUserResource(a)]):[3,8];case 6:o.sent(),o.label=7;case 7:return i++,[3,5];case 8:return this.speakerInfoMap.clear(),this.remoteSpeakerUserResourceMap.clear(),this.currentNickName="",this.currentMeetingId="",this.hostUserId="",this.hostNickName="",this.meetingMode=p.MeetingMode.Free,[2]}}))}))},t.prototype.ask_for_speak=function(){return a(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return this.meetingConnectState!=l.JoinMeeting?(w.error("current meeting connect instance already exit meeting"),[2,{ret:-1}]):this.meetingMode==p.MeetingMode.Host?(w.error("current meeting mode is Host mode"),[2,{ret:-1}]):[4,this.session.ask_for_speak()];case 1:return[2,e.sent()]}}))}))},t.prototype.ask_for_stop_speak=function(){return a(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return this.meetingConnectState!=l.JoinMeeting?(w.error("current meeting connect instance already exit meeting"),[2,{ret:-1}]):this.meetingMode==p.MeetingMode.Host?(w.error("current meeting mode is Host mode"),[2,{ret:-1}]):[4,this.session.ask_for_stop_speak()];case 1:return[2,e.sent()]}}))}))},t.prototype.raise_hand_for_speak=function(){return a(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return this.meetingConnectState!=l.JoinMeeting?(w.error("current meeting connect instance already exit meeting"),[2,{ret:-1}]):this.meetingMode==p.MeetingMode.Free?(w.error("current meeting mode is Free mode"),[2,{ret:-1}]):[4,this.session.raise_hand_for_speak()];case 1:return[2,e.sent()]}}))}))},t.prototype.get_all_user=function(){return a(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return this.meetingConnectState!=l.JoinMeeting?(w.error("current meeting connect instance already exit meeting"),[2,{ret:-1}]):[4,this.session.get_all_user()];case 1:return[2,e.sent()]}}))}))},t.prototype.send_ui_message=function(e,t,n){return a(this,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return this.meetingConnectState!=l.JoinMeeting?(w.error("current meeting connect instance already exit meeting"),[2,{ret:-1}]):[4,this.session.send_ui_message(e,t,n)];case 1:return[2,r.sent()]}}))}))},t.prototype.set_speaker=function(e,t){return a(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return this.meetingConnectState!=l.JoinMeeting?(w.error("current meeting connect instance already exit meeting"),[2,{ret:-1}]):this.meetingMode==p.MeetingMode.Free||this.currentUserId!=this.hostUserId?(w.error("current meeting isn't Host mode or current user isn't host"),[2,{ret:-1}]):[4,this.session.set_speaker(e,t)];case 1:return[2,n.sent()]}}))}))},t.prototype.kick_out_user=function(e){return a(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return this.meetingConnectState!=l.JoinMeeting?(w.error("current meeting connect instance already exit meeting"),[2,{ret:-1}]):this.meetingMode==p.MeetingMode.Free||this.currentUserId!=this.hostUserId?(w.error("current meeting isn't Host mode or current user isn't host"),[2,{ret:-1}]):[4,this.session.kick_out_user(e)];case 1:return[2,t.sent()]}}))}))},t.prototype.set_meeting_mode=function(e){return a(this,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return this.meetingConnectState!=l.JoinMeeting?(w.error("current meeting connect instance already exit meeting"),[2,{ret:-1}]):this.currentUserId!=this.hostUserId?(w.error("current meeting isn't Host mode or current user isn't host"),[2,{ret:-1}]):[4,this.session.set_meeting_mode(e)];case 1:return 0===(t=n.sent()).ret&&(this.meetingMode=e),[2,t]}}))}))},t.prototype.StartLocalPreview=function(e){return a(this,void 0,void 0,(function(){var t;return o(this,(function(n){return this.meetingConnectState!=l.JoinMeeting?(w.error("current meeting connect instance already exit meeting"),[2]):e?((t=this.localSpeakerUserResource.userVideoDom)&&e.appendChild(t),[2]):[2]}))}))},t.prototype.StopLocalPreview=function(){return a(this,void 0,void 0,(function(){var e;return o(this,(function(t){return this.meetingConnectState!=l.JoinMeeting?(w.error("current meeting connect instance already exit meeting"),[2]):((e=this.localSpeakerUserResource.userVideoDom)&&e.parentNode&&(e.parentNode.removeChild(e),w.info("stop_local_preview ç§»é¤videoæå")),[2])}))}))},t.prototype.StartRemoteVideo=function(e,t){return a(this,void 0,void 0,(function(){var n;return o(this,(function(r){return w.info("start_remote_video userId:"+e),this.meetingConnectState!=l.JoinMeeting?(w.error("current meeting connect instance already exit meeting"),[2]):t?((n=this.remoteSpeakerUserResourceMap.get(e))&&n.userVideoDom?t.appendChild(n.userVideoDom):w.error("start_remote_video can't find userId:"+e),[2]):[2]}))}))},t.prototype.StopRemoteVideo=function(e){return a(this,void 0,void 0,(function(){var t,n;return o(this,(function(r){return w.info("stop_remote_video"+e),this.meetingConnectState!=l.JoinMeeting?(w.error("current meeting connect instance already exit meeting"),[2]):((t=this.remoteSpeakerUserResourceMap.get(e))&&(n=t.userVideoDom).parentNode&&n.parentNode.removeChild(n),[2])}))}))},t.prototype.StartRemoteShareVideo=function(e,t){return a(this,void 0,void 0,(function(){return o(this,(function(e){return[2]}))}))},t.prototype.StopRemoteShareVideo=function(e){return a(this,void 0,void 0,(function(){return o(this,(function(e){return[2]}))}))},t.prototype.GetDevices=function(){return a(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return this.deviceManage?[4,this.deviceManage.GetDevices()]:[3,2];case 1:return[2,e.sent()];case 2:return[2,void 0]}}))}))},t.prototype.GetCurrentCameraInputDevice=function(){return this.deviceManage.GetCurrentCameraInputDevice()},t.prototype.GetCurrentAudioInputDevice=function(){return this.deviceManage.GetCurrentAudioInputDevice()},t.prototype.SetUserVideoQuality=function(e){return void 0===e&&(e=b.QualityLevel.Smooth),a(this,void 0,void 0,(function(){var t,n,r,i,a,s,c;return o(this,(function(o){switch(o.label){case 0:return this.deviceManage.SetUserVideoQuality(e)?(t=this.speakerInfoMap.get(this.currentUserId))&&t.video?[4,this.deviceManage.GetUserMedia({video:!0})]:[3,2]:[2];case 1:if((n=o.sent())[0]&&(this.libMediasoupClient.SetMaxBitrate("video",this.deviceManage.GetUserMediaBitrate()),this.libMediasoupClient.ReplaceTrack("video",n[0]),r=this.localSpeakerUserResource.userMediaStream)){for(i=r.getVideoTracks(),a=0,s=i;a<s.length;a++)c=s[a],r.removeTrack(c);r.addTrack(n[0])}o.label=2;case 2:return[2]}}))}))},t.prototype.SwitchCamera=function(e,t){return a(this,void 0,void 0,(function(){var n,r,i,a,s,c,u;return o(this,(function(o){switch(o.label){case 0:return[4,this.deviceManage.SwitchCamera(e)];case 1:return o.sent()?(n=this.speakerInfoMap.get(this.currentUserId))&&n.video?[4,this.deviceManage.GetUserMedia({video:!0})]:[3,3]:(w.error("switch camera device("+t+") fail"),[2,!1]);case 2:if((r=o.sent())[0]&&"video"===r[0].kind&&(this.libMediasoupClient.ReplaceTrack("video",r[0]),i=this.localSpeakerUserResource.userMediaStream)){for(a=i.getVideoTracks(),s=0,c=a;s<c.length;s++)u=c[s],i.removeTrack(u);i.addTrack(r[0])}o.label=3;case 3:return[2,!0]}}))}))},t.prototype.SwitchAudio=function(e,t){return a(this,void 0,void 0,(function(){var n,r,i,a,s,c,u;return o(this,(function(o){switch(o.label){case 0:return[4,this.deviceManage.SwitchAudio(e)];case 1:return o.sent()?(n=this.speakerInfoMap.get(this.currentUserId))&&n.video?[4,this.deviceManage.GetUserMedia({audio:!0})]:[3,3]:(w.error("switch audio fail, device("+t+") not exist"),[2,!1]);case 2:if((r=o.sent())[0]&&"audio"===r[0].kind&&(this.libMediasoupClient.ReplaceTrack("audio",r[0]),i=this.localSpeakerUserResource.userMediaStream)){for(a=i.getAudioTracks(),s=0,c=a;s<c.length;s++)u=c[s],i.removeTrack(u);i.addTrack(r[0])}o.label=3;case 3:return[2,!0]}}))}))},t.prototype.EnableCamera=function(e){return a(this,void 0,void 0,(function(){var t,n;return o(this,(function(r){switch(r.label){case 0:return e?(n=this.speakerInfoMap.get(this.currentUserId))?n.video?(w.error("current user:"+this.currentUserId+" has opened camara"),[2,!1]):[4,this.deviceManage.GetUserMedia({video:!0})]:(w.error("current user:"+this.currentUserId+" isn't in speaking"),[2,!1]):[3,4];case 1:return(t=r.sent())[0]&&"video"===t[0].kind?[4,this.libMediasoupClient.publish("video",t[0],this.deviceManage.GetUserMediaBitrate())]:[3,3];case 2:0===r.sent().ret&&this.localSpeakerUserResource.userMediaStream&&(this.localSpeakerUserResource.userMediaStream.addTrack(t[0]),n.video=!0),r.label=3;case 3:return[2,!0];case 4:return(n=this.speakerInfoMap.get(this.currentUserId))?n.video?(n.video=!1,[4,this.unpublish("video",!0)]):(w.error("current user:"+this.currentUserId+" has closed camara"),[2,!1]):(w.warn("current user:"+this.currentUserId+" not in speaking"),[2,!1]);case 5:return r.sent(),[2,!0]}}))}))},t.prototype.EnableAduio=function(e){return a(this,void 0,void 0,(function(){var t,n;return o(this,(function(r){switch(r.label){case 0:return e?(n=this.speakerInfoMap.get(this.currentUserId))?n.audio?(w.error("current user:"+this.currentUserId+" has opened audio mic in"),[2,!1]):[4,this.deviceManage.GetUserMedia({audio:!0})]:(w.warn("current user:"+this.currentUserId+" isn't in speaking"),[2,!1]):[3,4];case 1:return(t=r.sent())[0]&&"audio"===t[0].kind?[4,this.libMediasoupClient.publish("audio",t[0])]:[3,3];case 2:0===r.sent().ret&&this.localSpeakerUserResource.userMediaStream&&(this.localSpeakerUserResource.userMediaStream.addTrack(t[0]),n.audio=!0),r.label=3;case 3:return[2,!0];case 4:return(n=this.speakerInfoMap.get(this.currentUserId))?n.audio?(n.audio=!1,[4,this.unpublish("audio",!0)]):(w.error("current user:"+this.currentUserId+" has closed audio mic in"),[2,!1]):(w.warn("current user:"+this.currentUserId+" isn't in speaking"),[2,!1]);case 5:return r.sent(),[2,!0]}}))}))},t.prototype.StartScreenShare=function(){return a(this,void 0,void 0,(function(){return o(this,(function(e){return[2]}))}))},t.prototype.StopScreenShare=function(){return a(this,void 0,void 0,(function(){return o(this,(function(e){return[2]}))}))},t.prototype.GetLocalMicVol=function(){return a(this,void 0,void 0,(function(){return o(this,(function(e){return[2,0]}))}))},t.prototype.GetRemoteMicVol=function(e){return a(this,void 0,void 0,(function(){return o(this,(function(e){return[2,0]}))}))},t.prototype.SetShareVideoQuality=function(e){return a(this,void 0,void 0,(function(){return o(this,(function(e){return[2]}))}))},t}(d.default);t.MeetingConnect=x},function(e,t,n){var r=n(54),i=n(19),a=n(30),o=n(13)("socket.io-client");e.exports=t=c;var s=t.managers={};function c(e,t){"object"==(void 0===e?"undefined":(0,R.default)(e))&&(t=e,e=void 0),t=t||{};var n,i=r(e),c=i.source,u=i.id,l=i.path,d=s[u]&&l in s[u].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||d?(o("ignoring socket cache for %s",c),n=a(c,t)):(s[u]||(o("new io instance for %s",c),s[u]=a(c,t)),n=s[u]),i.query&&!t.query&&(t.query=i.query),n.socket(i.path,t)}t.protocol=i.protocol,t.connect=c,t.Manager=n(30),t.Socket=n(36)},function(e,t,n){var r=n(27),i=n(13)("socket.io-client:url");e.exports=function(e,t){var n=e;t=t||"undefined"!=typeof location&&location,null==e&&(e=t.protocol+"//"+t.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(i("protocol-less url %s",e),e=void 0!==t?t.protocol+"//"+e:"https://"+e),i("parse %s",e),n=r(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";var a=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+a+":"+n.port,n.href=n.protocol+"://"+a+(t&&t.port===n.port?"":":"+n.port),n}},function(e,t,n){e.exports=function(e){function t(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){var n=void 0;function o(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];if(o.enabled){var a=o,s=Number(new Date),c=s-(n||s);a.diff=c,a.prev=n,a.curr=s,n=s,t[0]=r.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var u=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(function(e,n){if("%%"===e)return e;u++;var i=r.formatters[n];if("function"==typeof i){var o=t[u];e=i.call(a,o),t.splice(u,1),u--}return e})),r.formatArgs.call(a,t),(a.log||r.log).apply(a,t)}}return o.namespace=e,o.enabled=r.enabled(e),o.useColors=r.useColors(),o.color=t(e),o.destroy=i,o.extend=a,"function"==typeof r.init&&r.init(o),r.instances.push(o),o}function i(){var e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function a(e,t){var n=r(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(e){return e instanceof Error?e.stack||e.message:e},r.disable=function(){var e=[].concat((0,p.default)(r.names.map(o)),(0,p.default)(r.skips.map(o).map((function(e){return"-"+e})))).join(",");return r.enable(""),e},r.enable=function(e){var t=void 0;r.save(e),r.names=[],r.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){var a=r.instances[t];a.enabled=r.enabled(a.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;var t=void 0,n=void 0;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=n(56),(0,_.default)(e).forEach((function(t){r[t]=e[t]})),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}},function(e,t){var n=1e3,r=6e4,i=36e5,a=24*i;function o(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}e.exports=function(e,t){t=t||{};var s=void 0===e?"undefined":(0,R.default)(e);if("string"===s&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var o=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"weeks":case"week":case"w":return 6048e5*o;case"days":case"day":case"d":return o*a;case"hours":case"hour":case"hrs":case"hr":case"h":return o*i;case"minutes":case"minute":case"mins":case"min":case"m":return o*r;case"seconds":case"second":case"secs":case"sec":case"s":return o*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(e);if("number"===s&&isFinite(e))return t.long?function(e){var t=Math.abs(e);return t>=a?o(e,t,a,"day"):t>=i?o(e,t,i,"hour"):t>=r?o(e,t,r,"minute"):t>=n?o(e,t,n,"second"):e+" ms"}(e):function(e){var t=Math.abs(e);return t>=a?Math.round(e/a)+"d":t>=i?Math.round(e/i)+"h":t>=r?Math.round(e/r)+"m":t>=n?Math.round(e/n)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+(0,x.default)(e))}},function(e,t,n){(function(r){function i(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e}(t=e.exports=n(58)).log=function(){return"object"==("undefined"==typeof console?"undefined":(0,R.default)(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var i=0,a=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&"%c"===e&&(a=++i)})),e.splice(a,0,r)}},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=i,t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return(0,x.default)(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(i())}).call(this,n(11))},function(e,t,n){function r(e){var n;function r(){if(r.enabled){var e=r,i=+new Date,a=i-(n||i);e.diff=a,e.prev=n,e.curr=i,n=i;for(var o=new Array(arguments.length),s=0;s<o.length;s++)o[s]=arguments[s];o[0]=t.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var c=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,(function(n,r){if("%%"===n)return n;c++;var i=t.formatters[r];if("function"==typeof i){var a=o[c];n=i.call(e,a),o.splice(c,1),c--}return n})),t.formatArgs.call(e,o),(r.log||t.log||console.log.bind(console)).apply(e,o)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),r.destroy=i,"function"==typeof t.init&&t.init(r),t.instances.push(r),r}function i(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var n;t.save(e),t.names=[],t.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var a=t.instances[n];a.enabled=t.enabled(a.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(59),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t){var n=1e3,r=6e4,i=36e5,a=24*i;function o(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,t){t=t||{};var s,c=void 0===e?"undefined":(0,R.default)(e);if("string"===c&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var o=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"days":case"day":case"d":return o*a;case"hours":case"hour":case"hrs":case"hr":case"h":return o*i;case"minutes":case"minute":case"mins":case"min":case"m":return o*r;case"seconds":case"second":case"secs":case"sec":case"s":return o*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(e);if("number"===c&&!1===isNaN(e))return t.long?o(s=e,a,"day")||o(s,i,"hour")||o(s,r,"minute")||o(s,n,"second")||s+" ms":function(e){return e>=a?Math.round(e/a)+"d":e>=i?Math.round(e/i)+"h":e>=r?Math.round(e/r)+"m":e>=n?Math.round(e/n)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+(0,x.default)(e))}},function(e,t,n){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t);return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,n){var r=n(28),i=n(29),a=Object.prototype.toString,o="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===a.call(Blob),s="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===a.call(File);t.deconstructPacket=function(e){var t=[],n=e.data,a=e;return a.data=function e(t,n){if(!t)return t;if(i(t)){var a={_placeholder:!0,num:n.length};return n.push(t),a}if(r(t)){for(var o=new Array(t.length),s=0;s<t.length;s++)o[s]=e(t[s],n);return o}if("object"==(void 0===t?"undefined":(0,R.default)(t))&&!(t instanceof Date)){for(var c in o={},t)o[c]=e(t[c],n);return o}return t}(n,t),a.attachments=t.length,{packet:a,buffers:t}},t.reconstructPacket=function(e,t){return e.data=function e(t,n){if(!t)return t;if(t&&t._placeholder)return n[t.num];if(r(t))for(var i=0;i<t.length;i++)t[i]=e(t[i],n);else if("object"==(void 0===t?"undefined":(0,R.default)(t)))for(var a in t)t[a]=e(t[a],n);return t}(e.data,t),e.attachments=void 0,e},t.removeBlobs=function(e,t){var n=0,a=e;!function e(c,u,l){if(!c)return c;if(o&&c instanceof Blob||s&&c instanceof File){n++;var d=new FileReader;d.onload=function(){l?l[u]=this.result:a=this.result,--n||t(a)},d.readAsArrayBuffer(c)}else if(r(c))for(var f=0;f<c.length;f++)e(c[f],f,c);else if("object"==(void 0===c?"undefined":(0,R.default)(c))&&!i(c))for(var p in c)e(c[p],p,c)}(a),n||t(a)}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==("undefined"==typeof window?"undefined":(0,R.default)(window))&&(n=window)}e.exports=n},function(e,t,n){t.byteLength=function(e){var t=u(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=u(e),o=r[0],s=r[1],c=new a(3*(o+s)/4-s),l=0,d=s>0?o-4:o;for(n=0;n<d;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;return 2===s&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,c[l++]=255&t),1===s&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t),c},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,a=[],o=0,s=n-i;o<s;o+=16383)a.push(l(e,o,o+16383>s?s:o+16383));return 1===i?(t=e[n-1],a.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],a.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),a.join("")};for(var r=[],i=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=o.length;s<c;++s)r[s]=o[s],i[o.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var i,a,o=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(r[(a=i)>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var a,o,s=8*i-r-1,c=(1<<s)-1,u=c>>1,l=-7,d=n?i-1:0,f=n?-1:1,p=e[t+d];for(d+=f,a=p&(1<<-l)-1,p>>=-l,l+=s;l>0;a=256*a+e[t+d],d+=f,l-=8);for(o=a&(1<<-l)-1,a>>=-l,l+=r;l>0;o=256*o+e[t+d],d+=f,l-=8);if(0===a)a=1-u;else{if(a===c)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,r),a-=u}return(p?-1:1)*o*Math.pow(2,a-r)},t.write=function(e,t,n,r,i,a){var o,s,c,u=8*a-i-1,l=(1<<u)-1,d=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:a-1,h=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-o))<1&&(o--,c*=2),(t+=o+d>=1?f/c:f*Math.pow(2,1-d))*c>=2&&(o++,c/=2),o+d>=l?(s=0,o=l):o+d>=1?(s=(t*c-1)*Math.pow(2,i),o+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;e[n+p]=255&s,p+=h,s/=256,i-=8);for(o=o<<i|s,u+=i;u>0;e[n+p]=255&o,p+=h,o/=256,u-=8);e[n+p-h]|=128*m}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){e.exports=n(67),e.exports.parser=n(9)},function(e,t,n){var r=n(31),i=n(24),a=n(16)("engine.io-client:socket"),o=n(35),s=n(9),c=n(27),u=n(14);function l(e,t){if(!(this instanceof l))return new l(e,t);t=t||{},e&&"object"==(void 0===e?"undefined":(0,R.default)(e))&&(t=e,e=null),e?(e=c(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=c(t.host).host),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=u.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.withCredentials=!1!==t.withCredentials,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=void 0===t.rejectUnauthorized||t.rejectUnauthorized,this.forceNode=!!t.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"==typeof self||this.isReactNative)&&(t.extraHeaders&&(0,_.default)(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}e.exports=l,l.priorWebsocketSuccess=!1,i(l.prototype),l.protocol=s.protocol,l.Socket=l,l.Transport=n(23),l.transports=n(31),l.parser=n(9),l.prototype.createTransport=function(e){a('creating transport "%s"',e);var t=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(this.query);t.EIO=s.protocol,t.transport=e;var n=this.transportOptions[e]||{};return this.id&&(t.sid=this.id),new r[e]({query:t,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,withCredentials:n.withCredentials||this.withCredentials,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0,isReactNative:this.isReactNative})},l.prototype.open=function(){var e;if(this.rememberUpgrade&&l.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout((function(){t.emit("error","No transports available")}),0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},l.prototype.setTransport=function(e){a("setting transport %s",e.name);var t=this;this.transport&&(a("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",(function(){t.onDrain()})).on("packet",(function(e){t.onPacket(e)})).on("error",(function(e){t.onError(e)})).on("close",(function(){t.onClose("transport close")}))},l.prototype.probe=function(e){a('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),n=!1,r=this;function i(){if(r.onlyBinaryUpgrades){var i=!this.supportsBinary&&r.transport.supportsBinary;n=n||i}n||(a('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",(function(i){if(!n)if("pong"===i.type&&"probe"===i.data){if(a('probe transport "%s" pong',e),r.upgrading=!0,r.emit("upgrading",t),!t)return;l.priorWebsocketSuccess="websocket"===t.name,a('pausing current transport "%s"',r.transport.name),r.transport.pause((function(){n||"closed"!==r.readyState&&(a("changing transport and sending upgrade packet"),f(),r.setTransport(t),t.send([{type:"upgrade"}]),r.emit("upgrade",t),t=null,r.upgrading=!1,r.flush())}))}else{a('probe transport "%s" failed',e);var o=new Error("probe error");o.transport=t.name,r.emit("upgradeError",o)}})))}function o(){n||(n=!0,f(),t.close(),t=null)}function s(n){var i=new Error("probe error: "+n);i.transport=t.name,o(),a('probe transport "%s" failed because of error: %s',e,n),r.emit("upgradeError",i)}function c(){s("transport closed")}function u(){s("socket closed")}function d(e){t&&e.name!==t.name&&(a('"%s" works - aborting "%s"',e.name,t.name),o())}function f(){t.removeListener("open",i),t.removeListener("error",s),t.removeListener("close",c),r.removeListener("close",u),r.removeListener("upgrading",d)}l.priorWebsocketSuccess=!1,t.once("open",i),t.once("error",s),t.once("close",c),this.once("close",u),this.once("upgrading",d),t.open()},l.prototype.onOpen=function(){if(a("socket open"),this.readyState="open",l.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){a("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},l.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(a('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else a('packet received with socket readyState "%s"',this.readyState)},l.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},l.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout((function(){"closed"!==t.readyState&&t.onClose("ping timeout")}),e||t.pingInterval+t.pingTimeout)},l.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout((function(){a("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)}),e.pingInterval)},l.prototype.ping=function(){var e=this;this.sendPacket("ping",(function(){e.emit("ping")}))},l.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},l.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(a("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},l.prototype.write=l.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},l.prototype.sendPacket=function(e,t,n,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var i={type:e,data:t,options:n};this.emit("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}},l.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var e=this;this.writeBuffer.length?this.once("drain",(function(){this.upgrading?r():t()})):this.upgrading?r():t()}function t(){e.onClose("forced close"),a("socket closing - telling transport to close"),e.transport.close()}function n(){e.removeListener("upgrade",n),e.removeListener("upgradeError",n),t()}function r(){e.once("upgrade",n),e.once("upgradeError",n)}return this},l.prototype.onError=function(e){a("socket error %j",e),l.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},l.prototype.onClose=function(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(a('socket close with reason: "%s"',e),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)},l.prototype.filterUpgrades=function(e){for(var t=[],n=0,r=e.length;n<r;n++)~o(this.transports,e[n])&&t.push(e[n]);return t}},function(e,t){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},function(e,t,n){var r=n(21),i=n(32),a=n(24),o=n(15),s=n(16)("engine.io-client:polling-xhr"),c=n(22);function u(){}function l(e){if(i.call(this,e),this.requestTimeout=e.requestTimeout,this.extraHeaders=e.extraHeaders,"undefined"!=typeof location){var t="https:"===location.protocol,n=location.port;n||(n=t?443:80),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||n!==e.port,this.xs=e.secure!==t}}function d(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}function f(){for(var e in d.requests)d.requests.hasOwnProperty(e)&&d.requests[e].abort()}e.exports=l,e.exports.Request=d,o(l,i),l.prototype.supportsBinary=!0,l.prototype.request=function(e){return(e=e||{}).uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.withCredentials=this.withCredentials,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new d(e)},l.prototype.doWrite=function(e,t){var n="string"!=typeof e&&void 0!==e,r=this.request({method:"POST",data:e,isBinary:n}),i=this;r.on("success",t),r.on("error",(function(e){i.onError("xhr post error",e)})),this.sendXhr=r},l.prototype.doPoll=function(){s("xhr poll");var e=this.request(),t=this;e.on("data",(function(e){t.onData(e)})),e.on("error",(function(e){t.onError("xhr poll error",e)})),this.pollXhr=e},a(d.prototype),d.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new r(e),n=this;try{s("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var i in t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(i)&&t.setRequestHeader(i,this.extraHeaders[i])}catch(e){}if("POST"===this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{t.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in t&&(t.withCredentials=this.withCredentials),this.requestTimeout&&(t.timeout=this.requestTimeout),this.hasXDR()?(t.onload=function(){n.onLoad()},t.onerror=function(){n.onError(t.responseText)}):t.onreadystatechange=function(){if(2===t.readyState)try{var e=t.getResponseHeader("Content-Type");(n.supportsBinary&&"application/octet-stream"===e||"application/octet-stream; charset=UTF-8"===e)&&(t.responseType="arraybuffer")}catch(e){}4===t.readyState&&(200===t.status||1223===t.status?n.onLoad():setTimeout((function(){n.onError("number"==typeof t.status?t.status:0)}),0))},s("xhr data %s",this.data),t.send(this.data)}catch(e){return void setTimeout((function(){n.onError(e)}),0)}"undefined"!=typeof document&&(this.index=d.requestsCount++,d.requests[this.index]=this)},d.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},d.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},d.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},d.prototype.cleanup=function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=u:this.xhr.onreadystatechange=u,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete d.requests[this.index],this.xhr=null}},d.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type")}catch(e){}e=("application/octet-stream"===t||"application/octet-stream; charset=UTF-8"===t)&&this.xhr.response||this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},d.prototype.hasXDR=function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR},d.prototype.abort=function(){this.cleanup()},d.requestsCount=0,d.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",f):"function"==typeof addEventListener&&addEventListener("onpagehide"in c?"pagehide":"unload",f,!1))},function(e,t){e.exports=_.default||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var r in e)n.call(e,r)&&t.push(r);return t}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t){e.exports=function(e,t,n){var r=e.byteLength;if(t=t||0,n=n||r,e.slice)return e.slice(t,n);if(t<0&&(t+=r),n<0&&(n+=r),n>r&&(n=r),t>=r||t>=n||0===r)return new ArrayBuffer(0);for(var i=new Uint8Array(e),a=new Uint8Array(n-t),o=t,s=0;o<n;o++,s++)a[s]=i[o];return a.buffer}},function(e,t){function n(){}e.exports=function(e,t,r){var i=!1;return r=r||n,a.count=e,0===e?t():a;function a(e,n){if(a.count<=0)throw new Error("after called too many times");--a.count,e?(i=!0,t(e),t=r):0!==a.count||i||t(null,n)}}},function(e,t){
/*! https://mths.be/utf8js v2.1.2 by @mathias */
var n,r,i,a=String.fromCharCode;function o(e){for(var t,n,r=[],i=0,a=e.length;i<a;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<a?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function s(e,t){if(e>=55296&&e<=57343){if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function c(e,t){return a(e>>t&63|128)}function u(e,t){if(0==(4294967168&e))return a(e);var n="";return 0==(4294965248&e)?n=a(e>>6&31|192):0==(4294901760&e)?(s(e,t)||(e=65533),n=a(e>>12&15|224),n+=c(e,6)):0==(4292870144&e)&&(n=a(e>>18&7|240),n+=c(e,12),n+=c(e,6)),n+a(63&e|128)}function l(){if(i>=r)throw Error("Invalid byte index");var e=255&n[i];if(i++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function d(e){var t,a;if(i>r)throw Error("Invalid byte index");if(i==r)return!1;if(t=255&n[i],i++,0==(128&t))return t;if(192==(224&t)){if((a=(31&t)<<6|l())>=128)return a;throw Error("Invalid continuation byte")}if(224==(240&t)){if((a=(15&t)<<12|l()<<6|l())>=2048)return s(a,e)?a:65533;throw Error("Invalid continuation byte")}if(240==(248&t)&&(a=(7&t)<<18|l()<<12|l()<<6|l())>=65536&&a<=1114111)return a;throw Error("Invalid UTF-8 detected")}e.exports={version:"2.1.2",encode:function(e,t){for(var n=!1!==(t=t||{}).strict,r=o(e),i=r.length,a=-1,s="";++a<i;)s+=u(r[a],n);return s},decode:function(e,t){var s=!1!==(t=t||{}).strict;n=o(e),r=n.length,i=0;for(var c,u=[];!1!==(c=d(s));)u.push(c);return function(e){for(var t,n=e.length,r=-1,i="";++r<n;)(t=e[r])>65535&&(i+=a((t-=65536)>>>10&1023|55296),t=56320|1023&t),i+=a(t);return i}(u)}}},function(e,t){!function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256),r=0;r<e.length;r++)n[e.charCodeAt(r)]=r;t.encode=function(t){var n,r=new Uint8Array(t),i=r.length,a="";for(n=0;n<i;n+=3)a+=e[r[n]>>2],a+=e[(3&r[n])<<4|r[n+1]>>4],a+=e[(15&r[n+1])<<2|r[n+2]>>6],a+=e[63&r[n+2]];return i%3==2?a=a.substring(0,a.length-1)+"=":i%3==1&&(a=a.substring(0,a.length-2)+"=="),a},t.decode=function(e){var t,r,i,a,o,s=.75*e.length,c=e.length,u=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var l=new ArrayBuffer(s),d=new Uint8Array(l);for(t=0;t<c;t+=4)r=n[e.charCodeAt(t)],i=n[e.charCodeAt(t+1)],a=n[e.charCodeAt(t+2)],o=n[e.charCodeAt(t+3)],d[u++]=r<<2|i>>4,d[u++]=(15&i)<<4|a>>2,d[u++]=(3&a)<<6|63&o;return l}}()},function(e,t){var n=void 0!==n?n:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,r=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),i=r&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),a=n&&n.prototype.append&&n.prototype.getBlob;function o(e){return e.map((function(e){if(e.buffer instanceof ArrayBuffer){var t=e.buffer;if(e.byteLength!==t.byteLength){var n=new Uint8Array(e.byteLength);n.set(new Uint8Array(t,e.byteOffset,e.byteLength)),t=n.buffer}return t}return e}))}function s(e,t){t=t||{};var r=new n;return o(e).forEach((function(e){r.append(e)})),t.type?r.getBlob(t.type):r.getBlob()}function c(e,t){return new Blob(o(e),t||{})}"undefined"!=typeof Blob&&(s.prototype=Blob.prototype,c.prototype=Blob.prototype),e.exports=r?i?Blob:c:a?s:void 0},function(e,t,n){e.exports=function(e){function t(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){var n=void 0;function o(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];if(o.enabled){var a=o,s=Number(new Date),c=s-(n||s);a.diff=c,a.prev=n,a.curr=s,n=s,t[0]=r.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var u=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(function(e,n){if("%%"===e)return e;u++;var i=r.formatters[n];if("function"==typeof i){var o=t[u];e=i.call(a,o),t.splice(u,1),u--}return e})),r.formatArgs.call(a,t),(a.log||r.log).apply(a,t)}}return o.namespace=e,o.enabled=r.enabled(e),o.useColors=r.useColors(),o.color=t(e),o.destroy=i,o.extend=a,"function"==typeof r.init&&r.init(o),r.instances.push(o),o}function i(){var e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function a(e,t){var n=r(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(e){return e instanceof Error?e.stack||e.message:e},r.disable=function(){var e=[].concat((0,p.default)(r.names.map(o)),(0,p.default)(r.skips.map(o).map((function(e){return"-"+e})))).join(",");return r.enable(""),e},r.enable=function(e){var t=void 0;r.save(e),r.names=[],r.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){var a=r.instances[t];a.enabled=r.enabled(a.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;var t=void 0,n=void 0;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=n(78),(0,_.default)(e).forEach((function(t){r[t]=e[t]})),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}},function(e,t){var n=1e3,r=6e4,i=36e5,a=24*i;function o(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}e.exports=function(e,t){t=t||{};var s=void 0===e?"undefined":(0,R.default)(e);if("string"===s&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var o=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"weeks":case"week":case"w":return 6048e5*o;case"days":case"day":case"d":return o*a;case"hours":case"hour":case"hrs":case"hr":case"h":return o*i;case"minutes":case"minute":case"mins":case"min":case"m":return o*r;case"seconds":case"second":case"secs":case"sec":case"s":return o*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(e);if("number"===s&&isFinite(e))return t.long?function(e){var t=Math.abs(e);return t>=a?o(e,t,a,"day"):t>=i?o(e,t,i,"hour"):t>=r?o(e,t,r,"minute"):t>=n?o(e,t,n,"second"):e+" ms"}(e):function(e){var t=Math.abs(e);return t>=a?Math.round(e/a)+"d":t>=i?Math.round(e/i)+"h":t>=r?Math.round(e/r)+"m":t>=n?Math.round(e/n)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+(0,x.default)(e))}},function(e,t,n){var r=n(32),i=n(15),a=n(22);e.exports=l;var o,s=/\n/g,c=/\\n/g;function u(){}function l(e){r.call(this,e),this.query=this.query||{},o||(o=a.___eio=a.___eio||[]),this.index=o.length;var t=this;o.push((function(e){t.onData(e)})),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",(function(){t.script&&(t.script.onerror=u)}),!1)}i(l,r),l.prototype.supportsBinary=!1,l.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),r.prototype.doClose.call(this)},l.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)}),100)},l.prototype.doWrite=function(e,t){var n=this;if(!this.form){var r,i=document.createElement("form"),a=document.createElement("textarea"),o=this.iframeId="eio_iframe_"+this.index;i.className="socketio",i.style.position="absolute",i.style.top="-1000px",i.style.left="-1000px",i.target=o,i.method="POST",i.setAttribute("accept-charset","utf-8"),a.name="d",i.appendChild(a),document.body.appendChild(i),this.form=i,this.area=a}function u(){l(),t()}function l(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(e){n.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+n.iframeId+'">';r=document.createElement(e)}catch(e){(r=document.createElement("iframe")).name=n.iframeId,r.src="javascript:0"}r.id=n.iframeId,n.form.appendChild(r),n.iframe=r}this.form.action=this.uri(),l(),e=e.replace(c,"\\\n"),this.area.value=e.replace(s,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===n.iframe.readyState&&u()}:this.iframe.onload=u}},function(e,t,n){(function(t){var r,i,a=n(23),o=n(9),s=n(14),c=n(15),u=n(34),l=n(16)("engine.io-client:websocket");if("undefined"!=typeof WebSocket?r=WebSocket:"undefined"!=typeof self&&(r=self.WebSocket||self.MozWebSocket),"undefined"==typeof window)try{i=n(81)}catch(e){}var d=r||i;function f(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=r&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(d=i),a.call(this,e)}e.exports=f,c(f,a),f.prototype.name="websocket",f.prototype.supportsBinary=!0,f.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=this.protocols,n={};this.isReactNative||(n.agent=this.agent,n.perMessageDeflate=this.perMessageDeflate,n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized),this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?t?new d(e,t):new d(e):new d(e,t,n)}catch(e){return this.emit("error",e)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},f.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},f.prototype.write=function(e){var n=this;this.writable=!1;for(var r=e.length,i=0,a=r;i<a;i++)!function(e){o.encodePacket(e,n.supportsBinary,(function(i){if(!n.usingBrowserWebSocket){var a={};e.options&&(a.compress=e.options.compress),n.perMessageDeflate&&("string"==typeof i?t.byteLength(i):i.length)<n.perMessageDeflate.threshold&&(a.compress=!1)}try{n.usingBrowserWebSocket?n.ws.send(i):n.ws.send(i,a)}catch(e){l("websocket closed before onclose event")}--r||(n.emit("flush"),setTimeout((function(){n.writable=!0,n.emit("drain")}),0))}))}(e[i])},f.prototype.onClose=function(){a.prototype.onClose.call(this)},f.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},f.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=u()),this.supportsBinary||(e.b64=1),(e=s.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e},f.prototype.check=function(){return!(!d||"__initialize"in d&&this.name===f.prototype.name)}}).call(this,n(20).Buffer)},function(e,t){},function(e,t){e.exports=function(e,t){for(var n=[],r=(t=t||0)||0;r<e.length;r++)n[r-t]=e[r];return n}},function(e,t){function n(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=n,n.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(e){this.ms=e},n.prototype.setMax=function(e){this.max=e},n.prototype.setJitter=function(e){this.jitter=e}},function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=h.default))((function(i,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof P.default&&(a[s.default]=function(){return this}),a;function c(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.LibMediasoupClient=void 0;var a=n(85),o=new(n(8).Logger)("LibMediasoupClient"),c=function(){function e(){this.sendTransportOptions=void 0}return e.prototype.init=function(e){return this.localUserProducerList=new g.default,this.remoteUserConsumerList=new g.default,this.session=e,{ret:0}},e.prototype.destroy=function(){var e,t;this.session=null,this.device=null,null===(e=this.sendTransport)||void 0===e||e.close(),null===(t=this.recvTransport)||void 0===t||t.close(),this.localUserProducerList.clear(),this.remoteUserConsumerList.forEach((function(e,t){e.consumerList.clear()})),this.remoteUserConsumerList.clear()},e.prototype.loadDevice=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:this.device=new a.Device,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.device.load({routerRtpCapabilities:e})];case 2:return t.sent(),[3,4];case 3:return t.sent(),o.error("browser not supported"),[2,!1];case 4:return[2,!0]}}))}))},e.prototype.createSendTransport=function(e){return r(this,void 0,void 0,(function(){var t=this;return i(this,(function(n){return this.sendTransportOptions=e,o.info("createSendTransportåæ° ",e),this.sendTransport=this.device.createSendTransport(e),this.sendTransport.on("connect",(function(e,n,a){var s=e.dtlsParameters;return r(t,void 0,void 0,(function(){var e,t;return i(this,(function(r){switch(r.label){case 0:o.info("produce_connectè¯·æ±"),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.session.produce_connect(s)];case 2:return e=r.sent(),o.info("produce_connectè¯·æ±æå ",e),n(),[3,4];case 3:return t=r.sent(),o.info("produce_connectè¯·æ±å¤±è´¥ ",t),a(),[3,4];case 4:return[2]}}))}))})),this.sendTransport.on("produce",(function(e,n,a){var s=e.kind,c=e.rtpParameters,u=e.appData;return r(t,void 0,void 0,(function(){var e,t,r,l,d;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),o.info("çå¬produce"),e={},t=u,"video"===s?(r=t.getSettings(),e.width=r.width,e.height=r.height,e.framerate=r.frameRate,e.bitrate=c.encodings[0].maxBitrate,o.info("å½åç ç ",e.bitrate)):"audio"===s&&(r=t.getSettings(),e.channel=r.channelCount,e.samplerate=r.sampleRate,e.samplebit=r.sampleSize),[4,this.session.produce(s,c,e)];case 1:return l=i.sent(),o.info("è¿ç«¯åå»ºproduceæå ",l),n({id:l.producerId}),[3,3];case 2:return d=i.sent(),a(d),o.info("è¿ç«¯åå»ºproduceå¤±è´¥ ",d),[3,3];case 3:return[2]}}))}))})),this.sendTransport.on("connectionstatechange",(function(e){return r(t,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:switch(e){case"new":return[3,1];case"connecting":return[3,2];case"connected":return[3,3];case"failed":return[3,4];case"disconnected":return[3,5];case"close":return[3,12]}return[3,13];case 1:return o.info("send transport state: new"),[3,14];case 2:return o.info("send transport state: connecting"),[3,14];case 3:return o.info("send transport state: connected"),[3,14];case 4:return o.info("send transport state: failed"),this.sendTransport.close(),[3,14];case 5:return o.info("send transport state: disconnected"),this.sendTransportOptions&&this.sendTransportOptions.iceParameters?[4,this.session.restartIce(1)]:[3,11];case 6:return 0!==(t=n.sent()).ret?[3,10]:t.iceParameters?[4,this.sendTransport.restartIce({iceParameters:t.iceParameters})]:[3,8];case 7:return n.sent(),[3,9];case 8:o.error("send transport restart ice paramter invalidate,iceParameter:"+t.iceParameters),n.label=9;case 9:return[3,11];case 10:o.error("send transport restart ice fail, ret:"+t.ret),n.label=11;case 11:return[3,14];case 12:return o.info("send transport state: close"),[3,14];case 13:return[3,14];case 14:return[2]}}))}))})),[2]}))}))},e.prototype.createRecvTransport=function(e){return r(this,void 0,void 0,(function(){var t=this;return i(this,(function(n){return this.recvTransportOptions=e,this.recvTransport=this.device.createRecvTransport(e),this.recvTransport.on("connect",(function(e,n,a){var s=e.dtlsParameters;return r(t,void 0,void 0,(function(){var e,t;return i(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.session.cosume_connect(s)];case 1:return e=r.sent(),n(),o.info("cosume_connect ",e),[3,3];case 2:return t=r.sent(),a(),o.info("cosume_connect ",t),[3,3];case 3:return[2]}}))}))})),this.recvTransport.on("connectionstatechange",(function(e){return r(t,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:switch(e){case"new":return[3,1];case"connecting":return[3,2];case"connected":return[3,3];case"failed":return[3,4];case"disconnected":return[3,5];case"close":return[3,12]}return[3,13];case 1:return o.info("recv transport state: new"),[3,14];case 2:return o.info("recv transport state: connecting"),[3,14];case 3:return o.info("recv transport state: connected"),[3,14];case 4:return o.info("recv transport state: failed"),[3,14];case 5:return o.info("recv transport state: disconnected"),this.recvTransportOptions&&this.recvTransportOptions.iceParameters?[4,this.session.restartIce(2)]:[3,11];case 6:return 0!==(t=n.sent()).ret?[3,10]:t.iceParameters?[4,this.recvTransport.restartIce({iceParameters:t.iceParameters})]:[3,8];case 7:return n.sent(),[3,9];case 8:o.error("recv transport restart ice paramter invalidate,iceParameter:"+t.iceParameters),n.label=9;case 9:return[3,11];case 10:o.error("recv transport restart ice fail, ret:"+t.ret),n.label=11;case 11:return[3,14];case 12:return o.info("recv transport state: close"),[3,14];case 13:return[3,14];case 14:return[2]}}))}))})),[2]}))}))},e.prototype.publish=function(e,t,n){return r(this,void 0,void 0,(function(){var r,a,s,c;return i(this,(function(i){switch(i.label){case 0:if(o.info("publish "+e+" media, bitrate:"+n+"kbps"),"audio"===e||"docAudio"===e)r={track:t,codecOptions:{opusStereo:!0,opusDtx:!0},appData:t};else{if("video"!==e&&"docVideo"!==e)return o.warn("invalidate kind type: "+e),[2,{ret:-1}];if(!n)return[2,{ret:-1}];r={track:t,encodings:[{maxBitrate:n}],codecOptions:{videoGoogleStartBitrate:1e3},appData:t}}i.label=1;case 1:return i.trys.push([1,3,,4]),"",a="audio"===e||"docAudio"===e?"audio":"video",this.device.canProduce(a)?[4,this.sendTransport.produce(r)]:(o.error("brower capability has no overlap with gateway capability"),[2,{ret:-2}]);case 2:return(s=i.sent())?(this.localUserProducerList.set(e,new function(e,t){this.producer=e,this.producerParameter=t}(s,r)),[3,4]):(o.error("åå»º "+e+" produceå¤±è´¥, error: produce function return undefine"),[2,{ret:-2}]);case 3:return c=i.sent(),o.error("åå»º "+e+" produceå¤±è´¥, error:",c),[2,{ret:-2}];case 4:return[2,{ret:0}]}}))}))},e.prototype.unpublish=function(e,t){return void 0===t&&(t=!1),r(this,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return o.info("unpublish "+e+" media"),t?[4,this.session.close_produce(e)]:[3,2];case 1:0!==r.sent().ret&&o.warn("close server "+e+" produce fail"),r.label=2;case 2:return(n=this.localUserProducerList.get(e))&&n.producer?(n.producer.close(),this.localUserProducerList.delete(e),[2]):(o.info("have no "+e+" producerInfo in localProducerList"),[2])}}))}))},e.prototype.ReplaceTrack=function(e,t){return r(this,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return(n=this.localUserProducerList.get(e))&&n.producer?[4,n.producer.replaceTrack({track:t})]:(o.info("have no "+e+" producerInfo in localProducerList"),[2,!1]);case 1:return r.sent(),[2,!0]}}))}))},e.prototype.SetMaxBitrate=function(e,t){return r(this,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return(n=this.localUserProducerList.get(e))&&n.producer?[4,n.producer.setRtpEncodingParameters({maxBitrate:t})]:(o.info("have no "+e+" producerInfo in localProducerList"),[2,!1]);case 1:return r.sent(),[2,!0]}}))}))},e.prototype.subscribe=function(e,t){return r(this,void 0,void 0,(function(){var n,r,a,s,c,u;return i(this,(function(i){switch(i.label){case 0:return o.info("subscribe user:"+e+", media type:"+t),"audio"!==t&&"docAudio"!==t&&"video"!==t&&"docvideo"!==t?(o.error("subscribe user fail, invalidate kind:"+t),[2,{ret:-1}]):(n=this.device.rtpCapabilities,[4,this.session.consume(e,t,n)]);case 1:return 0!==(r=i.sent()).ret?(o.error("call gateway consume fail, error code:"+r.ret),[2,{ret:-2}]):(a={id:r.consumerId,producerId:r.producerId,kind:r.kind,rtpParameters:r.rtpParameters},[4,this.recvTransport.consume(a)]);case 2:return(s=i.sent())?((c=this.remoteUserConsumerList.get(e))||(c=new function(){this.consumerList=new g.default},this.remoteUserConsumerList.set(e,c)),(u=c.consumerList.get(t))||(u=new function(e,t){this.consumer=e,this.consumerParameter=t}(s,a)),c.consumerList.set(t,u),[2,{ret:0,track:s.track}]):(o.error("call transport consume fail, return undefined"),[2,{ret:-3}])}}))}))},e.prototype.resumeVideo=function(e,t){return r(this,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return"video"!==t&&"docVideo"!==t?(o.warn("invalidate kind type, kind: "+t),[2,{ret:-1}]):[4,this.session.consume_resume(e,t)];case 1:return 0!==(n=r.sent()).ret?(o.error("call consume_resume fail, error code: ",n.ret),[2,{ret:-2}]):[2,{ret:0}]}}))}))},e.prototype.unsubscribe=function(e,t,n){return void 0===n&&(n=!1),r(this,void 0,void 0,(function(){var r,a,s;return i(this,(function(i){switch(i.label){case 0:return o.info("unsubscribe user:"+e+", media type:"+t),"audio"!==t&&"docAudio"!==t&&"video"!==t&&"docvideo"!==t?(o.error("unsubscribe user fail, invalidate kind:"+t),[2]):n?[4,this.session.close_consume(e,t)]:[3,2];case 1:if(0!==(r=i.sent()).ret)return o.error("close server consumer fail, error code:"+r.ret),[2];i.label=2;case 2:return(a=this.remoteUserConsumerList.get(e))?(s=a.consumerList.get(t))&&s.consumer?(s.consumer.close(),a.consumerList.delete(t),0===a.consumerList.size&&this.remoteUserConsumerList.delete(e),[2,{ret:0}]):(o.warn("have no any consumer info, remote userId:"+e+",kind:"+t),[2]):(o.warn("have no any remote user consumer info, remote userId:"+e),[2])}}))}))},e}();t.LibMediasoupClient=c},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(41);t.Device=r.Device,t.detectDevice=r.detectDevice;var i=n(109);t.types=i,t.version="3.6.14";var a=n(25);t.parseScalabilityMode=a.parse},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||(0,T.default)(e,t,{enumerable:!0,get:r})},n.r=function(e){void 0!==P.default&&M.default&&(0,T.default)(e,M.default,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==(void 0===e?"undefined":(0,R.default)(e))&&e&&e.__esModule)return e;var r=(0,$.default)(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=90)}({17:function(e,t,n){t.__esModule=!0,t.default=void 0;var r=n(18),i=function(){function e(){}return e.getFirstMatch=function(e,t){var n=t.match(e);return n&&n.length>0&&n[1]||""},e.getSecondMatch=function(e,t){var n=t.match(e);return n&&n.length>1&&n[2]||""},e.matchAndReturnConst=function(e,t,n){if(e.test(t))return n},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,n,r){void 0===r&&(r=!1);var i=e.getVersionPrecision(t),a=e.getVersionPrecision(n),o=Math.max(i,a),s=0,c=e.map([t,n],(function(t){var n=o-e.getVersionPrecision(t),r=t+new Array(n+1).join(".0");return e.map(r.split("."),(function(e){return new Array(20-e.length).join("0")+e})).reverse()}));for(r&&(s=o-Math.min(i,a)),o-=1;o>=s;){if(c[0][o]>c[1][o])return 1;if(c[0][o]===c[1][o]){if(o===s)return 0;o-=1}else if(c[0][o]<c[1][o])return-1}},e.map=function(e,t){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n+=1)r.push(t(e[n]));return r},e.find=function(e,t){var n,r;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(n=0,r=e.length;n<r;n+=1){var i=e[n];if(t(i,n))return i}},e.assign=function(e){for(var t,n,r=e,i=arguments.length,a=new Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];if(o.default)return o.default.apply(Object,[e].concat(a));var c=function(){var e=a[t];"object"==(void 0===e?"undefined":(0,R.default)(e))&&null!==e&&(0,_.default)(e).forEach((function(t){r[t]=e[t]}))};for(t=0,n=a.length;t<n;t+=1)c();return e},e.getBrowserAlias=function(e){return r.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return r.BROWSER_MAP[e]||""},e}();t.default=i,e.exports=t.default},18:function(e,t,n){t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,i=(r=n(91))&&r.__esModule?r:{default:r},a=n(18),o=function(){function e(){}var t;return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw new Error("UserAgent should be a string");return new i.default(e,t)},e.parse=function(e){return new i.default(e).getResult()},(t=[{key:"BROWSER_MAP",get:function(){return a.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return a.ENGINE_MAP}},{key:"OS_MAP",get:function(){return a.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return a.PLATFORMS_MAP}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,T.default)(e,r.key,r)}}(e,t),e}();t.default=o,e.exports=t.default},91:function(e,t,n){t.__esModule=!0,t.default=void 0;var r=c(n(92)),i=c(n(93)),a=c(n(94)),o=c(n(95)),s=c(n(17));function c(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=s.default.find(r.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=s.default.find(i.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=s.default.find(a.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=s.default.find(o.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return s.default.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,n={},r=0,i={},a=0;if((0,_.default)(e).forEach((function(t){var o=e[t];"string"==typeof o?(i[t]=o,a+=1):"object"==(void 0===o?"undefined":(0,R.default)(o))&&(n[t]=o,r+=1)})),r>0){var o=(0,_.default)(n),c=s.default.find(o,(function(e){return t.isOS(e)}));if(c){var u=this.satisfies(n[c]);if(void 0!==u)return u}var l=s.default.find(o,(function(e){return t.isPlatform(e)}));if(l){var d=this.satisfies(n[l]);if(void 0!==d)return d}}if(a>0){var f=(0,_.default)(i),p=s.default.find(f,(function(e){return t.isBrowser(e,!0)}));if(void 0!==p)return this.compareVersion(i[p])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var n=this.getBrowserName().toLowerCase(),r=e.toLowerCase(),i=s.default.getBrowserTypeByAlias(r);return t&&i&&(r=i.toLowerCase()),r===n},t.compareVersion=function(e){var t=[0],n=e,r=!1,i=this.getBrowserVersion();if("string"==typeof i)return">"===e[0]||"<"===e[0]?(n=e.substr(1),"="===e[1]?(r=!0,n=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?n=e.substr(1):"~"===e[0]&&(r=!0,n=e.substr(1)),t.indexOf(s.default.compareVersions(i,n,r))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e){return this.isBrowser(e)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some((function(e){return t.is(e)}))},e}();t.default=u,e.exports=t.default},92:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},a=/version\/(\d+(\.?_?\d+)+)/i,o=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},n=i.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},n=i.default.getFirstMatch(a,e)||i.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},n=i.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},n=i.default.getFirstMatch(a,e)||i.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},n=i.default.getFirstMatch(a,e)||i.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},n=i.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},n=i.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},n=i.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},n=i.default.getFirstMatch(a,e)||i.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var t={name:"Opera Touch"},n=i.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},n=i.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},n=i.default.getFirstMatch(a,e)||i.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},n=i.default.getFirstMatch(a,e)||i.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},n=i.default.getFirstMatch(a,e)||i.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},n=i.default.getFirstMatch(a,e)||i.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},n=i.default.getFirstMatch(a,e)||i.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},n=i.default.getFirstMatch(a,e)||i.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},n=i.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},n=i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},n=i.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},n=i.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},n=i.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},n=i.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},n=i.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},n=i.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return n&&(t.version=n),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},n=i.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},n=i.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},n=i.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},n=i.default.getFirstMatch(a,e)||i.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},n=i.default.getFirstMatch(a,e)||i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},n=i.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},n=i.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},n=i.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},n=i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},n=i.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},n=i.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},n=i.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},n=i.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t={name:"Android Browser"},n=i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},n=i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},n=i.default.getFirstMatch(a,e);return n&&(t.version=n),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:i.default.getFirstMatch(t,e),version:i.default.getSecondMatch(t,e)}}}];t.default=o,e.exports=t.default},93:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},a=n(18),o=[{test:[/Roku\/DVP/],describe:function(e){var t=i.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:a.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=i.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:a.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=i.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),n=i.default.getWindowsVersionName(t);return{name:a.OS_MAP.Windows,version:t,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var t={name:a.OS_MAP.iOS},n=i.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return n&&(t.version=n),t}},{test:[/macintosh/i],describe:function(e){var t=i.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),n=i.default.getMacOSVersionName(t),r={name:a.OS_MAP.MacOS,version:t};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=i.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:a.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t=i.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),n=i.default.getAndroidVersionName(t),r={name:a.OS_MAP.Android,version:t};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=i.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),n={name:a.OS_MAP.WebOS};return t&&t.length&&(n.version=t),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=i.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||i.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||i.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:a.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=i.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:a.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=i.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:a.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:a.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:a.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=i.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:a.OS_MAP.PlayStation4,version:t}}}];t.default=o,e.exports=t.default},94:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},a=n(18),o=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=i.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",n={type:a.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(n.model=t),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:a.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:a.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:a.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:a.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:a.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:a.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),n=e.test(/like (ipod|iphone)/i);return t&&!n},describe:function(e){var t=i.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:a.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:a.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:a.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:a.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:a.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:a.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:a.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:a.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:a.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:a.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:a.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:a.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:a.PLATFORMS_MAP.tv}}}];t.default=o,e.exports=t.default},95:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},a=n(18),o=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:a.ENGINE_MAP.Blink};var t=i.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:a.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:a.ENGINE_MAP.Trident},n=i.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:a.ENGINE_MAP.Presto},n=i.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=e.test(/gecko/i),n=e.test(/like gecko/i);return t&&!n},describe:function(e){var t={name:a.ENGINE_MAP.Gecko},n=i.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:a.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:a.ENGINE_MAP.WebKit},n=i.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}}];t.default=o,e.exports=t.default}})},function(e,t,n){(function(r){t.log=function(){var e;return"object"==("undefined"==typeof console?"undefined":(0,R.default)(console))&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),this.useColors){var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&"%c"===e&&(i=++r)})),t.splice(i,0,n)}},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){var e=void 0;try{e=t.storage.getItem("debug")}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=n(88)(t),e.exports.formatters.j=function(e){try{return(0,x.default)(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this,n(11))},function(e,t,n){e.exports=function(e){function t(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){var n=void 0;function o(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];if(o.enabled){var a=o,s=Number(new Date),c=s-(n||s);a.diff=c,a.prev=n,a.curr=s,n=s,t[0]=r.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var u=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(function(e,n){if("%%"===e)return e;u++;var i=r.formatters[n];if("function"==typeof i){var o=t[u];e=i.call(a,o),t.splice(u,1),u--}return e})),r.formatArgs.call(a,t),(a.log||r.log).apply(a,t)}}return o.namespace=e,o.enabled=r.enabled(e),o.useColors=r.useColors(),o.color=t(e),o.destroy=i,o.extend=a,"function"==typeof r.init&&r.init(o),r.instances.push(o),o}function i(){var e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function a(e,t){var n=r(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(e){return e instanceof Error?e.stack||e.message:e},r.disable=function(){var e=[].concat((0,p.default)(r.names.map(o)),(0,p.default)(r.skips.map(o).map((function(e){return"-"+e})))).join(",");return r.enable(""),e},r.enable=function(e){var t=void 0;r.save(e),r.names=[],r.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){var a=r.instances[t];a.enabled=r.enabled(a.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;var t=void 0,n=void 0;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=n(89),(0,_.default)(e).forEach((function(t){r[t]=e[t]})),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}},function(e,t){var n=1e3,r=6e4,i=36e5,a=24*i;function o(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}e.exports=function(e,t){t=t||{};var s=void 0===e?"undefined":(0,R.default)(e);if("string"===s&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var o=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"weeks":case"week":case"w":return 6048e5*o;case"days":case"day":case"d":return o*a;case"hours":case"hour":case"hrs":case"hr":case"h":return o*i;case"minutes":case"minute":case"mins":case"min":case"m":return o*r;case"seconds":case"second":case"secs":case"sec":case"s":return o*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(e);if("number"===s&&isFinite(e))return t.long?function(e){var t=Math.abs(e);return t>=a?o(e,t,a,"day"):t>=i?o(e,t,i,"hour"):t>=r?o(e,t,r,"minute"):t>=n?o(e,t,n,"second"):e+" ms"}(e):function(e){var t=Math.abs(e);return t>=a?Math.round(e/a)+"d":t>=i?Math.round(e/i)+"h":t>=r?Math.round(e/r)+"m":t>=n?Math.round(e/n)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+(0,x.default)(e))}},function(e,t,n){var r=n(91)("h264-profile-level-id");r.log=console.info.bind(console),t.ProfileConstrainedBaseline=1,t.ProfileBaseline=2,t.ProfileMain=3,t.ProfileConstrainedHigh=4,t.ProfileHigh=5,t.Level1_b=0,t.Level1=10,t.Level1_1=11,t.Level1_2=12,t.Level1_3=13,t.Level2=20,t.Level2_1=21,t.Level2_2=22,t.Level3=30,t.Level3_1=31,t.Level3_2=32,t.Level4=40,t.Level4_1=41,t.Level4_2=42,t.Level5=50,t.Level5_1=51,t.Level5_2=52;var i=function e(t,n){(0,S.default)(this,e),this.profile=t,this.level=n};t.ProfileLevelId=i;var a=new i(1,31),o=function(){function e(t){(0,S.default)(this,e),this._mask=~u("x",t),this._maskedValue=u("1",t)}return(0,C.default)(e,[{key:"isMatch",value:function(e){return this._maskedValue===(e&this._mask)}}]),e}(),s=function e(t,n,r){(0,S.default)(this,e),this.profile_idc=t,this.profile_iop=n,this.profile=r},c=[new s(66,new o("x1xx0000"),1),new s(77,new o("1xxx0000"),1),new s(88,new o("11xx0000"),1),new s(66,new o("x0xx0000"),2),new s(88,new o("10xx0000"),2),new s(77,new o("0x0x0000"),3),new s(100,new o("00000000"),5),new s(100,new o("00001100"),4)];function u(e,t){return(t[0]===e)<<7|(t[1]===e)<<6|(t[2]===e)<<5|(t[3]===e)<<4|(t[4]===e)<<3|(t[5]===e)<<2|(t[6]===e)<<1|(t[7]===e)<<0}function l(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})["level-asymmetry-allowed"];return 1===e||"1"===e}t.parseProfileLevelId=function(e){if("string"!=typeof e||6!==e.length)return null;var t=parseInt(e,16);if(0===t)return null;var n=255&t,a=t>>8&255,o=t>>16&255,s=void 0;switch(n){case 11:s=0!=(16&a)?0:11;break;case 10:case 12:case 13:case 20:case 21:case 22:case 30:case 31:case 32:case 40:case 41:case 42:case 50:case 51:case 52:s=n;break;default:return r("parseProfileLevelId() | unrecognized level_idc:%s",n),null}var u=!0,l=!1,d=void 0;try{for(var f,p=(0,k.default)(c);!(u=(f=p.next()).done);u=!0){var h=f.value;if(o===h.profile_idc&&h.profile_iop.isMatch(a))return new i(h.profile,s)}}catch(e){l=!0,d=e}finally{try{!u&&p.return&&p.return()}finally{if(l)throw d}}return r("parseProfileLevelId() | unrecognized profile_idc/profile_iop combination"),null},t.profileLevelIdToString=function(e){if(0==e.level)switch(e.profile){case 1:return"42f00b";case 2:return"42100b";case 3:return"4d100b";default:return r("profileLevelIdToString() | Level 1_b not is allowed for profile:%s",e.profile),null}var t=void 0;switch(e.profile){case 1:t="42e0";break;case 2:t="4200";break;case 3:t="4d00";break;case 4:t="640c";break;case 5:t="6400";break;default:return r("profileLevelIdToString() | unrecognized profile:%s",e.profile),null}var n=e.level.toString(16);return 1===n.length&&(n="0"+n),""+t+n},t.parseSdpProfileLevelId=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})["profile-level-id"];return e?t.parseProfileLevelId(e):a},t.isSameProfile=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.parseSdpProfileLevelId(e),i=t.parseSdpProfileLevelId(n);return Boolean(r&&i&&r.profile===i.profile)},t.generateProfileLevelIdForAnswer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e["profile-level-id"]&&!n["profile-level-id"])return r("generateProfileLevelIdForAnswer() | no profile-level-id in local and remote params"),null;var a=t.parseSdpProfileLevelId(e),o=t.parseSdpProfileLevelId(n);if(!a)throw new TypeError("invalid local_profile_level_id");if(!o)throw new TypeError("invalid remote_profile_level_id");if(a.profile!==o.profile)throw new TypeError("H264 Profile mismatch");var s,c,u=l(e)&&l(n),d=a.level,f=function(e,t){return 0===e?10!==t&&0!==t:0===t?10!==e:e<t}(s=d,c=o.level)?s:c,p=u?d:f;return r("generateProfileLevelIdForAnswer() | result: [profile:%s, level:%s]",a.profile,p),t.profileLevelIdToString(new i(a.profile,p))}},function(e,t,n){(function(r){t.log=function(){var e;return"object"==("undefined"==typeof console?"undefined":(0,R.default)(console))&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),this.useColors){var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&"%c"===e&&(i=++r)})),t.splice(i,0,n)}},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){var e=void 0;try{e=t.storage.getItem("debug")}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=n(92)(t),e.exports.formatters.j=function(e){try{return(0,x.default)(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this,n(11))},function(e,t,n){e.exports=function(e){function t(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){var n=void 0;function o(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];if(o.enabled){var a=o,s=Number(new Date),c=s-(n||s);a.diff=c,a.prev=n,a.curr=s,n=s,t[0]=r.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var u=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(function(e,n){if("%%"===e)return e;u++;var i=r.formatters[n];if("function"==typeof i){var o=t[u];e=i.call(a,o),t.splice(u,1),u--}return e})),r.formatArgs.call(a,t),(a.log||r.log).apply(a,t)}}return o.namespace=e,o.enabled=r.enabled(e),o.useColors=r.useColors(),o.color=t(e),o.destroy=i,o.extend=a,"function"==typeof r.init&&r.init(o),r.instances.push(o),o}function i(){var e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function a(e,t){var n=r(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(e){return e instanceof Error?e.stack||e.message:e},r.disable=function(){var e=[].concat((0,p.default)(r.names.map(o)),(0,p.default)(r.skips.map(o).map((function(e){return"-"+e})))).join(",");return r.enable(""),e},r.enable=function(e){var t=void 0;r.save(e),r.names=[],r.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){var a=r.instances[t];a.enabled=r.enabled(a.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;var t=void 0,n=void 0;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=n(93),(0,_.default)(e).forEach((function(t){r[t]=e[t]})),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}},function(e,t){var n=1e3,r=6e4,i=36e5,a=24*i;function o(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}e.exports=function(e,t){t=t||{};var s=void 0===e?"undefined":(0,R.default)(e);if("string"===s&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var o=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"weeks":case"week":case"w":return 6048e5*o;case"days":case"day":case"d":return o*a;case"hours":case"hour":case"hrs":case"hr":case"h":return o*i;case"minutes":case"minute":case"mins":case"min":case"m":return o*r;case"seconds":case"second":case"secs":case"sec":case"s":return o*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(e);if("number"===s&&isFinite(e))return t.long?function(e){var t=Math.abs(e);return t>=a?o(e,t,a,"day"):t>=i?o(e,t,i,"hour"):t>=r?o(e,t,r,"minute"):t>=n?o(e,t,n,"second"):e+" ms"}(e):function(e){var t=Math.abs(e);return t>=a?Math.round(e/a)+"d":t>=i?Math.round(e/i)+"h":t>=r?Math.round(e/r)+"m":t>=n?Math.round(e/n)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+(0,x.default)(e))}},function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=h.default))((function(i,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AwaitQueue=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{ClosedErrorClass:Error,StoppedErrorClass:Error},n=t.ClosedErrorClass,r=t.StoppedErrorClass;(0,S.default)(this,e),this.closed=!1,this.pendingTasks=[],this.ClosedErrorClass=Error,this.StoppedErrorClass=Error,this.ClosedErrorClass=n,this.StoppedErrorClass=r}return(0,C.default)(e,[{key:"close",value:function(){if(!this.closed){this.closed=!0;var e=!0,t=!1,n=void 0;try{for(var r,i=(0,k.default)(this.pendingTasks);!(e=(r=i.next()).done);e=!0){var a=r.value;a.stopped=!0,a.reject(new this.ClosedErrorClass("AwaitQueue closed"))}}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}this.pendingTasks.length=0}}},{key:"push",value:function(e,t){return r(this,void 0,void 0,f.default.mark((function n(){var r=this;return f.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.closed){n.next=2;break}throw new this.ClosedErrorClass("AwaitQueue closed");case 2:if("function"==typeof e){n.next=4;break}throw new TypeError("given task is not a function");case 4:if(!e.name&&t)try{Object.defineProperty(e,"name",{value:t})}catch(e){}return n.abrupt("return",new h.default((function(n,i){var a={task:e,name:t,resolve:n,reject:i,stopped:!1};r.pendingTasks.push(a),1===r.pendingTasks.length&&r.next()})));case 6:case"end":return n.stop()}}),n,this)})))}},{key:"stop",value:function(){if(!this.closed){var e=!0,t=!1,n=void 0;try{for(var r,i=(0,k.default)(this.pendingTasks);!(e=(r=i.next()).done);e=!0){var a=r.value;a.stopped=!0,a.reject(new this.StoppedErrorClass("AwaitQueue stopped"))}}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}this.pendingTasks.length=0}}},{key:"dump",value:function(){return this.pendingTasks.map((function(e){return{task:e.task,name:e.name,stopped:e.stopped}}))}},{key:"next",value:function(){return r(this,void 0,void 0,f.default.mark((function e(){var t;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.pendingTasks[0],e.t0=t,!e.t0){e.next=7;break}return e.next=5,this.executeTask(t);case 5:this.pendingTasks.shift(),this.next();case 7:case"end":return e.stop()}}),e,this)})))}},{key:"executeTask",value:function(e){return r(this,void 0,void 0,f.default.mark((function t(){var n;return f.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.stopped){t.next=15;break}return t.prev=1,t.next=4,e.task();case 4:if(n=t.sent,!e.stopped){t.next=7;break}return t.abrupt("return");case 7:e.resolve(n),t.next=15;break;case 10:if(t.prev=10,t.t0=t.catch(1),!e.stopped){t.next=14;break}return t.abrupt("return");case 14:e.reject(t.t0);case 15:case"end":return t.stop()}}),t,this,[[1,10]])})))}},{key:"size",get:function(){return this.pendingTasks.length}}]),e}()},function(e,t,n){var o,s="object"==("undefined"==typeof Reflect?"undefined":(0,R.default)(Reflect))?Reflect:null,c=s&&"function"==typeof s.apply?s.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};o=s&&"function"==typeof s.ownKeys?s.ownKeys:a.default?function(e){return(0,i.default)(e).concat((0,a.default)(e))}:function(e){return(0,i.default)(e)};var u=r.default||function(e){return e!=e};function l(){l.init.call(this)}e.exports=l,e.exports.once=function(e,t){return new h.default((function(n,r){function i(){void 0!==a&&e.removeListener("error",a),n([].slice.call(arguments))}var a;"error"!==t&&(a=function(n){e.removeListener(t,i),r(n)},e.once("error",a)),e.once(t,i)}))},l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var d=10;function f(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+(void 0===e?"undefined":(0,R.default)(e)))}function p(e){return void 0===e._maxListeners?l.defaultMaxListeners:e._maxListeners}function m(e,t,n,r){var i,a,o,s;if(f(n),void 0===(a=e._events)?(a=e._events=(0,$.default)(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),o=a[t]),void 0===o)o=a[t]=n,++e._eventsCount;else if("function"==typeof o?o=a[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(i=p(e))>0&&o.length>i&&!o.warned){o.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=o.length,s=c,console&&console.warn&&console.warn(s)}return e}function v(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(r);return i.listener=n,r.wrapFn=i,i}function g(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):w(i,i.length)}function b(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function w(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return d},set:function(e){if("number"!=typeof e||e<0||u(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");d=e}}),l.init=function(){void 0!==this._events&&this._events!==(0,y.default)(this)._events||(this._events=(0,$.default)(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||u(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},l.prototype.getMaxListeners=function(){return p(this)},l.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var s=i[e];if(void 0===s)return!1;if("function"==typeof s)c(s,this,t);else{var u=s.length,l=w(s,u);for(n=0;n<u;++n)c(l[n],this,t)}return!0},l.prototype.addListener=function(e,t){return m(this,e,t,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(e,t){return m(this,e,t,!0)},l.prototype.once=function(e,t){return f(t),this.on(e,v(this,e,t)),this},l.prototype.prependOnceListener=function(e,t){return f(t),this.prependListener(e,v(this,e,t)),this},l.prototype.removeListener=function(e,t){var n,r,i,a,o;if(f(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=(0,$.default)(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,i=a;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,o||t)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=(0,$.default)(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=(0,$.default)(null):delete n[e]),this;if(0===arguments.length){var i,a=(0,_.default)(n);for(r=0;r<a.length;++r)"removeListener"!==(i=a[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=(0,$.default)(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},l.prototype.listeners=function(e){return g(this,e,!0)},l.prototype.rawListeners=function(e){return g(this,e,!1)},l.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):b.call(e,t)},l.prototype.listenerCount=b,l.prototype.eventNames=function(){return this._eventsCount>0?o(this._events):[]}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=n(0),a=n(1),s=n(2),c=n(6),u=n(17),l=n(5),d=n(7),p=n(25),h=new i.Logger("Chrome74"),v={OS:1024,MIS:1024},_=function(e){function t(){var e;return(0,S.default)(this,t),(e=(0,b.default)(this,(t.__proto__||(0,y.default)(t)).call(this)))._mapMidTransceiver=new g.default,e._sendStream=new MediaStream,e._hasDataChannelMediaSection=!1,e._nextSendSctpStreamId=0,e._transportReady=!1,e}return(0,w.default)(t,e),(0,C.default)(t,[{key:"close",value:function(){if(h.debug("close()"),this._pc)try{this._pc.close()}catch(e){}}},{key:"getNativeRtpCapabilities",value:function(){var e=(0,m.default)(f.default.mark((function e(){var t,n,i;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.debug("getNativeRtpCapabilities()"),t=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"}),e.prev=2,t.addTransceiver("audio"),t.addTransceiver("video"),e.next=6,t.createOffer();case 6:n=e.sent;try{t.close()}catch(e){}return i=r.parse(n.sdp),e.abrupt("return",c.extractRtpCapabilities({sdpObject:i}));case 12:e.prev=12,e.t0=e.catch(2);try{t.close()}catch(e){}throw e.t0;case 16:case"end":return e.stop()}}),e,this,[[2,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"getNativeSctpCapabilities",value:function(){var e=(0,m.default)(f.default.mark((function e(){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(h.debug("getNativeSctpCapabilities()"),{numStreams:v}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"run",value:function(e){var t=this,n=e.direction,r=e.iceParameters,i=e.iceCandidates,a=e.dtlsParameters,c=e.sctpParameters,u=e.iceServers,l=e.iceTransportPolicy,f=e.additionalSettings,p=e.proprietaryConstraints,m=e.extendedRtpCapabilities;h.debug("run()"),this._direction=n,this._remoteSdp=new d.RemoteSdp({iceParameters:r,iceCandidates:i,dtlsParameters:a,sctpParameters:c}),this._sendingRtpParametersByKind={audio:s.getSendingRtpParameters("audio",m),video:s.getSendingRtpParameters("video",m)},this._sendingRemoteRtpParametersByKind={audio:s.getSendingRemoteRtpParameters("audio",m),video:s.getSendingRemoteRtpParameters("video",m)},this._pc=new RTCPeerConnection((0,o.default)({iceServers:u||[],iceTransportPolicy:l||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"},f),p),this._pc.addEventListener("iceconnectionstatechange",(function(){switch(t._pc.iceConnectionState){case"checking":t.emit("@connectionstatechange","connecting");break;case"connected":case"completed":t.emit("@connectionstatechange","connected");break;case"failed":t.emit("@connectionstatechange","failed");break;case"disconnected":t.emit("@connectionstatechange","disconnected");break;case"closed":t.emit("@connectionstatechange","closed")}}))}},{key:"updateIceServers",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.debug("updateIceServers()"),(n=this._pc.getConfiguration()).iceServers=t,this._pc.setConfiguration(n);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"restartIce",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,r,i,a;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h.debug("restartIce()"),this._remoteSdp.updateIceParameters(t),!this._transportReady){e.next=24;break}if("send"!==this._direction){e.next=14;break}return e.next=4,this._pc.createOffer({iceRestart:!0});case 4:return n=e.sent,h.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",n),e.next=8,this._pc.setLocalDescription(n);case 8:return r={type:"answer",sdp:this._remoteSdp.getSdp()},h.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",r),e.next=12,this._pc.setRemoteDescription(r);case 12:e.next=24;break;case 14:return i={type:"offer",sdp:this._remoteSdp.getSdp()},h.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",i),e.next=18,this._pc.setRemoteDescription(i);case 18:return e.next=20,this._pc.createAnswer();case 20:return a=e.sent,h.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",a),e.next=24,this._pc.setLocalDescription(a);case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTransportStats",value:function(){var e=(0,m.default)(f.default.mark((function e(){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._pc.getStats());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"send",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,i,l,d,m,v,g,y,b,w,_,x,S,C,$,R,M,P=t.track,T=t.encodings,E=t.codecOptions,I=t.codec;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._assertSendDirection(),h.debug("send() [kind:%s, track.id:%s]",P.kind,P.id),T&&T.length>1&&T.forEach((function(e,t){e.rid="r"+t})),(n=a.clone(this._sendingRtpParametersByKind[P.kind])).codecs=s.reduceCodecs(n.codecs,I),(i=a.clone(this._sendingRemoteRtpParametersByKind[P.kind])).codecs=s.reduceCodecs(i.codecs,I),l=this._remoteSdp.getNextMediaSectionIdx(),d=this._pc.addTransceiver(P,{direction:"sendonly",streams:[this._sendStream],sendEncodings:T}),m=void 0,e.next=9,this._pc.createOffer();case 9:if(v=e.sent,g=r.parse(v.sdp),e.t0=this._transportReady,e.t0){e.next=15;break}return e.next=15,this._setupTransport({localDtlsRole:"server",localSdpObject:g});case 15:return y=!1,b=p.parse((T||[{}])[0].scalabilityMode),T&&1===T.length&&b.spatialLayers>1&&"video/vp9"===n.codecs[0].mimeType.toLowerCase()&&(h.debug("send() | enabling legacy simulcast for VP9 SVC"),y=!0,g=r.parse(v.sdp),m=g.media[l.idx],u.addLegacySimulcast({offerMediaObject:m,numStreams:b.spatialLayers}),v={type:"offer",sdp:r.write(g)}),h.debug("send() | calling pc.setLocalDescription() [offer:%o]",v),e.next=21,this._pc.setLocalDescription(v);case 21:if(w=d.mid,n.mid=w,g=r.parse(this._pc.localDescription.sdp),m=g.media[l.idx],n.rtcp.cname=c.getCname({offerMediaObject:m}),T?1===T.length?(_=u.getRtpEncodings({offerMediaObject:m}),(0,o.default)(_[0],T[0]),y&&(_=[_[0]]),n.encodings=_):n.encodings=T:n.encodings=u.getRtpEncodings({offerMediaObject:m}),!(n.encodings.length>1)||"video/vp8"!==n.codecs[0].mimeType.toLowerCase()&&"video/h264"!==n.codecs[0].mimeType.toLowerCase()){e.next=43;break}for(x=!0,S=!1,C=void 0,e.prev=27,$=(0,k.default)(n.encodings);!(x=(R=$.next()).done);x=!0)R.value.scalabilityMode="S1T3";e.next=35;break;case 31:e.prev=31,e.t1=e.catch(27),S=!0,C=e.t1;case 35:e.prev=35,e.prev=36,!x&&$.return&&$.return();case 38:if(e.prev=38,!S){e.next=41;break}throw C;case 41:return e.finish(38);case 42:return e.finish(35);case 43:return this._remoteSdp.send({offerMediaObject:m,reuseMid:l.reuseMid,offerRtpParameters:n,answerRtpParameters:i,codecOptions:E,extmapAllowMixed:!0}),M={type:"answer",sdp:this._remoteSdp.getSdp()},h.debug("send() | calling pc.setRemoteDescription() [answer:%o]",M),e.next=48,this._pc.setRemoteDescription(M);case 48:return this._mapMidTransceiver.set(w,d),e.abrupt("return",{localId:w,rtpParameters:n,rtpSender:d.sender});case 50:case"end":return e.stop()}}),e,this,[[27,31,35,43],[36,,38,42]])})));return function(t){return e.apply(this,arguments)}}()},{key:"stopSending",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,r,i;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),h.debug("stopSending() [localId:%s]",t),n=this._mapMidTransceiver.get(t)){e.next=4;break}throw new Error("associated RTCRtpTransceiver not found");case 4:return n.sender.replaceTrack(null),this._pc.removeTrack(n.sender),this._remoteSdp.closeMediaSection(n.mid),e.next=7,this._pc.createOffer();case 7:return r=e.sent,h.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),e.next=11,this._pc.setLocalDescription(r);case 11:return i={type:"answer",sdp:this._remoteSdp.getSdp()},h.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",i),e.next=15,this._pc.setRemoteDescription(i);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"replaceTrack",value:function(){var e=(0,m.default)(f.default.mark((function e(t,n){var r;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),n?h.debug("replaceTrack() [localId:%s, track.id:%s]",t,n.id):h.debug("replaceTrack() [localId:%s, no track]",t),r=this._mapMidTransceiver.get(t)){e.next=4;break}throw new Error("associated RTCRtpTransceiver not found");case 4:return e.next=6,r.sender.replaceTrack(n);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setMaxSpatialLayer",value:function(){var e=(0,m.default)(f.default.mark((function e(t,n){var r,i;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),h.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",t,n),r=this._mapMidTransceiver.get(t)){e.next=4;break}throw new Error("associated RTCRtpTransceiver not found");case 4:return(i=r.sender.getParameters()).encodings.forEach((function(e,t){e.active=t<=n})),e.next=8,r.sender.setParameters(i);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setRtpEncodingParameters",value:function(){var e=(0,m.default)(f.default.mark((function e(t,n){var r,i;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),h.debug("setRtpEncodingParameters() [localId:%s, params:%o]",t,n),r=this._mapMidTransceiver.get(t)){e.next=4;break}throw new Error("associated RTCRtpTransceiver not found");case 4:return(i=r.sender.getParameters()).encodings.forEach((function(e,t){i.encodings[t]=(0,o.default)((0,o.default)({},e),n)})),e.next=8,r.sender.setParameters(i);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getSenderStats",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),n=this._mapMidTransceiver.get(t)){e.next=4;break}throw new Error("associated RTCRtpTransceiver not found");case 4:return e.abrupt("return",n.sender.getStats());case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendDataChannel",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,i,a,o,s,c,u=t.ordered,l=t.maxPacketLifeTime,d=t.maxRetransmits,p=t.label,m=t.protocol,g=t.priority;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),n={negotiated:!0,id:this._nextSendSctpStreamId,ordered:u,maxPacketLifeTime:l,maxRetransmits:d,protocol:m,priority:g},h.debug("sendDataChannel() [options:%o]",n),i=this._pc.createDataChannel(p,n),this._nextSendSctpStreamId=++this._nextSendSctpStreamId%v.MIS,this._hasDataChannelMediaSection){e.next=23;break}return e.next=7,this._pc.createOffer();case 7:if(a=e.sent,o=r.parse(a.sdp),s=o.media.find((function(e){return"application"===e.type})),e.t0=this._transportReady,e.t0){e.next=14;break}return e.next=14,this._setupTransport({localDtlsRole:"server",localSdpObject:o});case 14:return h.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",a),e.next=17,this._pc.setLocalDescription(a);case 17:return this._remoteSdp.sendSctpAssociation({offerMediaObject:s}),c={type:"answer",sdp:this._remoteSdp.getSdp()},h.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",c),e.next=22,this._pc.setRemoteDescription(c);case 22:this._hasDataChannelMediaSection=!0;case 23:return e.abrupt("return",{dataChannel:i,sctpStreamParameters:{streamId:n.id,ordered:n.ordered,maxPacketLifeTime:n.maxPacketLifeTime,maxRetransmits:n.maxRetransmits}});case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"receive",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,i,a,o,s,u,l=t.trackId,d=t.kind,p=t.rtpParameters;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._assertRecvDirection(),h.debug("receive() [trackId:%s, kind:%s]",l,d),n=p.mid||String(this._mapMidTransceiver.size),this._remoteSdp.receive({mid:n,kind:d,offerRtpParameters:p,streamId:p.rtcp.cname,trackId:l}),i={type:"offer",sdp:this._remoteSdp.getSdp()},h.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",i),e.next=7,this._pc.setRemoteDescription(i);case 7:return e.next=9,this._pc.createAnswer();case 9:if(a=e.sent,o=r.parse(a.sdp),s=o.media.find((function(e){return String(e.mid)===n})),c.applyCodecParameters({offerRtpParameters:p,answerMediaObject:s}),a={type:"answer",sdp:r.write(o)},e.t0=this._transportReady,e.t0){e.next=17;break}return e.next=17,this._setupTransport({localDtlsRole:"client",localSdpObject:o});case 17:return h.debug("receive() | calling pc.setLocalDescription() [answer:%o]",a),e.next=20,this._pc.setLocalDescription(a);case 20:if(u=this._pc.getTransceivers().find((function(e){return e.mid===n}))){e.next=23;break}throw new Error("new RTCRtpTransceiver not found");case 23:return e.abrupt("return",(this._mapMidTransceiver.set(n,u),{localId:n,track:u.receiver.track,rtpReceiver:u.receiver}));case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"stopReceiving",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,r,i;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertRecvDirection(),h.debug("stopReceiving() [localId:%s]",t),n=this._mapMidTransceiver.get(t)){e.next=4;break}throw new Error("associated RTCRtpTransceiver not found");case 4:return this._remoteSdp.closeMediaSection(n.mid),r={type:"offer",sdp:this._remoteSdp.getSdp()},h.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),e.next=9,this._pc.setRemoteDescription(r);case 9:return e.next=11,this._pc.createAnswer();case 11:return i=e.sent,h.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",i),e.next=15,this._pc.setLocalDescription(i);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getReceiverStats",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertRecvDirection(),n=this._mapMidTransceiver.get(t)){e.next=4;break}throw new Error("associated RTCRtpTransceiver not found");case 4:return e.abrupt("return",n.receiver.getStats());case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"receiveDataChannel",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,i,a,o,s,c,u,l,d,p=t.sctpStreamParameters,m=t.label,v=t.protocol;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertRecvDirection(),n=p.streamId,i=p.ordered,a=p.maxPacketLifeTime,o=p.maxRetransmits,s={negotiated:!0,id:n,ordered:i,maxPacketLifeTime:a,maxRetransmits:o,protocol:v},h.debug("receiveDataChannel() [options:%o]",s),c=this._pc.createDataChannel(m,s),this._hasDataChannelMediaSection){e.next=21;break}return this._remoteSdp.receiveSctpAssociation(),u={type:"offer",sdp:this._remoteSdp.getSdp()},h.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",u),e.next=10,this._pc.setRemoteDescription(u);case 10:return e.next=12,this._pc.createAnswer();case 12:if(l=e.sent,this._transportReady){e.next=17;break}return d=r.parse(l.sdp),e.next=17,this._setupTransport({localDtlsRole:"client",localSdpObject:d});case 17:return h.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",l),e.next=20,this._pc.setLocalDescription(l);case 20:this._hasDataChannelMediaSection=!0;case 21:return e.abrupt("return",{dataChannel:c});case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_setupTransport",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,i=t.localDtlsRole,a=t.localSdpObject;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a||(a=r.parse(this._pc.localDescription.sdp)),(n=c.extractDtlsParameters({sdpObject:a})).role=i,this._remoteSdp.updateDtlsRole("client"===i?"server":"client"),e.next=6,this.safeEmitAsPromise("@connect",{dtlsParameters:n});case 6:this._transportReady=!0;case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_assertSendDirection",value:function(){if("send"!==this._direction)throw new Error('method can just be called for handlers with "send" direction')}},{key:"_assertRecvDirection",value:function(){if("recv"!==this._direction)throw new Error('method can just be called for handlers with "recv" direction')}},{key:"name",get:function(){return"Chrome74"}}],[{key:"createFactory",value:function(){return function(){return new t}}}]),t}(l.HandlerInterface);t.Chrome74=_},function(e,t,n){var r=function(e){return String(Number(e))===e?Number(e):e},i=function(e,t,n){var i=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:i&&!t[e.name]&&(t[e.name]={});var a=e.push?{}:i?t[e.name]:t;!function(e,t,n,i){if(i&&!n)t[i]=r(e[1]);else for(var a=0;a<n.length;a+=1)null!=e[a+1]&&(t[n[a]]=r(e[a+1]))}(n.match(e.reg),a,e.names,e.name),e.push&&t[e.push].push(a)},a=n(47),o=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(e){var t={},n=[],r=t;return e.split(/(\r\n|\r|\n)/).filter(o).forEach((function(e){var t=e[0],o=e.slice(2);"m"===t&&(n.push({rtp:[],fmtp:[]}),r=n[n.length-1]);for(var s=0;s<(a[t]||[]).length;s+=1){var c=a[t][s];if(c.reg.test(o))return i(c,r,o)}})),t.media=n,t};var s=function(e,t){var n=t.split(/=(.+)/,2);return 2===n.length?e[n[0]]=r(n[1]):1===n.length&&t.length>1&&(e[n[0]]=void 0),e};t.parseParams=function(e){return e.split(/;\s?/).reduce(s,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(e){return e.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(e){for(var t=[],n=e.split(" ").map(r),i=0;i<n.length;i+=3)t.push({component:n[i],ip:n[i+1],port:n[i+2]});return t},t.parseImageAttributes=function(e){return e.split(" ").map((function(e){return e.substring(1,e.length-1).split(",").reduce(s,{})}))},t.parseSimulcastStreamList=function(e){return e.split(";").map((function(e){return e.split(",").map((function(e){var t,n=!1;return"~"!==e[0]?t=r(e):(t=r(e.substring(1,e.length)),n=!0),{scid:t,paused:n}}))}))}},function(e,t,n){var r=n(47),i=/%[sdv%]/g,a=function(e){var t=1,n=arguments,r=n.length;return e.replace(i,(function(e){if(t>=r)return e;var i=n[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(i);case"%d":return Number(i);case"%v":return""}}))},o=function(e,t,n){var r=[e+"="+(t.format instanceof Function?t.format(t.push?n:n[t.name]):t.format)];if(t.names)for(var i=0;i<t.names.length;i+=1){var o=t.names[i];t.name?r.push(n[t.name][o]):r.push(n[t.names[i]])}else r.push(n[t.name]);return a.apply(null,r)},s=["v","o","s","i","u","e","p","c","b","t","r","z","a"],c=["i","c","b","a"];e.exports=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach((function(e){null==e.payloads&&(e.payloads="")}));var n=t.outerOrder||s,i=t.innerOrder||c,a=[];return n.forEach((function(t){r[t].forEach((function(n){n.name in e&&null!=e[n.name]?a.push(o(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach((function(e){a.push(o(t,n,e))}))}))})),e.media.forEach((function(e){a.push(o("m",r.m[0],e)),i.forEach((function(t){r[t].forEach((function(n){n.name in e&&null!=e[n.name]?a.push(o(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach((function(e){a.push(o(t,n,e))}))}))}))})),a.join("\r\n")+"\r\n"}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=function(){function e(t){var n=t.iceParameters,r=t.iceCandidates,i=t.dtlsParameters,a=t.planB,o=void 0!==a&&a;if((0,S.default)(this,e),this._mediaObject={},this._planB=o,n&&this.setIceParameters(n),r){this._mediaObject.candidates=[];var s=!0,c=!1,u=void 0;try{for(var l,d=(0,k.default)(r);!(s=(l=d.next()).done);s=!0){var f=l.value,p={component:1};p.foundation=f.foundation,p.ip=f.ip,p.port=f.port,p.priority=f.priority,p.transport=f.protocol,p.type=f.type,f.tcpType&&(p.tcptype=f.tcpType),this._mediaObject.candidates.push(p)}}catch(e){c=!0,u=e}finally{try{!s&&d.return&&d.return()}finally{if(c)throw u}}this._mediaObject.endOfCandidates="end-of-candidates",this._mediaObject.iceOptions="renomination"}i&&this.setDtlsRole(i.role)}return(0,C.default)(e,[{key:"getObject",value:function(){return this._mediaObject}},{key:"setIceParameters",value:function(e){this._mediaObject.iceUfrag=e.usernameFragment,this._mediaObject.icePwd=e.password}},{key:"disable",value:function(){this._mediaObject.direction="inactive",delete this._mediaObject.ext,delete this._mediaObject.ssrcs,delete this._mediaObject.ssrcGroups,delete this._mediaObject.simulcast,delete this._mediaObject.simulcast_03,delete this._mediaObject.rids}},{key:"close",value:function(){this._mediaObject.direction="inactive",this._mediaObject.port=0,delete this._mediaObject.ext,delete this._mediaObject.ssrcs,delete this._mediaObject.ssrcGroups,delete this._mediaObject.simulcast,delete this._mediaObject.simulcast_03,delete this._mediaObject.rids,delete this._mediaObject.extmapAllowMixed}},{key:"mid",get:function(){return String(this._mediaObject.mid)}},{key:"closed",get:function(){return 0===this._mediaObject.port}}]),e}();function a(e){var t=new RegExp("^(audio|video)/(.+)","i").exec(e.mimeType);if(!t)throw new TypeError("invalid codec.mimeType");return t[2]}t.MediaSection=i,t.AnswerMediaSection=function(e){function t(e){var n,i=e.iceParameters,o=e.iceCandidates,s=e.dtlsParameters,c=e.sctpParameters,u=e.plainRtpParameters,l=e.planB,d=void 0!==l&&l,f=e.offerMediaObject,p=e.offerRtpParameters,h=e.answerRtpParameters,m=e.codecOptions,v=e.extmapAllowMixed,g=void 0!==v&&v;switch((0,S.default)(this,t),(n=(0,b.default)(this,(t.__proto__||(0,y.default)(t)).call(this,{iceParameters:i,iceCandidates:o,dtlsParameters:s,planB:d})))._mediaObject.mid=String(f.mid),n._mediaObject.type=f.type,n._mediaObject.protocol=f.protocol,u?(n._mediaObject.connection={ip:u.ip,version:u.ipVersion},n._mediaObject.port=u.port):(n._mediaObject.connection={ip:"127.0.0.1",version:4},n._mediaObject.port=7),f.type){case"audio":case"video":n._mediaObject.direction="recvonly",n._mediaObject.rtp=[],n._mediaObject.rtcpFb=[],n._mediaObject.fmtp=[];var w=function(e){var t={payload:e.payloadType,codec:a(e),rate:e.clockRate};e.channels>1&&(t.encoding=e.channels),n._mediaObject.rtp.push(t);var i=r.clone(e.parameters||{});if(m){var o=m.opusStereo,s=m.opusFec,c=m.opusDtx,u=m.opusMaxPlaybackRate,l=m.opusPtime,d=m.videoGoogleStartBitrate,f=m.videoGoogleMaxBitrate,h=m.videoGoogleMinBitrate,v=p.codecs.find((function(t){return t.payloadType===e.payloadType}));switch(e.mimeType.toLowerCase()){case"audio/opus":void 0!==o&&(v.parameters["sprop-stereo"]=o?1:0,i.stereo=o?1:0),void 0!==s&&(v.parameters.useinbandfec=s?1:0,i.useinbandfec=s?1:0),void 0!==c&&(v.parameters.usedtx=c?1:0,i.usedtx=c?1:0),void 0!==u&&(i.maxplaybackrate=u),void 0!==l&&(v.parameters.ptime=l,i.ptime=l);break;case"video/vp8":case"video/vp9":case"video/h264":case"video/h265":void 0!==d&&(i["x-google-start-bitrate"]=d),void 0!==f&&(i["x-google-max-bitrate"]=f),void 0!==h&&(i["x-google-min-bitrate"]=h)}}var g={payload:e.payloadType,config:""},y=!0,b=!1,w=void 0;try{for(var x,S=(0,k.default)((0,_.default)(i));!(y=(x=S.next()).done);y=!0){var C=x.value;g.config&&(g.config+=";"),g.config+=C+"="+i[C]}}catch(e){b=!0,w=e}finally{try{!y&&S.return&&S.return()}finally{if(b)throw w}}g.config&&n._mediaObject.fmtp.push(g);var $=!0,R=!1,M=void 0;try{for(var P,T=(0,k.default)(e.rtcpFeedback);!($=(P=T.next()).done);$=!0){var E=P.value;n._mediaObject.rtcpFb.push({payload:e.payloadType,type:E.type,subtype:E.parameter})}}catch(e){R=!0,M=e}finally{try{!$&&T.return&&T.return()}finally{if(R)throw M}}},x=!0,C=!1,$=void 0;try{for(var R,M=(0,k.default)(h.codecs);!(x=(R=M.next()).done);x=!0)w(R.value)}catch(e){C=!0,$=e}finally{try{!x&&M.return&&M.return()}finally{if(C)throw $}}n._mediaObject.payloads=h.codecs.map((function(e){return e.payloadType})).join(" "),n._mediaObject.ext=[];var P=function(e){(f.ext||[]).some((function(t){return t.uri===e.uri}))&&n._mediaObject.ext.push({uri:e.uri,value:e.id})},T=!0,E=!1,I=void 0;try{for(var D,A=(0,k.default)(h.headerExtensions);!(T=(D=A.next()).done);T=!0)P(D.value)}catch(e){E=!0,I=e}finally{try{!T&&A.return&&A.return()}finally{if(E)throw I}}if(g&&"extmap-allow-mixed"===f.extmapAllowMixed&&(n._mediaObject.extmapAllowMixed="extmap-allow-mixed"),f.simulcast){n._mediaObject.simulcast={dir1:"recv",list1:f.simulcast.list1},n._mediaObject.rids=[];var O=!0,L=!1,F=void 0;try{for(var j,N=(0,k.default)(f.rids||[]);!(O=(j=N.next()).done);O=!0){var B=j.value;"send"===B.direction&&n._mediaObject.rids.push({id:B.id,direction:"recv"})}}catch(e){L=!0,F=e}finally{try{!O&&N.return&&N.return()}finally{if(L)throw F}}}else if(f.simulcast_03){n._mediaObject.simulcast_03={value:f.simulcast_03.value.replace(/send/g,"recv")},n._mediaObject.rids=[];var U=!0,V=!1,q=void 0;try{for(var H,z=(0,k.default)(f.rids||[]);!(U=(H=z.next()).done);U=!0){var K=H.value;"send"===K.direction&&n._mediaObject.rids.push({id:K.id,direction:"recv"})}}catch(e){V=!0,q=e}finally{try{!U&&z.return&&z.return()}finally{if(V)throw q}}}n._mediaObject.rtcpMux="rtcp-mux",n._mediaObject.rtcpRsize="rtcp-rsize",n._planB&&"video"===n._mediaObject.type&&(n._mediaObject.xGoogleFlag="conference");break;case"application":"number"==typeof f.sctpPort?(n._mediaObject.payloads="webrtc-datachannel",n._mediaObject.sctpPort=c.port,n._mediaObject.maxMessageSize=c.maxMessageSize):f.sctpmap&&(n._mediaObject.payloads=c.port,n._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:c.port,maxMessageSize:c.maxMessageSize})}return n}return(0,w.default)(t,e),(0,C.default)(t,[{key:"setDtlsRole",value:function(e){switch(e){case"client":this._mediaObject.setup="active";break;case"server":this._mediaObject.setup="passive";break;case"auto":this._mediaObject.setup="actpass"}}}]),t}(i),t.OfferMediaSection=function(e){function t(e){var n,r=e.iceParameters,i=e.iceCandidates,o=e.dtlsParameters,s=e.sctpParameters,c=e.plainRtpParameters,u=e.planB,l=void 0!==u&&u,d=e.mid,f=e.kind,p=e.offerRtpParameters,h=e.streamId,m=e.trackId,v=e.oldDataChannelSpec,g=void 0!==v&&v;switch((0,S.default)(this,t),(n=(0,b.default)(this,(t.__proto__||(0,y.default)(t)).call(this,{iceParameters:r,iceCandidates:i,dtlsParameters:o,planB:l})))._mediaObject.mid=String(d),n._mediaObject.type=f,c?(n._mediaObject.connection={ip:c.ip,version:c.ipVersion},n._mediaObject.protocol="RTP/AVP",n._mediaObject.port=c.port):(n._mediaObject.connection={ip:"127.0.0.1",version:4},n._mediaObject.protocol=s?"UDP/DTLS/SCTP":"UDP/TLS/RTP/SAVPF",n._mediaObject.port=7),f){case"audio":case"video":n._mediaObject.direction="sendonly",n._mediaObject.rtp=[],n._mediaObject.rtcpFb=[],n._mediaObject.fmtp=[],n._planB||(n._mediaObject.msid=(h||"-")+" "+m);var w=!0,x=!1,C=void 0;try{for(var $,R=(0,k.default)(p.codecs);!(w=($=R.next()).done);w=!0){var M=$.value,P={payload:M.payloadType,codec:a(M),rate:M.clockRate};M.channels>1&&(P.encoding=M.channels),n._mediaObject.rtp.push(P);var T={payload:M.payloadType,config:""},E=!0,I=!1,D=void 0;try{for(var A,O=(0,k.default)((0,_.default)(M.parameters));!(E=(A=O.next()).done);E=!0){var L=A.value;T.config&&(T.config+=";"),T.config+=L+"="+M.parameters[L]}}catch(e){I=!0,D=e}finally{try{!E&&O.return&&O.return()}finally{if(I)throw D}}T.config&&n._mediaObject.fmtp.push(T);var F=!0,j=!1,N=void 0;try{for(var B,U=(0,k.default)(M.rtcpFeedback);!(F=(B=U.next()).done);F=!0){var V=B.value;n._mediaObject.rtcpFb.push({payload:M.payloadType,type:V.type,subtype:V.parameter})}}catch(e){j=!0,N=e}finally{try{!F&&U.return&&U.return()}finally{if(j)throw N}}}}catch(e){x=!0,C=e}finally{try{!w&&R.return&&R.return()}finally{if(x)throw C}}n._mediaObject.payloads=p.codecs.map((function(e){return e.payloadType})).join(" "),n._mediaObject.ext=[];var q=!0,H=!1,z=void 0;try{for(var K,G=(0,k.default)(p.headerExtensions);!(q=(K=G.next()).done);q=!0){var W=K.value;n._mediaObject.ext.push({uri:W.uri,value:W.id})}}catch(e){H=!0,z=e}finally{try{!q&&G.return&&G.return()}finally{if(H)throw z}}n._mediaObject.rtcpMux="rtcp-mux",n._mediaObject.rtcpRsize="rtcp-rsize";var J=p.encodings[0],Y=J.ssrc,Q=J.rtx&&J.rtx.ssrc?J.rtx.ssrc:void 0;n._mediaObject.ssrcs=[],n._mediaObject.ssrcGroups=[],p.rtcp.cname&&n._mediaObject.ssrcs.push({id:Y,attribute:"cname",value:p.rtcp.cname}),n._planB&&n._mediaObject.ssrcs.push({id:Y,attribute:"msid",value:(h||"-")+" "+m}),Q&&(p.rtcp.cname&&n._mediaObject.ssrcs.push({id:Q,attribute:"cname",value:p.rtcp.cname}),n._planB&&n._mediaObject.ssrcs.push({id:Q,attribute:"msid",value:(h||"-")+" "+m}),n._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:Y+" "+Q}));break;case"application":g?(n._mediaObject.payloads=s.port,n._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:s.port,maxMessageSize:s.maxMessageSize}):(n._mediaObject.payloads="webrtc-datachannel",n._mediaObject.sctpPort=s.port,n._mediaObject.maxMessageSize=s.maxMessageSize)}return n}return(0,w.default)(t,e),(0,C.default)(t,[{key:"setDtlsRole",value:function(e){this._mediaObject.setup="actpass"}},{key:"planBReceive",value:function(e){var t=e.offerRtpParameters,n=e.streamId,r=e.trackId,i=t.encodings[0],a=i.ssrc,o=i.rtx&&i.rtx.ssrc?i.rtx.ssrc:void 0;t.rtcp.cname&&this._mediaObject.ssrcs.push({id:a,attribute:"cname",value:t.rtcp.cname}),this._mediaObject.ssrcs.push({id:a,attribute:"msid",value:(n||"-")+" "+r}),o&&(t.rtcp.cname&&this._mediaObject.ssrcs.push({id:o,attribute:"cname",value:t.rtcp.cname}),this._mediaObject.ssrcs.push({id:o,attribute:"msid",value:(n||"-")+" "+r}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:a+" "+o}))}},{key:"planBStopReceiving",value:function(e){var t=e.offerRtpParameters.encodings[0],n=t.ssrc,r=t.rtx&&t.rtx.ssrc?t.rtx.ssrc:void 0;this._mediaObject.ssrcs=this._mediaObject.ssrcs.filter((function(e){return e.id!==n&&e.id!==r})),r&&(this._mediaObject.ssrcGroups=this._mediaObject.ssrcGroups.filter((function(e){return e.ssrcs!==n+" "+r})))}}]),t}(i)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=n(0),a=n(1),s=n(2),c=n(6),u=n(17),l=n(5),d=n(7),p=n(25),h=new i.Logger("Chrome70"),v={OS:1024,MIS:1024},_=function(e){function t(){var e;return(0,S.default)(this,t),(e=(0,b.default)(this,(t.__proto__||(0,y.default)(t)).call(this)))._mapMidTransceiver=new g.default,e._sendStream=new MediaStream,e._hasDataChannelMediaSection=!1,e._nextSendSctpStreamId=0,e._transportReady=!1,e}return(0,w.default)(t,e),(0,C.default)(t,[{key:"close",value:function(){if(h.debug("close()"),this._pc)try{this._pc.close()}catch(e){}}},{key:"getNativeRtpCapabilities",value:function(){var e=(0,m.default)(f.default.mark((function e(){var t,n,i;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.debug("getNativeRtpCapabilities()"),t=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"}),e.prev=2,t.addTransceiver("audio"),t.addTransceiver("video"),e.next=6,t.createOffer();case 6:n=e.sent;try{t.close()}catch(e){}return i=r.parse(n.sdp),e.abrupt("return",c.extractRtpCapabilities({sdpObject:i}));case 12:e.prev=12,e.t0=e.catch(2);try{t.close()}catch(e){}throw e.t0;case 16:case"end":return e.stop()}}),e,this,[[2,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"getNativeSctpCapabilities",value:function(){var e=(0,m.default)(f.default.mark((function e(){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(h.debug("getNativeSctpCapabilities()"),{numStreams:v}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"run",value:function(e){var t=this,n=e.direction,r=e.iceParameters,i=e.iceCandidates,a=e.dtlsParameters,c=e.sctpParameters,u=e.iceServers,l=e.iceTransportPolicy,f=e.additionalSettings,p=e.proprietaryConstraints,m=e.extendedRtpCapabilities;h.debug("run()"),this._direction=n,this._remoteSdp=new d.RemoteSdp({iceParameters:r,iceCandidates:i,dtlsParameters:a,sctpParameters:c}),this._sendingRtpParametersByKind={audio:s.getSendingRtpParameters("audio",m),video:s.getSendingRtpParameters("video",m)},this._sendingRemoteRtpParametersByKind={audio:s.getSendingRemoteRtpParameters("audio",m),video:s.getSendingRemoteRtpParameters("video",m)},this._pc=new RTCPeerConnection((0,o.default)({iceServers:u||[],iceTransportPolicy:l||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"},f),p),this._pc.addEventListener("iceconnectionstatechange",(function(){switch(t._pc.iceConnectionState){case"checking":t.emit("@connectionstatechange","connecting");break;case"connected":case"completed":t.emit("@connectionstatechange","connected");break;case"failed":t.emit("@connectionstatechange","failed");break;case"disconnected":t.emit("@connectionstatechange","disconnected");break;case"closed":t.emit("@connectionstatechange","closed")}}))}},{key:"updateIceServers",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.debug("updateIceServers()"),(n=this._pc.getConfiguration()).iceServers=t,this._pc.setConfiguration(n);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"restartIce",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,r,i,a;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h.debug("restartIce()"),this._remoteSdp.updateIceParameters(t),!this._transportReady){e.next=24;break}if("send"!==this._direction){e.next=14;break}return e.next=4,this._pc.createOffer({iceRestart:!0});case 4:return n=e.sent,h.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",n),e.next=8,this._pc.setLocalDescription(n);case 8:return r={type:"answer",sdp:this._remoteSdp.getSdp()},h.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",r),e.next=12,this._pc.setRemoteDescription(r);case 12:e.next=24;break;case 14:return i={type:"offer",sdp:this._remoteSdp.getSdp()},h.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",i),e.next=18,this._pc.setRemoteDescription(i);case 18:return e.next=20,this._pc.createAnswer();case 20:return a=e.sent,h.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",a),e.next=24,this._pc.setLocalDescription(a);case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTransportStats",value:function(){var e=(0,m.default)(f.default.mark((function e(){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._pc.getStats());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"send",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,i,l,d,m,v,g,y,b,w,_,x,S,C,$,R,M,P,T,E,I,D=t.track,A=t.encodings,O=t.codecOptions,L=t.codec;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._assertSendDirection(),h.debug("send() [kind:%s, track.id:%s]",D.kind,D.id),(n=a.clone(this._sendingRtpParametersByKind[D.kind])).codecs=s.reduceCodecs(n.codecs,L),(i=a.clone(this._sendingRemoteRtpParametersByKind[D.kind])).codecs=s.reduceCodecs(i.codecs,L),l=this._remoteSdp.getNextMediaSectionIdx(),d=this._pc.addTransceiver(D,{direction:"sendonly",streams:[this._sendStream]}),m=void 0,e.next=9,this._pc.createOffer();case 9:if(v=e.sent,g=r.parse(v.sdp),e.t0=this._transportReady,e.t0){e.next=15;break}return e.next=15,this._setupTransport({localDtlsRole:"server",localSdpObject:g});case 15:return A&&A.length>1&&(h.debug("send() | enabling legacy simulcast"),g=r.parse(v.sdp),m=g.media[l.idx],u.addLegacySimulcast({offerMediaObject:m,numStreams:A.length}),v={type:"offer",sdp:r.write(g)}),y=!1,b=p.parse((A||[{}])[0].scalabilityMode),A&&1===A.length&&b.spatialLayers>1&&"video/vp9"===n.codecs[0].mimeType.toLowerCase()&&(h.debug("send() | enabling legacy simulcast for VP9 SVC"),y=!0,g=r.parse(v.sdp),m=g.media[l.idx],u.addLegacySimulcast({offerMediaObject:m,numStreams:b.spatialLayers}),v={type:"offer",sdp:r.write(g)}),h.debug("send() | calling pc.setLocalDescription() [offer:%o]",v),e.next=22,this._pc.setLocalDescription(v);case 22:if(!A){e.next=36;break}h.debug("send() | applying given encodings"),w=d.sender.getParameters(),_=0;case 26:if(!(_<(w.encodings||[]).length)){e.next=34;break}if(x=w.encodings[_],S=A[_]){e.next=30;break}return e.abrupt("break",34);case 30:w.encodings[_]=(0,o.default)(x,S);case 31:++_,e.next=26;break;case 34:return e.next=36,d.sender.setParameters(w);case 36:if(C=d.mid,n.mid=C,g=r.parse(this._pc.localDescription.sdp),m=g.media[l.idx],n.rtcp.cname=c.getCname({offerMediaObject:m}),n.encodings=u.getRtpEncodings({offerMediaObject:m}),A)for($=0;$<n.encodings.length;++$)A[$]&&(0,o.default)(n.encodings[$],A[$]);if(y&&(n.encodings=[n.encodings[0]]),!(n.encodings.length>1)||"video/vp8"!==n.codecs[0].mimeType.toLowerCase()&&"video/h264"!==n.codecs[0].mimeType.toLowerCase()){e.next=58;break}for(R=!0,M=!1,P=void 0,e.prev=42,T=(0,k.default)(n.encodings);!(R=(E=T.next()).done);R=!0)E.value.scalabilityMode="S1T3";e.next=50;break;case 46:e.prev=46,e.t1=e.catch(42),M=!0,P=e.t1;case 50:e.prev=50,e.prev=51,!R&&T.return&&T.return();case 53:if(e.prev=53,!M){e.next=56;break}throw P;case 56:return e.finish(53);case 57:return e.finish(50);case 58:return this._remoteSdp.send({offerMediaObject:m,reuseMid:l.reuseMid,offerRtpParameters:n,answerRtpParameters:i,codecOptions:O}),I={type:"answer",sdp:this._remoteSdp.getSdp()},h.debug("send() | calling pc.setRemoteDescription() [answer:%o]",I),e.next=63,this._pc.setRemoteDescription(I);case 63:return this._mapMidTransceiver.set(C,d),e.abrupt("return",{localId:C,rtpParameters:n,rtpSender:d.sender});case 65:case"end":return e.stop()}}),e,this,[[42,46,50,58],[51,,53,57]])})));return function(t){return e.apply(this,arguments)}}()},{key:"stopSending",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,r,i;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),h.debug("stopSending() [localId:%s]",t),n=this._mapMidTransceiver.get(t)){e.next=4;break}throw new Error("associated RTCRtpTransceiver not found");case 4:return n.sender.replaceTrack(null),this._pc.removeTrack(n.sender),this._remoteSdp.closeMediaSection(n.mid),e.next=7,this._pc.createOffer();case 7:return r=e.sent,h.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),e.next=11,this._pc.setLocalDescription(r);case 11:return i={type:"answer",sdp:this._remoteSdp.getSdp()},h.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",i),e.next=15,this._pc.setRemoteDescription(i);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"replaceTrack",value:function(){var e=(0,m.default)(f.default.mark((function e(t,n){var r;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),n?h.debug("replaceTrack() [localId:%s, track.id:%s]",t,n.id):h.debug("replaceTrack() [localId:%s, no track]",t),r=this._mapMidTransceiver.get(t)){e.next=4;break}throw new Error("associated RTCRtpTransceiver not found");case 4:return e.next=6,r.sender.replaceTrack(n);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setMaxSpatialLayer",value:function(){var e=(0,m.default)(f.default.mark((function e(t,n){var r,i;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),h.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",t,n),r=this._mapMidTransceiver.get(t)){e.next=4;break}throw new Error("associated RTCRtpTransceiver not found");case 4:return(i=r.sender.getParameters()).encodings.forEach((function(e,t){e.active=t<=n})),e.next=8,r.sender.setParameters(i);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setRtpEncodingParameters",value:function(){var e=(0,m.default)(f.default.mark((function e(t,n){var r,i;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),h.debug("setRtpEncodingParameters() [localId:%s, params:%o]",t,n),r=this._mapMidTransceiver.get(t)){e.next=4;break}throw new Error("associated RTCRtpTransceiver not found");case 4:return(i=r.sender.getParameters()).encodings.forEach((function(e,t){i.encodings[t]=(0,o.default)((0,o.default)({},e),n)})),e.next=8,r.sender.setParameters(i);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getSenderStats",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),n=this._mapMidTransceiver.get(t)){e.next=4;break}throw new Error("associated RTCRtpTransceiver not found");case 4:return e.abrupt("return",n.sender.getStats());case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendDataChannel",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,i,a,o,s,c,u=t.ordered,l=t.maxPacketLifeTime,d=t.maxRetransmits,p=t.label,m=t.protocol,g=t.priority;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),n={negotiated:!0,id:this._nextSendSctpStreamId,ordered:u,maxPacketLifeTime:l,maxRetransmitTime:l,maxRetransmits:d,protocol:m,priority:g},h.debug("sendDataChannel() [options:%o]",n),i=this._pc.createDataChannel(p,n),this._nextSendSctpStreamId=++this._nextSendSctpStreamId%v.MIS,this._hasDataChannelMediaSection){e.next=23;break}return e.next=7,this._pc.createOffer();case 7:if(a=e.sent,o=r.parse(a.sdp),s=o.media.find((function(e){return"application"===e.type})),e.t0=this._transportReady,e.t0){e.next=14;break}return e.next=14,this._setupTransport({localDtlsRole:"server",localSdpObject:o});case 14:return h.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",a),e.next=17,this._pc.setLocalDescription(a);case 17:return this._remoteSdp.sendSctpAssociation({offerMediaObject:s}),c={type:"answer",sdp:this._remoteSdp.getSdp()},h.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",c),e.next=22,this._pc.setRemoteDescription(c);case 22:this._hasDataChannelMediaSection=!0;case 23:return e.abrupt("return",{dataChannel:i,sctpStreamParameters:{streamId:n.id,ordered:n.ordered,maxPacketLifeTime:n.maxPacketLifeTime,maxRetransmits:n.maxRetransmits}});case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"receive",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,i,a,o,s,u,l=t.trackId,d=t.kind,p=t.rtpParameters;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._assertRecvDirection(),h.debug("receive() [trackId:%s, kind:%s]",l,d),n=p.mid||String(this._mapMidTransceiver.size),this._remoteSdp.receive({mid:n,kind:d,offerRtpParameters:p,streamId:p.rtcp.cname,trackId:l}),i={type:"offer",sdp:this._remoteSdp.getSdp()},h.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",i),e.next=7,this._pc.setRemoteDescription(i);case 7:return e.next=9,this._pc.createAnswer();case 9:if(a=e.sent,o=r.parse(a.sdp),s=o.media.find((function(e){return String(e.mid)===n})),c.applyCodecParameters({offerRtpParameters:p,answerMediaObject:s}),a={type:"answer",sdp:r.write(o)},e.t0=this._transportReady,e.t0){e.next=17;break}return e.next=17,this._setupTransport({localDtlsRole:"client",localSdpObject:o});case 17:return h.debug("receive() | calling pc.setLocalDescription() [answer:%o]",a),e.next=20,this._pc.setLocalDescription(a);case 20:if(u=this._pc.getTransceivers().find((function(e){return e.mid===n}))){e.next=23;break}throw new Error("new RTCRtpTransceiver not found");case 23:return e.abrupt("return",(this._mapMidTransceiver.set(n,u),{localId:n,track:u.receiver.track,rtpReceiver:u.receiver}));case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"stopReceiving",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,r,i;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertRecvDirection(),h.debug("stopReceiving() [localId:%s]",t),n=this._mapMidTransceiver.get(t)){e.next=4;break}throw new Error("associated RTCRtpTransceiver not found");case 4:return this._remoteSdp.closeMediaSection(n.mid),r={type:"offer",sdp:this._remoteSdp.getSdp()},h.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),e.next=9,this._pc.setRemoteDescription(r);case 9:return e.next=11,this._pc.createAnswer();case 11:return i=e.sent,h.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",i),e.next=15,this._pc.setLocalDescription(i);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getReceiverStats",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertRecvDirection(),n=this._mapMidTransceiver.get(t)){e.next=4;break}throw new Error("associated RTCRtpTransceiver not found");case 4:return e.abrupt("return",n.receiver.getStats());case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"receiveDataChannel",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,i,a,o,s,c,u,l,d,p=t.sctpStreamParameters,m=t.label,v=t.protocol;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertRecvDirection(),n=p.streamId,i=p.ordered,a=p.maxPacketLifeTime,o=p.maxRetransmits,s={negotiated:!0,id:n,ordered:i,maxPacketLifeTime:a,maxRetransmitTime:a,maxRetransmits:o,protocol:v},h.debug("receiveDataChannel() [options:%o]",s),c=this._pc.createDataChannel(m,s),this._hasDataChannelMediaSection){e.next=21;break}return this._remoteSdp.receiveSctpAssociation(),u={type:"offer",sdp:this._remoteSdp.getSdp()},h.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",u),e.next=10,this._pc.setRemoteDescription(u);case 10:return e.next=12,this._pc.createAnswer();case 12:if(l=e.sent,this._transportReady){e.next=17;break}return d=r.parse(l.sdp),e.next=17,this._setupTransport({localDtlsRole:"client",localSdpObject:d});case 17:return h.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",l),e.next=20,this._pc.setLocalDescription(l);case 20:this._hasDataChannelMediaSection=!0;case 21:return e.abrupt("return",{dataChannel:c});case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_setupTransport",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,i=t.localDtlsRole,a=t.localSdpObject;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a||(a=r.parse(this._pc.localDescription.sdp)),(n=c.extractDtlsParameters({sdpObject:a})).role=i,this._remoteSdp.updateDtlsRole("client"===i?"server":"client"),e.next=6,this.safeEmitAsPromise("@connect",{dtlsParameters:n});case 6:this._transportReady=!0;case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_assertSendDirection",value:function(){if("send"!==this._direction)throw new Error('method can just be called for handlers with "send" direction')}},{key:"_assertRecvDirection",value:function(){if("recv"!==this._direction)throw new Error('method can just be called for handlers with "recv" direction')}},{key:"name",get:function(){return"Chrome70"}}],[{key:"createFactory",value:function(){return function(){return new t}}}]),t}(l.HandlerInterface);t.Chrome70=_},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=n(0),a=n(1),s=n(2),c=n(6),u=n(18),l=n(5),d=n(7),p=new i.Logger("Chrome67"),h={OS:1024,MIS:1024},v=function(e){function t(){var e;return(0,S.default)(this,t),(e=(0,b.default)(this,(t.__proto__||(0,y.default)(t)).call(this)))._sendStream=new MediaStream,e._mapSendLocalIdRtpSender=new g.default,e._nextSendLocalId=0,e._mapRecvLocalIdInfo=new g.default,e._hasDataChannelMediaSection=!1,e._nextSendSctpStreamId=0,e._transportReady=!1,e}return(0,w.default)(t,e),(0,C.default)(t,[{key:"close",value:function(){if(p.debug("close()"),this._pc)try{this._pc.close()}catch(e){}}},{key:"getNativeRtpCapabilities",value:function(){var e=(0,m.default)(f.default.mark((function e(){var t,n,i;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p.debug("getNativeRtpCapabilities()"),t=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"}),e.prev=2,e.next=5,t.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});case 5:n=e.sent;try{t.close()}catch(e){}return i=r.parse(n.sdp),e.abrupt("return",c.extractRtpCapabilities({sdpObject:i}));case 11:e.prev=11,e.t0=e.catch(2);try{t.close()}catch(e){}throw e.t0;case 15:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"getNativeSctpCapabilities",value:function(){var e=(0,m.default)(f.default.mark((function e(){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(p.debug("getNativeSctpCapabilities()"),{numStreams:h}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"run",value:function(e){var t=this,n=e.direction,r=e.iceParameters,i=e.iceCandidates,a=e.dtlsParameters,c=e.sctpParameters,u=e.iceServers,l=e.iceTransportPolicy,f=e.additionalSettings,h=e.proprietaryConstraints,m=e.extendedRtpCapabilities;p.debug("run()"),this._direction=n,this._remoteSdp=new d.RemoteSdp({iceParameters:r,iceCandidates:i,dtlsParameters:a,sctpParameters:c,planB:!0}),this._sendingRtpParametersByKind={audio:s.getSendingRtpParameters("audio",m),video:s.getSendingRtpParameters("video",m)},this._sendingRemoteRtpParametersByKind={audio:s.getSendingRemoteRtpParameters("audio",m),video:s.getSendingRemoteRtpParameters("video",m)},this._pc=new RTCPeerConnection((0,o.default)({iceServers:u||[],iceTransportPolicy:l||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"},f),h),this._pc.addEventListener("iceconnectionstatechange",(function(){switch(t._pc.iceConnectionState){case"checking":t.emit("@connectionstatechange","connecting");break;case"connected":case"completed":t.emit("@connectionstatechange","connected");break;case"failed":t.emit("@connectionstatechange","failed");break;case"disconnected":t.emit("@connectionstatechange","disconnected");break;case"closed":t.emit("@connectionstatechange","closed")}}))}},{key:"updateIceServers",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p.debug("updateIceServers()"),(n=this._pc.getConfiguration()).iceServers=t,this._pc.setConfiguration(n);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"restartIce",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,r,i,a;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p.debug("restartIce()"),this._remoteSdp.updateIceParameters(t),!this._transportReady){e.next=24;break}if("send"!==this._direction){e.next=14;break}return e.next=4,this._pc.createOffer({iceRestart:!0});case 4:return n=e.sent,p.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",n),e.next=8,this._pc.setLocalDescription(n);case 8:return r={type:"answer",sdp:this._remoteSdp.getSdp()},p.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",r),e.next=12,this._pc.setRemoteDescription(r);case 12:e.next=24;break;case 14:return i={type:"offer",sdp:this._remoteSdp.getSdp()},p.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",i),e.next=18,this._pc.setRemoteDescription(i);case 18:return e.next=20,this._pc.createAnswer();case 20:return a=e.sent,p.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",a),e.next=24,this._pc.setLocalDescription(a);case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTransportStats",value:function(){var e=(0,m.default)(f.default.mark((function e(){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._pc.getStats());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"send",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,i,l,d,h,m,v,g,y,b,w,_,x,S,C=t.track,$=t.encodings,R=t.codecOptions,M=t.codec;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._assertSendDirection(),p.debug("send() [kind:%s, track.id:%s]",C.kind,C.id),M&&p.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(C),this._pc.addTrack(C,this._sendStream),n=void 0,e.next=4,this._pc.createOffer();case 4:if(i=e.sent,l=r.parse(i.sdp),(d=a.clone(this._sendingRtpParametersByKind[C.kind])).codecs=s.reduceCodecs(d.codecs),(h=a.clone(this._sendingRemoteRtpParametersByKind[C.kind])).codecs=s.reduceCodecs(h.codecs),e.t0=this._transportReady,e.t0){e.next=14;break}return e.next=14,this._setupTransport({localDtlsRole:"server",localSdpObject:l});case 14:return"video"===C.kind&&$&&$.length>1&&(p.debug("send() | enabling simulcast"),l=r.parse(i.sdp),n=l.media.find((function(e){return"video"===e.type})),u.addLegacySimulcast({offerMediaObject:n,track:C,numStreams:$.length}),i={type:"offer",sdp:r.write(l)}),p.debug("send() | calling pc.setLocalDescription() [offer:%o]",i),e.next=18,this._pc.setLocalDescription(i);case 18:if(l=r.parse(this._pc.localDescription.sdp),n=l.media.find((function(e){return e.type===C.kind})),d.rtcp.cname=c.getCname({offerMediaObject:n}),d.encodings=u.getRtpEncodings({offerMediaObject:n,track:C}),!$){e.next=24;break}for(m=0;m<d.encodings.length;++m)$[m]&&(0,o.default)(d.encodings[m],$[m]);case 24:if(!(d.encodings.length>1&&"video/vp8"===d.codecs[0].mimeType.toLowerCase())){e.next=44;break}for(v=!0,g=!1,y=void 0,e.prev=28,b=(0,k.default)(d.encodings);!(v=(w=b.next()).done);v=!0)w.value.scalabilityMode="S1T3";e.next=36;break;case 32:e.prev=32,e.t1=e.catch(28),g=!0,y=e.t1;case 36:e.prev=36,e.prev=37,!v&&b.return&&b.return();case 39:if(e.prev=39,!g){e.next=42;break}throw y;case 42:return e.finish(39);case 43:return e.finish(36);case 44:return this._remoteSdp.send({offerMediaObject:n,offerRtpParameters:d,answerRtpParameters:h,codecOptions:R}),_={type:"answer",sdp:this._remoteSdp.getSdp()},p.debug("send() | calling pc.setRemoteDescription() [answer:%o]",_),e.next=49,this._pc.setRemoteDescription(_);case 49:return x=String(this._nextSendLocalId),this._nextSendLocalId++,S=this._pc.getSenders().find((function(e){return e.track===C})),e.abrupt("return",(this._mapSendLocalIdRtpSender.set(x,S),{localId:x,rtpParameters:d,rtpSender:S}));case 53:case"end":return e.stop()}}),e,this,[[28,32,36,44],[37,,39,43]])})));return function(t){return e.apply(this,arguments)}}()},{key:"stopSending",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,r,i;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),p.debug("stopSending() [localId:%s]",t),n=this._mapSendLocalIdRtpSender.get(t)){e.next=4;break}throw new Error("associated RTCRtpSender not found");case 4:return this._pc.removeTrack(n),n.track&&this._sendStream.removeTrack(n.track),this._mapSendLocalIdRtpSender.delete(t),e.next=7,this._pc.createOffer();case 7:return r=e.sent,p.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),e.prev=9,e.next=12,this._pc.setLocalDescription(r);case 12:e.next=19;break;case 14:if(e.prev=14,e.t0=e.catch(9),0!==this._sendStream.getTracks().length){e.next=18;break}return e.abrupt("return",void p.warn("stopSending() | ignoring expected error due no sending tracks: %s",e.t0.toString()));case 18:throw e.t0;case 19:if("stable"!==this._pc.signalingState){e.next=21;break}return e.abrupt("return");case 21:return i={type:"answer",sdp:this._remoteSdp.getSdp()},p.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",i),e.next=25,this._pc.setRemoteDescription(i);case 25:case"end":return e.stop()}}),e,this,[[9,14]])})));return function(t){return e.apply(this,arguments)}}()},{key:"replaceTrack",value:function(){var e=(0,m.default)(f.default.mark((function e(t,n){var r,i;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),n?p.debug("replaceTrack() [localId:%s, track.id:%s]",t,n.id):p.debug("replaceTrack() [localId:%s, no track]",t),r=this._mapSendLocalIdRtpSender.get(t)){e.next=4;break}throw new Error("associated RTCRtpSender not found");case 4:return i=r.track,e.next=7,r.replaceTrack(n);case 7:i&&this._sendStream.removeTrack(i),n&&this._sendStream.addTrack(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setMaxSpatialLayer",value:function(){var e=(0,m.default)(f.default.mark((function e(t,n){var r,i;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),p.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",t,n),r=this._mapSendLocalIdRtpSender.get(t)){e.next=4;break}throw new Error("associated RTCRtpSender not found");case 4:return(i=r.getParameters()).encodings.forEach((function(e,t){e.active=t<=n})),e.next=8,r.setParameters(i);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setRtpEncodingParameters",value:function(){var e=(0,m.default)(f.default.mark((function e(t,n){var r,i;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),p.debug("setRtpEncodingParameters() [localId:%s, params:%o]",t,n),r=this._mapSendLocalIdRtpSender.get(t)){e.next=4;break}throw new Error("associated RTCRtpSender not found");case 4:return(i=r.getParameters()).encodings.forEach((function(e,t){i.encodings[t]=(0,o.default)((0,o.default)({},e),n)})),e.next=8,r.setParameters(i);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getSenderStats",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),n=this._mapSendLocalIdRtpSender.get(t)){e.next=4;break}throw new Error("associated RTCRtpSender not found");case 4:return e.abrupt("return",n.getStats());case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendDataChannel",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,i,a,o,s,c,u=t.ordered,l=t.maxPacketLifeTime,d=t.maxRetransmits,m=t.label,v=t.protocol,g=t.priority;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),n={negotiated:!0,id:this._nextSendSctpStreamId,ordered:u,maxPacketLifeTime:l,maxRetransmitTime:l,maxRetransmits:d,protocol:v,priority:g},p.debug("sendDataChannel() [options:%o]",n),i=this._pc.createDataChannel(m,n),this._nextSendSctpStreamId=++this._nextSendSctpStreamId%h.MIS,this._hasDataChannelMediaSection){e.next=23;break}return e.next=7,this._pc.createOffer();case 7:if(a=e.sent,o=r.parse(a.sdp),s=o.media.find((function(e){return"application"===e.type})),e.t0=this._transportReady,e.t0){e.next=14;break}return e.next=14,this._setupTransport({localDtlsRole:"server",localSdpObject:o});case 14:return p.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",a),e.next=17,this._pc.setLocalDescription(a);case 17:return this._remoteSdp.sendSctpAssociation({offerMediaObject:s}),c={type:"answer",sdp:this._remoteSdp.getSdp()},p.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",c),e.next=22,this._pc.setRemoteDescription(c);case 22:this._hasDataChannelMediaSection=!0;case 23:return e.abrupt("return",{dataChannel:i,sctpStreamParameters:{streamId:n.id,ordered:n.ordered,maxPacketLifeTime:n.maxPacketLifeTime,maxRetransmits:n.maxRetransmits}});case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"receive",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,i,a,o,s,u,l,d=t.trackId,h=t.kind,m=t.rtpParameters;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._assertRecvDirection(),p.debug("receive() [trackId:%s, kind:%s]",d,h),n=d,i=h,this._remoteSdp.receive({mid:i,kind:h,offerRtpParameters:m,streamId:m.rtcp.cname,trackId:d}),a={type:"offer",sdp:this._remoteSdp.getSdp()},p.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",a),e.next=7,this._pc.setRemoteDescription(a);case 7:return e.next=9,this._pc.createAnswer();case 9:if(o=e.sent,s=r.parse(o.sdp),u=s.media.find((function(e){return String(e.mid)===i})),c.applyCodecParameters({offerRtpParameters:m,answerMediaObject:u}),o={type:"answer",sdp:r.write(s)},e.t0=this._transportReady,e.t0){e.next=17;break}return e.next=17,this._setupTransport({localDtlsRole:"client",localSdpObject:s});case 17:return p.debug("receive() | calling pc.setLocalDescription() [answer:%o]",o),e.next=20,this._pc.setLocalDescription(o);case 20:if(l=this._pc.getReceivers().find((function(e){return e.track&&e.track.id===n}))){e.next=23;break}throw new Error("new RTCRtpReceiver not");case 23:return e.abrupt("return",(this._mapRecvLocalIdInfo.set(n,{mid:i,rtpParameters:m,rtpReceiver:l}),{localId:n,track:l.track,rtpReceiver:l}));case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"stopReceiving",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,r,i,a,o;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._assertRecvDirection(),p.debug("stopReceiving() [localId:%s]",t),n=this._mapRecvLocalIdInfo.get(t)||{},r=n.mid,i=n.rtpParameters,this._mapRecvLocalIdInfo.delete(t),this._remoteSdp.planBStopReceiving({mid:r,offerRtpParameters:i}),a={type:"offer",sdp:this._remoteSdp.getSdp()},p.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",a),e.next=7,this._pc.setRemoteDescription(a);case 7:return e.next=9,this._pc.createAnswer();case 9:return o=e.sent,p.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",o),e.next=13,this._pc.setLocalDescription(o);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getReceiverStats",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,r;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertRecvDirection(),n=this._mapRecvLocalIdInfo.get(t)||{},r=n.rtpReceiver){e.next=4;break}throw new Error("associated RTCRtpReceiver not found");case 4:return e.abrupt("return",r.getStats());case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"receiveDataChannel",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,i,a,o,s,c,u,l,d,h=t.sctpStreamParameters,m=t.label,v=t.protocol;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertRecvDirection(),n=h.streamId,i=h.ordered,a=h.maxPacketLifeTime,o=h.maxRetransmits,s={negotiated:!0,id:n,ordered:i,maxPacketLifeTime:a,maxRetransmitTime:a,maxRetransmits:o,protocol:v},p.debug("receiveDataChannel() [options:%o]",s),c=this._pc.createDataChannel(m,s),this._hasDataChannelMediaSection){e.next=21;break}return this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0}),u={type:"offer",sdp:this._remoteSdp.getSdp()},p.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",u),e.next=10,this._pc.setRemoteDescription(u);case 10:return e.next=12,this._pc.createAnswer();case 12:if(l=e.sent,this._transportReady){e.next=17;break}return d=r.parse(l.sdp),e.next=17,this._setupTransport({localDtlsRole:"client",localSdpObject:d});case 17:return p.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",l),e.next=20,this._pc.setLocalDescription(l);case 20:this._hasDataChannelMediaSection=!0;case 21:return e.abrupt("return",{dataChannel:c});case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_setupTransport",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,i=t.localDtlsRole,a=t.localSdpObject;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a||(a=r.parse(this._pc.localDescription.sdp)),(n=c.extractDtlsParameters({sdpObject:a})).role=i,this._remoteSdp.updateDtlsRole("client"===i?"server":"client"),e.next=6,this.safeEmitAsPromise("@connect",{dtlsParameters:n});case 6:this._transportReady=!0;case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_assertSendDirection",value:function(){if("send"!==this._direction)throw new Error('method can just be called for handlers with "send" direction')}},{key:"_assertRecvDirection",value:function(){if("recv"!==this._direction)throw new Error('method can just be called for handlers with "recv" direction')}},{key:"name",get:function(){return"Chrome67"}}],[{key:"createFactory",value:function(){return function(){return new t}}}]),t}(l.HandlerInterface);t.Chrome67=v},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=n(0),a=n(3),s=n(1),c=n(2),u=n(6),l=n(18),d=n(5),p=n(7),h=new i.Logger("Chrome55"),v={OS:1024,MIS:1024},_=function(e){function t(){var e;return(0,S.default)(this,t),(e=(0,b.default)(this,(t.__proto__||(0,y.default)(t)).call(this)))._sendStream=new MediaStream,e._mapSendLocalIdTrack=new g.default,e._nextSendLocalId=0,e._mapRecvLocalIdInfo=new g.default,e._hasDataChannelMediaSection=!1,e._nextSendSctpStreamId=0,e._transportReady=!1,e}return(0,w.default)(t,e),(0,C.default)(t,[{key:"close",value:function(){if(h.debug("close()"),this._pc)try{this._pc.close()}catch(e){}}},{key:"getNativeRtpCapabilities",value:function(){var e=(0,m.default)(f.default.mark((function e(){var t,n,i;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.debug("getNativeRtpCapabilities()"),t=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"}),e.prev=2,e.next=5,t.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});case 5:n=e.sent;try{t.close()}catch(e){}return i=r.parse(n.sdp),e.abrupt("return",u.extractRtpCapabilities({sdpObject:i}));case 11:e.prev=11,e.t0=e.catch(2);try{t.close()}catch(e){}throw e.t0;case 15:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"getNativeSctpCapabilities",value:function(){var e=(0,m.default)(f.default.mark((function e(){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(h.debug("getNativeSctpCapabilities()"),{numStreams:v}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"run",value:function(e){var t=this,n=e.direction,r=e.iceParameters,i=e.iceCandidates,a=e.dtlsParameters,s=e.sctpParameters,u=e.iceServers,l=e.iceTransportPolicy,d=e.additionalSettings,f=e.proprietaryConstraints,m=e.extendedRtpCapabilities;h.debug("run()"),this._direction=n,this._remoteSdp=new p.RemoteSdp({iceParameters:r,iceCandidates:i,dtlsParameters:a,sctpParameters:s,planB:!0}),this._sendingRtpParametersByKind={audio:c.getSendingRtpParameters("audio",m),video:c.getSendingRtpParameters("video",m)},this._sendingRemoteRtpParametersByKind={audio:c.getSendingRemoteRtpParameters("audio",m),video:c.getSendingRemoteRtpParameters("video",m)},this._pc=new RTCPeerConnection((0,o.default)({iceServers:u||[],iceTransportPolicy:l||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"},d),f),this._pc.addEventListener("iceconnectionstatechange",(function(){switch(t._pc.iceConnectionState){case"checking":t.emit("@connectionstatechange","connecting");break;case"connected":case"completed":t.emit("@connectionstatechange","connected");break;case"failed":t.emit("@connectionstatechange","failed");break;case"disconnected":t.emit("@connectionstatechange","disconnected");break;case"closed":t.emit("@connectionstatechange","closed")}}))}},{key:"updateIceServers",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.debug("updateIceServers()"),(n=this._pc.getConfiguration()).iceServers=t,this._pc.setConfiguration(n);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"restartIce",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,r,i,a;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h.debug("restartIce()"),this._remoteSdp.updateIceParameters(t),!this._transportReady){e.next=24;break}if("send"!==this._direction){e.next=14;break}return e.next=4,this._pc.createOffer({iceRestart:!0});case 4:return n=e.sent,h.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",n),e.next=8,this._pc.setLocalDescription(n);case 8:return r={type:"answer",sdp:this._remoteSdp.getSdp()},h.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",r),e.next=12,this._pc.setRemoteDescription(r);case 12:e.next=24;break;case 14:return i={type:"offer",sdp:this._remoteSdp.getSdp()},h.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",i),e.next=18,this._pc.setRemoteDescription(i);case 18:return e.next=20,this._pc.createAnswer();case 20:return a=e.sent,h.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",a),e.next=24,this._pc.setLocalDescription(a);case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTransportStats",value:function(){var e=(0,m.default)(f.default.mark((function e(){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._pc.getStats());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"send",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,i,a,d,p,m,v,g,y,b,w,_,x,S=t.track,C=t.encodings,$=t.codecOptions,R=t.codec;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._assertSendDirection(),h.debug("send() [kind:%s, track.id:%s]",S.kind,S.id),R&&h.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(S),this._pc.addStream(this._sendStream),n=void 0,e.next=4,this._pc.createOffer();case 4:if(i=e.sent,a=r.parse(i.sdp),(d=s.clone(this._sendingRtpParametersByKind[S.kind])).codecs=c.reduceCodecs(d.codecs),(p=s.clone(this._sendingRemoteRtpParametersByKind[S.kind])).codecs=c.reduceCodecs(p.codecs),e.t0=this._transportReady,e.t0){e.next=14;break}return e.next=14,this._setupTransport({localDtlsRole:"server",localSdpObject:a});case 14:return"video"===S.kind&&C&&C.length>1&&(h.debug("send() | enabling simulcast"),a=r.parse(i.sdp),n=a.media.find((function(e){return"video"===e.type})),l.addLegacySimulcast({offerMediaObject:n,track:S,numStreams:C.length}),i={type:"offer",sdp:r.write(a)}),h.debug("send() | calling pc.setLocalDescription() [offer:%o]",i),e.next=18,this._pc.setLocalDescription(i);case 18:if(a=r.parse(this._pc.localDescription.sdp),n=a.media.find((function(e){return e.type===S.kind})),d.rtcp.cname=u.getCname({offerMediaObject:n}),d.encodings=l.getRtpEncodings({offerMediaObject:n,track:S}),!C){e.next=24;break}for(m=0;m<d.encodings.length;++m)C[m]&&(0,o.default)(d.encodings[m],C[m]);case 24:if(!(d.encodings.length>1&&"video/vp8"===d.codecs[0].mimeType.toLowerCase())){e.next=44;break}for(v=!0,g=!1,y=void 0,e.prev=28,b=(0,k.default)(d.encodings);!(v=(w=b.next()).done);v=!0)w.value.scalabilityMode="S1T3";e.next=36;break;case 32:e.prev=32,e.t1=e.catch(28),g=!0,y=e.t1;case 36:e.prev=36,e.prev=37,!v&&b.return&&b.return();case 39:if(e.prev=39,!g){e.next=42;break}throw y;case 42:return e.finish(39);case 43:return e.finish(36);case 44:return this._remoteSdp.send({offerMediaObject:n,offerRtpParameters:d,answerRtpParameters:p,codecOptions:$}),_={type:"answer",sdp:this._remoteSdp.getSdp()},h.debug("send() | calling pc.setRemoteDescription() [answer:%o]",_),e.next=49,this._pc.setRemoteDescription(_);case 49:return x=String(this._nextSendLocalId),e.abrupt("return",(this._nextSendLocalId++,this._mapSendLocalIdTrack.set(x,S),{localId:x,rtpParameters:d}));case 51:case"end":return e.stop()}}),e,this,[[28,32,36,44],[37,,39,43]])})));return function(t){return e.apply(this,arguments)}}()},{key:"stopSending",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,r,i;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),h.debug("stopSending() [localId:%s]",t),n=this._mapSendLocalIdTrack.get(t)){e.next=4;break}throw new Error("track not found");case 4:return this._mapSendLocalIdTrack.delete(t),this._sendStream.removeTrack(n),this._pc.addStream(this._sendStream),e.next=7,this._pc.createOffer();case 7:return r=e.sent,h.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),e.prev=9,e.next=12,this._pc.setLocalDescription(r);case 12:e.next=19;break;case 14:if(e.prev=14,e.t0=e.catch(9),0!==this._sendStream.getTracks().length){e.next=18;break}return e.abrupt("return",void h.warn("stopSending() | ignoring expected error due no sending tracks: %s",e.t0.toString()));case 18:throw e.t0;case 19:if("stable"!==this._pc.signalingState){e.next=21;break}return e.abrupt("return");case 21:return i={type:"answer",sdp:this._remoteSdp.getSdp()},h.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",i),e.next=25,this._pc.setRemoteDescription(i);case 25:case"end":return e.stop()}}),e,this,[[9,14]])})));return function(t){return e.apply(this,arguments)}}()},{key:"replaceTrack",value:function(){var e=(0,m.default)(f.default.mark((function e(t,n){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new a.UnsupportedError("not implemented");case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setMaxSpatialLayer",value:function(){var e=(0,m.default)(f.default.mark((function e(t,n){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new a.UnsupportedError(" not implemented");case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setRtpEncodingParameters",value:function(){var e=(0,m.default)(f.default.mark((function e(t,n){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new a.UnsupportedError("not supported");case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getSenderStats",value:function(){var e=(0,m.default)(f.default.mark((function e(t){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new a.UnsupportedError("not implemented");case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendDataChannel",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,i,a,o,s,c,u=t.ordered,l=t.maxPacketLifeTime,d=t.maxRetransmits,p=t.label,m=t.protocol,g=t.priority;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),n={negotiated:!0,id:this._nextSendSctpStreamId,ordered:u,maxPacketLifeTime:l,maxRetransmitTime:l,maxRetransmits:d,protocol:m,priority:g},h.debug("sendDataChannel() [options:%o]",n),i=this._pc.createDataChannel(p,n),this._nextSendSctpStreamId=++this._nextSendSctpStreamId%v.MIS,this._hasDataChannelMediaSection){e.next=23;break}return e.next=7,this._pc.createOffer();case 7:if(a=e.sent,o=r.parse(a.sdp),s=o.media.find((function(e){return"application"===e.type})),e.t0=this._transportReady,e.t0){e.next=14;break}return e.next=14,this._setupTransport({localDtlsRole:"server",localSdpObject:o});case 14:return h.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",a),e.next=17,this._pc.setLocalDescription(a);case 17:return this._remoteSdp.sendSctpAssociation({offerMediaObject:s}),c={type:"answer",sdp:this._remoteSdp.getSdp()},h.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",c),e.next=22,this._pc.setRemoteDescription(c);case 22:this._hasDataChannelMediaSection=!0;case 23:return e.abrupt("return",{dataChannel:i,sctpStreamParameters:{streamId:n.id,ordered:n.ordered,maxPacketLifeTime:n.maxPacketLifeTime,maxRetransmits:n.maxRetransmits}});case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"receive",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,i,a,o,s,c,l,d,p=t.trackId,m=t.kind,v=t.rtpParameters;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._assertRecvDirection(),h.debug("receive() [trackId:%s, kind:%s]",p,m),n=p,i=m,a=v.rtcp.cname,this._remoteSdp.receive({mid:i,kind:m,offerRtpParameters:v,streamId:a,trackId:p}),o={type:"offer",sdp:this._remoteSdp.getSdp()},h.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",o),e.next=7,this._pc.setRemoteDescription(o);case 7:return e.next=9,this._pc.createAnswer();case 9:if(s=e.sent,c=r.parse(s.sdp),l=c.media.find((function(e){return String(e.mid)===i})),u.applyCodecParameters({offerRtpParameters:v,answerMediaObject:l}),s={type:"answer",sdp:r.write(c)},e.t0=this._transportReady,e.t0){e.next=17;break}return e.next=17,this._setupTransport({localDtlsRole:"client",localSdpObject:c});case 17:return h.debug("receive() | calling pc.setLocalDescription() [answer:%o]",s),e.next=20,this._pc.setLocalDescription(s);case 20:if(d=this._pc.getRemoteStreams().find((function(e){return e.id===a})).getTrackById(n)){e.next=23;break}throw new Error("remote track not found");case 23:return e.abrupt("return",(this._mapRecvLocalIdInfo.set(n,{mid:i,rtpParameters:v}),{localId:n,track:d}));case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"stopReceiving",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,r,i,a,o;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._assertRecvDirection(),h.debug("stopReceiving() [localId:%s]",t),n=this._mapRecvLocalIdInfo.get(t)||{},r=n.mid,i=n.rtpParameters,this._mapRecvLocalIdInfo.delete(t),this._remoteSdp.planBStopReceiving({mid:r,offerRtpParameters:i}),a={type:"offer",sdp:this._remoteSdp.getSdp()},h.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",a),e.next=7,this._pc.setRemoteDescription(a);case 7:return e.next=9,this._pc.createAnswer();case 9:return o=e.sent,h.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",o),e.next=13,this._pc.setLocalDescription(o);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getReceiverStats",value:function(){var e=(0,m.default)(f.default.mark((function e(t){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new a.UnsupportedError("not implemented");case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"receiveDataChannel",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,i,a,o,s,c,u,l,d,p=t.sctpStreamParameters,m=t.label,v=t.protocol;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertRecvDirection(),n=p.streamId,i=p.ordered,a=p.maxPacketLifeTime,o=p.maxRetransmits,s={negotiated:!0,id:n,ordered:i,maxPacketLifeTime:a,maxRetransmitTime:a,maxRetransmits:o,protocol:v},h.debug("receiveDataChannel() [options:%o]",s),c=this._pc.createDataChannel(m,s),this._hasDataChannelMediaSection){e.next=21;break}return this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0}),u={type:"offer",sdp:this._remoteSdp.getSdp()},h.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",u),e.next=10,this._pc.setRemoteDescription(u);case 10:return e.next=12,this._pc.createAnswer();case 12:if(l=e.sent,this._transportReady){e.next=17;break}return d=r.parse(l.sdp),e.next=17,this._setupTransport({localDtlsRole:"client",localSdpObject:d});case 17:return h.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",l),e.next=20,this._pc.setLocalDescription(l);case 20:this._hasDataChannelMediaSection=!0;case 21:return e.abrupt("return",{dataChannel:c});case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_setupTransport",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,i=t.localDtlsRole,a=t.localSdpObject;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a||(a=r.parse(this._pc.localDescription.sdp)),(n=u.extractDtlsParameters({sdpObject:a})).role=i,this._remoteSdp.updateDtlsRole("client"===i?"server":"client"),e.next=6,this.safeEmitAsPromise("@connect",{dtlsParameters:n});case 6:this._transportReady=!0;case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_assertSendDirection",value:function(){if("send"!==this._direction)throw new Error('method can just be called for handlers with "send" direction')}},{key:"_assertRecvDirection",value:function(){if("recv"!==this._direction)throw new Error('method can just be called for handlers with "recv" direction')}},{key:"name",get:function(){return"Chrome55"}}],[{key:"createFactory",value:function(){return function(){return new t}}}]),t}(d.HandlerInterface);t.Chrome55=_},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=n(0),a=n(3),s=n(1),c=n(2),u=n(6),l=n(17),d=n(5),p=n(7),h=new i.Logger("Firefox60"),v={OS:16,MIS:2048},_=function(e){function t(){var e;return(0,S.default)(this,t),(e=(0,b.default)(this,(t.__proto__||(0,y.default)(t)).call(this)))._mapMidTransceiver=new g.default,e._sendStream=new MediaStream,e._hasDataChannelMediaSection=!1,e._nextSendSctpStreamId=0,e._transportReady=!1,e}return(0,w.default)(t,e),(0,C.default)(t,[{key:"close",value:function(){if(h.debug("close()"),this._pc)try{this._pc.close()}catch(e){}}},{key:"getNativeRtpCapabilities",value:function(){var e=(0,m.default)(f.default.mark((function e(){var t,n,i,a,o,s,c,l;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.debug("getNativeRtpCapabilities()"),t=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),(n=document.createElement("canvas")).getContext("2d"),i=n.captureStream().getVideoTracks()[0],e.prev=4,t.addTransceiver("audio",{direction:"sendrecv"}),a=t.addTransceiver(i,{direction:"sendrecv"}),o=a.sender.getParameters(),s=[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}],o.encodings=s,e.next=10,a.sender.setParameters(o);case 10:return e.next=12,t.createOffer();case 12:c=e.sent;try{n.remove()}catch(e){}try{i.stop()}catch(e){}try{t.close()}catch(e){}return l=r.parse(c.sdp),e.abrupt("return",u.extractRtpCapabilities({sdpObject:l}));case 20:e.prev=20,e.t0=e.catch(4);try{n.remove()}catch(e){}try{i.stop()}catch(e){}try{t.close()}catch(e){}throw e.t0;case 26:case"end":return e.stop()}}),e,this,[[4,20]])})));return function(){return e.apply(this,arguments)}}()},{key:"getNativeSctpCapabilities",value:function(){var e=(0,m.default)(f.default.mark((function e(){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(h.debug("getNativeSctpCapabilities()"),{numStreams:v}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"run",value:function(e){var t=this,n=e.direction,r=e.iceParameters,i=e.iceCandidates,a=e.dtlsParameters,s=e.sctpParameters,u=e.iceServers,l=e.iceTransportPolicy,d=e.additionalSettings,f=e.proprietaryConstraints,m=e.extendedRtpCapabilities;h.debug("run()"),this._direction=n,this._remoteSdp=new p.RemoteSdp({iceParameters:r,iceCandidates:i,dtlsParameters:a,sctpParameters:s}),this._sendingRtpParametersByKind={audio:c.getSendingRtpParameters("audio",m),video:c.getSendingRtpParameters("video",m)},this._sendingRemoteRtpParametersByKind={audio:c.getSendingRemoteRtpParameters("audio",m),video:c.getSendingRemoteRtpParameters("video",m)},this._pc=new RTCPeerConnection((0,o.default)({iceServers:u||[],iceTransportPolicy:l||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"},d),f),this._pc.addEventListener("iceconnectionstatechange",(function(){switch(t._pc.iceConnectionState){case"checking":t.emit("@connectionstatechange","connecting");break;case"connected":case"completed":t.emit("@connectionstatechange","connected");break;case"failed":t.emit("@connectionstatechange","failed");break;case"disconnected":t.emit("@connectionstatechange","disconnected");break;case"closed":t.emit("@connectionstatechange","closed")}}))}},{key:"updateIceServers",value:function(){var e=(0,m.default)(f.default.mark((function e(t){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new a.UnsupportedError("not supported");case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"restartIce",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,r,i,a;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h.debug("restartIce()"),this._remoteSdp.updateIceParameters(t),!this._transportReady){e.next=24;break}if("send"!==this._direction){e.next=14;break}return e.next=4,this._pc.createOffer({iceRestart:!0});case 4:return n=e.sent,h.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",n),e.next=8,this._pc.setLocalDescription(n);case 8:return r={type:"answer",sdp:this._remoteSdp.getSdp()},h.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",r),e.next=12,this._pc.setRemoteDescription(r);case 12:e.next=24;break;case 14:return i={type:"offer",sdp:this._remoteSdp.getSdp()},h.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",i),e.next=18,this._pc.setRemoteDescription(i);case 18:return e.next=20,this._pc.createAnswer();case 20:return a=e.sent,h.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",a),e.next=24,this._pc.setLocalDescription(a);case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTransportStats",value:function(){var e=(0,m.default)(f.default.mark((function e(){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._pc.getStats());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"send",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,i,a,d,p,m,v,g,y,b,w,_,x,S,C,$,R=t.track,M=t.encodings,P=t.codecOptions,T=t.codec;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=void 0,this._assertSendDirection(),h.debug("send() [kind:%s, track.id:%s]",R.kind,R.id),M&&M.length>1&&(M.forEach((function(e,t){e.rid="r"+t})),n=s.clone(M).reverse()),(i=s.clone(this._sendingRtpParametersByKind[R.kind])).codecs=c.reduceCodecs(i.codecs,T),(a=s.clone(this._sendingRemoteRtpParametersByKind[R.kind])).codecs=c.reduceCodecs(a.codecs,T),d=this._pc.addTransceiver(R,{direction:"sendonly",streams:[this._sendStream]}),!n){e.next=12;break}return(p=d.sender.getParameters()).encodings=n,e.next=12,d.sender.setParameters(p);case 12:return e.next=14,this._pc.createOffer();case 14:if(m=e.sent,v=r.parse(m.sdp),e.t0=this._transportReady,e.t0){e.next=20;break}return e.next=20,this._setupTransport({localDtlsRole:"client",localSdpObject:v});case 20:return h.debug("send() | calling pc.setLocalDescription() [offer:%o]",m),e.next=23,this._pc.setLocalDescription(m);case 23:if(g=d.mid,i.mid=g,v=r.parse(this._pc.localDescription.sdp),y=v.media[v.media.length-1],i.rtcp.cname=u.getCname({offerMediaObject:y}),M?1===M.length?(b=l.getRtpEncodings({offerMediaObject:y}),(0,o.default)(b[0],M[0]),i.encodings=b):i.encodings=M:i.encodings=l.getRtpEncodings({offerMediaObject:y}),!(i.encodings.length>1)||"video/vp8"!==i.codecs[0].mimeType.toLowerCase()&&"video/h264"!==i.codecs[0].mimeType.toLowerCase()){e.next=47;break}for(w=!0,_=!1,x=void 0,e.prev=31,S=(0,k.default)(i.encodings);!(w=(C=S.next()).done);w=!0)C.value.scalabilityMode="S1T3";e.next=39;break;case 35:e.prev=35,e.t1=e.catch(31),_=!0,x=e.t1;case 39:e.prev=39,e.prev=40,!w&&S.return&&S.return();case 42:if(e.prev=42,!_){e.next=45;break}throw x;case 45:return e.finish(42);case 46:return e.finish(39);case 47:return this._remoteSdp.send({offerMediaObject:y,offerRtpParameters:i,answerRtpParameters:a,codecOptions:P,extmapAllowMixed:!0}),$={type:"answer",sdp:this._remoteSdp.getSdp()},h.debug("send() | calling pc.setRemoteDescription() [answer:%o]",$),e.next=52,this._pc.setRemoteDescription($);case 52:return this._mapMidTransceiver.set(g,d),e.abrupt("return",{localId:g,rtpParameters:i,rtpSender:d.sender});case 54:case"end":return e.stop()}}),e,this,[[31,35,39,47],[40,,42,46]])})));return function(t){return e.apply(this,arguments)}}()},{key:"stopSending",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,r,i;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h.debug("stopSending() [localId:%s]",t),n=this._mapMidTransceiver.get(t)){e.next=4;break}throw new Error("associated transceiver not found");case 4:return n.sender.replaceTrack(null),this._pc.removeTrack(n.sender),this._remoteSdp.disableMediaSection(n.mid),e.next=7,this._pc.createOffer();case 7:return r=e.sent,h.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),e.next=11,this._pc.setLocalDescription(r);case 11:return i={type:"answer",sdp:this._remoteSdp.getSdp()},h.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",i),e.next=15,this._pc.setRemoteDescription(i);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"replaceTrack",value:function(){var e=(0,m.default)(f.default.mark((function e(t,n){var r;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),n?h.debug("replaceTrack() [localId:%s, track.id:%s]",t,n.id):h.debug("replaceTrack() [localId:%s, no track]",t),r=this._mapMidTransceiver.get(t)){e.next=4;break}throw new Error("associated RTCRtpTransceiver not found");case 4:return e.next=6,r.sender.replaceTrack(n);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setMaxSpatialLayer",value:function(){var e=(0,m.default)(f.default.mark((function e(t,n){var r,i;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),h.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",t,n),r=this._mapMidTransceiver.get(t)){e.next=4;break}throw new Error("associated transceiver not found");case 4:return i=r.sender.getParameters(),n=i.encodings.length-1-n,i.encodings.forEach((function(e,t){e.active=t>=n})),e.next=9,r.sender.setParameters(i);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setRtpEncodingParameters",value:function(){var e=(0,m.default)(f.default.mark((function e(t,n){var r,i;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),h.debug("setRtpEncodingParameters() [localId:%s, params:%o]",t,n),r=this._mapMidTransceiver.get(t)){e.next=4;break}throw new Error("associated RTCRtpTransceiver not found");case 4:return(i=r.sender.getParameters()).encodings.forEach((function(e,t){i.encodings[t]=(0,o.default)((0,o.default)({},e),n)})),e.next=8,r.sender.setParameters(i);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getSenderStats",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),n=this._mapMidTransceiver.get(t)){e.next=4;break}throw new Error("associated RTCRtpTransceiver not found");case 4:return e.abrupt("return",n.sender.getStats());case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendDataChannel",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,i,a,o,s,c,u=t.ordered,l=t.maxPacketLifeTime,d=t.maxRetransmits,p=t.label,m=t.protocol,g=t.priority;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),n={negotiated:!0,id:this._nextSendSctpStreamId,ordered:u,maxPacketLifeTime:l,maxRetransmits:d,protocol:m,priority:g},h.debug("sendDataChannel() [options:%o]",n),i=this._pc.createDataChannel(p,n),this._nextSendSctpStreamId=++this._nextSendSctpStreamId%v.MIS,this._hasDataChannelMediaSection){e.next=23;break}return e.next=7,this._pc.createOffer();case 7:if(a=e.sent,o=r.parse(a.sdp),s=o.media.find((function(e){return"application"===e.type})),e.t0=this._transportReady,e.t0){e.next=14;break}return e.next=14,this._setupTransport({localDtlsRole:"server",localSdpObject:o});case 14:return h.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",a),e.next=17,this._pc.setLocalDescription(a);case 17:return this._remoteSdp.sendSctpAssociation({offerMediaObject:s}),c={type:"answer",sdp:this._remoteSdp.getSdp()},h.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",c),e.next=22,this._pc.setRemoteDescription(c);case 22:this._hasDataChannelMediaSection=!0;case 23:return e.abrupt("return",{dataChannel:i,sctpStreamParameters:{streamId:n.id,ordered:n.ordered,maxPacketLifeTime:n.maxPacketLifeTime,maxRetransmits:n.maxRetransmits}});case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"receive",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,i,a,o,s,c,l=t.trackId,d=t.kind,p=t.rtpParameters;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._assertRecvDirection(),h.debug("receive() [trackId:%s, kind:%s]",l,d),n=p.mid||String(this._mapMidTransceiver.size),this._remoteSdp.receive({mid:n,kind:d,offerRtpParameters:p,streamId:p.rtcp.cname,trackId:l}),i={type:"offer",sdp:this._remoteSdp.getSdp()},h.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",i),e.next=7,this._pc.setRemoteDescription(i);case 7:return e.next=9,this._pc.createAnswer();case 9:if(a=e.sent,o=r.parse(a.sdp),s=o.media.find((function(e){return String(e.mid)===n})),u.applyCodecParameters({offerRtpParameters:p,answerMediaObject:s}),a={type:"answer",sdp:r.write(o)},e.t0=this._transportReady,e.t0){e.next=17;break}return e.next=17,this._setupTransport({localDtlsRole:"client",localSdpObject:o});case 17:return h.debug("receive() | calling pc.setLocalDescription() [answer:%o]",a),e.next=20,this._pc.setLocalDescription(a);case 20:if(c=this._pc.getTransceivers().find((function(e){return e.mid===n}))){e.next=23;break}throw new Error("new RTCRtpTransceiver not found");case 23:return e.abrupt("return",(this._mapMidTransceiver.set(n,c),{localId:n,track:c.receiver.track,rtpReceiver:c.receiver}));case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"stopReceiving",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,r,i;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertRecvDirection(),h.debug("stopReceiving() [localId:%s]",t),n=this._mapMidTransceiver.get(t)){e.next=4;break}throw new Error("associated RTCRtpTransceiver not found");case 4:return this._remoteSdp.closeMediaSection(n.mid),r={type:"offer",sdp:this._remoteSdp.getSdp()},h.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),e.next=9,this._pc.setRemoteDescription(r);case 9:return e.next=11,this._pc.createAnswer();case 11:return i=e.sent,h.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",i),e.next=15,this._pc.setLocalDescription(i);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getReceiverStats",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertRecvDirection(),n=this._mapMidTransceiver.get(t)){e.next=4;break}throw new Error("associated RTCRtpTransceiver not found");case 4:return e.abrupt("return",n.receiver.getStats());case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"receiveDataChannel",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,i,a,o,s,c,u,l,d,p=t.sctpStreamParameters,m=t.label,v=t.protocol;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertRecvDirection(),n=p.streamId,i=p.ordered,a=p.maxPacketLifeTime,o=p.maxRetransmits,s={negotiated:!0,id:n,ordered:i,maxPacketLifeTime:a,maxRetransmits:o,protocol:v},h.debug("receiveDataChannel() [options:%o]",s),c=this._pc.createDataChannel(m,s),this._hasDataChannelMediaSection){e.next=21;break}return this._remoteSdp.receiveSctpAssociation(),u={type:"offer",sdp:this._remoteSdp.getSdp()},h.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",u),e.next=10,this._pc.setRemoteDescription(u);case 10:return e.next=12,this._pc.createAnswer();case 12:if(l=e.sent,this._transportReady){e.next=17;break}return d=r.parse(l.sdp),e.next=17,this._setupTransport({localDtlsRole:"client",localSdpObject:d});case 17:return h.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",l),e.next=20,this._pc.setLocalDescription(l);case 20:this._hasDataChannelMediaSection=!0;case 21:return e.abrupt("return",{dataChannel:c});case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_setupTransport",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,i=t.localDtlsRole,a=t.localSdpObject;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a||(a=r.parse(this._pc.localDescription.sdp)),(n=u.extractDtlsParameters({sdpObject:a})).role=i,this._remoteSdp.updateDtlsRole("client"===i?"server":"client"),e.next=6,this.safeEmitAsPromise("@connect",{dtlsParameters:n});case 6:this._transportReady=!0;case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_assertSendDirection",value:function(){if("send"!==this._direction)throw new Error('method can just be called for handlers with "send" direction')}},{key:"_assertRecvDirection",value:function(){if("recv"!==this._direction)throw new Error('method can just be called for handlers with "recv" direction')}},{key:"name",get:function(){return"Firefox60"}}],[{key:"createFactory",value:function(){return function(){return new t}}}]),t}(d.HandlerInterface);t.Firefox60=_},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=n(0),a=n(1),s=n(2),c=n(6),u=n(17),l=n(5),d=n(7),p=new i.Logger("Safari12"),h={OS:1024,MIS:1024},v=function(e){function t(){var e;return(0,S.default)(this,t),(e=(0,b.default)(this,(t.__proto__||(0,y.default)(t)).call(this)))._mapMidTransceiver=new g.default,e._sendStream=new MediaStream,e._hasDataChannelMediaSection=!1,e._nextSendSctpStreamId=0,e._transportReady=!1,e}return(0,w.default)(t,e),(0,C.default)(t,[{key:"close",value:function(){if(p.debug("close()"),this._pc)try{this._pc.close()}catch(e){}}},{key:"getNativeRtpCapabilities",value:function(){var e=(0,m.default)(f.default.mark((function e(){var t,n,i;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p.debug("getNativeRtpCapabilities()"),t=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),e.prev=2,t.addTransceiver("audio"),t.addTransceiver("video"),e.next=6,t.createOffer();case 6:n=e.sent;try{t.close()}catch(e){}return i=r.parse(n.sdp),e.abrupt("return",c.extractRtpCapabilities({sdpObject:i}));case 12:e.prev=12,e.t0=e.catch(2);try{t.close()}catch(e){}throw e.t0;case 16:case"end":return e.stop()}}),e,this,[[2,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"getNativeSctpCapabilities",value:function(){var e=(0,m.default)(f.default.mark((function e(){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(p.debug("getNativeSctpCapabilities()"),{numStreams:h}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"run",value:function(e){var t=this,n=e.direction,r=e.iceParameters,i=e.iceCandidates,a=e.dtlsParameters,c=e.sctpParameters,u=e.iceServers,l=e.iceTransportPolicy,f=e.additionalSettings,h=e.proprietaryConstraints,m=e.extendedRtpCapabilities;p.debug("run()"),this._direction=n,this._remoteSdp=new d.RemoteSdp({iceParameters:r,iceCandidates:i,dtlsParameters:a,sctpParameters:c}),this._sendingRtpParametersByKind={audio:s.getSendingRtpParameters("audio",m),video:s.getSendingRtpParameters("video",m)},this._sendingRemoteRtpParametersByKind={audio:s.getSendingRemoteRtpParameters("audio",m),video:s.getSendingRemoteRtpParameters("video",m)},this._pc=new RTCPeerConnection((0,o.default)({iceServers:u||[],iceTransportPolicy:l||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"},f),h),this._pc.addEventListener("iceconnectionstatechange",(function(){switch(t._pc.iceConnectionState){case"checking":t.emit("@connectionstatechange","connecting");break;case"connected":case"completed":t.emit("@connectionstatechange","connected");break;case"failed":t.emit("@connectionstatechange","failed");break;case"disconnected":t.emit("@connectionstatechange","disconnected");break;case"closed":t.emit("@connectionstatechange","closed")}}))}},{key:"updateIceServers",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p.debug("updateIceServers()"),(n=this._pc.getConfiguration()).iceServers=t,this._pc.setConfiguration(n);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"restartIce",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,r,i,a;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p.debug("restartIce()"),this._remoteSdp.updateIceParameters(t),!this._transportReady){e.next=24;break}if("send"!==this._direction){e.next=14;break}return e.next=4,this._pc.createOffer({iceRestart:!0});case 4:return n=e.sent,p.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",n),e.next=8,this._pc.setLocalDescription(n);case 8:return r={type:"answer",sdp:this._remoteSdp.getSdp()},p.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",r),e.next=12,this._pc.setRemoteDescription(r);case 12:e.next=24;break;case 14:return i={type:"offer",sdp:this._remoteSdp.getSdp()},p.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",i),e.next=18,this._pc.setRemoteDescription(i);case 18:return e.next=20,this._pc.createAnswer();case 20:return a=e.sent,p.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",a),e.next=24,this._pc.setLocalDescription(a);case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTransportStats",value:function(){var e=(0,m.default)(f.default.mark((function e(){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._pc.getStats());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"send",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,i,l,d,h,m,v,g,y,b,w,_,x,S,C,$=t.track,R=t.encodings,M=t.codecOptions,P=t.codec;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._assertSendDirection(),p.debug("send() [kind:%s, track.id:%s]",$.kind,$.id),(n=a.clone(this._sendingRtpParametersByKind[$.kind])).codecs=s.reduceCodecs(n.codecs,P),(i=a.clone(this._sendingRemoteRtpParametersByKind[$.kind])).codecs=s.reduceCodecs(i.codecs,P),l=this._remoteSdp.getNextMediaSectionIdx(),d=this._pc.addTransceiver($,{direction:"sendonly",streams:[this._sendStream]}),h=void 0,e.next=9,this._pc.createOffer();case 9:if(m=e.sent,v=r.parse(m.sdp),e.t0=this._transportReady,e.t0){e.next=15;break}return e.next=15,this._setupTransport({localDtlsRole:"server",localSdpObject:v});case 15:return R&&R.length>1&&(p.debug("send() | enabling legacy simulcast"),v=r.parse(m.sdp),h=v.media[l.idx],u.addLegacySimulcast({offerMediaObject:h,numStreams:R.length}),m={type:"offer",sdp:r.write(v)}),p.debug("send() | calling pc.setLocalDescription() [offer:%o]",m),e.next=19,this._pc.setLocalDescription(m);case 19:if(g=d.mid,n.mid=g,v=r.parse(this._pc.localDescription.sdp),h=v.media[l.idx],n.rtcp.cname=c.getCname({offerMediaObject:h}),n.encodings=u.getRtpEncodings({offerMediaObject:h}),R)for(y=0;y<n.encodings.length;++y)R[y]&&(0,o.default)(n.encodings[y],R[y]);if(!(n.encodings.length>1)||"video/vp8"!==n.codecs[0].mimeType.toLowerCase()&&"video/h264"!==n.codecs[0].mimeType.toLowerCase()){e.next=41;break}for(b=!0,w=!1,_=void 0,e.prev=25,x=(0,k.default)(n.encodings);!(b=(S=x.next()).done);b=!0)S.value.scalabilityMode="S1T3";e.next=33;break;case 29:e.prev=29,e.t1=e.catch(25),w=!0,_=e.t1;case 33:e.prev=33,e.prev=34,!b&&x.return&&x.return();case 36:if(e.prev=36,!w){e.next=39;break}throw _;case 39:return e.finish(36);case 40:return e.finish(33);case 41:return this._remoteSdp.send({offerMediaObject:h,reuseMid:l.reuseMid,offerRtpParameters:n,answerRtpParameters:i,codecOptions:M}),C={type:"answer",sdp:this._remoteSdp.getSdp()},p.debug("send() | calling pc.setRemoteDescription() [answer:%o]",C),e.next=46,this._pc.setRemoteDescription(C);case 46:return this._mapMidTransceiver.set(g,d),e.abrupt("return",{localId:g,rtpParameters:n,rtpSender:d.sender});case 48:case"end":return e.stop()}}),e,this,[[25,29,33,41],[34,,36,40]])})));return function(t){return e.apply(this,arguments)}}()},{key:"stopSending",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,r,i;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),p.debug("stopSending() [localId:%s]",t),n=this._mapMidTransceiver.get(t)){e.next=4;break}throw new Error("associated RTCRtpTransceiver not found");case 4:return n.sender.replaceTrack(null),this._pc.removeTrack(n.sender),this._remoteSdp.closeMediaSection(n.mid),e.next=7,this._pc.createOffer();case 7:return r=e.sent,p.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),e.next=11,this._pc.setLocalDescription(r);case 11:return i={type:"answer",sdp:this._remoteSdp.getSdp()},p.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",i),e.next=15,this._pc.setRemoteDescription(i);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"replaceTrack",value:function(){var e=(0,m.default)(f.default.mark((function e(t,n){var r;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),n?p.debug("replaceTrack() [localId:%s, track.id:%s]",t,n.id):p.debug("replaceTrack() [localId:%s, no track]",t),r=this._mapMidTransceiver.get(t)){e.next=4;break}throw new Error("associated RTCRtpTransceiver not found");case 4:return e.next=6,r.sender.replaceTrack(n);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setMaxSpatialLayer",value:function(){var e=(0,m.default)(f.default.mark((function e(t,n){var r,i;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),p.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",t,n),r=this._mapMidTransceiver.get(t)){e.next=4;break}throw new Error("associated RTCRtpTransceiver not found");case 4:return(i=r.sender.getParameters()).encodings.forEach((function(e,t){e.active=t<=n})),e.next=8,r.sender.setParameters(i);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setRtpEncodingParameters",value:function(){var e=(0,m.default)(f.default.mark((function e(t,n){var r,i;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),p.debug("setRtpEncodingParameters() [localId:%s, params:%o]",t,n),r=this._mapMidTransceiver.get(t)){e.next=4;break}throw new Error("associated RTCRtpTransceiver not found");case 4:return(i=r.sender.getParameters()).encodings.forEach((function(e,t){i.encodings[t]=(0,o.default)((0,o.default)({},e),n)})),e.next=8,r.sender.setParameters(i);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getSenderStats",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),n=this._mapMidTransceiver.get(t)){e.next=4;break}throw new Error("associated RTCRtpTransceiver not found");case 4:return e.abrupt("return",n.sender.getStats());case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendDataChannel",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,i,a,o,s,c,u=t.ordered,l=t.maxPacketLifeTime,d=t.maxRetransmits,m=t.label,v=t.protocol,g=t.priority;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),n={negotiated:!0,id:this._nextSendSctpStreamId,ordered:u,maxPacketLifeTime:l,maxRetransmits:d,protocol:v,priority:g},p.debug("sendDataChannel() [options:%o]",n),i=this._pc.createDataChannel(m,n),this._nextSendSctpStreamId=++this._nextSendSctpStreamId%h.MIS,this._hasDataChannelMediaSection){e.next=23;break}return e.next=7,this._pc.createOffer();case 7:if(a=e.sent,o=r.parse(a.sdp),s=o.media.find((function(e){return"application"===e.type})),e.t0=this._transportReady,e.t0){e.next=14;break}return e.next=14,this._setupTransport({localDtlsRole:"server",localSdpObject:o});case 14:return p.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",a),e.next=17,this._pc.setLocalDescription(a);case 17:return this._remoteSdp.sendSctpAssociation({offerMediaObject:s}),c={type:"answer",sdp:this._remoteSdp.getSdp()},p.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",c),e.next=22,this._pc.setRemoteDescription(c);case 22:this._hasDataChannelMediaSection=!0;case 23:return e.abrupt("return",{dataChannel:i,sctpStreamParameters:{streamId:n.id,ordered:n.ordered,maxPacketLifeTime:n.maxPacketLifeTime,maxRetransmits:n.maxRetransmits}});case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"receive",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,i,a,o,s,u,l=t.trackId,d=t.kind,h=t.rtpParameters;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._assertRecvDirection(),p.debug("receive() [trackId:%s, kind:%s]",l,d),n=h.mid||String(this._mapMidTransceiver.size),this._remoteSdp.receive({mid:n,kind:d,offerRtpParameters:h,streamId:h.rtcp.cname,trackId:l}),i={type:"offer",sdp:this._remoteSdp.getSdp()},p.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",i),e.next=7,this._pc.setRemoteDescription(i);case 7:return e.next=9,this._pc.createAnswer();case 9:if(a=e.sent,o=r.parse(a.sdp),s=o.media.find((function(e){return String(e.mid)===n})),c.applyCodecParameters({offerRtpParameters:h,answerMediaObject:s}),a={type:"answer",sdp:r.write(o)},e.t0=this._transportReady,e.t0){e.next=17;break}return e.next=17,this._setupTransport({localDtlsRole:"client",localSdpObject:o});case 17:return p.debug("receive() | calling pc.setLocalDescription() [answer:%o]",a),e.next=20,this._pc.setLocalDescription(a);case 20:if(u=this._pc.getTransceivers().find((function(e){return e.mid===n}))){e.next=23;break}throw new Error("new RTCRtpTransceiver not found");case 23:return e.abrupt("return",(this._mapMidTransceiver.set(n,u),{localId:n,track:u.receiver.track,rtpReceiver:u.receiver}));case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"stopReceiving",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,r,i;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertRecvDirection(),p.debug("stopReceiving() [localId:%s]",t),n=this._mapMidTransceiver.get(t)){e.next=4;break}throw new Error("associated RTCRtpTransceiver not found");case 4:return this._remoteSdp.closeMediaSection(n.mid),r={type:"offer",sdp:this._remoteSdp.getSdp()},p.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",r),e.next=9,this._pc.setRemoteDescription(r);case 9:return e.next=11,this._pc.createAnswer();case 11:return i=e.sent,p.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",i),e.next=15,this._pc.setLocalDescription(i);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getReceiverStats",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertRecvDirection(),n=this._mapMidTransceiver.get(t)){e.next=4;break}throw new Error("associated RTCRtpTransceiver not found");case 4:return e.abrupt("return",n.receiver.getStats());case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"receiveDataChannel",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,i,a,o,s,c,u,l,d,h=t.sctpStreamParameters,m=t.label,v=t.protocol;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertRecvDirection(),n=h.streamId,i=h.ordered,a=h.maxPacketLifeTime,o=h.maxRetransmits,s={negotiated:!0,id:n,ordered:i,maxPacketLifeTime:a,maxRetransmits:o,protocol:v},p.debug("receiveDataChannel() [options:%o]",s),c=this._pc.createDataChannel(m,s),this._hasDataChannelMediaSection){e.next=21;break}return this._remoteSdp.receiveSctpAssociation(),u={type:"offer",sdp:this._remoteSdp.getSdp()},p.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",u),e.next=10,this._pc.setRemoteDescription(u);case 10:return e.next=12,this._pc.createAnswer();case 12:if(l=e.sent,this._transportReady){e.next=17;break}return d=r.parse(l.sdp),e.next=17,this._setupTransport({localDtlsRole:"client",localSdpObject:d});case 17:return p.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",l),e.next=20,this._pc.setLocalDescription(l);case 20:this._hasDataChannelMediaSection=!0;case 21:return e.abrupt("return",{dataChannel:c});case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_setupTransport",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,i=t.localDtlsRole,a=t.localSdpObject;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a||(a=r.parse(this._pc.localDescription.sdp)),(n=c.extractDtlsParameters({sdpObject:a})).role=i,this._remoteSdp.updateDtlsRole("client"===i?"server":"client"),e.next=6,this.safeEmitAsPromise("@connect",{dtlsParameters:n});case 6:this._transportReady=!0;case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_assertSendDirection",value:function(){if("send"!==this._direction)throw new Error('method can just be called for handlers with "send" direction')}},{key:"_assertRecvDirection",value:function(){if("recv"!==this._direction)throw new Error('method can just be called for handlers with "recv" direction')}},{key:"name",get:function(){return"Safari12"}}],[{key:"createFactory",value:function(){return function(){return new t}}}]),t}(l.HandlerInterface);t.Safari12=v},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=n(0),a=n(1),s=n(2),c=n(6),u=n(18),l=n(5),d=n(7),p=new i.Logger("Safari11"),h={OS:1024,MIS:1024},v=function(e){function t(){var e;return(0,S.default)(this,t),(e=(0,b.default)(this,(t.__proto__||(0,y.default)(t)).call(this)))._sendStream=new MediaStream,e._mapSendLocalIdRtpSender=new g.default,e._nextSendLocalId=0,e._mapRecvLocalIdInfo=new g.default,e._hasDataChannelMediaSection=!1,e._nextSendSctpStreamId=0,e._transportReady=!1,e}return(0,w.default)(t,e),(0,C.default)(t,[{key:"close",value:function(){if(p.debug("close()"),this._pc)try{this._pc.close()}catch(e){}}},{key:"getNativeRtpCapabilities",value:function(){var e=(0,m.default)(f.default.mark((function e(){var t,n,i;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p.debug("getNativeRtpCapabilities()"),t=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"}),e.prev=2,e.next=5,t.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});case 5:n=e.sent;try{t.close()}catch(e){}return i=r.parse(n.sdp),e.abrupt("return",c.extractRtpCapabilities({sdpObject:i}));case 11:e.prev=11,e.t0=e.catch(2);try{t.close()}catch(e){}throw e.t0;case 15:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"getNativeSctpCapabilities",value:function(){var e=(0,m.default)(f.default.mark((function e(){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(p.debug("getNativeSctpCapabilities()"),{numStreams:h}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"run",value:function(e){var t=this,n=e.direction,r=e.iceParameters,i=e.iceCandidates,a=e.dtlsParameters,c=e.sctpParameters,u=e.iceServers,l=e.iceTransportPolicy,f=e.additionalSettings,h=e.proprietaryConstraints,m=e.extendedRtpCapabilities;p.debug("run()"),this._direction=n,this._remoteSdp=new d.RemoteSdp({iceParameters:r,iceCandidates:i,dtlsParameters:a,sctpParameters:c,planB:!0}),this._sendingRtpParametersByKind={audio:s.getSendingRtpParameters("audio",m),video:s.getSendingRtpParameters("video",m)},this._sendingRemoteRtpParametersByKind={audio:s.getSendingRemoteRtpParameters("audio",m),video:s.getSendingRemoteRtpParameters("video",m)},this._pc=new RTCPeerConnection((0,o.default)({iceServers:u||[],iceTransportPolicy:l||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"},f),h),this._pc.addEventListener("iceconnectionstatechange",(function(){switch(t._pc.iceConnectionState){case"checking":t.emit("@connectionstatechange","connecting");break;case"connected":case"completed":t.emit("@connectionstatechange","connected");break;case"failed":t.emit("@connectionstatechange","failed");break;case"disconnected":t.emit("@connectionstatechange","disconnected");break;case"closed":t.emit("@connectionstatechange","closed")}}))}},{key:"updateIceServers",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p.debug("updateIceServers()"),(n=this._pc.getConfiguration()).iceServers=t,this._pc.setConfiguration(n);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"restartIce",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,r,i,a;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p.debug("restartIce()"),this._remoteSdp.updateIceParameters(t),!this._transportReady){e.next=24;break}if("send"!==this._direction){e.next=14;break}return e.next=4,this._pc.createOffer({iceRestart:!0});case 4:return n=e.sent,p.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",n),e.next=8,this._pc.setLocalDescription(n);case 8:return r={type:"answer",sdp:this._remoteSdp.getSdp()},p.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",r),e.next=12,this._pc.setRemoteDescription(r);case 12:e.next=24;break;case 14:return i={type:"offer",sdp:this._remoteSdp.getSdp()},p.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",i),e.next=18,this._pc.setRemoteDescription(i);case 18:return e.next=20,this._pc.createAnswer();case 20:return a=e.sent,p.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",a),e.next=24,this._pc.setLocalDescription(a);case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTransportStats",value:function(){var e=(0,m.default)(f.default.mark((function e(){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._pc.getStats());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"send",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,i,l,d,h,m,v,g,y,b,w,_,x,S,C=t.track,$=t.encodings,R=t.codecOptions,M=t.codec;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._assertSendDirection(),p.debug("send() [kind:%s, track.id:%s]",C.kind,C.id),M&&p.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(C),this._pc.addTrack(C,this._sendStream),n=void 0,e.next=4,this._pc.createOffer();case 4:if(i=e.sent,l=r.parse(i.sdp),(d=a.clone(this._sendingRtpParametersByKind[C.kind])).codecs=s.reduceCodecs(d.codecs),(h=a.clone(this._sendingRemoteRtpParametersByKind[C.kind])).codecs=s.reduceCodecs(h.codecs),e.t0=this._transportReady,e.t0){e.next=14;break}return e.next=14,this._setupTransport({localDtlsRole:"server",localSdpObject:l});case 14:return"video"===C.kind&&$&&$.length>1&&(p.debug("send() | enabling simulcast"),l=r.parse(i.sdp),n=l.media.find((function(e){return"video"===e.type})),u.addLegacySimulcast({offerMediaObject:n,track:C,numStreams:$.length}),i={type:"offer",sdp:r.write(l)}),p.debug("send() | calling pc.setLocalDescription() [offer:%o]",i),e.next=18,this._pc.setLocalDescription(i);case 18:if(l=r.parse(this._pc.localDescription.sdp),n=l.media.find((function(e){return e.type===C.kind})),d.rtcp.cname=c.getCname({offerMediaObject:n}),d.encodings=u.getRtpEncodings({offerMediaObject:n,track:C}),!$){e.next=24;break}for(m=0;m<d.encodings.length;++m)$[m]&&(0,o.default)(d.encodings[m],$[m]);case 24:if(!(d.encodings.length>1&&"video/vp8"===d.codecs[0].mimeType.toLowerCase())){e.next=44;break}for(v=!0,g=!1,y=void 0,e.prev=28,b=(0,k.default)(d.encodings);!(v=(w=b.next()).done);v=!0)w.value.scalabilityMode="S1T3";e.next=36;break;case 32:e.prev=32,e.t1=e.catch(28),g=!0,y=e.t1;case 36:e.prev=36,e.prev=37,!v&&b.return&&b.return();case 39:if(e.prev=39,!g){e.next=42;break}throw y;case 42:return e.finish(39);case 43:return e.finish(36);case 44:return this._remoteSdp.send({offerMediaObject:n,offerRtpParameters:d,answerRtpParameters:h,codecOptions:R}),_={type:"answer",sdp:this._remoteSdp.getSdp()},p.debug("send() | calling pc.setRemoteDescription() [answer:%o]",_),e.next=49,this._pc.setRemoteDescription(_);case 49:return x=String(this._nextSendLocalId),this._nextSendLocalId++,S=this._pc.getSenders().find((function(e){return e.track===C})),e.abrupt("return",(this._mapSendLocalIdRtpSender.set(x,S),{localId:x,rtpParameters:d,rtpSender:S}));case 53:case"end":return e.stop()}}),e,this,[[28,32,36,44],[37,,39,43]])})));return function(t){return e.apply(this,arguments)}}()},{key:"stopSending",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,r,i;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),n=this._mapSendLocalIdRtpSender.get(t)){e.next=4;break}throw new Error("associated RTCRtpSender not found");case 4:return n.track&&this._sendStream.removeTrack(n.track),this._mapSendLocalIdRtpSender.delete(t),e.next=7,this._pc.createOffer();case 7:return r=e.sent,p.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),e.prev=9,e.next=12,this._pc.setLocalDescription(r);case 12:e.next=19;break;case 14:if(e.prev=14,e.t0=e.catch(9),0!==this._sendStream.getTracks().length){e.next=18;break}return e.abrupt("return",void p.warn("stopSending() | ignoring expected error due no sending tracks: %s",e.t0.toString()));case 18:throw e.t0;case 19:if("stable"!==this._pc.signalingState){e.next=21;break}return e.abrupt("return");case 21:return i={type:"answer",sdp:this._remoteSdp.getSdp()},p.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",i),e.next=25,this._pc.setRemoteDescription(i);case 25:case"end":return e.stop()}}),e,this,[[9,14]])})));return function(t){return e.apply(this,arguments)}}()},{key:"replaceTrack",value:function(){var e=(0,m.default)(f.default.mark((function e(t,n){var r,i;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),n?p.debug("replaceTrack() [localId:%s, track.id:%s]",t,n.id):p.debug("replaceTrack() [localId:%s, no track]",t),r=this._mapSendLocalIdRtpSender.get(t)){e.next=4;break}throw new Error("associated RTCRtpSender not found");case 4:return i=r.track,e.next=7,r.replaceTrack(n);case 7:i&&this._sendStream.removeTrack(i),n&&this._sendStream.addTrack(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setMaxSpatialLayer",value:function(){var e=(0,m.default)(f.default.mark((function e(t,n){var r,i;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),p.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",t,n),r=this._mapSendLocalIdRtpSender.get(t)){e.next=4;break}throw new Error("associated RTCRtpSender not found");case 4:return(i=r.getParameters()).encodings.forEach((function(e,t){e.active=t<=n})),e.next=8,r.setParameters(i);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setRtpEncodingParameters",value:function(){var e=(0,m.default)(f.default.mark((function e(t,n){var r,i;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),p.debug("setRtpEncodingParameters() [localId:%s, params:%o]",t,n),r=this._mapSendLocalIdRtpSender.get(t)){e.next=4;break}throw new Error("associated RTCRtpSender not found");case 4:return(i=r.getParameters()).encodings.forEach((function(e,t){i.encodings[t]=(0,o.default)((0,o.default)({},e),n)})),e.next=8,r.setParameters(i);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getSenderStats",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),n=this._mapSendLocalIdRtpSender.get(t)){e.next=4;break}throw new Error("associated RTCRtpSender not found");case 4:return e.abrupt("return",n.getStats());case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendDataChannel",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,i,a,o,s,c,u=t.ordered,l=t.maxPacketLifeTime,d=t.maxRetransmits,m=t.label,v=t.protocol,g=t.priority;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),n={negotiated:!0,id:this._nextSendSctpStreamId,ordered:u,maxPacketLifeTime:l,maxRetransmits:d,protocol:v,priority:g},p.debug("sendDataChannel() [options:%o]",n),i=this._pc.createDataChannel(m,n),this._nextSendSctpStreamId=++this._nextSendSctpStreamId%h.MIS,this._hasDataChannelMediaSection){e.next=23;break}return e.next=7,this._pc.createOffer();case 7:if(a=e.sent,o=r.parse(a.sdp),s=o.media.find((function(e){return"application"===e.type})),e.t0=this._transportReady,e.t0){e.next=14;break}return e.next=14,this._setupTransport({localDtlsRole:"server",localSdpObject:o});case 14:return p.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",a),e.next=17,this._pc.setLocalDescription(a);case 17:return this._remoteSdp.sendSctpAssociation({offerMediaObject:s}),c={type:"answer",sdp:this._remoteSdp.getSdp()},p.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",c),e.next=22,this._pc.setRemoteDescription(c);case 22:this._hasDataChannelMediaSection=!0;case 23:return e.abrupt("return",{dataChannel:i,sctpStreamParameters:{streamId:n.id,ordered:n.ordered,maxPacketLifeTime:n.maxPacketLifeTime,maxRetransmits:n.maxRetransmits}});case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"receive",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,i,a,o,s,u,l,d=t.trackId,h=t.kind,m=t.rtpParameters;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._assertRecvDirection(),p.debug("receive() [trackId:%s, kind:%s]",d,h),n=d,i=h,this._remoteSdp.receive({mid:i,kind:h,offerRtpParameters:m,streamId:m.rtcp.cname,trackId:d}),a={type:"offer",sdp:this._remoteSdp.getSdp()},p.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",a),e.next=7,this._pc.setRemoteDescription(a);case 7:return e.next=9,this._pc.createAnswer();case 9:if(o=e.sent,s=r.parse(o.sdp),u=s.media.find((function(e){return String(e.mid)===i})),c.applyCodecParameters({offerRtpParameters:m,answerMediaObject:u}),o={type:"answer",sdp:r.write(s)},e.t0=this._transportReady,e.t0){e.next=17;break}return e.next=17,this._setupTransport({localDtlsRole:"client",localSdpObject:s});case 17:return p.debug("receive() | calling pc.setLocalDescription() [answer:%o]",o),e.next=20,this._pc.setLocalDescription(o);case 20:if(l=this._pc.getReceivers().find((function(e){return e.track&&e.track.id===n}))){e.next=23;break}throw new Error("new RTCRtpReceiver not");case 23:return e.abrupt("return",(this._mapRecvLocalIdInfo.set(n,{mid:i,rtpParameters:m,rtpReceiver:l}),{localId:n,track:l.track,rtpReceiver:l}));case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"stopReceiving",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,r,i,a,o;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._assertRecvDirection(),p.debug("stopReceiving() [localId:%s]",t),n=this._mapRecvLocalIdInfo.get(t)||{},r=n.mid,i=n.rtpParameters,this._mapRecvLocalIdInfo.delete(t),this._remoteSdp.planBStopReceiving({mid:r,offerRtpParameters:i}),a={type:"offer",sdp:this._remoteSdp.getSdp()},p.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",a),e.next=7,this._pc.setRemoteDescription(a);case 7:return e.next=9,this._pc.createAnswer();case 9:return o=e.sent,p.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",o),e.next=13,this._pc.setLocalDescription(o);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getReceiverStats",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,r;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertRecvDirection(),n=this._mapRecvLocalIdInfo.get(t)||{},r=n.rtpReceiver){e.next=4;break}throw new Error("associated RTCRtpReceiver not found");case 4:return e.abrupt("return",r.getStats());case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"receiveDataChannel",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,i,a,o,s,c,u,l,d,h=t.sctpStreamParameters,m=t.label,v=t.protocol;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertRecvDirection(),n=h.streamId,i=h.ordered,a=h.maxPacketLifeTime,o=h.maxRetransmits,s={negotiated:!0,id:n,ordered:i,maxPacketLifeTime:a,maxRetransmits:o,protocol:v},p.debug("receiveDataChannel() [options:%o]",s),c=this._pc.createDataChannel(m,s),this._hasDataChannelMediaSection){e.next=21;break}return this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0}),u={type:"offer",sdp:this._remoteSdp.getSdp()},p.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",u),e.next=10,this._pc.setRemoteDescription(u);case 10:return e.next=12,this._pc.createAnswer();case 12:if(l=e.sent,this._transportReady){e.next=17;break}return d=r.parse(l.sdp),e.next=17,this._setupTransport({localDtlsRole:"client",localSdpObject:d});case 17:return p.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",l),e.next=20,this._pc.setLocalDescription(l);case 20:this._hasDataChannelMediaSection=!0;case 21:return e.abrupt("return",{dataChannel:c});case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_setupTransport",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,i=t.localDtlsRole,a=t.localSdpObject;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a||(a=r.parse(this._pc.localDescription.sdp)),(n=c.extractDtlsParameters({sdpObject:a})).role=i,this._remoteSdp.updateDtlsRole("client"===i?"server":"client"),e.next=6,this.safeEmitAsPromise("@connect",{dtlsParameters:n});case 6:this._transportReady=!0;case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_assertSendDirection",value:function(){if("send"!==this._direction)throw new Error('method can just be called for handlers with "send" direction')}},{key:"_assertRecvDirection",value:function(){if("recv"!==this._direction)throw new Error('method can just be called for handlers with "recv" direction')}},{key:"name",get:function(){return"Safari11"}}],[{key:"createFactory",value:function(){return function(){return new t}}}]),t}(l.HandlerInterface);t.Safari11=v},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(3),a=n(1),s=n(2),c=n(107),u=n(5),l=new r.Logger("Edge11"),d=function(e){function t(){var e;return(0,S.default)(this,t),(e=(0,b.default)(this,(t.__proto__||(0,y.default)(t)).call(this)))._rtpSenders=new g.default,e._rtpReceivers=new g.default,e._nextSendLocalId=0,e._transportReady=!1,e}return(0,w.default)(t,e),(0,C.default)(t,[{key:"close",value:function(){l.debug("close()");try{this._iceGatherer.close()}catch(e){}try{this._iceTransport.stop()}catch(e){}try{this._dtlsTransport.stop()}catch(e){}var e=!0,t=!1,n=void 0;try{for(var r,i=(0,k.default)(this._rtpSenders.values());!(e=(r=i.next()).done);e=!0){var a=r.value;try{a.stop()}catch(e){}}}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}var o=!0,s=!1,c=void 0;try{for(var u,d=(0,k.default)(this._rtpReceivers.values());!(o=(u=d.next()).done);o=!0){var f=u.value;try{f.stop()}catch(e){}}}catch(e){s=!0,c=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw c}}}},{key:"getNativeRtpCapabilities",value:function(){var e=(0,m.default)(f.default.mark((function e(){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(l.debug("getNativeRtpCapabilities()"),c.getCapabilities()));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getNativeSctpCapabilities",value:function(){var e=(0,m.default)(f.default.mark((function e(){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(l.debug("getNativeSctpCapabilities()"),{numStreams:{OS:0,MIS:0}}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"run",value:function(e){e.direction;var t=e.iceParameters,n=e.iceCandidates,r=e.dtlsParameters,i=(e.sctpParameters,e.iceServers),o=e.iceTransportPolicy,c=(e.additionalSettings,e.proprietaryConstraints,e.extendedRtpCapabilities);l.debug("run()"),this._sendingRtpParametersByKind={audio:s.getSendingRtpParameters("audio",c),video:s.getSendingRtpParameters("video",c)},this._remoteIceParameters=t,this._remoteIceCandidates=n,this._remoteDtlsParameters=r,this._cname="CNAME-"+a.generateRandomNumber(),this._setIceGatherer({iceServers:i,iceTransportPolicy:o}),this._setIceTransport(),this._setDtlsTransport()}},{key:"updateIceServers",value:function(){var e=(0,m.default)(f.default.mark((function e(t){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new i.UnsupportedError("not supported");case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"restartIce",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,r,i,a,o,s;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l.debug("restartIce()"),this._remoteIceParameters=t,!this._transportReady){e.next=22;break}for(l.debug("restartIce() | calling iceTransport.start()"),this._iceTransport.start(this._iceGatherer,t,"controlling"),n=!0,r=!1,i=void 0,e.prev=5,a=(0,k.default)(this._remoteIceCandidates);!(n=(o=a.next()).done);n=!0)s=o.value,this._iceTransport.addRemoteCandidate(s);e.next=13;break;case 9:e.prev=9,e.t0=e.catch(5),r=!0,i=e.t0;case 13:e.prev=13,e.prev=14,!n&&a.return&&a.return();case 16:if(e.prev=16,!r){e.next=19;break}throw i;case 19:return e.finish(16);case 20:return e.finish(13);case 21:this._iceTransport.addRemoteCandidate({});case 22:case"end":return e.stop()}}),e,this,[[5,9,13,21],[14,,16,20]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getTransportStats",value:function(){var e=(0,m.default)(f.default.mark((function e(){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._iceTransport.getStats());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"send",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,r,i,o,u,d,p,h,m,v,g,y=t.track,b=t.encodings,w=(t.codecOptions,t.codec);return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l.debug("send() [kind:%s, track.id:%s]",y.kind,y.id),e.t0=this._transportReady,e.t0){e.next=5;break}return e.next=5,this._setupTransport({localDtlsRole:"server"});case 5:for(l.debug("send() | calling new RTCRtpSender()"),n=new RTCRtpSender(y,this._dtlsTransport),(r=a.clone(this._sendingRtpParametersByKind[y.kind])).codecs=s.reduceCodecs(r.codecs,w),i=r.codecs.some((function(e){return/.+\/rtx$/i.test(e.mimeType)})),b||(b=[{}]),o=!0,u=!1,d=void 0,e.prev=13,p=(0,k.default)(b);!(o=(h=p.next()).done);o=!0)(m=h.value).ssrc=a.generateRandomNumber(),i&&(m.rtx={ssrc:a.generateRandomNumber()});e.next=21;break;case 17:e.prev=17,e.t1=e.catch(13),u=!0,d=e.t1;case 21:e.prev=21,e.prev=22,!o&&p.return&&p.return();case 24:if(e.prev=24,!u){e.next=27;break}throw d;case 27:return e.finish(24);case 28:return e.finish(21);case 29:return r.encodings=b,r.rtcp={cname:this._cname,reducedSize:!0,mux:!0},v=c.mangleRtpParameters(r),l.debug("send() | calling rtpSender.send() [params:%o]",v),e.next=34,n.send(v);case 34:return g=String(this._nextSendLocalId),e.abrupt("return",(this._nextSendLocalId++,this._rtpSenders.set(g,n),{localId:g,rtpParameters:r,rtpSender:n}));case 36:case"end":return e.stop()}}),e,this,[[13,17,21,29],[22,,24,28]])})));return function(t){return e.apply(this,arguments)}}()},{key:"stopSending",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l.debug("stopSending() [localId:%s]",t),n=this._rtpSenders.get(t)){e.next=4;break}throw new Error("RTCRtpSender not found");case 4:this._rtpSenders.delete(t),e.prev=5,l.debug("stopSending() | calling rtpSender.stop()"),n.stop(),e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(5),l.warn("stopSending() | rtpSender.stop() failed:%o",e.t0),e.t0;case 12:case"end":return e.stop()}}),e,this,[[5,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"replaceTrack",value:function(){var e=(0,m.default)(f.default.mark((function e(t,n){var r;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n?l.debug("replaceTrack() [localId:%s, track.id:%s]",t,n.id):l.debug("replaceTrack() [localId:%s, no track]",t),r=this._rtpSenders.get(t)){e.next=4;break}throw new Error("RTCRtpSender not found");case 4:r.setTrack(n);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setMaxSpatialLayer",value:function(){var e=(0,m.default)(f.default.mark((function e(t,n){var r,i;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",t,n),r=this._rtpSenders.get(t)){e.next=4;break}throw new Error("RTCRtpSender not found");case 4:return(i=r.getParameters()).encodings.forEach((function(e,t){e.active=t<=n})),e.next=8,r.setParameters(i);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setRtpEncodingParameters",value:function(){var e=(0,m.default)(f.default.mark((function e(t,n){var r,i;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l.debug("setRtpEncodingParameters() [localId:%s, params:%o]",t,n),r=this._rtpSenders.get(t)){e.next=4;break}throw new Error("RTCRtpSender not found");case 4:return(i=r.getParameters()).encodings.forEach((function(e,t){i.encodings[t]=(0,o.default)((0,o.default)({},e),n)})),e.next=8,r.setParameters(i);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getSenderStats",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._rtpSenders.get(t)){e.next=3;break}throw new Error("RTCRtpSender not found");case 3:return e.abrupt("return",n.getStats());case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendDataChannel",value:function(){var e=(0,m.default)(f.default.mark((function e(t){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new i.UnsupportedError("not implemented");case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"receive",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,r,i,a=t.trackId,o=t.kind,s=t.rtpParameters;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l.debug("receive() [trackId:%s, kind:%s]",a,o),e.t0=this._transportReady,e.t0){e.next=5;break}return e.next=5,this._setupTransport({localDtlsRole:"server"});case 5:return l.debug("receive() | calling new RTCRtpReceiver()"),(n=new RTCRtpReceiver(this._dtlsTransport,o)).addEventListener("error",(function(e){l.error('rtpReceiver "error" event [event:%o]',e)})),r=c.mangleRtpParameters(s),l.debug("receive() | calling rtpReceiver.receive() [params:%o]",r),e.next=12,n.receive(r);case 12:return i=a,e.abrupt("return",(this._rtpReceivers.set(i,n),{localId:i,track:n.track,rtpReceiver:n}));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"stopReceiving",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l.debug("stopReceiving() [localId:%s]",t),n=this._rtpReceivers.get(t)){e.next=4;break}throw new Error("RTCRtpReceiver not found");case 4:this._rtpReceivers.delete(t);try{l.debug("stopReceiving() | calling rtpReceiver.stop()"),n.stop()}catch(e){l.warn("stopReceiving() | rtpReceiver.stop() failed:%o",e)}case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getReceiverStats",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._rtpReceivers.get(t)){e.next=3;break}throw new Error("RTCRtpReceiver not found");case 3:return e.abrupt("return",n.getStats());case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"receiveDataChannel",value:function(){var e=(0,m.default)(f.default.mark((function e(t){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new i.UnsupportedError("not implemented");case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_setIceGatherer",value:function(e){var t=e.iceServers,n=e.iceTransportPolicy,r=new RTCIceGatherer({iceServers:t||[],gatherPolicy:n||"all"});r.addEventListener("error",(function(e){l.error('iceGatherer "error" event [event:%o]',e)}));try{r.gather()}catch(t){l.debug("_setIceGatherer() | iceGatherer.gather() failed: %s",t.toString())}this._iceGatherer=r}},{key:"_setIceTransport",value:function(){var e=this,t=new RTCIceTransport(this._iceGatherer);t.addEventListener("statechange",(function(){switch(t.state){case"checking":e.emit("@connectionstatechange","connecting");break;case"connected":case"completed":e.emit("@connectionstatechange","connected");break;case"failed":e.emit("@connectionstatechange","failed");break;case"disconnected":e.emit("@connectionstatechange","disconnected");break;case"closed":e.emit("@connectionstatechange","closed")}})),t.addEventListener("icestatechange",(function(){switch(t.state){case"checking":e.emit("@connectionstatechange","connecting");break;case"connected":case"completed":e.emit("@connectionstatechange","connected");break;case"failed":e.emit("@connectionstatechange","failed");break;case"disconnected":e.emit("@connectionstatechange","disconnected");break;case"closed":e.emit("@connectionstatechange","closed")}})),t.addEventListener("candidatepairchange",(function(e){l.debug('iceTransport "candidatepairchange" event [pair:%o]',e.pair)})),this._iceTransport=t}},{key:"_setDtlsTransport",value:function(){var e=this,t=new RTCDtlsTransport(this._iceTransport);t.addEventListener("statechange",(function(){l.debug('dtlsTransport "statechange" event [state:%s]',t.state)})),t.addEventListener("dtlsstatechange",(function(){l.debug('dtlsTransport "dtlsstatechange" event [state:%s]',t.state),"closed"===t.state&&e.emit("@connectionstatechange","closed")})),t.addEventListener("error",(function(e){l.error('dtlsTransport "error" event [event:%o]',e)})),this._dtlsTransport=t}},{key:"_setupTransport",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,r,i,a,o,s,c,u=t.localDtlsRole;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.debug("_setupTransport()"),(n=this._dtlsTransport.getLocalParameters()).role=u,e.next=5,this.safeEmitAsPromise("@connect",{dtlsParameters:n});case 5:for(this._iceTransport.start(this._iceGatherer,this._remoteIceParameters,"controlling"),r=!0,i=!1,a=void 0,e.prev=9,o=(0,k.default)(this._remoteIceCandidates);!(r=(s=o.next()).done);r=!0)c=s.value,this._iceTransport.addRemoteCandidate(c);e.next=17;break;case 13:e.prev=13,e.t0=e.catch(9),i=!0,a=e.t0;case 17:e.prev=17,e.prev=18,!r&&o.return&&o.return();case 20:if(e.prev=20,!i){e.next=23;break}throw a;case 23:return e.finish(20);case 24:return e.finish(17);case 25:this._iceTransport.addRemoteCandidate({}),this._remoteDtlsParameters.fingerprints=this._remoteDtlsParameters.fingerprints.filter((function(e){return"sha-256"===e.algorithm||"sha-384"===e.algorithm||"sha-512"===e.algorithm})),this._dtlsTransport.start(this._remoteDtlsParameters),this._transportReady=!0;case 26:case"end":return e.stop()}}),e,this,[[9,13,17,25],[18,,20,24]])})));return function(t){return e.apply(this,arguments)}}()},{key:"name",get:function(){return"Edge11"}}],[{key:"createFactory",value:function(){return function(){return new t}}}]),t}(u.HandlerInterface);t.Edge11=d},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);t.getCapabilities=function(){var e=RTCRtpReceiver.getCapabilities(),t=r.clone(e),n=!0,i=!1,a=void 0;try{for(var o,s=(0,k.default)(t.codecs);!(n=(o=s.next()).done);n=!0){var c=o.value;if(c.channels=c.numChannels,delete c.numChannels,c.mimeType=c.mimeType||c.kind+"/"+c.name,c.parameters){var u=c.parameters;u.apt&&(u.apt=Number(u.apt)),u["packetization-mode"]&&(u["packetization-mode"]=Number(u["packetization-mode"]))}var l=!0,d=!1,f=void 0;try{for(var p,h=(0,k.default)(c.rtcpFeedback||[]);!(l=(p=h.next()).done);l=!0){var m=p.value;m.parameter||(m.parameter="")}}catch(e){d=!0,f=e}finally{try{!l&&h.return&&h.return()}finally{if(d)throw f}}}}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return t},t.mangleRtpParameters=function(e){var t=r.clone(e);t.mid&&(t.muxId=t.mid,delete t.mid);var n=!0,i=!1,a=void 0;try{for(var o,s=(0,k.default)(t.codecs);!(n=(o=s.next()).done);n=!0){var c=o.value;c.channels&&(c.numChannels=c.channels,delete c.channels),c.mimeType&&!c.name&&(c.name=c.mimeType.split("/")[1]),delete c.mimeType}}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return t}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=n(0),a=n(3),s=n(1),c=n(2),u=n(6),l=n(18),d=n(5),p=n(7),h=new i.Logger("ReactNative"),v={OS:1024,MIS:1024},_=function(e){function t(){var e;return(0,S.default)(this,t),(e=(0,b.default)(this,(t.__proto__||(0,y.default)(t)).call(this)))._sendStream=new MediaStream,e._mapSendLocalIdTrack=new g.default,e._nextSendLocalId=0,e._mapRecvLocalIdInfo=new g.default,e._hasDataChannelMediaSection=!1,e._nextSendSctpStreamId=0,e._transportReady=!1,e}return(0,w.default)(t,e),(0,C.default)(t,[{key:"close",value:function(){if(h.debug("close()"),this._pc)try{this._pc.close()}catch(e){}}},{key:"getNativeRtpCapabilities",value:function(){var e=(0,m.default)(f.default.mark((function e(){var t,n,i;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.debug("getNativeRtpCapabilities()"),t=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"}),e.prev=2,e.next=5,t.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});case 5:n=e.sent;try{t.close()}catch(e){}return i=r.parse(n.sdp),e.abrupt("return",u.extractRtpCapabilities({sdpObject:i}));case 11:e.prev=11,e.t0=e.catch(2);try{t.close()}catch(e){}throw e.t0;case 15:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"getNativeSctpCapabilities",value:function(){var e=(0,m.default)(f.default.mark((function e(){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(h.debug("getNativeSctpCapabilities()"),{numStreams:v}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"run",value:function(e){var t=this,n=e.direction,r=e.iceParameters,i=e.iceCandidates,a=e.dtlsParameters,s=e.sctpParameters,u=e.iceServers,l=e.iceTransportPolicy,d=e.additionalSettings,f=e.proprietaryConstraints,m=e.extendedRtpCapabilities;h.debug("run()"),this._direction=n,this._remoteSdp=new p.RemoteSdp({iceParameters:r,iceCandidates:i,dtlsParameters:a,sctpParameters:s,planB:!0}),this._sendingRtpParametersByKind={audio:c.getSendingRtpParameters("audio",m),video:c.getSendingRtpParameters("video",m)},this._sendingRemoteRtpParametersByKind={audio:c.getSendingRemoteRtpParameters("audio",m),video:c.getSendingRemoteRtpParameters("video",m)},this._pc=new RTCPeerConnection((0,o.default)({iceServers:u||[],iceTransportPolicy:l||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"},d),f),this._pc.addEventListener("iceconnectionstatechange",(function(){switch(t._pc.iceConnectionState){case"checking":t.emit("@connectionstatechange","connecting");break;case"connected":case"completed":t.emit("@connectionstatechange","connected");break;case"failed":t.emit("@connectionstatechange","failed");break;case"disconnected":t.emit("@connectionstatechange","disconnected");break;case"closed":t.emit("@connectionstatechange","closed")}}))}},{key:"updateIceServers",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.debug("updateIceServers()"),(n=this._pc.getConfiguration()).iceServers=t,this._pc.setConfiguration(n);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"restartIce",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,r,i,a;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h.debug("restartIce()"),this._remoteSdp.updateIceParameters(t),!this._transportReady){e.next=24;break}if("send"!==this._direction){e.next=14;break}return e.next=4,this._pc.createOffer({iceRestart:!0});case 4:return n=e.sent,h.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",n),e.next=8,this._pc.setLocalDescription(n);case 8:return r={type:"answer",sdp:this._remoteSdp.getSdp()},h.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",r),e.next=12,this._pc.setRemoteDescription(r);case 12:e.next=24;break;case 14:return i={type:"offer",sdp:this._remoteSdp.getSdp()},h.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",i),e.next=18,this._pc.setRemoteDescription(i);case 18:return e.next=20,this._pc.createAnswer();case 20:return a=e.sent,h.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",a),e.next=24,this._pc.setLocalDescription(a);case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTransportStats",value:function(){var e=(0,m.default)(f.default.mark((function e(){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._pc.getStats());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"send",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,i,a,d,p,m,v,g,y,b,w,_,x,S=t.track,C=t.encodings,$=t.codecOptions,R=t.codec;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._assertSendDirection(),h.debug("send() [kind:%s, track.id:%s]",S.kind,S.id),R&&h.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(S),this._pc.addStream(this._sendStream),n=void 0,e.next=4,this._pc.createOffer();case 4:if(i=e.sent,a=r.parse(i.sdp),(d=s.clone(this._sendingRtpParametersByKind[S.kind])).codecs=c.reduceCodecs(d.codecs),(p=s.clone(this._sendingRemoteRtpParametersByKind[S.kind])).codecs=c.reduceCodecs(p.codecs),e.t0=this._transportReady,e.t0){e.next=14;break}return e.next=14,this._setupTransport({localDtlsRole:"server",localSdpObject:a});case 14:return"video"===S.kind&&C&&C.length>1&&(h.debug("send() | enabling simulcast"),a=r.parse(i.sdp),n=a.media.find((function(e){return"video"===e.type})),l.addLegacySimulcast({offerMediaObject:n,track:S,numStreams:C.length}),i={type:"offer",sdp:r.write(a)}),h.debug("send() | calling pc.setLocalDescription() [offer:%o]",i),e.next=18,this._pc.setLocalDescription(i);case 18:if(a=r.parse(this._pc.localDescription.sdp),n=a.media.find((function(e){return e.type===S.kind})),d.rtcp.cname=u.getCname({offerMediaObject:n}),d.encodings=l.getRtpEncodings({offerMediaObject:n,track:S}),!C){e.next=24;break}for(m=0;m<d.encodings.length;++m)C[m]&&(0,o.default)(d.encodings[m],C[m]);case 24:if(!(d.encodings.length>1)||"video/vp8"!==d.codecs[0].mimeType.toLowerCase()&&"video/h264"!==d.codecs[0].mimeType.toLowerCase()){e.next=44;break}for(v=!0,g=!1,y=void 0,e.prev=28,b=(0,k.default)(d.encodings);!(v=(w=b.next()).done);v=!0)w.value.scalabilityMode="S1T3";e.next=36;break;case 32:e.prev=32,e.t1=e.catch(28),g=!0,y=e.t1;case 36:e.prev=36,e.prev=37,!v&&b.return&&b.return();case 39:if(e.prev=39,!g){e.next=42;break}throw y;case 42:return e.finish(39);case 43:return e.finish(36);case 44:return this._remoteSdp.send({offerMediaObject:n,offerRtpParameters:d,answerRtpParameters:p,codecOptions:$}),_={type:"answer",sdp:this._remoteSdp.getSdp()},h.debug("send() | calling pc.setRemoteDescription() [answer:%o]",_),e.next=49,this._pc.setRemoteDescription(_);case 49:return x=String(this._nextSendLocalId),e.abrupt("return",(this._nextSendLocalId++,this._mapSendLocalIdTrack.set(x,S),{localId:x,rtpParameters:d}));case 51:case"end":return e.stop()}}),e,this,[[28,32,36,44],[37,,39,43]])})));return function(t){return e.apply(this,arguments)}}()},{key:"stopSending",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,r,i;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),h.debug("stopSending() [localId:%s]",t),n=this._mapSendLocalIdTrack.get(t)){e.next=4;break}throw new Error("track not found");case 4:return this._mapSendLocalIdTrack.delete(t),this._sendStream.removeTrack(n),this._pc.addStream(this._sendStream),e.next=7,this._pc.createOffer();case 7:return r=e.sent,h.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),e.prev=9,e.next=12,this._pc.setLocalDescription(r);case 12:e.next=19;break;case 14:if(e.prev=14,e.t0=e.catch(9),0!==this._sendStream.getTracks().length){e.next=18;break}return e.abrupt("return",void h.warn("stopSending() | ignoring expected error due no sending tracks: %s",e.t0.toString()));case 18:throw e.t0;case 19:if("stable"!==this._pc.signalingState){e.next=21;break}return e.abrupt("return");case 21:return i={type:"answer",sdp:this._remoteSdp.getSdp()},h.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",i),e.next=25,this._pc.setRemoteDescription(i);case 25:case"end":return e.stop()}}),e,this,[[9,14]])})));return function(t){return e.apply(this,arguments)}}()},{key:"replaceTrack",value:function(){var e=(0,m.default)(f.default.mark((function e(t,n){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new a.UnsupportedError("not implemented");case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setMaxSpatialLayer",value:function(){var e=(0,m.default)(f.default.mark((function e(t,n){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new a.UnsupportedError("not implemented");case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setRtpEncodingParameters",value:function(){var e=(0,m.default)(f.default.mark((function e(t,n){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new a.UnsupportedError("not implemented");case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getSenderStats",value:function(){var e=(0,m.default)(f.default.mark((function e(t){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new a.UnsupportedError("not implemented");case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendDataChannel",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,i,a,o,s,c,u=t.ordered,l=t.maxPacketLifeTime,d=t.maxRetransmits,p=t.label,m=t.protocol,g=t.priority;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertSendDirection(),n={negotiated:!0,id:this._nextSendSctpStreamId,ordered:u,maxPacketLifeTime:l,maxRetransmitTime:l,maxRetransmits:d,protocol:m,priority:g},h.debug("sendDataChannel() [options:%o]",n),i=this._pc.createDataChannel(p,n),this._nextSendSctpStreamId=++this._nextSendSctpStreamId%v.MIS,this._hasDataChannelMediaSection){e.next=23;break}return e.next=7,this._pc.createOffer();case 7:if(a=e.sent,o=r.parse(a.sdp),s=o.media.find((function(e){return"application"===e.type})),e.t0=this._transportReady,e.t0){e.next=14;break}return e.next=14,this._setupTransport({localDtlsRole:"server",localSdpObject:o});case 14:return h.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",a),e.next=17,this._pc.setLocalDescription(a);case 17:return this._remoteSdp.sendSctpAssociation({offerMediaObject:s}),c={type:"answer",sdp:this._remoteSdp.getSdp()},h.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",c),e.next=22,this._pc.setRemoteDescription(c);case 22:this._hasDataChannelMediaSection=!0;case 23:return e.abrupt("return",{dataChannel:i,sctpStreamParameters:{streamId:n.id,ordered:n.ordered,maxPacketLifeTime:n.maxPacketLifeTime,maxRetransmits:n.maxRetransmits}});case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"receive",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,i,a,o,c,l,d,p,m=t.trackId,v=t.kind,g=t.rtpParameters;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._assertRecvDirection(),h.debug("receive() [trackId:%s, kind:%s]",m,v),n=m,i=v,a=g.rtcp.cname,h.debug("receive() | forcing a random remote streamId to avoid well known bug in react-native-webrtc"),a+="-hack-"+s.generateRandomNumber(),this._remoteSdp.receive({mid:i,kind:v,offerRtpParameters:g,streamId:a,trackId:m}),o={type:"offer",sdp:this._remoteSdp.getSdp()},h.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",o),e.next=8,this._pc.setRemoteDescription(o);case 8:return e.next=10,this._pc.createAnswer();case 10:if(c=e.sent,l=r.parse(c.sdp),d=l.media.find((function(e){return String(e.mid)===i})),u.applyCodecParameters({offerRtpParameters:g,answerMediaObject:d}),c={type:"answer",sdp:r.write(l)},e.t0=this._transportReady,e.t0){e.next=18;break}return e.next=18,this._setupTransport({localDtlsRole:"client",localSdpObject:l});case 18:return h.debug("receive() | calling pc.setLocalDescription() [answer:%o]",c),e.next=21,this._pc.setLocalDescription(c);case 21:if(p=this._pc.getRemoteStreams().find((function(e){return e.id===a})).getTrackById(n)){e.next=24;break}throw new Error("remote track not found");case 24:return e.abrupt("return",(this._mapRecvLocalIdInfo.set(n,{mid:i,rtpParameters:g}),{localId:n,track:p}));case 25:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"stopReceiving",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,r,i,a,o;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._assertRecvDirection(),h.debug("stopReceiving() [localId:%s]",t),n=this._mapRecvLocalIdInfo.get(t)||{},r=n.mid,i=n.rtpParameters,this._mapRecvLocalIdInfo.delete(t),this._remoteSdp.planBStopReceiving({mid:r,offerRtpParameters:i}),a={type:"offer",sdp:this._remoteSdp.getSdp()},h.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",a),e.next=7,this._pc.setRemoteDescription(a);case 7:return e.next=9,this._pc.createAnswer();case 9:return o=e.sent,h.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",o),e.next=13,this._pc.setLocalDescription(o);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getReceiverStats",value:function(){var e=(0,m.default)(f.default.mark((function e(t){return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new a.UnsupportedError("not implemented");case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"receiveDataChannel",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,i,a,o,s,c,u,l,d,p=t.sctpStreamParameters,m=t.label,v=t.protocol;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._assertRecvDirection(),n=p.streamId,i=p.ordered,a=p.maxPacketLifeTime,o=p.maxRetransmits,s={negotiated:!0,id:n,ordered:i,maxPacketLifeTime:a,maxRetransmitTime:a,maxRetransmits:o,protocol:v},h.debug("receiveDataChannel() [options:%o]",s),c=this._pc.createDataChannel(m,s),this._hasDataChannelMediaSection){e.next=21;break}return this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0}),u={type:"offer",sdp:this._remoteSdp.getSdp()},h.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",u),e.next=10,this._pc.setRemoteDescription(u);case 10:return e.next=12,this._pc.createAnswer();case 12:if(l=e.sent,this._transportReady){e.next=17;break}return d=r.parse(l.sdp),e.next=17,this._setupTransport({localDtlsRole:"client",localSdpObject:d});case 17:return h.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",l),e.next=20,this._pc.setLocalDescription(l);case 20:this._hasDataChannelMediaSection=!0;case 21:return e.abrupt("return",{dataChannel:c});case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_setupTransport",value:function(){var e=(0,m.default)(f.default.mark((function e(t){var n,i=t.localDtlsRole,a=t.localSdpObject;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a||(a=r.parse(this._pc.localDescription.sdp)),(n=u.extractDtlsParameters({sdpObject:a})).role=i,this._remoteSdp.updateDtlsRole("client"===i?"server":"client"),e.next=6,this.safeEmitAsPromise("@connect",{dtlsParameters:n});case 6:this._transportReady=!0;case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_assertSendDirection",value:function(){if("send"!==this._direction)throw new Error('method can just be called for handlers with "send" direction')}},{key:"_assertRecvDirection",value:function(){if("recv"!==this._direction)throw new Error('method can just be called for handlers with "recv" direction')}},{key:"name",get:function(){return"ReactNative"}}],[{key:"createFactory",value:function(){return function(){return new t}}}]),t}(d.HandlerInterface);t.ReactNative=_},function(e,t,n){function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(41)),r(n(42)),r(n(43)),r(n(44)),r(n(45)),r(n(46)),r(n(5)),r(n(3))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.createVideo=void 0,t.createVideo=function(e,t){void 0===t&&(t="remote");var n=document.createElement("video");return n.autoplay=!0,n.playsinline=!0,n.id=e,n.muted="local"===t,n}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t._ajax=void 0;var r=("String",function(e){return"[object String]"===Object.prototype.toString.call(e)}),i={timeout:3e4,responseType:"json",withCredentials:!1};function a(e){var t,n=null,a=e.method?e.method.toLowerCase():"get";if(window.XMLHttpRequest)n=new window.XMLHttpRequest;else{if(!window.ActiveXObject)throw new Error("Your browser does not support XMLHTTP.");n=new ActiveXObject("Microsoft.XMLHTTP")}for(t in n.onerror=function(t){e.error({code:99,desc:"access control error"},"error")},n.onload=function(){if(200===n.status){if(e.success instanceof window.Function){var t=n.response;if(r(t))try{t=JSON.parse(t)}catch(e){}e.success(t,"success")}}else e.error instanceof window.Function&&e.error({code:n.status,desc:n.statusText},"error")},n.onabort=function(){e.error instanceof window.Function&&e.error({code:98,desc:"request aborted"},"abort")},n.ontimeout=function(){e.error instanceof window.Function&&e.error({code:408,desc:"request timeout"},"timeout")},n.open(a,e.url,!0),i)e.hasOwnProperty(t)?n[t]=e[t]:n[t]=i[t];if(e.headers)for(t in e.headers)n.setRequestHeader(t,e.headers[t]);switch(a){case"get":case"delete":n.send();break;case"post":case"put":n.send(e.data?window.JSON.stringify(e.data):"")}return n}t._ajax=a,t.default=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t._objToParamAndSerialize=void 0,t._objToParamAndSerialize=function(e){var t,n="";if(e instanceof Object){for(t in e)e[t]instanceof Object?n+=t+"="+window.JSON.stringify(e[t])+"&":n+=t+"="+e[t]+"&";return n.replace(/&$/,"")}return e}}])},function(e,t,n){e.exports={default:n(89),__esModule:!0}},function(e,t,n){n(90),e.exports=n(0).Number.isNaN},function(e,t,n){var r=n(1);r(r.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,n){e.exports={default:n(92),__esModule:!0}},function(e,t,n){n(93);var r=n(0).Object;e.exports=function(e){return r.getOwnPropertyNames(e)}},function(e,t,n){n(36)("getOwnPropertyNames",(function(){return n(53).f}))},function(e,t,n){var r=n(14),i=n(28),a=n(95);e.exports=function(e){return function(t,n,o){var s,c=r(t),u=i(c.length),l=a(o,u);if(e&&n!=n){for(;u>l;)if((s=c[l++])!=s)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===n)return e||l||0;return!e&&-1}}},function(e,t,n){var r=n(39),i=Math.max,a=Math.min;e.exports=function(e,t){return(e=r(e))<0?i(e+t,0):a(e,t)}},function(e,t,n){e.exports={default:n(97),__esModule:!0}},function(e,t,n){n(56),e.exports=n(0).Object.getOwnPropertySymbols},function(e,t,n){var r=n(23),i=n(45),a=n(30);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var o,s=n(e),c=a.f,u=0;s.length>u;)c.call(e,o=s[u++])&&t.push(o);return t}},function(e,t,n){var r=n(4),i=n(7),a=n(23);e.exports=n(6)?Object.defineProperties:function(e,t){i(e);for(var n,o=a(t),s=o.length,c=0;s>c;)r.f(e,n=o[c++],t[n]);return e}},function(e,t,n){e.exports={default:n(101),__esModule:!0}},function(e,t,n){n(102),e.exports=n(0).Object.assign},function(e,t,n){var r=n(1);r(r.S+r.F,"Object",{assign:n(103)})},function(e,t,n){"use strict";var r=n(6),i=n(23),a=n(45),o=n(30),s=n(12),c=n(37),u=Object.assign;e.exports=!u||n(10)((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=u({},e)[n]||Object.keys(u({},t)).join("")!=r}))?function(e,t){for(var n=s(e),u=arguments.length,l=1,d=a.f,f=o.f;u>l;)for(var p,h=c(arguments[l++]),m=d?i(h).concat(d(h)):i(h),v=m.length,g=0;v>g;)p=m[g++],r&&!f.call(h,p)||(n[p]=h[p]);return n}:u},function(e,t,n){n(13),n(16),e.exports=n(22).f("iterator")},function(e,t,n){var r=n(39),i=n(38);e.exports=function(e){return function(t,n){var a,o,s=String(i(t)),c=r(n),u=s.length;return c<0||c>=u?e?"":void 0:(a=s.charCodeAt(c))<55296||a>56319||c+1===u||(o=s.charCodeAt(c+1))<56320||o>57343?e?s.charAt(c):a:e?s.slice(c,c+2):o-56320+(a-55296<<10)+65536}}},function(e,t,n){"use strict";var r=n(31),i=n(18),a=n(21),o={};n(9)(o,n(3)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(o,{next:i(1,n)}),a(e,t+" Iterator")}},function(e,t,n){"use strict";var r=n(108),i=n(63),a=n(15),o=n(14);e.exports=n(46)(Array,"Array",(function(e,t){this._t=o(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),a.Arguments=a.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(){}},function(e,t,n){n(110),e.exports=n(0).Object.setPrototypeOf},function(e,t,n){var r=n(1);r(r.S,"Object",{setPrototypeOf:n(111).set})},function(e,t,n){var r=n(5),i=n(7),a=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=n(8)(Function.call,n(60).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return a(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:a}},function(e,t,n){e.exports={default:n(113),__esModule:!0}},function(e,t,n){e.exports=n(22).f("species")},function(e,t,n){"use strict";t.__esModule=!0;var r=a(n(115)),i=a(n(65));function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if(Array.isArray(e))return e;if((0,r.default)(Object(e)))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var s,c=(0,i.default)(e);!(r=(s=c.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&c.return&&c.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(e,t,n){e.exports={default:n(116),__esModule:!0}},function(e,t,n){n(16),n(13),e.exports=n(117)},function(e,t,n){var r=n(32),i=n(3)("iterator"),a=n(15);e.exports=n(0).isIterable=function(e){var t=Object(e);return void 0!==t[i]||"@@iterator"in t||a.hasOwnProperty(r(t))}},function(e,t,n){n(16),n(13),e.exports=n(119)},function(e,t,n){var r=n(7),i=n(47);e.exports=n(0).getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},function(e,t,n){e.exports={default:n(121),__esModule:!0}},function(e,t,n){n(24),n(13),n(16),n(122),n(126),n(128),n(129),e.exports=n(0).Set},function(e,t,n){"use strict";var r=n(66),i=n(50);e.exports=n(70)("Set",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return r.def(i(this,"Set"),e=0===e?0:e,e)}},r)},function(e,t,n){var r=n(8),i=n(37),a=n(12),o=n(28),s=n(124);e.exports=function(e,t){var n=1==e,c=2==e,u=3==e,l=4==e,d=6==e,f=5==e||d,p=t||s;return function(t,s,h){for(var m,v,g=a(t),y=i(g),b=r(s,h,3),w=o(y.length),_=0,k=n?p(t,w):c?p(t,0):void 0;w>_;_++)if((f||_ in y)&&(v=b(m=y[_],_,g),e))if(n)k[_]=v;else if(v)switch(e){case 3:return!0;case 5:return m;case 6:return _;case 2:k.push(m)}else if(l)return!1;return d?-1:u||l?l:k}}},function(e,t,n){var r=n(125);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){var r=n(5),i=n(58),a=n(3)("species");e.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&null===(t=t[a])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){var r=n(1);r(r.P+r.R,"Set",{toJSON:n(71)("Set")})},function(e,t,n){var r=n(25);e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},function(e,t,n){n(72)("Set")},function(e,t,n){n(73)("Set")},function(e,t,n){e.exports=n(131)},function(e,t,n){var r=function(){return this}()||Function("return this")(),i=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,a=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,e.exports=n(132),i)r.regeneratorRuntime=a;else try{delete r.regeneratorRuntime}catch(e){r.regeneratorRuntime=void 0}},function(e,t){!function(t){"use strict";var n,r=Object.prototype,i=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag",u="object"==typeof e,l=t.regeneratorRuntime;if(l)u&&(e.exports=l);else{(l=t.regeneratorRuntime=u?e.exports:{}).wrap=w;var d="suspendedStart",f="suspendedYield",p="executing",h="completed",m={},v={};v[o]=function(){return this};var g=Object.getPrototypeOf,y=g&&g(g(E([])));y&&y!==r&&i.call(y,o)&&(v=y);var b=S.prototype=k.prototype=Object.create(v);x.prototype=b.constructor=S,S.constructor=x,S[c]=x.displayName="GeneratorFunction",l.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===x||"GeneratorFunction"===(t.displayName||t.name))},l.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,c in e||(e[c]="GeneratorFunction")),e.prototype=Object.create(b),e},l.awrap=function(e){return{__await:e}},C($.prototype),$.prototype[s]=function(){return this},l.AsyncIterator=$,l.async=function(e,t,n,r){var i=new $(w(e,t,n,r));return l.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(b),b[c]="Generator",b[o]=function(){return this},b.toString=function(){return"[object Generator]"},l.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},l.values=E,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(P),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,i){return s.type="throw",s.arg=e,t.next=r,i&&(t.method="next",t.arg=n),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;P(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:E(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=n),m}}}function w(e,t,n,r){var i=t&&t.prototype instanceof k?t:k,a=Object.create(i.prototype),o=new T(r||[]);return a._invoke=function(e,t,n){var r=d;return function(i,a){if(r===p)throw new Error("Generator is already running");if(r===h){if("throw"===i)throw a;return I()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=R(o,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var c=_(e,t,n);if("normal"===c.type){if(r=n.done?h:f,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=h,n.method="throw",n.arg=c.arg)}}}(e,n,o),a}function _(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function k(){}function x(){}function S(){}function C(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function $(e){var t;this._invoke=function(n,r){function a(){return new Promise((function(t,a){!function t(n,r,a,o){var s=_(e[n],e,r);if("throw"!==s.type){var c=s.arg,u=c.value;return u&&"object"==typeof u&&i.call(u,"__await")?Promise.resolve(u.__await).then((function(e){t("next",e,a,o)}),(function(e){t("throw",e,a,o)})):Promise.resolve(u).then((function(e){c.value=e,a(c)}),o)}o(s.arg)}(n,r,t,a)}))}return t=t?t.then(a,a):a()}}function R(e,t){var r=e.iterator[t.method];if(r===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,R(e,t),"throw"===t.method))return m;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=_(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,m;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,m):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function M(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(M,this),this.reset(!0)}function E(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(i.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=n,t.done=!0,t};return a.next=a}}return{next:I}}function I(){return{value:n,done:!0}}}(function(){return this}()||Function("return this")())},function(e,t,n){"use strict";t.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(74));t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,r.default)(e)}},function(e,t,n){n(13),n(135),e.exports=n(0).Array.from},function(e,t,n){"use strict";var r=n(8),i=n(1),a=n(12),o=n(67),s=n(68),c=n(28),u=n(136),l=n(47);i(i.S+i.F*!n(75)((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,i,d,f=a(e),p="function"==typeof this?this:Array,h=arguments.length,m=h>1?arguments[1]:void 0,v=void 0!==m,g=0,y=l(f);if(v&&(m=r(m,h>2?arguments[2]:void 0,2)),null==y||p==Array&&s(y))for(n=new p(t=c(f.length));t>g;g++)u(n,g,v?m(f[g],g):f[g]);else for(d=y.call(f),n=new p;!(i=d.next()).done;g++)u(n,g,v?o(d,m,[i.value,g],!0):i.value);return n.length=g,n}})},function(e,t,n){"use strict";var r=n(4),i=n(18);e.exports=function(e,t,n){t in e?r.f(e,t,i(0,n)):e[t]=n}},function(e,t,n){n(24),n(13),n(16),n(138),n(142),n(143),e.exports=n(0).Promise},function(e,t,n){"use strict";var r,i,a,o,s=n(20),c=n(2),u=n(8),l=n(32),d=n(1),f=n(5),p=n(17),h=n(49),m=n(25),v=n(77),g=n(78).set,y=n(140)(),b=n(51),w=n(79),_=n(141),k=n(80),x=c.TypeError,S=c.process,C=S&&S.versions,$=C&&C.v8||"",R=c.Promise,M="process"==l(S),P=function(){},T=i=b.f,E=!!function(){try{var e=R.resolve(1),t=(e.constructor={})[n(3)("species")]=function(e){e(P,P)};return(M||"function"==typeof PromiseRejectionEvent)&&e.then(P)instanceof t&&0!==$.indexOf("6.6")&&-1===_.indexOf("Chrome/66")}catch(e){}}(),I=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},D=function(e,t){if(!e._n){e._n=!0;var n=e._c;y((function(){for(var r=e._v,i=1==e._s,a=0,o=function(t){var n,a,o,s=i?t.ok:t.fail,c=t.resolve,u=t.reject,l=t.domain;try{s?(i||(2==e._h&&L(e),e._h=1),!0===s?n=r:(l&&l.enter(),n=s(r),l&&(l.exit(),o=!0)),n===t.promise?u(x("Promise-chain cycle")):(a=I(n))?a.call(n,c,u):c(n)):u(r)}catch(e){l&&!o&&l.exit(),u(e)}};n.length>a;)o(n[a++]);e._c=[],e._n=!1,t&&!e._h&&A(e)}))}},A=function(e){g.call(c,(function(){var t,n,r,i=e._v,a=O(e);if(a&&(t=w((function(){M?S.emit("unhandledRejection",i,e):(n=c.onunhandledrejection)?n({promise:e,reason:i}):(r=c.console)&&r.error&&r.error("Unhandled promise rejection",i)})),e._h=M||O(e)?2:1),e._a=void 0,a&&t.e)throw t.v}))},O=function(e){return 1!==e._h&&0===(e._a||e._c).length},L=function(e){g.call(c,(function(){var t;M?S.emit("rejectionHandled",e):(t=c.onrejectionhandled)&&t({promise:e,reason:e._v})}))},F=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),D(t,!0))},j=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw x("Promise can't be resolved itself");(t=I(e))?y((function(){var r={_w:n,_d:!1};try{t.call(e,u(j,r,1),u(F,r,1))}catch(e){F.call(r,e)}})):(n._v=e,n._s=1,D(n,!1))}catch(e){F.call({_w:n,_d:!1},e)}}};E||(R=function(e){h(this,R,"Promise","_h"),p(e),r.call(this);try{e(u(j,this,1),u(F,this,1))}catch(e){F.call(this,e)}},(r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(48)(R.prototype,{then:function(e,t){var n=T(v(this,R));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=M?S.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&D(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),a=function(){var e=new r;this.promise=e,this.resolve=u(j,e,1),this.reject=u(F,e,1)},b.f=T=function(e){return e===R||e===o?new a(e):i(e)}),d(d.G+d.W+d.F*!E,{Promise:R}),n(21)(R,"Promise"),n(69)("Promise"),o=n(0).Promise,d(d.S+d.F*!E,"Promise",{reject:function(e){var t=T(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(s||!E),"Promise",{resolve:function(e){return k(s&&this===o?R:this,e)}}),d(d.S+d.F*!(E&&n(75)((function(e){R.all(e).catch(P)}))),"Promise",{all:function(e){var t=this,n=T(t),r=n.resolve,i=n.reject,a=w((function(){var n=[],a=0,o=1;m(e,!1,(function(e){var s=a++,c=!1;n.push(void 0),o++,t.resolve(e).then((function(e){c||(c=!0,n[s]=e,--o||r(n))}),i)})),--o||r(n)}));return a.e&&i(a.v),n.promise},race:function(e){var t=this,n=T(t),r=n.reject,i=w((function(){m(e,!1,(function(e){t.resolve(e).then(n.resolve,r)}))}));return i.e&&r(i.v),n.promise}})},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(2),i=n(78).set,a=r.MutationObserver||r.WebKitMutationObserver,o=r.process,s=r.Promise,c="process"==n(19)(o);e.exports=function(){var e,t,n,u=function(){var r,i;for(c&&(r=o.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(c)n=function(){o.nextTick(u)};else if(!a||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var l=s.resolve(void 0);n=function(){l.then(u)}}else n=function(){i.call(r,u)};else{var d=!0,f=document.createTextNode("");new a(u).observe(f,{characterData:!0}),n=function(){f.data=d=!d}}return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},function(e,t,n){var r=n(2).navigator;e.exports=r&&r.userAgent||""},function(e,t,n){"use strict";var r=n(1),i=n(0),a=n(2),o=n(77),s=n(80);r(r.P+r.R,"Promise",{finally:function(e){var t=o(this,i.Promise||a.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then((function(){return n}))}:e,n?function(n){return s(t,e()).then((function(){throw n}))}:e)}})},function(e,t,n){"use strict";var r=n(1),i=n(51),a=n(79);r(r.S,"Promise",{try:function(e){var t=i.f(this),n=a(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},function(e,t,n){"use strict";t.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(76));t.default=function(e){return function(){var t=e.apply(this,arguments);return new r.default((function(e,n){return function i(a,o){try{var s=t[a](o),c=s.value}catch(e){return void n(e)}if(!s.done)return r.default.resolve(c).then((function(e){i("next",e)}),(function(e){i("throw",e)}));e(c)}("next")}))}}},function(e,t,n){e.exports={default:n(146),__esModule:!0}},function(e,t,n){n(24),n(13),n(16),n(147),n(148),n(149),n(150),e.exports=n(0).Map},function(e,t,n){"use strict";var r=n(66),i=n(50);e.exports=n(70)("Map",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=r.getEntry(i(this,"Map"),e);return t&&t.v},set:function(e,t){return r.def(i(this,"Map"),0===e?0:e,t)}},r,!0)},function(e,t,n){var r=n(1);r(r.P+r.R,"Map",{toJSON:n(71)("Map")})},function(e,t,n){n(72)("Map")},function(e,t,n){n(73)("Map")},function(e,t,n){n(152),e.exports=n(0).Object.getPrototypeOf},function(e,t,n){var r=n(12),i=n(62);n(36)("getPrototypeOf",(function(){return function(e){return i(r(e))}}))},function(e,t,n){"use strict";t.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(26));t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,r.default)(t))&&"function"!=typeof t?e:t}},function(e,t,n){n(56),n(24),n(155),n(156),e.exports=n(0).Symbol},function(e,t,n){n(44)("asyncIterator")},function(e,t,n){n(44)("observable")},function(e,t,n){"use strict";t.__esModule=!0;var r=o(n(64)),i=o(n(33)),a=o(n(26));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,a.default)(t)));e.prototype=(0,i.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.default?(0,r.default)(e,t):e.__proto__=t)}},function(e,t,n){n(159);var r=n(0).Object;e.exports=function(e,t){return r.create(e,t)}},function(e,t,n){var r=n(1);r(r.S,"Object",{create:n(31)})},function(e,t,n){n(161),e.exports=n(0).Object.keys},function(e,t,n){var r=n(12),i=n(23);n(36)("keys",(function(){return function(e){return i(r(e))}}))},function(e,t,n){var r=n(0),i=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";t.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(84));t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,r.default)(e,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},function(e,t,n){n(166);var r=n(0).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},function(e,t,n){var r=n(1);r(r.S+r.F*!n(6),"Object",{defineProperty:n(4).f})},function(e,t,n){e.exports={default:n(168),__esModule:!0}},function(e,t,n){n(24),e.exports=n(22).f("toStringTag")},function(e,t,n){"use strict";var r=c(n(27)),i=c(n(33)),a=c(n(83)),o=c(n(26)),s=c(n(81));function c(e){return e&&e.__esModule?e:{default:e}}
/**
 * @license AngularJS v1.4.10
 * (c) 2010-2015 Google, Inc. http://angularjs.org
 * License: MIT
 */
/**
 * @license AngularJS v1.4.10
 * (c) 2010-2015 Google, Inc. http://angularjs.org
 * License: MIT
 */!function(e,t,n){function c(e,t){return t=t||Error,function(){var n,r,i=arguments,a=i[0],o="["+(e?e+":":"")+a+"] ";for(o+=i[1].replace(/\{\d+\}/g,(function(e){var t=+e.slice(1,-1)+2;return t<i.length?He(i[t]):e})),o+="\nhttp://errors.angularjs.org/1.4.10/"+(e?e+"/":"")+a,r=2,n="?";r<i.length;r++,n="&")o+=n+"p"+(r-2)+"="+encodeURIComponent(He(i[r]));return new t(o)}}var u=/^\/(.+)\/([a-z]*)$/,l="validity",d=function(e){return z(e)?e.toLowerCase():e},f=Object.prototype.hasOwnProperty,p=function(e){return z(e)?e.toUpperCase():e};"i"!=="I".toLowerCase()&&(d=function(e){return z(e)?e.replace(/[A-Z]/g,(function(e){return String.fromCharCode(32|e.charCodeAt(0))})):e},p=function(e){return z(e)?e.replace(/[a-z]/g,(function(e){return String.fromCharCode(-33&e.charCodeAt(0))})):e});var h,m,v,g,y=[].slice,b=[].splice,w=[].push,_=Object.prototype.toString,k=s.default,x=c("ng"),S=e.angular||(e.angular={}),C=0;function $(e){if(null==e||Q(e))return!1;if(W(e)||z(e)||m&&e instanceof m)return!0;var t="length"in Object(e)&&e.length;return K(t)&&(t>=0&&(t-1 in e||e instanceof Array)||"function"==typeof e.item)}function R(e,t,n){var r,i;if(e)if(J(e))for(r in e)"prototype"==r||"length"==r||"name"==r||e.hasOwnProperty&&!e.hasOwnProperty(r)||t.call(n,e[r],r,e);else if(W(e)||$(e)){var a="object"!==(void 0===e?"undefined":(0,o.default)(e));for(r=0,i=e.length;r<i;r++)(a||r in e)&&t.call(n,e[r],r,e)}else if(e.forEach&&e.forEach!==R)e.forEach(t,n,e);else if(H(e))for(r in e)t.call(n,e[r],r,e);else if("function"==typeof e.hasOwnProperty)for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e);else for(r in e)f.call(e,r)&&t.call(n,e[r],r,e);return e}function M(e,t,n){for(var r=(0,a.default)(e).sort(),i=0;i<r.length;i++)t.call(n,e[r[i]],r[i]);return r}function P(e){return function(t,n){e(n,t)}}function T(){return++C}function E(e,t){t?e.$$hashKey=t:delete e.$$hashKey}function I(e,t,n){for(var r=e.$$hashKey,i=0,o=t.length;i<o;++i){var s=t[i];if(q(s)||J(s))for(var c=(0,a.default)(s),u=0,l=c.length;u<l;u++){var d=c[u],f=s[d];n&&q(f)?G(f)?e[d]=new Date(f.valueOf()):Y(f)?e[d]=new RegExp(f):f.nodeName?e[d]=f.cloneNode(!0):oe(f)?e[d]=f.clone():(q(e[d])||(e[d]=W(f)?[]:{}),I(e[d],[f],!0)):e[d]=f}}return E(e,r),e}function D(e){return I(e,y.call(arguments,1),!1)}function A(e){return I(e,y.call(arguments,1),!0)}function O(e){return parseInt(e,10)}function L(e,t){return D((0,i.default)(e),t)}function F(){}function j(e){return e}function N(e){return function(){return e}}function B(e){return J(e.toString)&&e.toString!==_}function U(e){return void 0===e}function V(e){return void 0!==e}function q(e){return null!==e&&"object"===(void 0===e?"undefined":(0,o.default)(e))}function H(e){return null!==e&&"object"===(void 0===e?"undefined":(0,o.default)(e))&&!k(e)}function z(e){return"string"==typeof e}function K(e){return"number"==typeof e}function G(e){return"[object Date]"===_.call(e)}h=t.documentMode,F.$inject=[],j.$inject=[];var W=Array.isArray;function J(e){return"function"==typeof e}function Y(e){return"[object RegExp]"===_.call(e)}function Q(e){return e&&e.window===e}function X(e){return e&&e.$evalAsync&&e.$watch}function Z(e){return"[object Blob]"===_.call(e)}function ee(e){return"boolean"==typeof e}function te(e){return e&&J(e.then)}var ne=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array\]$/;function re(e){return e&&K(e.length)&&ne.test(_.call(e))}var ie=function(e){return z(e)?e.trim():e},ae=function(e){return e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};function oe(e){return!(!e||!(e.nodeName||e.prop&&e.attr&&e.find))}function se(e){return d(e.nodeName||e[0]&&e[0].nodeName)}function ce(e,t){var n=e.indexOf(t);return n>=0&&e.splice(n,1),n}function ue(e,t){var n=[],r=[];if(t){if(re(t))throw x("cpta","Can't copy! TypedArray destination cannot be mutated.");if(e===t)throw x("cpi","Can't copy! Source and destination are identical.");return W(t)?t.length=0:R(t,(function(e,n){"$$hashKey"!==n&&delete t[n]})),n.push(e),r.push(t),a(e,t)}return o(e);function a(e,t){var n,r=t.$$hashKey;if(W(e))for(var i=0,a=e.length;i<a;i++)t.push(o(e[i]));else if(H(e))for(n in e)t[n]=o(e[n]);else if(e&&"function"==typeof e.hasOwnProperty)for(n in e)e.hasOwnProperty(n)&&(t[n]=o(e[n]));else for(n in e)f.call(e,n)&&(t[n]=o(e[n]));return E(t,r),t}function o(e){if(!q(e))return e;var t=n.indexOf(e);if(-1!==t)return r[t];if(Q(e)||X(e))throw x("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var o,s=!1;return W(e)?(o=[],s=!0):re(e)?o=new e.constructor(e):G(e)?o=new Date(e.getTime()):Y(e)?(o=new RegExp(e.source,e.toString().match(/[^\/]*$/)[0])).lastIndex=e.lastIndex:Z(e)?o=new e.constructor([e],{type:e.type}):J(e.cloneNode)?o=e.cloneNode(!0):(o=(0,i.default)(k(e)),s=!0),n.push(e),r.push(o),s?a(e,o):o}}function le(e,t){if(W(e)){t=t||[];for(var n=0,r=e.length;n<r;n++)t[n]=e[n]}else if(q(e))for(var i in t=t||{},e)"$"===i.charAt(0)&&"$"===i.charAt(1)||(t[i]=e[i]);return t||e}function de(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!=e&&t!=t)return!0;var n,r,i,a=void 0===e?"undefined":(0,o.default)(e);if(a==(void 0===t?"undefined":(0,o.default)(t))&&"object"==a){if(!W(e)){if(G(e))return!!G(t)&&de(e.getTime(),t.getTime());if(Y(e))return!!Y(t)&&e.toString()==t.toString();if(X(e)||X(t)||Q(e)||Q(t)||W(t)||G(t)||Y(t))return!1;for(r in i=Ve(),e)if("$"!==r.charAt(0)&&!J(e[r])){if(!de(e[r],t[r]))return!1;i[r]=!0}for(r in t)if(!(r in i)&&"$"!==r.charAt(0)&&V(t[r])&&!J(t[r]))return!1;return!0}if(!W(t))return!1;if((n=e.length)==t.length){for(r=0;r<n;r++)if(!de(e[r],t[r]))return!1;return!0}}return!1}var fe=function e(){if(!V(e.rules)){var n=t.querySelector("[ng-csp]")||t.querySelector("[data-ng-csp]");if(n){var r=n.getAttribute("ng-csp")||n.getAttribute("data-ng-csp");e.rules={noUnsafeEval:!r||-1!==r.indexOf("no-unsafe-eval"),noInlineStyle:!r||-1!==r.indexOf("no-inline-style")}}else e.rules={noUnsafeEval:function(){try{return new Function(""),!1}catch(e){return!0}}(),noInlineStyle:!1}}return e.rules},pe=function e(){if(V(e.name_))return e.name_;var n,r,i,a,o=Pe.length;for(r=0;r<o;++r)if(i=Pe[r],n=t.querySelector("["+i.replace(":","\\:")+"jq]")){a=n.getAttribute(i+"jq");break}return e.name_=a};function he(e,t,n){return e.concat(y.call(t,n))}function me(e,t){return y.call(e,t||0)}function ve(e,t){var n=arguments.length>2?me(arguments,2):[];return!J(t)||t instanceof RegExp?t:n.length?function(){return arguments.length?t.apply(e,he(n,arguments,0)):t.apply(e,n)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}function ge(e,r){var i=r;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?i=n:Q(r)?i="$WINDOW":r&&t===r?i="$DOCUMENT":X(r)&&(i="$SCOPE"),i}function ye(e,t){return U(e)?n:(K(t)||(t=t?2:null),(0,r.default)(e,ge,t))}function be(e){return z(e)?JSON.parse(e):e}var we=/:/g;function _e(e,t){e=e.replace(we,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n}function ke(e,t,n){n=n?-1:1;var r=e.getTimezoneOffset();return function(e,t){return(e=new Date(e.getTime())).setMinutes(e.getMinutes()+t),e}(e,n*(_e(t,r)-r))}function xe(e){e=m(e).clone();try{e.empty()}catch(e){}var t=m("<div>").append(e).html();try{return e[0].nodeType===qe?d(t):t.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,(function(e,t){return"<"+d(t)}))}catch(e){return d(t)}}function Se(e){try{return decodeURIComponent(e)}catch(e){}}function Ce(e){var t={};return R((e||"").split("&"),(function(e){var n,r,i;e&&(r=e=e.replace(/\+/g,"%20"),-1!==(n=e.indexOf("="))&&(r=e.substring(0,n),i=e.substring(n+1)),V(r=Se(r))&&(i=!V(i)||Se(i),f.call(t,r)?W(t[r])?t[r].push(i):t[r]=[t[r],i]:t[r]=i))})),t}function $e(e){var t=[];return R(e,(function(e,n){W(e)?R(e,(function(e){t.push(Me(n,!0)+(!0===e?"":"="+Me(e,!0)))})):t.push(Me(n,!0)+(!0===e?"":"="+Me(e,!0)))})),t.length?t.join("&"):""}function Re(e){return Me(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Me(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}var Pe=["ng-","data-ng-","ng:","x-ng-"];function Te(n,r,i){q(i)||(i={}),i=D({strictDi:!1},i);var a=function(){if((n=m(n)).injector()){var e=n[0]===t?"document":xe(n);throw x("btstrpd","App Already Bootstrapped with this Element '{0}'",e.replace(/</,"&lt;").replace(/>/,"&gt;"))}(r=r||[]).unshift(["$provide",function(e){e.value("$rootElement",n)}]),i.debugInfoEnabled&&r.push(["$compileProvider",function(e){e.debugInfoEnabled(!0)}]),r.unshift("ng");var a=Vt(r,i.strictDi);return a.invoke(["$rootScope","$rootElement","$compile","$injector",function(e,t,n,r){e.$apply((function(){t.data("$injector",r),n(t)(e)}))}]),a},o=/^NG_ENABLE_DEBUG_INFO!/,s=/^NG_DEFER_BOOTSTRAP!/;if(e&&o.test(e.name)&&(i.debugInfoEnabled=!0,e.name=e.name.replace(o,"")),e&&!s.test(e.name))return a();e.name=e.name.replace(s,""),S.resumeBootstrap=function(e){return R(e,(function(e){r.push(e)})),a()},J(S.resumeDeferredBootstrap)&&S.resumeDeferredBootstrap()}function Ee(){e.name="NG_ENABLE_DEBUG_INFO!"+e.name,e.location.reload()}function Ie(e){var t=S.element(e).injector();if(!t)throw x("test","no injector found for element argument to getTestability");return t.get("$$testability")}var De=/[A-Z]/g;function Ae(e,t){return t=t||"_",e.replace(De,(function(e,n){return(n?t:"")+e.toLowerCase()}))}var Oe,Le=!1;function Fe(e,t,n){if(!e)throw x("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function je(e,t,n){return n&&W(e)&&(e=e[e.length-1]),Fe(J(e),t,"not a function, got "+(e&&"object"===(void 0===e?"undefined":(0,o.default)(e))?e.constructor.name||"Object":void 0===e?"undefined":(0,o.default)(e))),e}function Ne(e,t){if("hasOwnProperty"===e)throw x("badname","hasOwnProperty is not a valid {0} name",t)}function Be(e,t,n){if(!t)return e;for(var r,i=t.split("."),a=e,o=i.length,s=0;s<o;s++)r=i[s],e&&(e=(a=e)[r]);return!n&&J(e)?ve(a,e):e}function Ue(e){for(var t,n=e[0],r=e[e.length-1],i=1;n!==r&&(n=n.nextSibling);i++)(t||e[i]!==n)&&(t||(t=m(y.call(e,0,i))),t.push(n));return t||e}function Ve(){return(0,i.default)(null)}var qe=3;function He(e){return"function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):U(e)?"undefined":"string"!=typeof e?function(e){var t=[];return(0,r.default)(e,(function(e,n){if(q(n=ge(e,n))){if(t.indexOf(n)>=0)return"...";t.push(n)}return n}))}(e):e}var ze={full:"1.4.10",major:1,minor:4,dot:10,codeName:"benignant-oscillation"};dt.expando="ng339";var Ke=dt.cache={},Ge=1,We=function(e,t,n){e.addEventListener(t,n,!1)},Je=function(e,t,n){e.removeEventListener(t,n,!1)};dt._data=function(e){return this.cache[e[this.expando]]||{}};var Ye=/([\:\-\_]+(.))/g,Qe=/^moz([A-Z])/,Xe={mouseleave:"mouseout",mouseenter:"mouseover"},Ze=c("jqLite");function et(e){return e.replace(Ye,(function(e,t,n,r){return r?n.toUpperCase():n})).replace(Qe,"Moz$1")}var tt=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,nt=/<|&#?\w+;/,rt=/<([\w:-]+)/,it=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,at={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ot(e){return!nt.test(e)}function st(e){var t=e.nodeType;return 1===t||!t||9===t}function ct(e,t){var n,r,i,a,o=t.createDocumentFragment(),s=[];if(ot(e))s.push(t.createTextNode(e));else{for(n=n||o.appendChild(t.createElement("div")),r=(rt.exec(e)||["",""])[1].toLowerCase(),i=at[r]||at._default,n.innerHTML=i[1]+e.replace(it,"<$1></$2>")+i[2],a=i[0];a--;)n=n.lastChild;s=he(s,n.childNodes),(n=o.firstChild).textContent=""}return o.textContent="",o.innerHTML="",R(s,(function(e){o.appendChild(e)})),o}function ut(e,t){var n=e.parentNode;n&&n.replaceChild(t,e),t.appendChild(e)}at.optgroup=at.option,at.tbody=at.tfoot=at.colgroup=at.caption=at.thead,at.th=at.td;var lt=Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))};function dt(e){if(e instanceof dt)return e;var n;if(z(e)&&(e=ie(e),n=!0),!(this instanceof dt)){if(n&&"<"!=e.charAt(0))throw Ze("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new dt(e)}_t(this,n?function(e,n){var r;return n=n||t,(r=tt.exec(e))?[n.createElement(r[1])]:(r=ct(e,n))?r.childNodes:[]}(e):e)}function ft(e){return e.cloneNode(!0)}function pt(e,t){if(t||mt(e),e.querySelectorAll)for(var n=e.querySelectorAll("*"),r=0,i=n.length;r<i;r++)mt(n[r])}function ht(e,t,n,r){if(V(r))throw Ze("offargs","jqLite#off() does not support the `selector` argument");var i=vt(e),a=i&&i.events,o=i&&i.handle;if(o)if(t){var s=function(t){var r=a[t];V(n)&&ce(r||[],n),V(n)&&r&&r.length>0||(Je(e,t,o),delete a[t])};R(t.split(" "),(function(e){s(e),Xe[e]&&s(Xe[e])}))}else for(t in a)"$destroy"!==t&&Je(e,t,o),delete a[t]}function mt(e,t){var r=e.ng339,i=r&&Ke[r];if(i){if(t)return void delete i.data[t];i.handle&&(i.events.$destroy&&i.handle({},"$destroy"),ht(e)),delete Ke[r],e.ng339=n}}function vt(e,t){var r=e.ng339,i=r&&Ke[r];return t&&!i&&(e.ng339=r=++Ge,i=Ke[r]={events:{},data:{},handle:n}),i}function gt(e,t,n){if(st(e)){var r=V(n),i=!r&&t&&!q(t),a=!t,o=vt(e,!i),s=o&&o.data;if(r)s[t]=n;else{if(a)return s;if(i)return s&&s[t];D(s,t)}}}function yt(e,t){return!!e.getAttribute&&(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")>-1}function bt(e,t){t&&e.setAttribute&&R(t.split(" "),(function(t){e.setAttribute("class",ie((" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+ie(t)+" "," ")))}))}function wt(e,t){if(t&&e.setAttribute){var n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");R(t.split(" "),(function(e){e=ie(e),-1===n.indexOf(" "+e+" ")&&(n+=e+" ")})),e.setAttribute("class",ie(n))}}function _t(e,t){if(t)if(t.nodeType)e[e.length++]=t;else{var n=t.length;if("number"==typeof n&&t.window!==t){if(n)for(var r=0;r<n;r++)e[e.length++]=t[r]}else e[e.length++]=t}}function kt(e,t){return xt(e,"$"+(t||"ngController")+"Controller")}function xt(e,t,n){9==e.nodeType&&(e=e.documentElement);for(var r=W(t)?t:[t];e;){for(var i=0,a=r.length;i<a;i++)if(V(n=m.data(e,r[i])))return n;e=e.parentNode||11===e.nodeType&&e.host}}function St(e){for(pt(e,!0);e.firstChild;)e.removeChild(e.firstChild)}function Ct(e,t){t||pt(e);var n=e.parentNode;n&&n.removeChild(e)}var $t=dt.prototype={ready:function(n){var r=!1;function i(){r||(r=!0,n())}"complete"===t.readyState?setTimeout(i):(this.on("DOMContentLoaded",i),dt(e).on("load",i))},toString:function(){var e=[];return R(this,(function(t){e.push(""+t)})),"["+e.join(", ")+"]"},eq:function(e){return m(e>=0?this[e]:this[this.length+e])},length:0,push:w,sort:[].sort,splice:[].splice},Rt={};R("multiple,selected,checked,disabled,readOnly,required,open".split(","),(function(e){Rt[d(e)]=e}));var Mt={};R("input,select,option,textarea,button,form,details".split(","),(function(e){Mt[e]=!0}));var Pt={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};function Tt(e,t){var n=Rt[t.toLowerCase()];return n&&Mt[se(e)]&&n}function Et(e,t,n){n.call(e,t)}function It(e,t,n){var r=t.relatedTarget;r&&(r===e||lt.call(e,r))||n.call(e,t)}function Dt(){this.$get=function(){return D(dt,{hasClass:function(e,t){return e.attr&&(e=e[0]),yt(e,t)},addClass:function(e,t){return e.attr&&(e=e[0]),wt(e,t)},removeClass:function(e,t){return e.attr&&(e=e[0]),bt(e,t)}})}}function At(e,t){var n=e&&e.$$hashKey;if(n)return"function"==typeof n&&(n=e.$$hashKey()),n;var r=void 0===e?"undefined":(0,o.default)(e);return"function"==r||"object"==r&&null!==e?e.$$hashKey=r+":"+(t||T)():r+":"+e}function Ot(e,t){if(t){var n=0;this.nextUid=function(){return++n}}R(e,this.put,this)}R({data:gt,removeData:mt,hasData:function(e){for(var t in Ke[e.ng339])return!0;return!1}},(function(e,t){dt[t]=e})),R({data:gt,inheritedData:xt,scope:function(e){return m.data(e,"$scope")||xt(e.parentNode||e,["$isolateScope","$scope"])},isolateScope:function(e){return m.data(e,"$isolateScope")||m.data(e,"$isolateScopeNoTemplate")},controller:kt,injector:function(e){return xt(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:yt,css:function(e,t,n){if(t=et(t),!V(n))return e.style[t];e.style[t]=n},attr:function(e,t,r){var i=e.nodeType;if(i!==qe&&2!==i&&8!==i){var a=d(t);if(Rt[a]){if(!V(r))return e[t]||(e.attributes.getNamedItem(t)||F).specified?a:n;r?(e[t]=!0,e.setAttribute(t,a)):(e[t]=!1,e.removeAttribute(a))}else if(V(r))e.setAttribute(t,r);else if(e.getAttribute){var o=e.getAttribute(t,2);return null===o?n:o}}},prop:function(e,t,n){if(!V(n))return e[t];e[t]=n},text:function(){return e.$dv="",e;function e(e,t){if(U(t)){var n=e.nodeType;return 1===n||n===qe?e.textContent:""}e.textContent=t}}(),val:function(e,t){if(U(t)){if(e.multiple&&"select"===se(e)){var n=[];return R(e.options,(function(e){e.selected&&n.push(e.value||e.text)})),0===n.length?null:n}return e.value}e.value=t},html:function(e,t){if(U(t))return e.innerHTML;pt(e,!0),e.innerHTML=t},empty:St},(function(e,t){dt.prototype[t]=function(t,n){var r,i,a=this.length;if(e!==St&&U(2==e.length&&e!==yt&&e!==kt?t:n)){if(q(t)){for(r=0;r<a;r++)if(e===gt)e(this[r],t);else for(i in t)e(this[r],i,t[i]);return this}for(var o=e.$dv,s=U(o)?Math.min(a,1):a,c=0;c<s;c++){var u=e(this[c],t,n);o=o?o+u:u}return o}for(r=0;r<a;r++)e(this[r],t,n);return this}})),R({removeData:mt,on:function(e,t,r,i){if(V(i))throw Ze("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(st(e)){var a=vt(e,!0),o=a.events,s=a.handle;s||(s=a.handle=function(e,t){var n=function(n,r){n.isDefaultPrevented=function(){return n.defaultPrevented};var i=t[r||n.type],a=i?i.length:0;if(a){if(U(n.immediatePropagationStopped)){var o=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),o&&o.call(n)}}n.isImmediatePropagationStopped=function(){return!0===n.immediatePropagationStopped};var s=i.specialHandlerWrapper||Et;a>1&&(i=le(i));for(var c=0;c<a;c++)n.isImmediatePropagationStopped()||s(e,n,i[c])}};return n.elem=e,n}(e,o));for(var c=t.indexOf(" ")>=0?t.split(" "):[t],u=c.length,l=function(t,n,i){var a=o[t];a||((a=o[t]=[]).specialHandlerWrapper=n,"$destroy"===t||i||We(e,t,s)),a.push(r)};u--;)t=c[u],Xe[t]?(l(Xe[t],It),l(t,n,!0)):l(t)}},off:ht,one:function(e,t,n){(e=m(e)).on(t,(function r(){e.off(t,n),e.off(t,r)})),e.on(t,n)},replaceWith:function(e,t){var n,r=e.parentNode;pt(e),R(new dt(t),(function(t){n?r.insertBefore(t,n.nextSibling):r.replaceChild(t,e),n=t}))},children:function(e){var t=[];return R(e.childNodes,(function(e){1===e.nodeType&&t.push(e)})),t},contents:function(e){return e.contentDocument||e.childNodes||[]},append:function(e,t){var n=e.nodeType;if(1===n||11===n)for(var r=0,i=(t=new dt(t)).length;r<i;r++){var a=t[r];e.appendChild(a)}},prepend:function(e,t){if(1===e.nodeType){var n=e.firstChild;R(new dt(t),(function(t){e.insertBefore(t,n)}))}},wrap:function(e,t){ut(e,m(t).eq(0).clone()[0])},remove:Ct,detach:function(e){Ct(e,!0)},after:function(e,t){for(var n=e,r=e.parentNode,i=0,a=(t=new dt(t)).length;i<a;i++){var o=t[i];r.insertBefore(o,n.nextSibling),n=o}},addClass:wt,removeClass:bt,toggleClass:function(e,t,n){t&&R(t.split(" "),(function(t){var r=n;U(r)&&(r=!yt(e,t)),(r?wt:bt)(e,t)}))},parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},next:function(e){return e.nextElementSibling},find:function(e,t){return e.getElementsByTagName?e.getElementsByTagName(t):[]},clone:ft,triggerHandler:function(e,t,n){var r,i,a,o=t.type||t,s=vt(e),c=s&&s.events,u=c&&c[o];u&&(r={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:F,type:o,target:e},t.type&&(r=D(r,t)),i=le(u),a=n?[r].concat(n):[r],R(i,(function(t){r.isImmediatePropagationStopped()||t.apply(e,a)})))}},(function(e,t){dt.prototype[t]=function(t,n,r){for(var i,a=0,o=this.length;a<o;a++)U(i)?V(i=e(this[a],t,n,r))&&(i=m(i)):_t(i,e(this[a],t,n,r));return V(i)?i:this},dt.prototype.bind=dt.prototype.on,dt.prototype.unbind=dt.prototype.off})),Ot.prototype={put:function(e,t){this[At(e,this.nextUid)]=t},get:function(e){return this[At(e,this.nextUid)]},remove:function(e){var t=this[e=At(e,this.nextUid)];return delete this[e],t}};var Lt=[function(){this.$get=[function(){return Ot}]}],Ft=/^[^\(]*\(\s*([^\)]*)\)/m,jt=/,/,Nt=/^\s*(_?)(\S+?)\1\s*$/,Bt=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Ut=c("$injector");function Vt(e,t){t=!0===t;var r={},a="Provider",o=[],s=new Ot([],!0),c={$provide:{provider:f(p),factory:f(h),service:f((function(e,t){return h(e,["$injector",function(e){return e.instantiate(t)}])})),value:f((function(e,t){return h(e,N(t),!1)})),constant:f((function(e,t){Ne(e,"constant"),c[e]=t,l[e]=t})),decorator:function(e,t){var n=u.get(e+a),r=n.$get;n.$get=function(){var e=d.invoke(r,n);return d.invoke(t,null,{$delegate:e})}}}},u=c.$injector=m(c,(function(e,t){throw S.isString(t)&&o.push(t),Ut("unpr","Unknown provider: {0}",o.join(" <- "))})),l={},d=l.$injector=m(l,(function(e,t){var r=u.get(e+a,t);return d.invoke(r.$get,r,n,e)}));return R(function e(t){Fe(U(t)||W(t),"modulesToLoad","not an array");var n,r=[];return R(t,(function(t){if(!s.get(t)){s.put(t,!0);try{z(t)?(n=g(t),r=r.concat(e(n.requires)).concat(n._runBlocks),i(n._invokeQueue),i(n._configBlocks)):J(t)||W(t)?r.push(u.invoke(t)):je(t,"module")}catch(e){throw W(t)&&(t=t[t.length-1]),e.message&&e.stack&&-1==e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),Ut("modulerr","Failed to instantiate module {0} due to:\n{1}",t,e.stack||e.message||e)}}function i(e){var t,n;for(t=0,n=e.length;t<n;t++){var r=e[t],i=u.get(r[0]);i[r[1]].apply(i,r[2])}}})),r}(e),(function(e){e&&d.invoke(e)})),d;function f(e){return function(t,n){if(!q(t))return e(t,n);R(t,P(e))}}function p(e,t){if(Ne(e,"service"),(J(t)||W(t))&&(t=u.instantiate(t)),!t.$get)throw Ut("pget","Provider '{0}' must define $get factory method.",e);return c[e+a]=t}function h(e,t,n){return p(e,{$get:!1!==n?function(e,t){return function(){var n=d.invoke(t,this);if(U(n))throw Ut("undef","Provider '{0}' must return a value from $get factory method.",e);return n}}(e,t):t})}function m(e,n){function s(t,i){if(e.hasOwnProperty(t)){if(e[t]===r)throw Ut("cdep","Circular dependency found: {0}",t+" <- "+o.join(" <- "));return e[t]}try{return o.unshift(t),e[t]=r,e[t]=n(t,i)}catch(n){throw e[t]===r&&delete e[t],n}finally{o.shift()}}function u(e,n,r,i){"string"==typeof r&&(i=r,r=null);var a,o,c,u=[],l=Vt.$$annotate(e,t,i);for(o=0,a=l.length;o<a;o++){if("string"!=typeof(c=l[o]))throw Ut("itkn","Incorrect injection token! Expected service name as string, got {0}",c);u.push(r&&r.hasOwnProperty(c)?r[c]:s(c,i))}return W(e)&&(e=e[a]),e.apply(n,u)}return{invoke:u,instantiate:function(e,t,n){var r=(0,i.default)((W(e)?e[e.length-1]:e).prototype||null),a=u(e,r,t,n);return q(a)||J(a)?a:r},get:s,annotate:Vt.$$annotate,has:function(t){return c.hasOwnProperty(t+a)||e.hasOwnProperty(t)}}}}function qt(){var t=!0;this.disableAutoScrolling=function(){t=!1},this.$get=["$window","$location","$rootScope",function(n,r,i){var a=n.document;function o(e){if(e){e.scrollIntoView();var t=function(){var e=s.yOffset;if(J(e))e=e();else if(oe(e)){var t=e[0];e="fixed"!==n.getComputedStyle(t).position?0:t.getBoundingClientRect().bottom}else K(e)||(e=0);return e}();if(t){var r=e.getBoundingClientRect().top;n.scrollBy(0,r-t)}}else n.scrollTo(0,0)}function s(e){var t;(e=z(e)?e:r.hash())?(t=a.getElementById(e))||(t=function(e){var t=null;return Array.prototype.some.call(e,(function(e){if("a"===se(e))return t=e,!0})),t}(a.getElementsByName(e)))?o(t):"top"===e&&o(null):o(null)}return t&&i.$watch((function(){return r.hash()}),(function(t,n){t===n&&""===t||function(t,n){"complete"===(n=n||e).document.readyState?n.setTimeout(t):m(n).on("load",t)}((function(){i.$evalAsync(s)}))})),s}]}Vt.$$annotate=function(e,t,n){var r,i;if("function"==typeof e){if(!(r=e.$inject)){if(r=[],e.length){if(t)throw z(n)&&n||(n=e.name||function(e){var t=e.toString().replace(Bt,"").match(Ft);return t?"function("+(t[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}(e)),Ut("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);R(e.toString().replace(Bt,"").match(Ft)[1].split(jt),(function(e){e.replace(Nt,(function(e,t,n){r.push(n)}))}))}e.$inject=r}}else W(e)?(je(e[i=e.length-1],"fn"),r=e.slice(0,i)):je(e,"fn",!0);return r};var Ht=c("$animate");function zt(e,t){return e||t?e?t?(W(e)&&(e=e.join(" ")),W(t)&&(t=t.join(" ")),e+" "+t):e:t:""}function Kt(e){return q(e)?e:{}}var Gt=function(){this.$get=function(){}},Wt=function(){var e=new Ot,t=[];this.$get=["$$AnimateRunner","$rootScope",function(n,r){return{enabled:F,on:F,off:F,pin:F,push:function(o,s,c,u){u&&u(),(c=c||{}).from&&o.css(c.from),c.to&&o.css(c.to),(c.addClass||c.removeClass)&&function(n,o,s){var c=e.get(n)||{},u=i(c,o,!0),l=i(c,s,!1);(u||l)&&(e.put(n,c),t.push(n),1===t.length&&r.$$postDigest(a))}(o,c.addClass,c.removeClass);var l=new n;return l.complete(),l}};function i(e,t,n){var r=!1;return t&&R(t=z(t)?t.split(" "):W(t)?t:[],(function(t){t&&(r=!0,e[t]=n)})),r}function a(){R(t,(function(t){var n=e.get(t);if(n){var r=function(e){z(e)&&(e=e.split(" "));var t=Ve();return R(e,(function(e){e.length&&(t[e]=!0)})),t}(t.attr("class")),i="",a="";R(n,(function(e,t){e!==!!r[t]&&(e?i+=(i.length?" ":"")+t:a+=(a.length?" ":"")+t)})),R(t,(function(e){i&&wt(e,i),a&&bt(e,a)})),e.remove(t)}})),t.length=0}}]},Jt=["$provide",function(e){var t=this;this.$$registeredAnimations=(0,i.default)(null),this.register=function(n,r){if(n&&"."!==n.charAt(0))throw Ht("notcsel","Expecting class selector starting with '.' got '{0}'.",n);var i=n+"-animation";t.$$registeredAnimations[n.substr(1)]=i,e.factory(i,r)},this.classNameFilter=function(e){if(1===arguments.length&&(this.$$classNameFilter=e instanceof RegExp?e:null,this.$$classNameFilter&&new RegExp("(\\s+|\\/)ng-animate(\\s+|\\/)").test(this.$$classNameFilter.toString())))throw Ht("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',"ng-animate");return this.$$classNameFilter},this.$get=["$$animateQueue",function(e){function t(e,t,n){if(n){var r=function(e){for(var t=0;t<e.length;t++){var n=e[t];if(1===n.nodeType)return n}}(n);!r||r.parentNode||r.previousElementSibling||(n=null)}n?n.after(e):t.prepend(e)}return{on:e.on,off:e.off,pin:e.pin,enabled:e.enabled,cancel:function(e){e.end&&e.end()},enter:function(n,r,i,a){return r=r&&m(r),i=i&&m(i),t(n,r=r||i.parent(),i),e.push(n,"enter",Kt(a))},move:function(n,r,i,a){return r=r&&m(r),i=i&&m(i),t(n,r=r||i.parent(),i),e.push(n,"move",Kt(a))},leave:function(t,n){return e.push(t,"leave",Kt(n),(function(){t.remove()}))},addClass:function(t,n,r){return(r=Kt(r)).addClass=zt(r.addclass,n),e.push(t,"addClass",r)},removeClass:function(t,n,r){return(r=Kt(r)).removeClass=zt(r.removeClass,n),e.push(t,"removeClass",r)},setClass:function(t,n,r,i){return(i=Kt(i)).addClass=zt(i.addClass,n),i.removeClass=zt(i.removeClass,r),e.push(t,"setClass",i)},animate:function(t,n,r,i,a){return(a=Kt(a)).from=a.from?D(a.from,n):n,a.to=a.to?D(a.to,r):r,i=i||"ng-inline-animate",a.tempClasses=zt(a.tempClasses,i),e.push(t,"animate",a)}}}]}],Yt=function(){this.$get=["$$rAF",function(e){var t=[];function n(n){t.push(n),t.length>1||e((function(){for(var e=0;e<t.length;e++)t[e]();t=[]}))}return function(){var e=!1;return n((function(){e=!0})),function(t){e?t():n(t)}}}]},Qt=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$document","$timeout",function(e,t,n,r,i){function a(e){this.setHost(e);var t=n();this._doneCallbacks=[],this._tick=function(e){var n=r[0];n&&n.hidden?function(e){i(e,0,!1)}(e):t(e)},this._state=0}return a.chain=function(e,t){var n=0;!function r(){n!==e.length?e[n]((function(e){!1!==e?(n++,r()):t(!1)})):t(!0)}()},a.all=function(e,t){var n=0,r=!0;function i(i){r=r&&i,++n===e.length&&t(r)}R(e,(function(e){e.done(i)}))},a.prototype={setHost:function(e){this.host=e||{}},done:function(e){2===this._state?e():this._doneCallbacks.push(e)},progress:F,getPromise:function(){if(!this.promise){var t=this;this.promise=e((function(e,n){t.done((function(t){!1===t?n():e()}))}))}return this.promise},then:function(e,t){return this.getPromise().then(e,t)},catch:function(e){return this.getPromise().catch(e)},finally:function(e){return this.getPromise().finally(e)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(e){var t=this;0===t._state&&(t._state=1,t._tick((function(){t._resolve(e)})))},_resolve:function(e){2!==this._state&&(R(this._doneCallbacks,(function(t){t(e)})),this._doneCallbacks.length=0,this._state=2)}},a}]},Xt=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(e,t,n){return function(t,r){var i=r||{};i.$$prepared||(i=ue(i)),i.cleanupStyles&&(i.from=i.to=null),i.from&&(t.css(i.from),i.from=null);var a,o=new n;return{start:s,end:s};function s(){return e((function(){i.addClass&&(t.addClass(i.addClass),i.addClass=null),i.removeClass&&(t.removeClass(i.removeClass),i.removeClass=null),i.to&&(t.css(i.to),i.to=null),a||o.complete(),a=!0})),o}}}]};function Zt(e,t,n,r){var i=this,a=(t[0],e.location),o=e.history,s=e.setTimeout,c=e.clearTimeout,u={};i.isMock=!1;var l=0,d=[];function f(e){try{e.apply(null,me(arguments,1))}finally{if(0==--l)for(;d.length;)try{d.pop()()}catch(e){n.error(e)}}}i.$$completeOutstandingRequest=f,i.$$incOutstandingRequestCount=function(){l++},i.notifyWhenNoOutstandingRequests=function(e){0===l?e():d.push(e)};var p,h,v=a.href,g=t.find("base"),y=null;x(),h=p,i.url=function(t,n,s){if(U(s)&&(s=null),a!==e.location&&(a=e.location),o!==e.history&&(o=e.history),t){var c=h===s;if(v===t&&(!r.history||c))return i;var u=v&&Hn(v)===Hn(t);return v=t,h=s,!r.history||u&&c?(u&&!y||(y=t),n?a.replace(t):u?a.hash=function(e){var t=e.indexOf("#");return-1===t?"":e.substr(t)}(t):a.href=t,a.href!==t&&(y=t)):(o[n?"replaceState":"pushState"](s,"",t),x(),h=p),i}return y||a.href.replace(/%27/g,"'")},i.state=function(){return p};var b=[],w=!1;function _(){y=null,x(),S()}var k=null;function x(){de(p=U(p=function(){try{return o.state}catch(e){}}())?null:p,k)&&(p=k),k=p}function S(){v===i.url()&&h===p||(v=i.url(),h=p,R(b,(function(e){e(i.url(),p)})))}i.onUrlChange=function(t){return w||(r.history&&m(e).on("popstate",_),m(e).on("hashchange",_),w=!0),b.push(t),t},i.$$applicationDestroyed=function(){m(e).off("hashchange popstate",_)},i.$$checkUrlChange=S,i.baseHref=function(){var e=g.attr("href");return e?e.replace(/^(https?\:)?\/\/[^\/]*/,""):""},i.defer=function(e,t){var n;return l++,n=s((function(){delete u[n],f(e)}),t||0),u[n]=!0,n},i.defer.cancel=function(e){return!!u[e]&&(delete u[e],c(e),f(F),!0)}}function en(){this.$get=["$window","$log","$sniffer","$document",function(e,t,n,r){return new Zt(e,r,t,n)}]}function tn(){this.$get=function(){var e={};function t(t,n){if(t in e)throw c("$cacheFactory")("iid","CacheId '{0}' is already taken!",t);var r=0,i=D({},n,{id:t}),a=Ve(),o=n&&n.capacity||Number.MAX_VALUE,s=Ve(),u=null,l=null;return e[t]={put:function(e,t){if(!U(t))return o<Number.MAX_VALUE&&d(s[e]||(s[e]={key:e})),e in a||r++,a[e]=t,r>o&&this.remove(l.key),t},get:function(e){if(o<Number.MAX_VALUE){var t=s[e];if(!t)return;d(t)}return a[e]},remove:function(e){if(o<Number.MAX_VALUE){var t=s[e];if(!t)return;t==u&&(u=t.p),t==l&&(l=t.n),f(t.n,t.p),delete s[e]}e in a&&(delete a[e],r--)},removeAll:function(){a=Ve(),r=0,s=Ve(),u=l=null},destroy:function(){a=null,i=null,s=null,delete e[t]},info:function(){return D({},i,{size:r})}};function d(e){e!=u&&(l?l==e&&(l=e.n):l=e,f(e.n,e.p),f(e,u),(u=e).n=null)}function f(e,t){e!=t&&(e&&(e.p=t),t&&(t.n=e))}}return t.info=function(){var t={};return R(e,(function(e,n){t[n]=e.info()})),t},t.get=function(t){return e[t]},t}}function nn(){this.$get=["$cacheFactory",function(e){return e("templates")}]}var rn=c("$compile");function an(e,r){var i={},o="Directive",s=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,c=/(([\w\-]+)(?:\:([^;]+))?;?)/,u=function(e){var t,n={},r="ngSrc,ngSrcset,src,srcset".split(",");for(t=0;t<r.length;t++)n[r[t]]=!0;return n}(),l=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,p=/^(on[a-z]+|formaction)$/,g=Ve();function y(e,t,n){var r=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/,i={};return R(e,(function(e,a){if(e in g)i[a]=g[e];else{var o=e.match(r);if(!o)throw rn("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",t,a,e,n?"controller bindings definition":"isolate scope definition");i[a]={mode:o[1][0],collection:"*"===o[2],optional:"?"===o[3],attrName:o[4]||a},o[4]&&(g[e]=i[a])}})),i}function b(e,t){var n={isolateScope:null,bindToController:null};if(q(e.scope)&&(!0===e.bindToController?(n.bindToController=y(e.scope,t,!0),n.isolateScope={}):n.isolateScope=y(e.scope,t,!1)),q(e.bindToController)&&(n.bindToController=y(e.bindToController,t,!0)),q(n.bindToController)){var r=e.controller,i=e.controllerAs;if(!r)throw rn("noctrl","Cannot bind to controller without directive '{0}'s controller.",t);if(!function(e,t){if(t&&z(t))return t;if(z(e)){var n=dn.exec(e);if(n)return n[3]}}(r,i))throw rn("noident","Cannot bind to controller without identifier for directive '{0}'.",t)}return n}this.directive=function t(n,r){return Ne(n,"directive"),z(n)?(function(e){var t=e.charAt(0);if(!t||t!==d(t))throw rn("baddir","Directive name '{0}' is invalid. The first character must be a lowercase letter",e);if(e!==e.trim())throw rn("baddir","Directive name '{0}' is invalid. The name should not contain leading or trailing whitespaces",e)}(n),Fe(r,"directiveFactory"),i.hasOwnProperty(n)||(i[n]=[],e.factory(n+o,["$injector","$exceptionHandler",function(e,t){var r=[];return R(i[n],(function(i,a){try{var o=e.invoke(i);J(o)?o={compile:N(o)}:!o.compile&&o.link&&(o.compile=N(o.link)),o.priority=o.priority||0,o.index=a,o.name=o.name||n,o.require=o.require||o.controller&&o.name,o.restrict=o.restrict||"EA",o.$$moduleName=i.$$moduleName,r.push(o)}catch(e){t(e)}})),r}])),i[n].push(r)):R(n,P(t)),this},this.aHrefSanitizationWhitelist=function(e){return V(e)?(r.aHrefSanitizationWhitelist(e),this):r.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(e){return V(e)?(r.imgSrcSanitizationWhitelist(e),this):r.imgSrcSanitizationWhitelist()};var w=!0;this.debugInfoEnabled=function(e){return V(e)?(w=e,this):w},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(e,r,g,y,_,k,x,S,C,$){var M=function(e,t){if(t){var n,r,i,o=(0,a.default)(t);for(n=0,r=o.length;n<r;n++)this[i=o[n]]=t[i]}else this.$attr={};this.$$element=e};function P(e,t){try{e.addClass(t)}catch(e){}}M.prototype={$normalize:sn,$addClass:function(e){e&&e.length>0&&C.addClass(this.$$element,e)},$removeClass:function(e){e&&e.length>0&&C.removeClass(this.$$element,e)},$updateClass:function(e,t){var n=cn(e,t);n&&n.length&&C.addClass(this.$$element,n);var r=cn(t,e);r&&r.length&&C.removeClass(this.$$element,r)},$set:function(e,t,n,r){var i,a=Tt(this.$$element[0],e),o=function(e){return Pt[e]}(e),s=e;if(a?(this.$$element.prop(e,t),r=a):o&&(this[o]=t,s=o),this[e]=t,r?this.$attr[e]=r:(r=this.$attr[e])||(this.$attr[e]=r=Ae(e,"-")),"a"===(i=se(this.$$element))&&"href"===e||"img"===i&&"src"===e)this[e]=t=$(t,"src"===e);else if("img"===i&&"srcset"===e){for(var c="",u=ie(t),l=/\s/.test(u)?/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/:/(,)/,d=u.split(l),f=Math.floor(d.length/2),p=0;p<f;p++){var h=2*p;c+=$(ie(d[h]),!0),c+=" "+ie(d[h+1])}var m=ie(d[2*p]).split(/\s/);c+=$(ie(m[0]),!0),2===m.length&&(c+=" "+ie(m[1])),this[e]=t=c}!1!==n&&(null===t||U(t)?this.$$element.removeAttr(r):this.$$element.attr(r,t));var v=this.$$observers;v&&R(v[s],(function(e){try{e(t)}catch(e){g(e)}}))},$observe:function(e,t){var n=this,r=n.$$observers||(n.$$observers=Ve()),i=r[e]||(r[e]=[]);return i.push(t),x.$evalAsync((function(){i.$$inter||!n.hasOwnProperty(e)||U(n[e])||t(n[e])})),function(){ce(i,t)}}};var T=r.startSymbol(),E=r.endSymbol(),I="{{"==T&&"}}"==E?j:function(e){return e.replace(/\{\{/g,T).replace(/}}/g,E)},A=/^ngAttr[A-Z]/,O=/^(.+)Start$/;return N.$$addBindingInfo=w?function(e,t){var n=e.data("$binding")||[];W(t)?n=n.concat(t):n.push(t),e.data("$binding",n)}:F,N.$$addBindingClass=w?function(e){P(e,"ng-binding")}:F,N.$$addScopeInfo=w?function(e,t,n,r){var i=n?r?"$isolateScopeNoTemplate":"$isolateScope":"$scope";e.data(i,t)}:F,N.$$addScopeClass=w?function(e,t){P(e,t?"ng-isolate-scope":"ng-scope")}:F,N;function N(e,n,r,i,a){e instanceof m||(e=m(e));for(var o=/\S+/,s=0,c=e.length;s<c;s++){var u=e[s];u.nodeType===qe&&u.nodeValue.match(o)&&ut(u,e[s]=t.createElement("span"))}var l=B(e,n,e,r,i,a);N.$$addScopeClass(e);var d=null;return function(t,n,r){Fe(t,"scope"),a&&a.needsNewScope&&(t=t.$parent.$new());var i,o=(r=r||{}).parentBoundTranscludeFn,s=r.transcludeControllers,c=r.futureParentElement;if(o&&o.$$boundTransclude&&(o=o.$$boundTransclude),d||(d=function(e){var t=e&&e[0];return t&&"foreignobject"!==se(t)&&t.toString().match(/SVG/)?"svg":"html"}(c)),i="html"!==d?m(ue(d,m("<div>").append(e).html())):n?$t.clone.call(e):e,s)for(var u in s)i.data("$"+u+"Controller",s[u].instance);return N.$$addScopeInfo(i,t),n&&n(i,t),l&&l(t,i,i,o),i}}function B(e,t,r,i,a,o){for(var s,c,u,l,d,f,p,h=[],v=0;v<e.length;v++)s=new M,(u=(c=H(e[v],[],s,0===v?i:n,a)).length?Y(c,e[v],s,t,r,null,[],[],o):null)&&u.scope&&N.$$addScopeClass(s.$$element),d=u&&u.terminal||!(l=e[v].childNodes)||!l.length?null:B(l,u?(u.transcludeOnThisElement||!u.templateOnThisElement)&&u.transclude:t),(u||d)&&(h.push(v,u,d),f=!0,p=p||u),o=null;return f?function(e,r,i,a){var o,s,c,u,l,d,f,v;if(p){var g=r.length;for(v=new Array(g),l=0;l<h.length;l+=3)v[f=h[l]]=r[f]}else v=r;for(l=0,d=h.length;l<d;)c=v[h[l++]],o=h[l++],s=h[l++],o?(o.scope?(u=e.$new(),N.$$addScopeInfo(m(c),u)):u=e,o(s,u,c,i,o.transcludeOnThisElement?V(e,o.transclude,a):!o.templateOnThisElement&&a?a:!a&&t?V(e,t):null)):s&&s(e,c.childNodes,n,a)}:null}function V(e,t,n){return function(r,i,a,o,s){return r||((r=e.$new(!1,s)).$$transcluded=!0),t(r,i,{parentBoundTranscludeFn:n,transcludeControllers:a,futureParentElement:o})}}function H(e,t,n,i,a){var o,u,l=e.nodeType,d=n.$attr;switch(l){case 1:Z(t,sn(se(e)),"E",i,a);for(var f,p,m,v,g,y,b=e.attributes,w=0,_=b&&b.length;w<_;w++){var k=!1,x=!1;p=(f=b[w]).name,g=ie(f.value),v=sn(p),(y=A.test(v))&&(p=p.replace(on,"").substr(8).replace(/_(.)/g,(function(e,t){return t.toUpperCase()})));var S=v.match(O);S&&te(S[1])&&(k=p,x=p.substr(0,p.length-5)+"end",p=p.substr(0,p.length-6)),d[m=sn(p.toLowerCase())]=p,!y&&n.hasOwnProperty(m)||(n[m]=g,Tt(e,m)&&(n[m]=!0)),le(e,t,g,m,y),Z(t,m,"A",i,a,k,x)}if(q(u=e.className)&&(u=u.animVal),z(u)&&""!==u)for(;o=c.exec(u);)Z(t,m=sn(o[2]),"C",i,a)&&(n[m]=ie(o[3])),u=u.substr(o.index+o[0].length);break;case qe:if(11===h)for(;e.parentNode&&e.nextSibling&&e.nextSibling.nodeType===qe;)e.nodeValue=e.nodeValue+e.nextSibling.nodeValue,e.parentNode.removeChild(e.nextSibling);!function(e,t){var n=r(t,!0);n&&e.push({priority:0,compile:function(e){var t=e.parent(),r=!!t.length;return r&&N.$$addBindingClass(t),function(e,t){var i=t.parent();r||N.$$addBindingClass(i),N.$$addBindingInfo(i,n.expressions),e.$watch(n,(function(e){t[0].nodeValue=e}))}}})}(t,e.nodeValue);break;case 8:try{(o=s.exec(e.nodeValue))&&Z(t,m=sn(o[1]),"M",i,a)&&(n[m]=ie(o[2]))}catch(e){}}return t.sort(ae),t}function K(e,t,n){var r=[],i=0;if(t&&e.hasAttribute&&e.hasAttribute(t))do{if(!e)throw rn("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",t,n);1==e.nodeType&&(e.hasAttribute(t)&&i++,e.hasAttribute(n)&&i--),r.push(e),e=e.nextSibling}while(i>0);else r.push(e);return m(r)}function G(e,t,n){return function(r,i,a,o,s){return i=K(i[0],t,n),e(r,i,a,o,s)}}function Y(e,r,i,a,o,s,c,u,d){d=d||{};for(var f,p,h,v,y,b=-Number.MAX_VALUE,w=d.newScopeDirective,_=d.controllerDirectives,x=d.newIsolateScopeDirective,S=d.templateDirective,C=d.nonTlbTranscludeDirective,$=!1,R=!1,P=d.hasElementTranscludeDirective,T=i.$$element=m(r),E=s,D=a,A=0,O=e.length;A<O;A++){var L=(f=e[A]).$$start,F=f.$$end;if(L&&(T=K(r,L,F)),h=n,b>f.priority)break;if((y=f.scope)&&(f.templateUrl||(q(y)?(oe("new/isolated scope",x||w,f,T),x=f):oe("new/isolated scope",x,f,T)),w=w||f),p=f.name,!f.templateUrl&&f.controller&&(y=f.controller,_=_||Ve(),oe("'"+p+"' controller",_[p],f,T),_[p]=f),(y=f.transclude)&&($=!0,f.$$tlb||(oe("transclusion",C,f,T),C=f),"element"==y?(P=!0,b=f.priority,h=T,T=i.$$element=m(t.createComment(" "+p+": "+i[p]+" ")),r=T[0],fe(o,me(h),r),D=N(h,a,b,E&&E.name,{nonTlbTranscludeDirective:C})):(h=m(ft(r)).contents(),T.empty(),D=N(h,a,n,n,{needsNewScope:f.$$isolateScope||f.$$newScope}))),f.template)if(R=!0,oe("template",S,f,T),S=f,y=J(f.template)?f.template(T,i):f.template,y=I(y),f.replace){if(E=f,h=ot(y)?[]:un(ue(f.templateNamespace,ie(y))),r=h[0],1!=h.length||1!==r.nodeType)throw rn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",p,"");fe(o,T,r);var j={$attr:{}},B=H(r,[],j),U=e.splice(A+1,e.length-(A+1));(x||w)&&Q(B,x,w),e=e.concat(B).concat(U),ne(i,j),O=e.length}else T.html(y);if(f.templateUrl)R=!0,oe("template",S,f,T),S=f,f.replace&&(E=f),Z=re(e.splice(A,e.length-A),T,i,o,$&&D,c,u,{controllerDirectives:_,newScopeDirective:w!==f&&w,newIsolateScopeDirective:x,templateDirective:S,nonTlbTranscludeDirective:C}),O=e.length;else if(f.compile)try{J(v=f.compile(T,i,D))?V(null,v,L,F):v&&V(v.pre,v.post,L,F)}catch(e){g(e,xe(T))}f.terminal&&(Z.terminal=!0,b=Math.max(b,f.priority))}return Z.scope=w&&!0===w.scope,Z.transcludeOnThisElement=$,Z.templateOnThisElement=R,Z.transclude=D,d.hasElementTranscludeDirective=P,Z;function V(e,t,n,r){e&&(n&&(e=G(e,n,r)),e.require=f.require,e.directiveName=p,(x===f||f.$$isolateScope)&&(e=pe(e,{isolateScope:!0})),c.push(e)),t&&(n&&(t=G(t,n,r)),t.require=f.require,t.directiveName=p,(x===f||f.$$isolateScope)&&(t=pe(t,{isolateScope:!0})),u.push(t))}function Y(e,t,n,r){var i;if(z(t)){var a=t.match(l),o=t.substring(a[0].length),s=a[1]||a[3],c="?"===a[2];if("^^"===s?n=n.parent():i=(i=r&&r[o])&&i.instance,!i){var u="$"+o+"Controller";i=s?n.inheritedData(u):n.data(u)}if(!i&&!c)throw rn("ctreq","Controller '{0}', required by directive '{1}', can't be found!",o,e)}else if(W(t)){i=[];for(var d=0,f=t.length;d<f;d++)i[d]=Y(e,t[d],n,r)}return i||null}function Z(e,t,a,o,s){var l,d,f,p,h,v,g,y,b;for(var C in r===a?(g=i,v=i.$$element):(v=m(a),g=new M(v,i)),f=t,x?d=t.$new(!0):w&&(f=t.$parent),s&&((h=function(e,t,r){var i;return X(e)||(r=t,t=e,e=n),P&&(i=p),r||(r=P?v.parent():v),s(e,t,i,r,I)}).$$boundTransclude=s),_&&(p=function(e,t,n,r,i,a){var o=Ve();for(var s in r){var c=r[s],u={$scope:c===x||c.$$isolateScope?i:a,$element:e,$attrs:t,$transclude:n},l=c.controller;"@"==l&&(l=t[c.name]);var d=k(l,u,!0,c.controllerAs);o[c.name]=d,e.data("$"+c.name+"Controller",d.instance)}return o}(v,g,h,_,d,t)),x&&(N.$$addScopeInfo(v,d,!0,!(S&&(S===x||S===x.$$originalDirective))),N.$$addScopeClass(v,!0),d.$$isolateBindings=x.$$isolateBindings,(y=ve(t,g,d,d.$$isolateBindings,x))&&d.$on("$destroy",y)),p){var $=_[C],R=p[C],T=$.$$bindings.bindToController;R.identifier&&T&&(b=ve(f,g,R.instance,T,$));var E=R();E!==R.instance&&(R.instance=E,v.data("$"+$.name+"Controller",E),b&&b(),b=ve(f,g,R.instance,T,$))}for(A=0,O=c.length;A<O;A++)he(l=c[A],l.isolateScope?d:t,v,g,l.require&&Y(l.directiveName,l.require,v,p),h);var I=t;for(x&&(x.template||null===x.templateUrl)&&(I=d),e&&e(I,a.childNodes,n,s),A=u.length-1;A>=0;A--)he(l=u[A],l.isolateScope?d:t,v,g,l.require&&Y(l.directiveName,l.require,v,p),h)}}function Q(e,t,n){for(var r=0,i=e.length;r<i;r++)e[r]=L(e[r],{$$isolateScope:t,$$newScope:n})}function Z(t,n,r,a,s,c,u){if(n===s)return null;var l=null;if(i.hasOwnProperty(n))for(var d,f=e.get(n+o),p=0,h=f.length;p<h;p++)try{if(d=f[p],(U(a)||a>d.priority)&&-1!=d.restrict.indexOf(r)){if(c&&(d=L(d,{$$start:c,$$end:u})),!d.$$bindings){var m=d.$$bindings=b(d,d.name);q(m.isolateScope)&&(d.$$isolateBindings=m.isolateScope)}t.push(d),l=d}}catch(e){g(e)}return l}function te(t){if(i.hasOwnProperty(t))for(var n=e.get(t+o),r=0,a=n.length;r<a;r++)if(n[r].multiElement)return!0;return!1}function ne(e,t){var n=t.$attr,r=e.$attr,i=e.$$element;R(e,(function(r,i){"$"!=i.charAt(0)&&(t[i]&&t[i]!==r&&(r+=("style"===i?";":" ")+t[i]),e.$set(i,r,!0,n[i]))})),R(t,(function(t,a){"class"==a?(P(i,t),e.class=(e.class?e.class+" ":"")+t):"style"==a?(i.attr("style",i.attr("style")+";"+t),e.style=(e.style?e.style+";":"")+t):"$"==a.charAt(0)||e.hasOwnProperty(a)||(e[a]=t,r[a]=n[a])}))}function re(e,t,n,r,i,a,o,s){var c,u,l=[],d=t[0],f=e.shift(),p=L(f,{templateUrl:null,transclude:null,replace:null,$$originalDirective:f}),h=J(f.templateUrl)?f.templateUrl(t,n):f.templateUrl,v=f.templateNamespace;return t.empty(),y(h).then((function(g){var y,b,w,_;if(g=I(g),f.replace){if(w=ot(g)?[]:un(ue(v,ie(g))),y=w[0],1!=w.length||1!==y.nodeType)throw rn("tplrt","Template for directive '{0}' must have exactly one root element. {1}",f.name,h);b={$attr:{}},fe(r,t,y);var k=H(y,[],b);q(f.scope)&&Q(k,!0),e=k.concat(e),ne(n,b)}else y=d,t.html(g);for(e.unshift(p),c=Y(e,y,n,i,t,f,a,o,s),R(r,(function(e,n){e==y&&(r[n]=t[0])})),u=B(t[0].childNodes,i);l.length;){var x=l.shift(),S=l.shift(),C=l.shift(),$=l.shift(),M=t[0];if(!x.$$destroyed){if(S!==d){var T=S.className;s.hasElementTranscludeDirective&&f.replace||(M=ft(y)),fe(C,m(S),M),P(m(M),T)}_=c.transcludeOnThisElement?V(x,c.transclude,$):$,c(u,x,M,r,_)}}l=null})),function(e,t,n,r,i){var a=i;t.$$destroyed||(l?l.push(t,n,r,a):(c.transcludeOnThisElement&&(a=V(t,c.transclude,i)),c(u,t,n,r,a)))}}function ae(e,t){var n=t.priority-e.priority;return 0!==n?n:e.name!==t.name?e.name<t.name?-1:1:e.index-t.index}function oe(e,t,n,r){function i(e){return e?" (module: "+e+")":""}if(t)throw rn("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",t.name,i(t.$$moduleName),n.name,i(n.$$moduleName),e,xe(r))}function ue(e,n){switch(e=d(e||"html")){case"svg":case"math":var r=t.createElement("div");return r.innerHTML="<"+e+">"+n+"</"+e+">",r.childNodes[0].childNodes;default:return n}}function le(e,t,n,i,a){var o=function(e,t){if("srcdoc"==t)return S.HTML;var n=se(e);return"xlinkHref"==t||"form"==n&&"action"==t||"img"!=n&&("src"==t||"ngSrc"==t)?S.RESOURCE_URL:void 0}(e,i);a=u[i]||a;var s=r(n,!0,o,a);if(s){if("multiple"===i&&"select"===se(e))throw rn("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",xe(e));t.push({priority:100,compile:function(){return{pre:function(e,t,c){var u=c.$$observers||(c.$$observers=Ve());if(p.test(i))throw rn("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var l=c[i];l!==n&&(s=l&&r(l,!0,o,a),n=l),s&&(c[i]=s(e),(u[i]||(u[i]=[])).$$inter=!0,(c.$$observers&&c.$$observers[i].$$scope||e).$watch(s,(function(e,t){"class"===i&&e!=t?c.$updateClass(e,t):c.$set(i,e)})))}}}})}}function fe(e,n,r){var i,a,o=n[0],s=n.length,c=o.parentNode;if(e)for(i=0,a=e.length;i<a;i++)if(e[i]==o){e[i++]=r;for(var u=i,l=u+s-1,d=e.length;u<d;u++,l++)l<d?e[u]=e[l]:delete e[u];e.length-=s-1,e.context===o&&(e.context=r);break}c&&c.replaceChild(r,o);var f=t.createDocumentFragment();f.appendChild(o),m.hasData(o)&&(m.data(r,m.data(o)),v?(Oe=!0,v.cleanData([o])):delete m.cache[o[m.expando]]);for(var p=1,h=n.length;p<h;p++){var g=n[p];m(g).remove(),f.appendChild(g),delete n[p]}n[0]=r,n.length=1}function pe(e,t){return D((function(){return e.apply(null,arguments)}),e,t)}function he(e,t,n,r,i,a){try{e(t,n,r,i,a)}catch(e){g(e,xe(n))}}function ve(e,t,n,i,a){var o=[];return R(i,(function(i,s){var c,u,l,d,p=i.attrName,h=i.optional;switch(i.mode){case"@":h||f.call(t,p)||(n[s]=t[p]=void 0),t.$observe(p,(function(e){z(e)&&(n[s]=e)})),t.$$observers[p].$$scope=e,z(c=t[p])?n[s]=r(c)(e):ee(c)&&(n[s]=c);break;case"=":if(!f.call(t,p)){if(h)break;t[p]=void 0}if(h&&!t[p])break;u=_(t[p]),d=u.literal?de:function(e,t){return e===t||e!=e&&t!=t},l=u.assign||function(){throw c=n[s]=u(e),rn("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",t[p],p,a.name)},c=n[s]=u(e);var m,v=function(t){return d(t,n[s])||(d(t,c)?l(e,t=n[s]):n[s]=t),c=t};v.$stateful=!0,m=i.collection?e.$watchCollection(t[p],v):e.$watch(_(t[p],v),null,u.literal),o.push(m);break;case"&":if((u=t.hasOwnProperty(p)?_(t[p]):F)===F&&h)break;n[s]=function(t){return u(e,t)}}})),o.length&&function(){for(var e=0,t=o.length;e<t;++e)o[e]()}}}]}an.$inject=["$provide","$$sanitizeUriProvider"];var on=/^((?:x|data)[\:\-_])/i;function sn(e){return et(e.replace(on,""))}function cn(e,t){var n="",r=e.split(/\s+/),i=t.split(/\s+/);e:for(var a=0;a<r.length;a++){for(var o=r[a],s=0;s<i.length;s++)if(o==i[s])continue e;n+=(n.length>0?" ":"")+o}return n}function un(e){var t=(e=m(e)).length;if(t<=1)return e;for(;t--;)8===e[t].nodeType&&b.call(e,t,1);return e}var ln=c("$controller"),dn=/^(\S+)(\s+as\s+([\w$]+))?$/;function fn(){var e={},t=!1;this.register=function(t,n){Ne(t,"controller"),q(t)?D(e,t):e[t]=n},this.allowGlobals=function(){t=!0},this.$get=["$injector","$window",function(r,a){return function(s,c,u,l){var d,f,p,h;if(u=!0===u,l&&z(l)&&(h=l),z(s)){if(!(f=s.match(dn)))throw ln("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",s);p=f[1],h=h||f[3],je(s=e.hasOwnProperty(p)?e[p]:Be(c.$scope,p,!0)||(t?Be(a,p,!0):n),p,!0)}if(u){var m=(W(s)?s[s.length-1]:s).prototype;return d=(0,i.default)(m||null),h&&o(c,h,d,p||s.name),D((function(){var e=r.invoke(s,d,c,p);return e!==d&&(q(e)||J(e))&&(d=e,h&&o(c,h,d,p||s.name)),d}),{instance:d,identifier:h})}return d=r.instantiate(s,c,p),h&&o(c,h,d,p||s.name),d};function o(e,t,n,r){if(!e||!q(e.$scope))throw c("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",r,t);e.$scope[t]=n}}]}function pn(){this.$get=["$window",function(e){return m(e.document)}]}function hn(){this.$get=["$log",function(e){return function(t,n){e.error.apply(e,arguments)}}]}var mn=function(){this.$get=["$document",function(e){return function(t){return t?!t.nodeType&&t instanceof m&&(t=t[0]):t=e[0].body,t.offsetWidth+1}}]},vn="application/json",gn={"Content-Type":vn+";charset=utf-8"},yn=/^\[|^\{(?!\{)/,bn={"[":/]$/,"{":/}$/},wn=/^\)\]\}',?\n/,_n=c("$http"),kn=function(e){return function(){throw _n("legacy","The method `{0}` on the promise returned from `$http` has been disabled.",e)}};function xn(e){return q(e)?G(e)?e.toISOString():ye(e):e}function Sn(){this.$get=function(){return function(e){if(!e)return"";var t=[];return M(e,(function(e,n){null===e||U(e)||(W(e)?R(e,(function(e,r){t.push(Me(n)+"="+Me(xn(e)))})):t.push(Me(n)+"="+Me(xn(e))))})),t.join("&")}}}function Cn(){this.$get=function(){return function(e){if(!e)return"";var t=[];return function e(n,r,i){null===n||U(n)||(W(n)?R(n,(function(t,n){e(t,r+"["+(q(t)?n:"")+"]")})):q(n)&&!G(n)?M(n,(function(t,n){e(t,r+(i?"":"[")+n+(i?"":"]"))})):t.push(Me(r)+"="+Me(xn(n))))}(e,"",!0),t.join("&")}}}function $n(e,t){if(z(e)){var n=e.replace(wn,"").trim();if(n){var r=t("Content-Type");(r&&0===r.indexOf(vn)||function(e){var t=e.match(yn);return t&&bn[t[0]].test(e)}(n))&&(e=be(n))}}return e}function Rn(e){var t,n=Ve();function r(e,t){e&&(n[e]=n[e]?n[e]+", "+t:t)}return z(e)?R(e.split("\n"),(function(e){t=e.indexOf(":"),r(d(ie(e.substr(0,t))),ie(e.substr(t+1)))})):q(e)&&R(e,(function(e,t){r(d(t),ie(e))})),n}function Mn(e){var t;return function(n){if(t||(t=Rn(e)),n){var r=t[d(n)];return void 0===r&&(r=null),r}return t}}function Pn(e,t,n,r){return J(r)?r(e,t,n):(R(r,(function(r){e=r(e,t,n)})),e)}function Tn(e){return 200<=e&&e<300}function En(){var e=this.defaults={transformResponse:[$n],transformRequest:[function(e){return!q(e)||function(e){return"[object File]"===_.call(e)}(e)||Z(e)||function(e){return"[object FormData]"===_.call(e)}(e)?e:ye(e)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:le(gn),put:le(gn),patch:le(gn)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},t=!1;this.useApplyAsync=function(e){return V(e)?(t=!!e,this):t};var r=!0;this.useLegacyPromiseExtensions=function(e){return V(e)?(r=!!e,this):r};var i=this.interceptors=[];this.$get=["$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector",function(a,o,s,u,l,f){var h=s("$http");e.paramSerializer=z(e.paramSerializer)?f.get(e.paramSerializer):e.paramSerializer;var m=[];function v(i){if(!S.isObject(i))throw c("$http")("badreq","Http request configuration must be an object.  Received: {0}",i);if(!z(i.url))throw c("$http")("badreq","Http request configuration url must be a string.  Received: {0}",i.url);var s=D({method:"get",transformRequest:e.transformRequest,transformResponse:e.transformResponse,paramSerializer:e.paramSerializer},i);s.headers=function(t){var n,r,i,a=e.headers,o=D({},t.headers);a=D({},a.common,a[d(t.method)]);e:for(n in a){for(i in r=d(n),o)if(d(i)===r)continue e;o[n]=a[n]}return function(e,t){var n,r={};return R(e,(function(e,i){J(e)?null!=(n=e(t))&&(r[i]=n):r[i]=e})),r}(o,le(t))}(i),s.method=p(s.method),s.paramSerializer=z(s.paramSerializer)?f.get(s.paramSerializer):s.paramSerializer;var g=[function(r){var i=r.headers,s=Pn(r.data,Mn(i),n,r.transformRequest);return U(s)&&R(i,(function(e,t){"content-type"===d(t)&&delete i[t]})),U(r.withCredentials)&&!U(e.withCredentials)&&(r.withCredentials=e.withCredentials),function(r,i){var s,c,d=l.defer(),f=d.promise,p=r.headers,m=function(e,t){return t.length>0&&(e+=(-1==e.indexOf("?")?"?":"&")+t),e}(r.url,r.paramSerializer(r.params));if(v.pendingRequests.push(r),f.then(w,w),!r.cache&&!e.cache||!1===r.cache||"GET"!==r.method&&"JSONP"!==r.method||(s=q(r.cache)?r.cache:q(e.cache)?e.cache:h),s&&(V(c=s.get(m))?te(c)?c.then(b,b):W(c)?y(c[1],c[0],le(c[2]),c[3]):y(c,200,{},"OK"):s.put(m,f)),U(c)){var g=Gr(r.url)?o()[r.xsrfCookieName||e.xsrfCookieName]:n;g&&(p[r.xsrfHeaderName||e.xsrfHeaderName]=g),a(r.method,m,i,(function(e,n,r,i){function a(){y(n,e,r,i)}s&&(Tn(e)?s.put(m,[e,n,Rn(r),i]):s.remove(m)),t?u.$applyAsync(a):(a(),u.$$phase||u.$apply())}),p,r.timeout,r.withCredentials,r.responseType)}return f;function y(e,t,n,i){(Tn(t=t>=-1?t:0)?d.resolve:d.reject)({data:e,status:t,headers:Mn(n),config:r,statusText:i})}function b(e){y(e.data,e.status,le(e.headers()),e.statusText)}function w(){var e=v.pendingRequests.indexOf(r);-1!==e&&v.pendingRequests.splice(e,1)}}(r,s).then(_,_)},n],y=l.when(s);for(R(m,(function(e){(e.request||e.requestError)&&g.unshift(e.request,e.requestError),(e.response||e.responseError)&&g.push(e.response,e.responseError)}));g.length;){var b=g.shift(),w=g.shift();y=y.then(b,w)}return r?(y.success=function(e){return je(e,"fn"),y.then((function(t){e(t.data,t.status,t.headers,s)})),y},y.error=function(e){return je(e,"fn"),y.then(null,(function(t){e(t.data,t.status,t.headers,s)})),y}):(y.success=kn("success"),y.error=kn("error")),y;function _(e){var t=D({},e);return t.data=Pn(e.data,e.headers,e.status,s.transformResponse),Tn(e.status)?t:l.reject(t)}}return R(i,(function(e){m.unshift(z(e)?f.get(e):f.invoke(e))})),v.pendingRequests=[],function(e){R(arguments,(function(e){v[e]=function(t,n){return v(D({},n||{},{method:e,url:t}))}}))}("get","delete","head","jsonp"),function(e){R(arguments,(function(e){v[e]=function(t,n,r){return v(D({},r||{},{method:e,url:t,data:n}))}}))}("post","put","patch"),v.defaults=e,v}]}function In(){this.$get=function(){return function(){return new e.XMLHttpRequest}}}function Dn(){this.$get=["$browser","$window","$document","$xhrFactory",function(e,t,n,r){return function(e,t,n,r,i){return function(a,o,s,c,u,l,f,p){if(e.$$incOutstandingRequestCount(),o=o||e.url(),"jsonp"==d(a)){var h="_"+(r.counter++).toString(36);r[h]=function(e){r[h].data=e,r[h].called=!0};var m=function(e,t,n){var a=i.createElement("script"),o=null;return a.type="text/javascript",a.src=e,a.async=!0,o=function(e){Je(a,"load",o),Je(a,"error",o),i.body.removeChild(a),a=null;var s=-1,c="unknown";e&&("load"!==e.type||r[t].called||(e={type:"error"}),c=e.type,s="error"===e.type?404:200),n&&n(s,c)},We(a,"load",o),We(a,"error",o),i.body.appendChild(a),o}(o.replace("JSON_CALLBACK","angular.callbacks."+h),h,(function(e,t){w(c,e,r[h].data,"",t),r[h]=F}))}else{var v=t(a,o);v.open(a,o,!0),R(u,(function(e,t){V(e)&&v.setRequestHeader(t,e)})),v.onload=function(){var e=v.statusText||"",t="response"in v?v.response:v.responseText,n=1223===v.status?204:v.status;0===n&&(n=t?200:"file"==Kr(o).protocol?404:0),w(c,n,t,v.getAllResponseHeaders(),e)};var g=function(){w(c,-1,null,null,"")};if(v.onerror=g,v.onabort=g,f&&(v.withCredentials=!0),p)try{v.responseType=p}catch(e){if("json"!==p)throw e}v.send(U(s)?null:s)}if(l>0)var y=n(b,l);else te(l)&&l.then(b);function b(){m&&m(),v&&v.abort()}function w(t,r,i,a,o){V(y)&&n.cancel(y),m=v=null,t(r,i,a,o),e.$$completeOutstandingRequest(F)}}}(e,r,e.defer,t.angular.callbacks,n[0])}]}var An=S.$interpolateMinErr=c("$interpolate");function On(){var e="{{",t="}}";this.startSymbol=function(t){return t?(e=t,this):e},this.endSymbol=function(e){return e?(t=e,this):t},this.$get=["$parse","$exceptionHandler","$sce",function(n,r,i){var a=e.length,s=t.length,c=new RegExp(e.replace(/./g,l),"g"),u=new RegExp(t.replace(/./g,l),"g");function l(e){return"\\\\\\"+e}function d(n){return n.replace(c,e).replace(u,t)}function f(c,u,l,f){f=!!f;for(var p,h,m,v=0,g=[],y=[],b=c.length,w=[],_=[];v<b;){if(-1==(p=c.indexOf(e,v))||-1==(h=c.indexOf(t,p+a))){v!==b&&w.push(d(c.substring(v)));break}v!==p&&w.push(d(c.substring(v,p))),m=c.substring(p+a,h),g.push(m),y.push(n(m,S)),v=h+s,_.push(w.length),w.push("")}if(l&&w.length>1&&An.throwNoconcat(c),!u||g.length){var k=function(e){for(var t=0,n=g.length;t<n;t++){if(f&&U(e[t]))return;w[_[t]]=e[t]}return w.join("")},x=function(e){return l?i.getTrusted(l,e):i.valueOf(e)};return D((function(e){var t=0,n=g.length,i=new Array(n);try{for(;t<n;t++)i[t]=y[t](e);return k(i)}catch(e){r(An.interr(c,e))}}),{exp:c,expressions:g,$$watchDelegate:function(e,t){var n;return e.$watchGroup(y,(function(r,i){var a=k(r);J(t)&&t.call(this,a,r!==i?n:a,e),n=a}))}})}function S(e){try{return e=x(e),f&&!V(e)?e:function(e){if(null==e)return"";switch(void 0===e?"undefined":(0,o.default)(e)){case"string":break;case"number":e=""+e;break;default:e=ye(e)}return e}(e)}catch(e){r(An.interr(c,e))}}}return f.startSymbol=function(){return e},f.endSymbol=function(){return t},f}]}function Ln(){this.$get=["$rootScope","$window","$q","$$q",function(e,t,n,r){var i={};function a(a,o,s,c){var u=arguments.length>4,l=u?me(arguments,4):[],d=t.setInterval,f=t.clearInterval,p=0,h=V(c)&&!c,m=(h?r:n).defer(),v=m.promise;return s=V(s)?s:0,v.then(null,null,u?function(){a.apply(null,l)}:a),v.$$intervalId=d((function(){m.notify(p++),s>0&&p>=s&&(m.resolve(p),f(v.$$intervalId),delete i[v.$$intervalId]),h||e.$apply()}),o),i[v.$$intervalId]=m,v}return a.cancel=function(e){return!(!e||!(e.$$intervalId in i)||(i[e.$$intervalId].reject("canceled"),t.clearInterval(e.$$intervalId),delete i[e.$$intervalId],0))},a}]}An.throwNoconcat=function(e){throw An("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",e)},An.interr=function(e,t){return An("interr","Can't interpolate: {0}\n{1}",e,t.toString())};var Fn=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,jn={http:80,https:443,ftp:21},Nn=c("$location");function Bn(e){for(var t=e.split("/"),n=t.length;n--;)t[n]=Re(t[n]);return t.join("/")}function Un(e,t){var n=Kr(e);t.$$protocol=n.protocol,t.$$host=n.hostname,t.$$port=O(n.port)||jn[n.protocol]||null}function Vn(e,t){var n="/"!==e.charAt(0);n&&(e="/"+e);var r=Kr(e);t.$$path=decodeURIComponent(n&&"/"===r.pathname.charAt(0)?r.pathname.substring(1):r.pathname),t.$$search=Ce(r.search),t.$$hash=decodeURIComponent(r.hash),t.$$path&&"/"!=t.$$path.charAt(0)&&(t.$$path="/"+t.$$path)}function qn(e,t){if(0===t.indexOf(e))return t.substr(e.length)}function Hn(e){var t=e.indexOf("#");return-1==t?e:e.substr(0,t)}function zn(e){return e.replace(/(#.+)|#$/,"$1")}function Kn(e,t,n){this.$$html5=!0,n=n||"",Un(e,this),this.$$parse=function(e){var n=qn(t,e);if(!z(n))throw Nn("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',e,t);Vn(n,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var e=$e(this.$$search),n=this.$$hash?"#"+Re(this.$$hash):"";this.$$url=Bn(this.$$path)+(e?"?"+e:"")+n,this.$$absUrl=t+this.$$url.substr(1)},this.$$parseLinkUrl=function(r,i){return i&&"#"===i[0]?(this.hash(i.slice(1)),!0):(V(a=qn(e,r))?(o=a,s=V(a=qn(n,a))?t+(qn("/",a)||a):e+o):V(a=qn(t,r))?s=t+a:t==r+"/"&&(s=t),s&&this.$$parse(s),!!s);var a,o,s}}function Gn(e,t,n){Un(e,this),this.$$parse=function(r){var i,a=qn(e,r)||qn(t,r);U(a)||"#"!==a.charAt(0)?this.$$html5?i=a:(i="",U(a)&&(e=r,this.replace())):U(i=qn(n,a))&&(i=a),Vn(i,this),this.$$path=function(e,t,n){var r,i=/^\/[A-Z]:(\/.*)/;return 0===t.indexOf(n)&&(t=t.replace(n,"")),i.exec(t)?e:(r=i.exec(e))?r[1]:e}(this.$$path,i,e),this.$$compose()},this.$$compose=function(){var t=$e(this.$$search),r=this.$$hash?"#"+Re(this.$$hash):"";this.$$url=Bn(this.$$path)+(t?"?"+t:"")+r,this.$$absUrl=e+(this.$$url?n+this.$$url:"")},this.$$parseLinkUrl=function(t,n){return Hn(e)==Hn(t)&&(this.$$parse(t),!0)}}function Wn(e,t,n){this.$$html5=!0,Gn.apply(this,arguments),this.$$parseLinkUrl=function(r,i){return i&&"#"===i[0]?(this.hash(i.slice(1)),!0):(e==Hn(r)?a=r:(o=qn(t,r))?a=e+n+o:t===r+"/"&&(a=t),a&&this.$$parse(a),!!a);var a,o},this.$$compose=function(){var t=$e(this.$$search),r=this.$$hash?"#"+Re(this.$$hash):"";this.$$url=Bn(this.$$path)+(t?"?"+t:"")+r,this.$$absUrl=e+n+this.$$url}}var Jn={$$html5:!1,$$replace:!1,absUrl:Yn("$$absUrl"),url:function(e){if(U(e))return this.$$url;var t=Fn.exec(e);return(t[1]||""===e)&&this.path(decodeURIComponent(t[1])),(t[2]||t[1]||""===e)&&this.search(t[3]||""),this.hash(t[5]||""),this},protocol:Yn("$$protocol"),host:Yn("$$host"),port:Yn("$$port"),path:Qn("$$path",(function(e){return"/"==(e=null!==e?e.toString():"").charAt(0)?e:"/"+e})),search:function(e,t){switch(arguments.length){case 0:return this.$$search;case 1:if(z(e)||K(e))e=e.toString(),this.$$search=Ce(e);else{if(!q(e))throw Nn("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");R(e=ue(e,{}),(function(t,n){null==t&&delete e[n]})),this.$$search=e}break;default:U(t)||null===t?delete this.$$search[e]:this.$$search[e]=t}return this.$$compose(),this},hash:Qn("$$hash",(function(e){return null!==e?e.toString():""})),replace:function(){return this.$$replace=!0,this}};function Yn(e){return function(){return this[e]}}function Qn(e,t){return function(n){return U(n)?this[e]:(this[e]=t(n),this.$$compose(),this)}}function Xn(){var e="",t={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(t){return V(t)?(e=t,this):e},this.html5Mode=function(e){return ee(e)?(t.enabled=e,this):q(e)?(ee(e.enabled)&&(t.enabled=e.enabled),ee(e.requireBase)&&(t.requireBase=e.requireBase),ee(e.rewriteLinks)&&(t.rewriteLinks=e.rewriteLinks),this):t},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,r,i,a,o){var s,c,u,l=r.baseHref(),d=r.url();if(t.enabled){if(!l&&t.requireBase)throw Nn("nobase","$location in HTML5 mode requires a <base> tag to be present!");u=function(e){return e.substring(0,e.indexOf("/",e.indexOf("//")+2))}(d)+(l||"/"),c=i.history?Kn:Wn}else u=Hn(d),c=Gn;var f=function(e){return e.substr(0,Hn(e).lastIndexOf("/")+1)}(u);(s=new c(u,f,"#"+e)).$$parseLinkUrl(d,d),s.$$state=r.state();var p=/^\s*(javascript|mailto):/i;function h(e,t,n){var i=s.url(),a=s.$$state;try{r.url(e,t,n),s.$$state=r.state()}catch(e){throw s.url(i),s.$$state=a,e}}a.on("click",(function(e){if(t.rewriteLinks&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&2!=e.which&&2!=e.button){for(var i=m(e.target);"a"!==se(i[0]);)if(i[0]===a[0]||!(i=i.parent())[0])return;var c=i.prop("href"),u=i.attr("href")||i.attr("xlink:href");q(c)&&"[object SVGAnimatedString]"===c.toString()&&(c=Kr(c.animVal).href),p.test(c)||!c||i.attr("target")||e.isDefaultPrevented()||s.$$parseLinkUrl(c,u)&&(e.preventDefault(),s.absUrl()!=r.url()&&(n.$apply(),o.angular["ff-684208-preventDefault"]=!0))}})),zn(s.absUrl())!=zn(d)&&r.url(s.absUrl(),!0);var v=!0;return r.onUrlChange((function(e,t){U(qn(f,e))?o.location.href=e:(n.$evalAsync((function(){var r,i=s.absUrl(),a=s.$$state;e=zn(e),s.$$parse(e),s.$$state=t,r=n.$broadcast("$locationChangeStart",e,i,t,a).defaultPrevented,s.absUrl()===e&&(r?(s.$$parse(i),s.$$state=a,h(i,!1,a)):(v=!1,g(i,a)))})),n.$$phase||n.$digest())})),n.$watch((function(){var e=zn(r.url()),t=zn(s.absUrl()),a=r.state(),o=s.$$replace,c=e!==t||s.$$html5&&i.history&&a!==s.$$state;(v||c)&&(v=!1,n.$evalAsync((function(){var t=s.absUrl(),r=n.$broadcast("$locationChangeStart",t,e,s.$$state,a).defaultPrevented;s.absUrl()===t&&(r?(s.$$parse(e),s.$$state=a):(c&&h(t,o,a===s.$$state?null:s.$$state),g(e,a)))}))),s.$$replace=!1})),s;function g(e,t){n.$broadcast("$locationChangeSuccess",s.absUrl(),e,s.$$state,t)}}]}function Zn(){var e=!0,t=this;this.debugEnabled=function(t){return V(t)?(e=t,this):e},this.$get=["$window",function(n){return{log:r("log"),info:r("info"),warn:r("warn"),error:r("error"),debug:function(){var n=r("debug");return function(){e&&n.apply(t,arguments)}}()};function r(e){var t=n.console||{},r=t[e]||t.log||F,i=!1;try{i=!!r.apply}catch(e){}return i?function(){var e=[];return R(arguments,(function(t){e.push(function(e){return e instanceof Error&&(e.stack?e=e.message&&-1===e.stack.indexOf(e.message)?"Error: "+e.message+"\n"+e.stack:e.stack:e.sourceURL&&(e=e.message+"\n"+e.sourceURL+":"+e.line)),e}(t))})),r.apply(t,e)}:function(e,t){r(e,null==t?"":t)}}}]}R([Wn,Gn,Kn],(function(e){e.prototype=(0,i.default)(Jn),e.prototype.state=function(t){if(!arguments.length)return this.$$state;if(e!==Kn||!this.$$html5)throw Nn("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=U(t)?null:t,this}}));var er=c("$parse");function tr(e,t){if("__defineGetter__"===e||"__defineSetter__"===e||"__lookupGetter__"===e||"__lookupSetter__"===e||"__proto__"===e)throw er("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",t);return e}function nr(e,t){if(!z(e+=""))throw er("iseccst","Cannot convert object to primitive value! Expression: {0}",t);return e}function rr(e,t){if(e){if(e.constructor===e)throw er("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e.window===e)throw er("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",t);if(e.children&&(e.nodeName||e.prop&&e.attr&&e.find))throw er("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",t);if(e===Object)throw er("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",t)}return e}var ir=Function.prototype.call,ar=Function.prototype.apply,or=Function.prototype.bind;function sr(e,t){if(e){if(e.constructor===e)throw er("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e===ir||e===ar||e===or)throw er("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",t)}}function cr(e,t){if(e&&(e===(0).constructor||e===(!1).constructor||e==="".constructor||e==={}.constructor||e===[].constructor||e===Function.constructor))throw er("isecaf","Assigning to a constructor is disallowed! Expression: {0}",t)}var ur=Ve();R("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),(function(e){ur[e]=!0}));var lr={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},dr=function(e){this.options=e};dr.prototype={constructor:dr,lex:function(e){for(this.text=e,this.index=0,this.tokens=[];this.index<this.text.length;){var t=this.text.charAt(this.index);if('"'===t||"'"===t)this.readString(t);else if(this.isNumber(t)||"."===t&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(t))this.readIdent();else if(this.is(t,"(){}[].,;:?"))this.tokens.push({index:this.index,text:t}),this.index++;else if(this.isWhitespace(t))this.index++;else{var n=t+this.peek(),r=n+this.peek(2),i=ur[t],a=ur[n],o=ur[r];if(i||a||o){var s=o?r:a?n:t;this.tokens.push({index:this.index,text:s,operator:!0}),this.index+=s.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(e,t){return-1!==t.indexOf(e)},peek:function(e){var t=e||1;return this.index+t<this.text.length&&this.text.charAt(this.index+t)},isNumber:function(e){return"0"<=e&&e<="9"&&"string"==typeof e},isWhitespace:function(e){return" "===e||"\r"===e||"\t"===e||"\n"===e||"\v"===e||"Â "===e},isIdent:function(e){return"a"<=e&&e<="z"||"A"<=e&&e<="Z"||"_"===e||"$"===e},isExpOperator:function(e){return"-"===e||"+"===e||this.isNumber(e)},throwError:function(e,t,n){n=n||this.index;var r=V(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,n)+"]":" "+n;throw er("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",e,r,this.text)},readNumber:function(){for(var e="",t=this.index;this.index<this.text.length;){var n=d(this.text.charAt(this.index));if("."==n||this.isNumber(n))e+=n;else{var r=this.peek();if("e"==n&&this.isExpOperator(r))e+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&"e"==e.charAt(e.length-1))e+=n;else{if(!this.isExpOperator(n)||r&&this.isNumber(r)||"e"!=e.charAt(e.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:t,text:e,constant:!0,value:Number(e)})},readIdent:function(){for(var e=this.index;this.index<this.text.length;){var t=this.text.charAt(this.index);if(!this.isIdent(t)&&!this.isNumber(t))break;this.index++}this.tokens.push({index:e,text:this.text.slice(e,this.index),identifier:!0})},readString:function(e){var t=this.index;this.index++;for(var n="",r=e,i=!1;this.index<this.text.length;){var a=this.text.charAt(this.index);if(r+=a,i){if("u"===a){var o=this.text.substring(this.index+1,this.index+5);o.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+o+"]"),this.index+=4,n+=String.fromCharCode(parseInt(o,16))}else n+=lr[a]||a;i=!1}else if("\\"===a)i=!0;else{if(a===e)return this.index++,void this.tokens.push({index:t,text:r,constant:!0,value:n});n+=a}this.index++}this.throwError("Unterminated quote",t)}};var fr=function(e,t){this.lexer=e,this.options=t};function pr(e,t){return void 0!==e?e:t}function hr(e,t){return void 0===e?t:void 0===t?e:e+t}function mr(e,t){return!e(t).$stateful}function vr(e,t){var n,r;switch(e.type){case fr.Program:n=!0,R(e.body,(function(e){vr(e.expression,t),n=n&&e.expression.constant})),e.constant=n;break;case fr.Literal:e.constant=!0,e.toWatch=[];break;case fr.UnaryExpression:vr(e.argument,t),e.constant=e.argument.constant,e.toWatch=e.argument.toWatch;break;case fr.BinaryExpression:vr(e.left,t),vr(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.left.toWatch.concat(e.right.toWatch);break;case fr.LogicalExpression:vr(e.left,t),vr(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.constant?[]:[e];break;case fr.ConditionalExpression:vr(e.test,t),vr(e.alternate,t),vr(e.consequent,t),e.constant=e.test.constant&&e.alternate.constant&&e.consequent.constant,e.toWatch=e.constant?[]:[e];break;case fr.Identifier:e.constant=!1,e.toWatch=[e];break;case fr.MemberExpression:vr(e.object,t),e.computed&&vr(e.property,t),e.constant=e.object.constant&&(!e.computed||e.property.constant),e.toWatch=[e];break;case fr.CallExpression:n=!!e.filter&&mr(t,e.callee.name),r=[],R(e.arguments,(function(e){vr(e,t),n=n&&e.constant,e.constant||r.push.apply(r,e.toWatch)})),e.constant=n,e.toWatch=e.filter&&mr(t,e.callee.name)?r:[e];break;case fr.AssignmentExpression:vr(e.left,t),vr(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=[e];break;case fr.ArrayExpression:n=!0,r=[],R(e.elements,(function(e){vr(e,t),n=n&&e.constant,e.constant||r.push.apply(r,e.toWatch)})),e.constant=n,e.toWatch=r;break;case fr.ObjectExpression:n=!0,r=[],R(e.properties,(function(e){vr(e.value,t),n=n&&e.value.constant,e.value.constant||r.push.apply(r,e.value.toWatch)})),e.constant=n,e.toWatch=r;break;case fr.ThisExpression:e.constant=!1,e.toWatch=[]}}function gr(e){if(1==e.length){var t=e[0].expression,r=t.toWatch;return 1!==r.length||r[0]!==t?r:n}}function yr(e){return e.type===fr.Identifier||e.type===fr.MemberExpression}function br(e){if(1===e.body.length&&yr(e.body[0].expression))return{type:fr.AssignmentExpression,left:e.body[0].expression,right:{type:fr.NGValueParameter},operator:"="}}function wr(e){return 0===e.body.length||1===e.body.length&&(e.body[0].expression.type===fr.Literal||e.body[0].expression.type===fr.ArrayExpression||e.body[0].expression.type===fr.ObjectExpression)}function _r(e){return e.constant}function kr(e,t){this.astBuilder=e,this.$filter=t}function xr(e,t){this.astBuilder=e,this.$filter=t}fr.Program="Program",fr.ExpressionStatement="ExpressionStatement",fr.AssignmentExpression="AssignmentExpression",fr.ConditionalExpression="ConditionalExpression",fr.LogicalExpression="LogicalExpression",fr.BinaryExpression="BinaryExpression",fr.UnaryExpression="UnaryExpression",fr.CallExpression="CallExpression",fr.MemberExpression="MemberExpression",fr.Identifier="Identifier",fr.Literal="Literal",fr.ArrayExpression="ArrayExpression",fr.Property="Property",fr.ObjectExpression="ObjectExpression",fr.ThisExpression="ThisExpression",fr.NGValueParameter="NGValueParameter",fr.prototype={ast:function(e){this.text=e,this.tokens=this.lexer.lex(e);var t=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),t},program:function(){for(var e=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&e.push(this.expressionStatement()),!this.expect(";"))return{type:fr.Program,body:e}},expressionStatement:function(){return{type:fr.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var e=this.expression();this.expect("|");)e=this.filter(e);return e},expression:function(){return this.assignment()},assignment:function(){var e=this.ternary();return this.expect("=")&&(e={type:fr.AssignmentExpression,left:e,right:this.assignment(),operator:"="}),e},ternary:function(){var e,t,n=this.logicalOR();return this.expect("?")&&(e=this.expression(),this.consume(":"))?(t=this.expression(),{type:fr.ConditionalExpression,test:n,alternate:e,consequent:t}):n},logicalOR:function(){for(var e=this.logicalAND();this.expect("||");)e={type:fr.LogicalExpression,operator:"||",left:e,right:this.logicalAND()};return e},logicalAND:function(){for(var e=this.equality();this.expect("&&");)e={type:fr.LogicalExpression,operator:"&&",left:e,right:this.equality()};return e},equality:function(){for(var e,t=this.relational();e=this.expect("==","!=","===","!==");)t={type:fr.BinaryExpression,operator:e.text,left:t,right:this.relational()};return t},relational:function(){for(var e,t=this.additive();e=this.expect("<",">","<=",">=");)t={type:fr.BinaryExpression,operator:e.text,left:t,right:this.additive()};return t},additive:function(){for(var e,t=this.multiplicative();e=this.expect("+","-");)t={type:fr.BinaryExpression,operator:e.text,left:t,right:this.multiplicative()};return t},multiplicative:function(){for(var e,t=this.unary();e=this.expect("*","/","%");)t={type:fr.BinaryExpression,operator:e.text,left:t,right:this.unary()};return t},unary:function(){var e;return(e=this.expect("+","-","!"))?{type:fr.UnaryExpression,operator:e.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var e,t;for(this.expect("(")?(e=this.filterChain(),this.consume(")")):this.expect("[")?e=this.arrayDeclaration():this.expect("{")?e=this.object():this.constants.hasOwnProperty(this.peek().text)?e=ue(this.constants[this.consume().text]):this.peek().identifier?e=this.identifier():this.peek().constant?e=this.constant():this.throwError("not a primary expression",this.peek());t=this.expect("(","[",".");)"("===t.text?(e={type:fr.CallExpression,callee:e,arguments:this.parseArguments()},this.consume(")")):"["===t.text?(e={type:fr.MemberExpression,object:e,property:this.expression(),computed:!0},this.consume("]")):"."===t.text?e={type:fr.MemberExpression,object:e,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return e},filter:function(e){for(var t=[e],n={type:fr.CallExpression,callee:this.identifier(),arguments:t,filter:!0};this.expect(":");)t.push(this.expression());return n},parseArguments:function(){var e=[];if(")"!==this.peekToken().text)do{e.push(this.expression())}while(this.expect(","));return e},identifier:function(){var e=this.consume();return e.identifier||this.throwError("is not a valid identifier",e),{type:fr.Identifier,name:e.text}},constant:function(){return{type:fr.Literal,value:this.consume().value}},arrayDeclaration:function(){var e=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;e.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:fr.ArrayExpression,elements:e}},object:function(){var e,t=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;e={type:fr.Property,kind:"init"},this.peek().constant?e.key=this.constant():this.peek().identifier?e.key=this.identifier():this.throwError("invalid key",this.peek()),this.consume(":"),e.value=this.expression(),t.push(e)}while(this.expect(","));return this.consume("}"),{type:fr.ObjectExpression,properties:t}},throwError:function(e,t){throw er("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",t.text,e,t.index+1,this.text,this.text.substring(t.index))},consume:function(e){if(0===this.tokens.length)throw er("ueoe","Unexpected end of expression: {0}",this.text);var t=this.expect(e);return t||this.throwError("is unexpected, expecting ["+e+"]",this.peek()),t},peekToken:function(){if(0===this.tokens.length)throw er("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e,t,n,r){return this.peekAhead(0,e,t,n,r)},peekAhead:function(e,t,n,r,i){if(this.tokens.length>e){var a=this.tokens[e],o=a.text;if(o===t||o===n||o===r||o===i||!t&&!n&&!r&&!i)return a}return!1},expect:function(e,t,n,r){var i=this.peek(e,t,n,r);return!!i&&(this.tokens.shift(),i)},constants:{true:{type:fr.Literal,value:!0},false:{type:fr.Literal,value:!1},null:{type:fr.Literal,value:null},undefined:{type:fr.Literal,value:n},this:{type:fr.ThisExpression}}},kr.prototype={compile:function(e,t){var r=this,i=this.astBuilder.ast(e);this.state={nextId:0,filters:{},expensiveChecks:t,fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},vr(i,r.$filter);var a,o="";if(this.stage="assign",a=br(i)){this.state.computing="assign";var s=this.nextId();this.recurse(a,s),this.return_(s),o="fn.assign="+this.generateFunction("assign","s,v,l")}var c=gr(i.body);r.stage="inputs",R(c,(function(e,t){var n="fn"+t;r.state[n]={vars:[],body:[],own:{}},r.state.computing=n;var i=r.nextId();r.recurse(e,i),r.return_(i),r.state.inputs.push(n),e.watchId=t})),this.state.computing="fn",this.stage="main",this.recurse(i);var u='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+o+this.watchFns()+"return fn;",l=new Function("$filter","ensureSafeMemberName","ensureSafeObject","ensureSafeFunction","getStringValue","ensureSafeAssignContext","ifDefined","plus","text",u)(this.$filter,tr,rr,sr,nr,cr,pr,hr,e);return this.state=this.stage=n,l.literal=wr(i),l.constant=_r(i),l},USE:"use",STRICT:"strict",watchFns:function(){var e=[],t=this.state.inputs,n=this;return R(t,(function(t){e.push("var "+t+"="+n.generateFunction(t,"s"))})),t.length&&e.push("fn.inputs=["+t.join(",")+"];"),e.join("")},generateFunction:function(e,t){return"function("+t+"){"+this.varsPrefix(e)+this.body(e)+"};"},filterPrefix:function(){var e=[],t=this;return R(this.state.filters,(function(n,r){e.push(n+"=$filter("+t.escape(r)+")")})),e.length?"var "+e.join(",")+";":""},varsPrefix:function(e){return this.state[e].vars.length?"var "+this.state[e].vars.join(",")+";":""},body:function(e){return this.state[e].body.join("")},recurse:function(e,t,r,i,a,o){var s,c,u,l,d=this;if(i=i||F,!o&&V(e.watchId))return t=t||this.nextId(),void this.if_("i",this.lazyAssign(t,this.computedMember("i",e.watchId)),this.lazyRecurse(e,t,r,i,a,!0));switch(e.type){case fr.Program:R(e.body,(function(t,r){d.recurse(t.expression,n,n,(function(e){c=e})),r!==e.body.length-1?d.current().body.push(c,";"):d.return_(c)}));break;case fr.Literal:l=this.escape(e.value),this.assign(t,l),i(l);break;case fr.UnaryExpression:this.recurse(e.argument,n,n,(function(e){c=e})),l=e.operator+"("+this.ifDefined(c,0)+")",this.assign(t,l),i(l);break;case fr.BinaryExpression:this.recurse(e.left,n,n,(function(e){s=e})),this.recurse(e.right,n,n,(function(e){c=e})),l="+"===e.operator?this.plus(s,c):"-"===e.operator?this.ifDefined(s,0)+e.operator+this.ifDefined(c,0):"("+s+")"+e.operator+"("+c+")",this.assign(t,l),i(l);break;case fr.LogicalExpression:t=t||this.nextId(),d.recurse(e.left,t),d.if_("&&"===e.operator?t:d.not(t),d.lazyRecurse(e.right,t)),i(t);break;case fr.ConditionalExpression:t=t||this.nextId(),d.recurse(e.test,t),d.if_(t,d.lazyRecurse(e.alternate,t),d.lazyRecurse(e.consequent,t)),i(t);break;case fr.Identifier:t=t||this.nextId(),r&&(r.context="inputs"===d.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",e.name)+"?l:s"),r.computed=!1,r.name=e.name),tr(e.name),d.if_("inputs"===d.stage||d.not(d.getHasOwnProperty("l",e.name)),(function(){d.if_("inputs"===d.stage||"s",(function(){a&&1!==a&&d.if_(d.not(d.nonComputedMember("s",e.name)),d.lazyAssign(d.nonComputedMember("s",e.name),"{}")),d.assign(t,d.nonComputedMember("s",e.name))}))}),t&&d.lazyAssign(t,d.nonComputedMember("l",e.name))),(d.state.expensiveChecks||Cr(e.name))&&d.addEnsureSafeObject(t),i(t);break;case fr.MemberExpression:s=r&&(r.context=this.nextId())||this.nextId(),t=t||this.nextId(),d.recurse(e.object,s,n,(function(){d.if_(d.notNull(s),(function(){a&&1!==a&&d.addEnsureSafeAssignContext(s),e.computed?(c=d.nextId(),d.recurse(e.property,c),d.getStringValue(c),d.addEnsureSafeMemberName(c),a&&1!==a&&d.if_(d.not(d.computedMember(s,c)),d.lazyAssign(d.computedMember(s,c),"{}")),l=d.ensureSafeObject(d.computedMember(s,c)),d.assign(t,l),r&&(r.computed=!0,r.name=c)):(tr(e.property.name),a&&1!==a&&d.if_(d.not(d.nonComputedMember(s,e.property.name)),d.lazyAssign(d.nonComputedMember(s,e.property.name),"{}")),l=d.nonComputedMember(s,e.property.name),(d.state.expensiveChecks||Cr(e.property.name))&&(l=d.ensureSafeObject(l)),d.assign(t,l),r&&(r.computed=!1,r.name=e.property.name))}),(function(){d.assign(t,"undefined")})),i(t)}),!!a);break;case fr.CallExpression:t=t||this.nextId(),e.filter?(c=d.filter(e.callee.name),u=[],R(e.arguments,(function(e){var t=d.nextId();d.recurse(e,t),u.push(t)})),l=c+"("+u.join(",")+")",d.assign(t,l),i(t)):(c=d.nextId(),s={},u=[],d.recurse(e.callee,c,s,(function(){d.if_(d.notNull(c),(function(){d.addEnsureSafeFunction(c),R(e.arguments,(function(e){d.recurse(e,d.nextId(),n,(function(e){u.push(d.ensureSafeObject(e))}))})),s.name?(d.state.expensiveChecks||d.addEnsureSafeObject(s.context),l=d.member(s.context,s.name,s.computed)+"("+u.join(",")+")"):l=c+"("+u.join(",")+")",l=d.ensureSafeObject(l),d.assign(t,l)}),(function(){d.assign(t,"undefined")})),i(t)})));break;case fr.AssignmentExpression:if(c=this.nextId(),s={},!yr(e.left))throw er("lval","Trying to assign a value to a non l-value");this.recurse(e.left,n,s,(function(){d.if_(d.notNull(s.context),(function(){d.recurse(e.right,c),d.addEnsureSafeObject(d.member(s.context,s.name,s.computed)),d.addEnsureSafeAssignContext(s.context),l=d.member(s.context,s.name,s.computed)+e.operator+c,d.assign(t,l),i(t||l)}))}),1);break;case fr.ArrayExpression:u=[],R(e.elements,(function(e){d.recurse(e,d.nextId(),n,(function(e){u.push(e)}))})),l="["+u.join(",")+"]",this.assign(t,l),i(l);break;case fr.ObjectExpression:u=[],R(e.properties,(function(e){d.recurse(e.value,d.nextId(),n,(function(t){u.push(d.escape(e.key.type===fr.Identifier?e.key.name:""+e.key.value)+":"+t)}))})),l="{"+u.join(",")+"}",this.assign(t,l),i(l);break;case fr.ThisExpression:this.assign(t,"s"),i("s");break;case fr.NGValueParameter:this.assign(t,"v"),i("v")}},getHasOwnProperty:function(e,t){var n=e+"."+t,r=this.current().own;return r.hasOwnProperty(n)||(r[n]=this.nextId(!1,e+"&&("+this.escape(t)+" in "+e+")")),r[n]},assign:function(e,t){if(e)return this.current().body.push(e,"=",t,";"),e},filter:function(e){return this.state.filters.hasOwnProperty(e)||(this.state.filters[e]=this.nextId(!0)),this.state.filters[e]},ifDefined:function(e,t){return"ifDefined("+e+","+this.escape(t)+")"},plus:function(e,t){return"plus("+e+","+t+")"},return_:function(e){this.current().body.push("return ",e,";")},if_:function(e,t,n){if(!0===e)t();else{var r=this.current().body;r.push("if(",e,"){"),t(),r.push("}"),n&&(r.push("else{"),n(),r.push("}"))}},not:function(e){return"!("+e+")"},notNull:function(e){return e+"!=null"},nonComputedMember:function(e,t){return e+"."+t},computedMember:function(e,t){return e+"["+t+"]"},member:function(e,t,n){return n?this.computedMember(e,t):this.nonComputedMember(e,t)},addEnsureSafeObject:function(e){this.current().body.push(this.ensureSafeObject(e),";")},addEnsureSafeMemberName:function(e){this.current().body.push(this.ensureSafeMemberName(e),";")},addEnsureSafeFunction:function(e){this.current().body.push(this.ensureSafeFunction(e),";")},addEnsureSafeAssignContext:function(e){this.current().body.push(this.ensureSafeAssignContext(e),";")},ensureSafeObject:function(e){return"ensureSafeObject("+e+",text)"},ensureSafeMemberName:function(e){return"ensureSafeMemberName("+e+",text)"},ensureSafeFunction:function(e){return"ensureSafeFunction("+e+",text)"},getStringValue:function(e){this.assign(e,"getStringValue("+e+",text)")},ensureSafeAssignContext:function(e){return"ensureSafeAssignContext("+e+",text)"},lazyRecurse:function(e,t,n,r,i,a){var o=this;return function(){o.recurse(e,t,n,r,i,a)}},lazyAssign:function(e,t){var n=this;return function(){n.assign(e,t)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)},escape:function(e){if(z(e))return"'"+e.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(K(e))return e.toString();if(!0===e)return"true";if(!1===e)return"false";if(null===e)return"null";if(void 0===e)return"undefined";throw er("esc","IMPOSSIBLE")},nextId:function(e,t){var n="v"+this.state.nextId++;return e||this.current().vars.push(n+(t?"="+t:"")),n},current:function(){return this.state[this.state.computing]}},xr.prototype={compile:function(e,t){var n,r,i=this,a=this.astBuilder.ast(e);this.expression=e,this.expensiveChecks=t,vr(a,i.$filter),(n=br(a))&&(r=this.recurse(n));var o,s=gr(a.body);s&&(o=[],R(s,(function(e,t){var n=i.recurse(e);e.input=n,o.push(n),e.watchId=t})));var c=[];R(a.body,(function(e){c.push(i.recurse(e.expression))}));var u=0===a.body.length?function(){}:1===a.body.length?c[0]:function(e,t){var n;return R(c,(function(r){n=r(e,t)})),n};return r&&(u.assign=function(e,t,n){return r(e,n,t)}),o&&(u.inputs=o),u.literal=wr(a),u.constant=_r(a),u},recurse:function(e,t,r){var i,a,o,s=this;if(e.input)return this.inputs(e.input,e.watchId);switch(e.type){case fr.Literal:return this.value(e.value,t);case fr.UnaryExpression:return a=this.recurse(e.argument),this["unary"+e.operator](a,t);case fr.BinaryExpression:case fr.LogicalExpression:return i=this.recurse(e.left),a=this.recurse(e.right),this["binary"+e.operator](i,a,t);case fr.ConditionalExpression:return this["ternary?:"](this.recurse(e.test),this.recurse(e.alternate),this.recurse(e.consequent),t);case fr.Identifier:return tr(e.name,s.expression),s.identifier(e.name,s.expensiveChecks||Cr(e.name),t,r,s.expression);case fr.MemberExpression:return i=this.recurse(e.object,!1,!!r),e.computed||(tr(e.property.name,s.expression),a=e.property.name),e.computed&&(a=this.recurse(e.property)),e.computed?this.computedMember(i,a,t,r,s.expression):this.nonComputedMember(i,a,s.expensiveChecks,t,r,s.expression);case fr.CallExpression:return o=[],R(e.arguments,(function(e){o.push(s.recurse(e))})),e.filter&&(a=this.$filter(e.callee.name)),e.filter||(a=this.recurse(e.callee,!0)),e.filter?function(e,r,i,s){for(var c=[],u=0;u<o.length;++u)c.push(o[u](e,r,i,s));var l=a.apply(n,c,s);return t?{context:n,name:n,value:l}:l}:function(e,n,r,i){var c,u=a(e,n,r,i);if(null!=u.value){rr(u.context,s.expression),sr(u.value,s.expression);for(var l=[],d=0;d<o.length;++d)l.push(rr(o[d](e,n,r,i),s.expression));c=rr(u.value.apply(u.context,l),s.expression)}return t?{value:c}:c};case fr.AssignmentExpression:return i=this.recurse(e.left,!0,1),a=this.recurse(e.right),function(e,n,r,o){var c=i(e,n,r,o),u=a(e,n,r,o);return rr(c.value,s.expression),cr(c.context),c.context[c.name]=u,t?{value:u}:u};case fr.ArrayExpression:return o=[],R(e.elements,(function(e){o.push(s.recurse(e))})),function(e,n,r,i){for(var a=[],s=0;s<o.length;++s)a.push(o[s](e,n,r,i));return t?{value:a}:a};case fr.ObjectExpression:return o=[],R(e.properties,(function(e){o.push({key:e.key.type===fr.Identifier?e.key.name:""+e.key.value,value:s.recurse(e.value)})})),function(e,n,r,i){for(var a={},s=0;s<o.length;++s)a[o[s].key]=o[s].value(e,n,r,i);return t?{value:a}:a};case fr.ThisExpression:return function(e){return t?{value:e}:e};case fr.NGValueParameter:return function(e,n,r,i){return t?{value:r}:r}}},"unary+":function(e,t){return function(n,r,i,a){var o=e(n,r,i,a);return o=V(o)?+o:0,t?{value:o}:o}},"unary-":function(e,t){return function(n,r,i,a){var o=e(n,r,i,a);return o=V(o)?-o:0,t?{value:o}:o}},"unary!":function(e,t){return function(n,r,i,a){var o=!e(n,r,i,a);return t?{value:o}:o}},"binary+":function(e,t,n){return function(r,i,a,o){var s=hr(e(r,i,a,o),t(r,i,a,o));return n?{value:s}:s}},"binary-":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o),c=t(r,i,a,o),u=(V(s)?s:0)-(V(c)?c:0);return n?{value:u}:u}},"binary*":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)*t(r,i,a,o);return n?{value:s}:s}},"binary/":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)/t(r,i,a,o);return n?{value:s}:s}},"binary%":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)%t(r,i,a,o);return n?{value:s}:s}},"binary===":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)===t(r,i,a,o);return n?{value:s}:s}},"binary!==":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)!==t(r,i,a,o);return n?{value:s}:s}},"binary==":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)==t(r,i,a,o);return n?{value:s}:s}},"binary!=":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)!=t(r,i,a,o);return n?{value:s}:s}},"binary<":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)<t(r,i,a,o);return n?{value:s}:s}},"binary>":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)>t(r,i,a,o);return n?{value:s}:s}},"binary<=":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)<=t(r,i,a,o);return n?{value:s}:s}},"binary>=":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)>=t(r,i,a,o);return n?{value:s}:s}},"binary&&":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)&&t(r,i,a,o);return n?{value:s}:s}},"binary||":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)||t(r,i,a,o);return n?{value:s}:s}},"ternary?:":function(e,t,n,r){return function(i,a,o,s){var c=e(i,a,o,s)?t(i,a,o,s):n(i,a,o,s);return r?{value:c}:c}},value:function(e,t){return function(){return t?{context:n,name:n,value:e}:e}},identifier:function(e,t,r,i,a){return function(o,s,c,u){var l=s&&e in s?s:o;i&&1!==i&&l&&!l[e]&&(l[e]={});var d=l?l[e]:n;return t&&rr(d,a),r?{context:l,name:e,value:d}:d}},computedMember:function(e,t,n,r,i){return function(a,o,s,c){var u,l,d=e(a,o,s,c);return null!=d&&(tr(u=nr(u=t(a,o,s,c)),i),r&&1!==r&&(cr(d),d&&!d[u]&&(d[u]={})),rr(l=d[u],i)),n?{context:d,name:u,value:l}:l}},nonComputedMember:function(e,t,r,i,a,o){return function(s,c,u,l){var d=e(s,c,u,l);a&&1!==a&&(cr(d),d&&!d[t]&&(d[t]={}));var f=null!=d?d[t]:n;return(r||Cr(t))&&rr(f,o),i?{context:d,name:t,value:f}:f}},inputs:function(e,t){return function(n,r,i,a){return a?a[t]:e(n,r,i)}}};var Sr=function(e,t,n){this.lexer=e,this.$filter=t,this.options=n,this.ast=new fr(this.lexer),this.astCompiler=n.csp?new xr(this.ast,t):new kr(this.ast,t)};function Cr(e){return"constructor"==e}Sr.prototype={constructor:Sr,parse:function(e){return this.astCompiler.compile(e,this.options.expensiveChecks)}};var $r=Object.prototype.valueOf;function Rr(e){return J(e.valueOf)?e.valueOf():$r.call(e)}function Mr(){var e=Ve(),t=Ve();this.$get=["$filter",function(r){var i=fe().noUnsafeEval,a={csp:i,expensiveChecks:!1},s={csp:i,expensiveChecks:!0},c=!1;return u.$$runningExpensiveChecks=function(){return c},u;function u(n,i,u){var l,v,g;switch(u=u||c,void 0===n?"undefined":(0,o.default)(n)){case"string":g=n=n.trim();var y=u?t:e;if(!(l=y[g])){":"===n.charAt(0)&&":"===n.charAt(1)&&(v=!0,n=n.substring(2));var b=u?s:a,w=new dr(b);(l=new Sr(w,r,b).parse(n)).constant?l.$$watchDelegate=h:v?l.$$watchDelegate=l.literal?p:f:l.inputs&&(l.$$watchDelegate=d),u&&(l=function e(t){if(!t)return t;r.$$watchDelegate=t.$$watchDelegate,r.assign=e(t.assign),r.constant=t.constant,r.literal=t.literal;for(var n=0;t.inputs&&n<t.inputs.length;++n)t.inputs[n]=e(t.inputs[n]);return r.inputs=t.inputs,r;function r(e,n,r,i){var a=c;c=!0;try{return t(e,n,r,i)}finally{c=a}}}(l)),y[g]=l}return m(l,i);case"function":return m(n,i);default:return m(F,i)}}function l(e,t){return null==e||null==t?e===t:("object"!==(void 0===e?"undefined":(0,o.default)(e))||"object"!==(void 0===(e=Rr(e))?"undefined":(0,o.default)(e)))&&(e===t||e!=e&&t!=t)}function d(e,t,r,i,a){var o,s=i.inputs;if(1===s.length){var c=l;return s=s[0],e.$watch((function(e){var t=s(e);return l(t,c)||(o=i(e,n,n,[t]),c=t&&Rr(t)),o}),t,r,a)}for(var u=[],d=[],f=0,p=s.length;f<p;f++)u[f]=l,d[f]=null;return e.$watch((function(e){for(var t=!1,r=0,a=s.length;r<a;r++){var c=s[r](e);(t||(t=!l(c,u[r])))&&(d[r]=c,u[r]=c&&Rr(c))}return t&&(o=i(e,n,n,d)),o}),t,r,a)}function f(e,t,n,r){var i,a;return i=e.$watch((function(e){return r(e)}),(function(e,n,r){a=e,J(t)&&t.apply(this,arguments),V(e)&&r.$$postDigest((function(){V(a)&&i()}))}),n)}function p(e,t,n,r){var i,a;return i=e.$watch((function(e){return r(e)}),(function(e,n,r){a=e,J(t)&&t.call(this,e,n,r),o(e)&&r.$$postDigest((function(){o(a)&&i()}))}),n);function o(e){var t=!0;return R(e,(function(e){V(e)||(t=!1)})),t}}function h(e,t,n,r){var i;return i=e.$watch((function(e){return r(e)}),(function(e,n,r){J(t)&&t.apply(this,arguments),i()}),n)}function m(e,t){if(!t)return e;var n=e.$$watchDelegate,r=!1,i=n!==p&&n!==f?function(n,i,a,o){var s=r&&o?o[0]:e(n,i,a,o);return t(s,n,i)}:function(n,r,i,a){var o=e(n,r,i,a),s=t(o,n,r);return V(o)?s:o};return e.$$watchDelegate&&e.$$watchDelegate!==d?i.$$watchDelegate=e.$$watchDelegate:t.$stateful||(i.$$watchDelegate=d,r=!e.inputs,i.inputs=e.inputs?e.inputs:[e]),i}}]}function Pr(){this.$get=["$rootScope","$exceptionHandler",function(e,t){return Er((function(t){e.$evalAsync(t)}),t)}]}function Tr(){this.$get=["$browser","$exceptionHandler",function(e,t){return Er((function(t){e.defer(t)}),t)}]}function Er(e,t){var r=c("$q",TypeError);function i(){this.$$state={status:0}}function a(e,t){return function(n){t.call(e,n)}}function o(r){!r.processScheduled&&r.pending&&(r.processScheduled=!0,e((function(){!function(e){var r,i,a;a=e.pending,e.processScheduled=!1,e.pending=n;for(var o=0,s=a.length;o<s;++o){i=a[o][0],r=a[o][e.status];try{J(r)?i.resolve(r(e.value)):1===e.status?i.resolve(e.value):i.reject(e.value)}catch(e){i.reject(e),t(e)}}}(r)})))}function s(){this.promise=new i,this.resolve=a(this,this.resolve),this.reject=a(this,this.reject),this.notify=a(this,this.notify)}D(i.prototype,{then:function(e,t,n){if(U(e)&&U(t)&&U(n))return this;var r=new s;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([r,e,t,n]),this.$$state.status>0&&o(this.$$state),r.promise},catch:function(e){return this.then(null,e)},finally:function(e,t){return this.then((function(t){return l(t,!0,e)}),(function(t){return l(t,!1,e)}),t)}}),D(s.prototype,{resolve:function(e){this.promise.$$state.status||(e===this.promise?this.$$reject(r("qcycle","Expected promise to be resolved with value other than itself '{0}'",e)):this.$$resolve(e))},$$resolve:function(e){var n,r;r=function(e,t,n){var r=!1;function i(t){return function(n){r||(r=!0,t.call(e,n))}}return[i(t),i(n)]}(this,this.$$resolve,this.$$reject);try{(q(e)||J(e))&&(n=e&&e.then),J(n)?(this.promise.$$state.status=-1,n.call(e,r[0],r[1],this.notify)):(this.promise.$$state.value=e,this.promise.$$state.status=1,o(this.promise.$$state))}catch(e){r[1](e),t(e)}},reject:function(e){this.promise.$$state.status||this.$$reject(e)},$$reject:function(e){this.promise.$$state.value=e,this.promise.$$state.status=2,o(this.promise.$$state)},notify:function(n){var r=this.promise.$$state.pending;this.promise.$$state.status<=0&&r&&r.length&&e((function(){for(var e,i,a=0,o=r.length;a<o;a++){i=r[a][0],e=r[a][3];try{i.notify(J(e)?e(n):n)}catch(e){t(e)}}}))}});var u=function(e,t){var n=new s;return t?n.resolve(e):n.reject(e),n.promise},l=function(e,t,n){var r=null;try{J(n)&&(r=n())}catch(e){return u(e,!1)}return te(r)?r.then((function(){return u(e,t)}),(function(e){return u(e,!1)})):u(e,t)},d=function(e,t,n,r){var i=new s;return i.resolve(e),i.promise.then(t,n,r)},f=d,p=function e(t){if(!J(t))throw r("norslvr","Expected resolverFn, got '{0}'",t);if(!(this instanceof e))return new e(t);var n=new s;return t((function(e){n.resolve(e)}),(function(e){n.reject(e)})),n.promise};return p.defer=function(){return new s},p.reject=function(e){var t=new s;return t.reject(e),t.promise},p.when=d,p.resolve=f,p.all=function(e){var t=new s,n=0,r=W(e)?[]:{};return R(e,(function(e,i){n++,d(e).then((function(e){r.hasOwnProperty(i)||(r[i]=e,--n||t.resolve(r))}),(function(e){r.hasOwnProperty(i)||t.reject(e)}))})),0===n&&t.resolve(r),t.promise},p}function Ir(){this.$get=["$window","$timeout",function(e,t){var n=e.requestAnimationFrame||e.webkitRequestAnimationFrame,r=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame,i=!!n,a=i?function(e){var t=n(e);return function(){r(t)}}:function(e){var n=t(e,16.66,!1);return function(){t.cancel(n)}};return a.supported=i,a}]}function Dr(){var e=10,t=c("$rootScope"),n=null,r=null;this.digestTtl=function(t){return arguments.length&&(e=t),e},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(i,a,o,s){function c(e){e.currentScope.$$destroyed=!0}function u(){this.$id=T(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}u.prototype={constructor:u,$new:function(e,t){var n;return t=t||this,e?(n=new u).$root=this.$root:(this.$$ChildScope||(this.$$ChildScope=function(e){function t(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=T(),this.$$ChildScope=null}return t.prototype=e,t}(this)),n=new this.$$ChildScope),n.$parent=t,n.$$prevSibling=t.$$childTail,t.$$childHead?(t.$$childTail.$$nextSibling=n,t.$$childTail=n):t.$$childHead=t.$$childTail=n,(e||t!=this)&&n.$on("$destroy",c),n},$watch:function(e,t,r,i){var a=o(e);if(a.$$watchDelegate)return a.$$watchDelegate(this,t,r,a,e);var s=this,c=s.$$watchers,u={fn:t,last:w,get:a,exp:i||e,eq:!!r};return n=null,J(t)||(u.fn=F),c||(c=s.$$watchers=[]),c.unshift(u),y(this,1),function(){ce(c,u)>=0&&y(s,-1),n=null}},$watchGroup:function(e,t){var n=new Array(e.length),r=new Array(e.length),i=[],a=this,o=!1,s=!0;if(!e.length){var c=!0;return a.$evalAsync((function(){c&&t(r,r,a)})),function(){c=!1}}if(1===e.length)return this.$watch(e[0],(function(e,i,a){r[0]=e,n[0]=i,t(r,e===i?r:n,a)}));function u(){o=!1,s?(s=!1,t(r,r,a)):t(r,n,a)}return R(e,(function(e,t){var s=a.$watch(e,(function(e,i){r[t]=e,n[t]=i,o||(o=!0,a.$evalAsync(u))}));i.push(s)})),function(){for(;i.length;)i.shift()()}},$watchCollection:function(e,t){m.$stateful=!0;var n,r,i,a=this,s=t.length>1,c=0,u=o(e,m),l=[],d={},p=!0,h=0;function m(e){var t,i,a,o;if(!U(n=e)){if(q(n))if($(n)){r!==l&&(h=(r=l).length=0,c++),t=n.length,h!==t&&(c++,r.length=h=t);for(var s=0;s<t;s++)o=r[s],a=n[s],o!=o&&a!=a||o===a||(c++,r[s]=a)}else{for(i in r!==d&&(r=d={},h=0,c++),t=0,n)f.call(n,i)&&(t++,a=n[i],o=r[i],i in r?o!=o&&a!=a||o===a||(c++,r[i]=a):(h++,r[i]=a,c++));if(h>t)for(i in c++,r)f.call(n,i)||(h--,delete r[i])}else r!==n&&(r=n,c++);return c}}return this.$watch(u,(function(){if(p?(p=!1,t(n,n,a)):t(n,i,a),s)if(q(n))if($(n)){i=new Array(n.length);for(var e=0;e<n.length;e++)i[e]=n[e]}else for(var r in i={},n)f.call(n,r)&&(i[r]=n[r]);else i=n}))},$digest:function(){var i,o,c,u,f,h,m,y,b,k,x=e,S=[];v("$digest"),s.$$checkUrlChange(),this===l&&null!==r&&(s.defer.cancel(r),_()),n=null;do{for(h=!1,y=this;d.length;){try{(k=d.shift()).scope.$eval(k.expression,k.locals)}catch(e){a(e)}n=null}e:do{if(u=y.$$watchers)for(f=u.length;f--;)try{if(i=u[f])if((o=(0,i.get)(y))===(c=i.last)||(i.eq?de(o,c):"number"==typeof o&&"number"==typeof c&&isNaN(o)&&isNaN(c))){if(i===n){h=!1;break e}}else h=!0,n=i,i.last=i.eq?ue(o,null):o,(0,i.fn)(o,c===w?o:c,y),x<5&&(S[b=4-x]||(S[b]=[]),S[b].push({msg:J(i.exp)?"fn: "+(i.exp.name||i.exp.toString()):i.exp,newVal:o,oldVal:c}))}catch(e){a(e)}if(!(m=y.$$watchersCount&&y.$$childHead||y!==this&&y.$$nextSibling))for(;y!==this&&!(m=y.$$nextSibling);)y=y.$parent}while(y=m);if((h||d.length)&&!x--)throw g(),t("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",e,S)}while(h||d.length);for(g();p.length;)try{p.shift()()}catch(e){a(e)}},$destroy:function(){if(!this.$$destroyed){var e=this.$parent;for(var t in this.$broadcast("$destroy"),this.$$destroyed=!0,this===l&&s.$$applicationDestroyed(),y(this,-this.$$watchersCount),this.$$listenerCount)b(this,this.$$listenerCount[t],t);e&&e.$$childHead==this&&(e.$$childHead=this.$$nextSibling),e&&e.$$childTail==this&&(e.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=F,this.$on=this.$watch=this.$watchGroup=function(){return F},this.$$listeners={},this.$$nextSibling=null,function e(t){9===h&&(t.$$childHead&&e(t.$$childHead),t.$$nextSibling&&e(t.$$nextSibling)),t.$parent=t.$$nextSibling=t.$$prevSibling=t.$$childHead=t.$$childTail=t.$root=t.$$watchers=null}(this)}},$eval:function(e,t){return o(e)(this,t)},$evalAsync:function(e,t){l.$$phase||d.length||s.defer((function(){d.length&&l.$digest()})),d.push({scope:this,expression:o(e),locals:t})},$$postDigest:function(e){p.push(e)},$apply:function(e){try{v("$apply");try{return this.$eval(e)}finally{g()}}catch(e){a(e)}finally{try{l.$digest()}catch(e){throw a(e),e}}},$applyAsync:function(e){var t=this;e&&m.push((function(){t.$eval(e)})),e=o(e),null===r&&(r=s.defer((function(){l.$apply(_)})))},$on:function(e,t){var n=this.$$listeners[e];n||(this.$$listeners[e]=n=[]),n.push(t);var r=this;do{r.$$listenerCount[e]||(r.$$listenerCount[e]=0),r.$$listenerCount[e]++}while(r=r.$parent);var i=this;return function(){var r=n.indexOf(t);-1!==r&&(n[r]=null,b(i,1,e))}},$emit:function(e,t){var n,r,i,o=[],s=this,c=!1,u={name:e,targetScope:s,stopPropagation:function(){c=!0},preventDefault:function(){u.defaultPrevented=!0},defaultPrevented:!1},l=he([u],arguments,1);do{for(n=s.$$listeners[e]||o,u.currentScope=s,r=0,i=n.length;r<i;r++)if(n[r])try{n[r].apply(null,l)}catch(e){a(e)}else n.splice(r,1),r--,i--;if(c)return u.currentScope=null,u;s=s.$parent}while(s);return u.currentScope=null,u},$broadcast:function(e,t){var n=this,r=this,i={name:e,targetScope:this,preventDefault:function(){i.defaultPrevented=!0},defaultPrevented:!1};if(!this.$$listenerCount[e])return i;for(var o,s,c,u=he([i],arguments,1);n=r;){for(i.currentScope=n,s=0,c=(o=n.$$listeners[e]||[]).length;s<c;s++)if(o[s])try{o[s].apply(null,u)}catch(e){a(e)}else o.splice(s,1),s--,c--;if(!(r=n.$$listenerCount[e]&&n.$$childHead||n!==this&&n.$$nextSibling))for(;n!==this&&!(r=n.$$nextSibling);)n=n.$parent}return i.currentScope=null,i}};var l=new u,d=l.$$asyncQueue=[],p=l.$$postDigestQueue=[],m=l.$$applyAsyncQueue=[];return l;function v(e){if(l.$$phase)throw t("inprog","{0} already in progress",l.$$phase);l.$$phase=e}function g(){l.$$phase=null}function y(e,t){do{e.$$watchersCount+=t}while(e=e.$parent)}function b(e,t,n){do{e.$$listenerCount[n]-=t,0===e.$$listenerCount[n]&&delete e.$$listenerCount[n]}while(e=e.$parent)}function w(){}function _(){for(;m.length;)try{m.shift()()}catch(e){a(e)}r=null}}]}function Ar(){var e=/^\s*(https?|ftp|mailto|tel|file):/,t=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(t){return V(t)?(e=t,this):e},this.imgSrcSanitizationWhitelist=function(e){return V(e)?(t=e,this):t},this.$get=function(){return function(n,r){var i,a=r?t:e;return""===(i=Kr(n).href)||i.match(a)?n:"unsafe:"+i}}}var Or=c("$sce"),Lr={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"};function Fr(e){var t=[];return V(e)&&R(e,(function(e){t.push(function(e){if("self"===e)return e;if(z(e)){if(e.indexOf("***")>-1)throw Or("iwcard","Illegal sequence *** in string matcher.  String: {0}",e);return e=ae(e).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+e+"$")}if(Y(e))return new RegExp("^"+e.source+"$");throw Or("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}(e))})),t}function jr(){this.SCE_CONTEXTS=Lr;var e=["self"],t=[];this.resourceUrlWhitelist=function(t){return arguments.length&&(e=Fr(t)),e},this.resourceUrlBlacklist=function(e){return arguments.length&&(t=Fr(e)),t},this.$get=["$injector",function(n){var r=function(e){throw Or("unsafe","Attempting to use an unsafe value in a safe context.")};function i(e,t){return"self"===e?Gr(t):!!e.exec(t.href)}function a(e){var t=function(e){this.$$unwrapTrustedValue=function(){return e}};return e&&(t.prototype=new e),t.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},t.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},t}n.has("$sanitize")&&(r=n.get("$sanitize"));var o=a(),s={};return s[Lr.HTML]=a(o),s[Lr.CSS]=a(o),s[Lr.URL]=a(o),s[Lr.JS]=a(o),s[Lr.RESOURCE_URL]=a(s[Lr.URL]),{trustAs:function(e,t){var n=s.hasOwnProperty(e)?s[e]:null;if(!n)throw Or("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",e,t);if(null===t||U(t)||""===t)return t;if("string"!=typeof t)throw Or("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",e);return new n(t)},getTrusted:function(n,a){if(null===a||U(a)||""===a)return a;var o=s.hasOwnProperty(n)?s[n]:null;if(o&&a instanceof o)return a.$$unwrapTrustedValue();if(n===Lr.RESOURCE_URL){if(function(n){var r,a,o=Kr(n.toString()),s=!1;for(r=0,a=e.length;r<a;r++)if(i(e[r],o)){s=!0;break}if(s)for(r=0,a=t.length;r<a;r++)if(i(t[r],o)){s=!1;break}return s}(a))return a;throw Or("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",a.toString())}if(n===Lr.HTML)return r(a);throw Or("unsafe","Attempting to use an unsafe value in a safe context.")},valueOf:function(e){return e instanceof o?e.$$unwrapTrustedValue():e}}}]}function Nr(){var e=!0;this.enabled=function(t){return arguments.length&&(e=!!t),e},this.$get=["$parse","$sceDelegate",function(t,n){if(e&&h<8)throw Or("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var r=le(Lr);r.isEnabled=function(){return e},r.trustAs=n.trustAs,r.getTrusted=n.getTrusted,r.valueOf=n.valueOf,e||(r.trustAs=r.getTrusted=function(e,t){return t},r.valueOf=j),r.parseAs=function(e,n){var i=t(n);return i.literal&&i.constant?i:t(n,(function(t){return r.getTrusted(e,t)}))};var i=r.parseAs,a=r.getTrusted,o=r.trustAs;return R(Lr,(function(e,t){var n=d(t);r[et("parse_as_"+n)]=function(t){return i(e,t)},r[et("get_trusted_"+n)]=function(t){return a(e,t)},r[et("trust_as_"+n)]=function(t){return o(e,t)}})),r}]}function Br(){this.$get=["$window","$document",function(e,t){var n,r,i={},a=O((/android (\d+)/.exec(d((e.navigator||{}).userAgent))||[])[1]),o=/Boxee/i.test((e.navigator||{}).userAgent),s=t[0]||{},c=/^(Moz|webkit|ms)(?=[A-Z])/,u=s.body&&s.body.style,l=!1,f=!1;if(u){for(var p in u)if(r=c.exec(p)){n=(n=r[0]).substr(0,1).toUpperCase()+n.substr(1);break}n||(n="WebkitOpacity"in u&&"webkit"),l=!(!("transition"in u)&&!(n+"Transition"in u)),f=!(!("animation"in u)&&!(n+"Animation"in u)),!a||l&&f||(l=z(u.webkitTransition),f=z(u.webkitAnimation))}return{history:!(!e.history||!e.history.pushState||a<4||o),hasEvent:function(e){if("input"===e&&h<=11)return!1;if(U(i[e])){var t=s.createElement("div");i[e]="on"+e in t}return i[e]},csp:fe(),vendorPrefix:n,transitions:l,animations:f,android:a}}]}function Ur(){this.$get=["$templateCache","$http","$q","$sce",function(e,t,n,r){function i(a,o){i.totalPendingRequests++,z(a)&&e.get(a)||(a=r.getTrustedResourceUrl(a));var s=t.defaults&&t.defaults.transformResponse;W(s)?s=s.filter((function(e){return e!==$n})):s===$n&&(s=null);var c={cache:e,transformResponse:s};return t.get(a,c).finally((function(){i.totalPendingRequests--})).then((function(t){return e.put(a,t.data),t.data}),(function(e){if(!o)throw rn("tpload","Failed to load template: {0} (HTTP status: {1} {2})",a,e.status,e.statusText);return n.reject(e)}))}return i.totalPendingRequests=0,i}]}function Vr(){this.$get=["$rootScope","$browser","$location",function(e,t,n){return{findBindings:function(e,t,n){var r=[];return R(e.getElementsByClassName("ng-binding"),(function(e){var i=S.element(e).data("$binding");i&&R(i,(function(i){n?new RegExp("(^|\\s)"+ae(t)+"(\\s|\\||$)").test(i)&&r.push(e):-1!=i.indexOf(t)&&r.push(e)}))})),r},findModels:function(e,t,n){for(var r=["ng-","data-ng-","ng\\:"],i=0;i<r.length;++i){var a="["+r[i]+"model"+(n?"=":"*=")+'"'+t+'"]',o=e.querySelectorAll(a);if(o.length)return o}},getLocation:function(){return n.url()},setLocation:function(t){t!==n.url()&&(n.url(t),e.$digest())},whenStable:function(e){t.notifyWhenNoOutstandingRequests(e)}}}]}function qr(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(e,t,n,r,i){var a={};function o(o,s,c){J(o)||(c=s,s=o,o=F);var u,l=me(arguments,3),d=V(c)&&!c,f=(d?r:n).defer(),p=f.promise;return u=t.defer((function(){try{f.resolve(o.apply(null,l))}catch(e){f.reject(e),i(e)}finally{delete a[p.$$timeoutId]}d||e.$apply()}),s),p.$$timeoutId=u,a[u]=f,p}return o.cancel=function(e){return!(!e||!(e.$$timeoutId in a))&&(a[e.$$timeoutId].reject("canceled"),delete a[e.$$timeoutId],t.defer.cancel(e.$$timeoutId))},o}]}rn=c("$compile");var Hr=t.createElement("a"),zr=Kr(e.location.href);function Kr(e){var t=e;return h&&(Hr.setAttribute("href",t),t=Hr.href),Hr.setAttribute("href",t),{href:Hr.href,protocol:Hr.protocol?Hr.protocol.replace(/:$/,""):"",host:Hr.host,search:Hr.search?Hr.search.replace(/^\?/,""):"",hash:Hr.hash?Hr.hash.replace(/^#/,""):"",hostname:Hr.hostname,port:Hr.port,pathname:"/"===Hr.pathname.charAt(0)?Hr.pathname:"/"+Hr.pathname}}function Gr(e){var t=z(e)?Kr(e):e;return t.protocol===zr.protocol&&t.host===zr.host}function Wr(){this.$get=N(e)}function Jr(e){var t=e[0]||{},n={},r="";function i(e){try{return decodeURIComponent(e)}catch(t){return e}}return function(){var e,a,o,s,c,u=t.cookie||"";if(u!==r)for(e=(r=u).split("; "),n={},o=0;o<e.length;o++)(s=(a=e[o]).indexOf("="))>0&&(c=i(a.substring(0,s)),U(n[c])&&(n[c]=i(a.substring(s+1))));return n}}function Yr(){this.$get=Jr}function Qr(e){var t="Filter";function n(r,i){if(q(r)){var a={};return R(r,(function(e,t){a[t]=n(t,e)})),a}return e.factory(r+t,i)}this.register=n,this.$get=["$injector",function(e){return function(n){return e.get(n+t)}}],n("currency",ti),n("date",pi),n("filter",Xr),n("json",hi),n("limitTo",gi),n("lowercase",mi),n("number",ni),n("orderBy",yi),n("uppercase",vi)}function Xr(){return function(e,t,n){if(!$(e)){if(null==e)return e;throw c("filter")("notarray","Expected array but received: {0}",e)}var r,i;switch(ei(t)){case"function":r=t;break;case"boolean":case"null":case"number":case"string":i=!0;case"object":r=function(e,t,n){var r=q(e)&&"$"in e;return!0===t?t=de:J(t)||(t=function(e,t){return!(U(e)||(null===e||null===t?e!==t:q(t)||q(e)&&!B(e)||(e=d(""+e),t=d(""+t),-1===e.indexOf(t))))}),function(i){return r&&!q(i)?Zr(i,e.$,t,!1):Zr(i,e,t,n)}}(t,n,i);break;default:return e}return Array.prototype.filter.call(e,r)}}function Zr(e,t,n,r,i){var a=ei(e),o=ei(t);if("string"===o&&"!"===t.charAt(0))return!Zr(e,t.substring(1),n,r);if(W(e))return e.some((function(e){return Zr(e,t,n,r)}));switch(a){case"object":var s;if(r){for(s in e)if("$"!==s.charAt(0)&&Zr(e[s],t,n,!0))return!0;return!i&&Zr(e,t,n,!1)}if("object"===o){for(s in t){var c=t[s];if(!J(c)&&!U(c)){var u="$"===s;if(!Zr(u?e:e[s],c,n,u,u))return!1}}return!0}return n(e,t);case"function":return!1;default:return n(e,t)}}function ei(e){return null===e?"null":void 0===e?"undefined":(0,o.default)(e)}Jr.$inject=["$document"],Qr.$inject=["$provide"];function ti(e){var t=e.NUMBER_FORMATS;return function(e,n,r){return U(n)&&(n=t.CURRENCY_SYM),U(r)&&(r=t.PATTERNS[1].maxFrac),null==e?e:ri(e,t.PATTERNS[1],t.GROUP_SEP,t.DECIMAL_SEP,r).replace(/\u00A4/g,n)}}function ni(e){var t=e.NUMBER_FORMATS;return function(e,n){return null==e?e:ri(e,t.PATTERNS[0],t.GROUP_SEP,t.DECIMAL_SEP,n)}}function ri(e,t,n,r,i){if(!z(e)&&!K(e)||isNaN(e))return"";var a,o=!isFinite(e),s=!1,c=Math.abs(e)+"",u="";if(o)u="â";else{!function(e,t,n,r){var i=e.d,a=i.length-e.i,o=(t=U(t)?Math.min(Math.max(n,a),r):+t)+e.i,s=i[o];if(o>0)i.splice(o);else{e.i=1,i.length=o=t+1;for(var c=0;c<o;c++)i[c]=0}for(s>=5&&i[o-1]++;a<t;a++)i.push(0);var u=i.reduceRight((function(e,t,n,r){return t+=e,r[n]=t%10,Math.floor(t/10)}),0);u&&(i.unshift(u),e.i++)}(a=function(e){var t,n,r,i,a,o=0;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;"0"==e.charAt(r);r++);if(r==(a=e.length))t=[0],n=1;else{for(a--;"0"==e.charAt(a);)a--;for(n-=r,t=[],i=0;r<=a;r++,i++)t[i]=+e.charAt(r)}return n>22&&(t=t.splice(0,21),o=n-1,n=1),{d:t,e:o,i:n}}(c),i,t.minFrac,t.maxFrac);var l=a.d,d=a.i,f=a.e,p=[];for(s=l.reduce((function(e,t){return e&&!t}),!0);d<0;)l.unshift(0),d++;d>0?p=l.splice(d):(p=l,l=[0]);var h=[];for(l.length>t.lgSize&&h.unshift(l.splice(-t.lgSize).join(""));l.length>t.gSize;)h.unshift(l.splice(-t.gSize).join(""));l.length&&h.unshift(l.join("")),u=h.join(n),p.length&&(u+=r+p.join("")),f&&(u+="e+"+f)}return e<0&&!s?t.negPre+u+t.negSuf:t.posPre+u+t.posSuf}function ii(e,t,n){var r="";for(e<0&&(r="-",e=-e),e=""+e;e.length<t;)e="0"+e;return n&&(e=e.substr(e.length-t)),r+e}function ai(e,t,n,r){return n=n||0,function(i){var a=i["get"+e]();return(n>0||a>-n)&&(a+=n),0===a&&-12==n&&(a=12),ii(a,t,r)}}function oi(e,t){return function(n,r){var i=n["get"+e]();return r[p(t?"SHORT"+e:e)][i]}}function si(e){var t=new Date(e,0,1).getDay();return new Date(e,0,(t<=4?5:12)-t)}function ci(e){return function(t){var n=si(t.getFullYear()),r=+function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+(4-e.getDay()))}(t)-+n;return ii(1+Math.round(r/6048e5),e)}}function ui(e,t){return e.getFullYear()<=0?t.ERAS[0]:t.ERAS[1]}ti.$inject=["$locale"],ni.$inject=["$locale"];var li={yyyy:ai("FullYear",4),yy:ai("FullYear",2,0,!0),y:ai("FullYear",1),MMMM:oi("Month"),MMM:oi("Month",!0),MM:ai("Month",2,1),M:ai("Month",1,1),dd:ai("Date",2),d:ai("Date",1),HH:ai("Hours",2),H:ai("Hours",1),hh:ai("Hours",2,-12),h:ai("Hours",1,-12),mm:ai("Minutes",2),m:ai("Minutes",1),ss:ai("Seconds",2),s:ai("Seconds",1),sss:ai("Milliseconds",3),EEEE:oi("Day"),EEE:oi("Day",!0),a:function(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]},Z:function(e,t,n){var r=-1*n;return(r>=0?"+":"")+(ii(Math[r>0?"floor":"ceil"](r/60),2)+ii(Math.abs(r%60),2))},ww:ci(2),w:ci(1),G:ui,GG:ui,GGG:ui,GGGG:function(e,t){return e.getFullYear()<=0?t.ERANAMES[0]:t.ERANAMES[1]}},di=/((?:[^yMdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,fi=/^\-?\d+$/;function pi(e){var t=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,r,i){var a,o,s="",c=[];if(r=r||"mediumDate",r=e.DATETIME_FORMATS[r]||r,z(n)&&(n=fi.test(n)?O(n):function(e){var n;if(n=e.match(t)){var r=new Date(0),i=0,a=0,o=n[8]?r.setUTCFullYear:r.setFullYear,s=n[8]?r.setUTCHours:r.setHours;n[9]&&(i=O(n[9]+n[10]),a=O(n[9]+n[11])),o.call(r,O(n[1]),O(n[2])-1,O(n[3]));var c=O(n[4]||0)-i,u=O(n[5]||0)-a,l=O(n[6]||0),d=Math.round(1e3*parseFloat("0."+(n[7]||0)));return s.call(r,c,u,l,d),r}return e}(n)),K(n)&&(n=new Date(n)),!G(n)||!isFinite(n.getTime()))return n;for(;r;)(o=di.exec(r))?r=(c=he(c,o,1)).pop():(c.push(r),r=null);var u=n.getTimezoneOffset();return i&&(u=_e(i,u),n=ke(n,i,!0)),R(c,(function(t){s+=(a=li[t])?a(n,e.DATETIME_FORMATS,u):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")})),s}}function hi(){return function(e,t){return U(t)&&(t=2),ye(e,t)}}pi.$inject=["$locale"];var mi=N(d),vi=N(p);function gi(){return function(e,t,n){return t=Math.abs(Number(t))===1/0?Number(t):O(t),isNaN(t)?e:(K(e)&&(e=e.toString()),W(e)||z(e)?(n=(n=!n||isNaN(n)?0:O(n))<0?Math.max(0,e.length+n):n,t>=0?e.slice(n,n+t):0===n?e.slice(t,e.length):e.slice(Math.max(0,n+t),n)):e)}}function yi(e){return function(r,i,a){if(!$(r))return r;W(i)||(i=[i]),0===i.length&&(i=["+"]);var s=function(t,n){return n=n?-1:1,t.map((function(t){var r=1,i=j;if(J(t))i=t;else if(z(t)&&("+"!=t.charAt(0)&&"-"!=t.charAt(0)||(r="-"==t.charAt(0)?-1:1,t=t.substring(1)),""!==t&&(i=e(t)).constant)){var a=i();i=function(e){return e[a]}}return{get:i,descending:r*n}}))}(i,a);s.push({get:function(){return{}},descending:a?-1:1});var c=Array.prototype.map.call(r,(function(e,n){return{value:e,predicateValues:s.map((function(r){return function(e,n){var r=void 0===e?"undefined":(0,o.default)(e);return null===e?(r="string",e="null"):"string"===r?e=e.toLowerCase():"object"===r&&(e=function(e,n){return"function"==typeof e.valueOf&&t(e=e.valueOf())||B(e)&&t(e=e.toString())?e:n}(e,n)),{value:e,type:r}}(r.get(e),n)}))}}));return c.sort((function(e,t){for(var r=0,i=0,a=s.length;i<a&&!(r=n(e.predicateValues[i],t.predicateValues[i])*s[i].descending);++i);return r})),c.map((function(e){return e.value}))};function t(e){switch(void 0===e?"undefined":(0,o.default)(e)){case"number":case"boolean":case"string":return!0;default:return!1}}function n(e,t){var n=0;return e.type===t.type?e.value!==t.value&&(n=e.value<t.value?-1:1):n=e.type<t.type?-1:1,n}}function bi(e){return J(e)&&(e={link:e}),e.restrict=e.restrict||"AC",N(e)}yi.$inject=["$parse"];var wi=N({restrict:"E",compile:function(e,t){if(!t.href&&!t.xlinkHref)return function(e,t){if("a"===t[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===_.call(t.prop("href"))?"xlink:href":"href";t.on("click",(function(e){t.attr(n)||e.preventDefault()}))}}}}),_i={};R(Rt,(function(e,t){if("multiple"!=e){var n=sn("ng-"+t),r=i;"checked"===e&&(r=function(e,t,r){r.ngModel!==r[n]&&i(e,0,r)}),_i[n]=function(){return{restrict:"A",priority:100,link:r}}}function i(e,r,i){e.$watch(i[n],(function(e){i.$set(t,!!e)}))}})),R(Pt,(function(e,t){_i[t]=function(){return{priority:100,link:function(e,n,r){if("ngPattern"===t&&"/"==r.ngPattern.charAt(0)){var i=r.ngPattern.match(u);if(i)return void r.$set("ngPattern",new RegExp(i[1],i[2]))}e.$watch(r[t],(function(e){r.$set(t,e)}))}}}})),R(["src","srcset","href"],(function(e){var t=sn("ng-"+e);_i[t]=function(){return{priority:99,link:function(n,r,i){var a=e,o=e;"href"===e&&"[object SVGAnimatedString]"===_.call(r.prop("href"))&&(o="xlinkHref",i.$attr[o]="xlink:href",a=null),i.$observe(t,(function(t){t?(i.$set(o,t),h&&a&&r.prop(a,i[o])):"href"===e&&i.$set(o,null)}))}}}}));var ki={$addControl:F,$$renameControl:function(e,t){e.$name=t},$removeControl:F,$setValidity:F,$setDirty:F,$setPristine:F,$setSubmitted:F},xi="ng-submitted";function Si(e,t,r,i,a){var o=this,s=[];o.$error={},o.$$success={},o.$pending=n,o.$name=a(t.name||t.ngForm||"")(r),o.$dirty=!1,o.$pristine=!0,o.$valid=!0,o.$invalid=!1,o.$submitted=!1,o.$$parentForm=ki,o.$rollbackViewValue=function(){R(s,(function(e){e.$rollbackViewValue()}))},o.$commitViewValue=function(){R(s,(function(e){e.$commitViewValue()}))},o.$addControl=function(e){Ne(e.$name,"input"),s.push(e),e.$name&&(o[e.$name]=e),e.$$parentForm=o},o.$$renameControl=function(e,t){var n=e.$name;o[n]===e&&delete o[n],o[t]=e,e.$name=t},o.$removeControl=function(e){e.$name&&o[e.$name]===e&&delete o[e.$name],R(o.$pending,(function(t,n){o.$setValidity(n,null,e)})),R(o.$error,(function(t,n){o.$setValidity(n,null,e)})),R(o.$$success,(function(t,n){o.$setValidity(n,null,e)})),ce(s,e),e.$$parentForm=ki},_a({ctrl:this,$element:e,set:function(e,t,n){var r=e[t];r?-1===r.indexOf(n)&&r.push(n):e[t]=[n]},unset:function(e,t,n){var r=e[t];r&&(ce(r,n),0===r.length&&delete e[t])},$animate:i}),o.$setDirty=function(){i.removeClass(e,pa),i.addClass(e,ha),o.$dirty=!0,o.$pristine=!1,o.$$parentForm.$setDirty()},o.$setPristine=function(){i.setClass(e,pa,ha+" "+xi),o.$dirty=!1,o.$pristine=!0,o.$submitted=!1,R(s,(function(e){e.$setPristine()}))},o.$setUntouched=function(){R(s,(function(e){e.$setUntouched()}))},o.$setSubmitted=function(){i.addClass(e,xi),o.$submitted=!0,o.$$parentForm.$setSubmitted()}}Si.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var Ci=function(e){return["$timeout","$parse",function(t,r){return{name:"form",restrict:e?"EAC":"E",require:["form","^^?form"],controller:Si,compile:function(r,a){r.addClass(pa).addClass(da);var o=a.name?"name":!(!e||!a.ngForm)&&"ngForm";return{pre:function(e,r,a,s){var c=s[0];if(!("action"in a)){var u=function(t){e.$apply((function(){c.$commitViewValue(),c.$setSubmitted()})),t.preventDefault()};We(r[0],"submit",u),r.on("$destroy",(function(){t((function(){Je(r[0],"submit",u)}),0,!1)}))}(s[1]||c.$$parentForm).$addControl(c);var l=o?i(c.$name):F;o&&(l(e,c),a.$observe(o,(function(t){c.$name!==t&&(l(e,n),c.$$parentForm.$$renameControl(c,t),(l=i(c.$name))(e,c))}))),r.on("$destroy",(function(){c.$$parentForm.$removeControl(c),l(e,n),D(c,ki)}))}}}};function i(e){return""===e?r('this[""]').assign:r(e).assign||F}}]},$i=Ci(),Ri=Ci(!0),Mi=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,Pi=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+\])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,Ti=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,Ei=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,Ii=/^(\d{4})-(\d{2})-(\d{2})$/,Di=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Ai=/^(\d{4})-W(\d\d)$/,Oi=/^(\d{4})-(\d\d)$/,Li=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Fi=Ve();R("date,datetime-local,month,time,week".split(","),(function(e){Fi[e]=!0}));var ji={text:function(e,t,n,r,i,a){Bi(e,t,n,r,i,a),Ni(r)},date:Vi("date",Ii,Ui(Ii,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":Vi("datetimelocal",Di,Ui(Di,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:Vi("time",Li,Ui(Li,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:Vi("week",Ai,(function(e,t){if(G(e))return e;if(z(e)){Ai.lastIndex=0;var n=Ai.exec(e);if(n){var r=+n[1],i=+n[2],a=0,o=0,s=0,c=0,u=si(r),l=7*(i-1);return t&&(a=t.getHours(),o=t.getMinutes(),s=t.getSeconds(),c=t.getMilliseconds()),new Date(r,0,u.getDate()+l,a,o,s,c)}}return NaN}),"yyyy-Www"),month:Vi("month",Oi,Ui(Oi,["yyyy","MM"]),"yyyy-MM"),number:function(e,t,r,i,a,o){var s,c;(qi(e,t,r,i),Bi(e,t,r,i,a,o),i.$$parserName="number",i.$parsers.push((function(e){return i.$isEmpty(e)?null:Ei.test(e)?parseFloat(e):n})),i.$formatters.push((function(e){if(!i.$isEmpty(e)){if(!K(e))throw va("numfmt","Expected `{0}` to be a number",e);e=e.toString()}return e})),V(r.min)||r.ngMin)&&(i.$validators.min=function(e){return i.$isEmpty(e)||U(s)||e>=s},r.$observe("min",(function(e){V(e)&&!K(e)&&(e=parseFloat(e,10)),s=K(e)&&!isNaN(e)?e:n,i.$validate()})));(V(r.max)||r.ngMax)&&(i.$validators.max=function(e){return i.$isEmpty(e)||U(c)||e<=c},r.$observe("max",(function(e){V(e)&&!K(e)&&(e=parseFloat(e,10)),c=K(e)&&!isNaN(e)?e:n,i.$validate()})))},url:function(e,t,n,r,i,a){Bi(e,t,n,r,i,a),Ni(r),r.$$parserName="url",r.$validators.url=function(e,t){var n=e||t;return r.$isEmpty(n)||Pi.test(n)}},email:function(e,t,n,r,i,a){Bi(e,t,n,r,i,a),Ni(r),r.$$parserName="email",r.$validators.email=function(e,t){var n=e||t;return r.$isEmpty(n)||Ti.test(n)}},radio:function(e,t,n,r){U(n.name)&&t.attr("name",T()),t.on("click",(function(e){t[0].checked&&r.$setViewValue(n.value,e&&e.type)})),r.$render=function(){var e=n.value;t[0].checked=e==r.$viewValue},n.$observe("value",r.$render)},checkbox:function(e,t,n,r,i,a,o,s){var c=Hi(s,e,"ngTrueValue",n.ngTrueValue,!0),u=Hi(s,e,"ngFalseValue",n.ngFalseValue,!1);t.on("click",(function(e){r.$setViewValue(t[0].checked,e&&e.type)})),r.$render=function(){t[0].checked=r.$viewValue},r.$isEmpty=function(e){return!1===e},r.$formatters.push((function(e){return de(e,c)})),r.$parsers.push((function(e){return e?c:u}))},hidden:F,button:F,submit:F,reset:F,file:F};function Ni(e){e.$formatters.push((function(t){return e.$isEmpty(t)?t:t.toString()}))}function Bi(e,t,n,r,i,a){var o,s=d(t[0].type);if(!i.android){var c=!1;t.on("compositionstart",(function(e){c=!0})),t.on("compositionend",(function(){c=!1,u()}))}var u=function(e){if(o&&(a.defer.cancel(o),o=null),!c){var i=t.val(),u=e&&e.type;"password"===s||n.ngTrim&&"false"===n.ngTrim||(i=ie(i)),(r.$viewValue!==i||""===i&&r.$$hasNativeValidators)&&r.$setViewValue(i,u)}};if(i.hasEvent("input"))t.on("input",u);else{var f=function(e,t,n){o||(o=a.defer((function(){o=null,t&&t.value===n||u(e)})))};t.on("keydown",(function(e){var t=e.keyCode;91===t||15<t&&t<19||37<=t&&t<=40||f(e,this,this.value)})),i.hasEvent("paste")&&t.on("paste cut",f)}t.on("change",u),Fi[s]&&r.$$hasNativeValidators&&s===n.type&&t.on("keydown wheel mousedown",(function(e){if(!o){var t=this[l],n=t.badInput,r=t.typeMismatch;o=a.defer((function(){o=null,t.badInput===n&&t.typeMismatch===r||u(e)}))}})),r.$render=function(){var e=r.$isEmpty(r.$viewValue)?"":r.$viewValue;t.val()!==e&&t.val(e)}}function Ui(e,t){return function(n,r){var i,a;if(G(n))return n;if(z(n)){if('"'==n.charAt(0)&&'"'==n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),Mi.test(n))return new Date(n);if(e.lastIndex=0,i=e.exec(n))return i.shift(),a=r?{yyyy:r.getFullYear(),MM:r.getMonth()+1,dd:r.getDate(),HH:r.getHours(),mm:r.getMinutes(),ss:r.getSeconds(),sss:r.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},R(i,(function(e,n){n<t.length&&(a[t[n]]=+e)})),new Date(a.yyyy,a.MM-1,a.dd,a.HH,a.mm,a.ss||0,1e3*a.sss||0)}return NaN}}function Vi(e,t,r,i){return function(a,o,s,c,u,l,d){qi(a,o,s,c),Bi(0,o,s,c,u,l);var f,p,h,m=c&&c.$options&&c.$options.timezone;function v(e){return e&&!(e.getTime&&e.getTime()!=e.getTime())}function g(e){return V(e)&&!G(e)?r(e)||n:e}c.$$parserName=e,c.$parsers.push((function(e){if(c.$isEmpty(e))return null;if(t.test(e)){var i=r(e,f);return m&&(i=ke(i,m)),i}return n})),c.$formatters.push((function(e){if(e&&!G(e))throw va("datefmt","Expected `{0}` to be a date",e);return v(e)?((f=e)&&m&&(f=ke(f,m,!0)),d("date")(e,i,m)):(f=null,"")})),(V(s.min)||s.ngMin)&&(c.$validators.min=function(e){return!v(e)||U(p)||r(e)>=p},s.$observe("min",(function(e){p=g(e),c.$validate()}))),(V(s.max)||s.ngMax)&&(c.$validators.max=function(e){return!v(e)||U(h)||r(e)<=h},s.$observe("max",(function(e){h=g(e),c.$validate()})))}}function qi(e,t,r,i){var a=t[0];(i.$$hasNativeValidators=q(a.validity))&&i.$parsers.push((function(e){var r=t.prop(l)||{};return r.badInput&&!r.typeMismatch?n:e}))}function Hi(e,t,n,r,i){var a;if(V(r)){if(!(a=e(r)).constant)throw va("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,r);return a(t)}return i}var zi=["$browser","$sniffer","$filter","$parse",function(e,t,n,r){return{restrict:"E",require:["?ngModel"],link:{pre:function(i,a,o,s){s[0]&&(ji[d(o.type)]||ji.text)(i,a,o,s[0],t,e,n,r)}}}}],Ki=/^(true|false|\d+)$/,Gi=function(){return{restrict:"A",priority:100,compile:function(e,t){return Ki.test(t.ngValue)?function(e,t,n){n.$set("value",e.$eval(n.ngValue))}:function(e,t,n){e.$watch(n.ngValue,(function(e){n.$set("value",e)}))}}}},Wi=["$compile",function(e){return{restrict:"AC",compile:function(t){return e.$$addBindingClass(t),function(t,n,r){e.$$addBindingInfo(n,r.ngBind),n=n[0],t.$watch(r.ngBind,(function(e){n.textContent=U(e)?"":e}))}}}}],Ji=["$interpolate","$compile",function(e,t){return{compile:function(n){return t.$$addBindingClass(n),function(n,r,i){var a=e(r.attr(i.$attr.ngBindTemplate));t.$$addBindingInfo(r,a.expressions),r=r[0],i.$observe("ngBindTemplate",(function(e){r.textContent=U(e)?"":e}))}}}}],Yi=["$sce","$parse","$compile",function(e,t,n){return{restrict:"A",compile:function(r,i){var a=t(i.ngBindHtml),o=t(i.ngBindHtml,(function(e){return(e||"").toString()}));return n.$$addBindingClass(r),function(t,r,i){n.$$addBindingInfo(r,i.ngBindHtml),t.$watch(o,(function(){r.html(e.getTrustedHtml(a(t))||"")}))}}}}],Qi=N({restrict:"A",require:"ngModel",link:function(e,t,n,r){r.$viewChangeListeners.push((function(){e.$eval(n.ngChange)}))}});function Xi(e,t){return e="ngClass"+e,["$animate",function(n){return{restrict:"AC",link:function(a,o,s){var c;function u(e){var t=l(e,1);s.$addClass(t)}function l(e,t){var n=o.data("$classCounts")||Ve(),r=[];return R(e,(function(e){(t>0||n[e])&&(n[e]=(n[e]||0)+t,n[e]===+(t>0)&&r.push(e))})),o.data("$classCounts",n),r.join(" ")}function d(e){if(!0===t||a.$index%2===t){var s=i(e||[]);c?de(e,c)||function(e,t){var i=r(t,e),a=r(e,t);i=l(i,1),a=l(a,-1),i&&i.length&&n.addClass(o,i),a&&a.length&&n.removeClass(o,a)}(i(c),s):u(s)}c=le(e)}a.$watch(s[e],d,!0),s.$observe("class",(function(t){d(a.$eval(s[e]))})),"ngClass"!==e&&a.$watch("$index",(function(n,r){var o=1&n;if(o!==(1&r)){var c=i(a.$eval(s[e]));o===t?u(c):function(e){var t=l(e,-1);s.$removeClass(t)}(c)}}))}};function r(e,t){var n=[];e:for(var r=0;r<e.length;r++){for(var i=e[r],a=0;a<t.length;a++)if(i==t[a])continue e;n.push(i)}return n}function i(e){var t=[];return W(e)?(R(e,(function(e){t=t.concat(i(e))})),t):z(e)?e.split(" "):q(e)?(R(e,(function(e,n){e&&(t=t.concat(n.split(" ")))})),t):e}}]}var Zi=Xi("",!0),ea=Xi("Odd",0),ta=Xi("Even",1),na=bi({compile:function(e,t){t.$set("ngCloak",n),e.removeClass("ng-cloak")}}),ra=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],ia={},aa={blur:!0,focus:!0};R("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),(function(e){var t=sn("ng-"+e);ia[t]=["$parse","$rootScope",function(n,r){return{restrict:"A",compile:function(i,a){var o=n(a[t],null,!0);return function(t,n){n.on(e,(function(n){var i=function(){o(t,{$event:n})};aa[e]&&r.$$phase?t.$evalAsync(i):t.$apply(i)}))}}}}]}));var oa=["$animate",function(e){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,r,i,a,o){var s,c,u;n.$watch(i.ngIf,(function(n){n?c||o((function(n,a){c=a,n[n.length++]=t.createComment(" end ngIf: "+i.ngIf+" "),s={clone:n},e.enter(n,r.parent(),r)})):(u&&(u.remove(),u=null),c&&(c.$destroy(),c=null),s&&(u=Ue(s.clone),e.leave(u).then((function(){u=null})),s=null))}))}}}],sa=["$templateRequest","$anchorScroll","$animate",function(e,t,n){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:S.noop,compile:function(r,i){var a=i.ngInclude||i.src,o=i.onload||"",s=i.autoscroll;return function(r,i,c,u,l){var d,f,p,h=0,m=function(){f&&(f.remove(),f=null),d&&(d.$destroy(),d=null),p&&(n.leave(p).then((function(){f=null})),f=p,p=null)};r.$watch(a,(function(a){var c=function(){!V(s)||s&&!r.$eval(s)||t()},f=++h;a?(e(a,!0).then((function(e){if(!r.$$destroyed&&f===h){var t=r.$new();u.template=e;var s=l(t,(function(e){m(),n.enter(e,null,i).then(c)}));p=s,(d=t).$emit("$includeContentLoaded",a),r.$eval(o)}}),(function(){r.$$destroyed||f===h&&(m(),r.$emit("$includeContentError",a))})),r.$emit("$includeContentRequested",a)):(m(),u.template=null)}))}}}}],ca=["$compile",function(e){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,r,i,a){if(/SVG/.test(r[0].toString()))return r.empty(),void e(ct(a.template,t).childNodes)(n,(function(e){r.append(e)}),{futureParentElement:r});r.html(a.template),e(r.contents())(n)}}}],ua=bi({priority:450,compile:function(){return{pre:function(e,t,n){e.$eval(n.ngInit)}}}}),la=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(e,t,r,i){var a=t.attr(r.$attr.ngList)||", ",o="false"!==r.ngTrim,s=o?ie(a):a;i.$parsers.push((function(e){if(!U(e)){var t=[];return e&&R(e.split(s),(function(e){e&&t.push(o?ie(e):e)})),t}})),i.$formatters.push((function(e){return W(e)?e.join(a):n})),i.$isEmpty=function(e){return!e||!e.length}}}},da="ng-valid",fa="ng-invalid",pa="ng-pristine",ha="ng-dirty",ma="ng-pending",va=c("ngModel"),ga=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(e,t,r,i,a,o,s,c,u,l){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=n,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=n,this.$name=l(r.name||"",!1)(e),this.$$parentForm=ki;var d,f=a(r.ngModel),p=f.assign,h=f,m=p,v=null,g=this;this.$$setOptions=function(e){if(g.$options=e,e&&e.getterSetter){var t=a(r.ngModel+"()"),n=a(r.ngModel+"($$$p)");h=function(e){var n=f(e);return J(n)&&(n=t(e)),n},m=function(e,t){J(f(e))?n(e,{$$$p:g.$modelValue}):p(e,g.$modelValue)}}else if(!f.assign)throw va("nonassign","Expression '{0}' is non-assignable. Element: {1}",r.ngModel,xe(i))},this.$render=F,this.$isEmpty=function(e){return U(e)||""===e||null===e||e!=e};var y=0;_a({ctrl:this,$element:i,set:function(e,t){e[t]=!0},unset:function(e,t){delete e[t]},$animate:o}),this.$setPristine=function(){g.$dirty=!1,g.$pristine=!0,o.removeClass(i,ha),o.addClass(i,pa)},this.$setDirty=function(){g.$dirty=!0,g.$pristine=!1,o.removeClass(i,pa),o.addClass(i,ha),g.$$parentForm.$setDirty()},this.$setUntouched=function(){g.$touched=!1,g.$untouched=!0,o.setClass(i,"ng-untouched","ng-touched")},this.$setTouched=function(){g.$touched=!0,g.$untouched=!1,o.setClass(i,"ng-touched","ng-untouched")},this.$rollbackViewValue=function(){s.cancel(v),g.$viewValue=g.$$lastCommittedViewValue,g.$render()},this.$validate=function(){if(!K(g.$modelValue)||!isNaN(g.$modelValue)){var e=g.$$lastCommittedViewValue,t=g.$$rawModelValue,r=g.$valid,i=g.$modelValue,a=g.$options&&g.$options.allowInvalid;g.$$runValidators(t,e,(function(e){a||r===e||(g.$modelValue=e?t:n,g.$modelValue!==i&&g.$$writeModelToScope())}))}},this.$$runValidators=function(e,t,r){var i=++y;function a(e,t){i===y&&g.$setValidity(e,t)}function o(e){i===y&&r(e)}!function(){var e=g.$$parserName||"parse";return U(d)?(a(e,null),!0):(d||(R(g.$validators,(function(e,t){a(t,null)})),R(g.$asyncValidators,(function(e,t){a(t,null)}))),a(e,d),d)}()?o(!1):function(){var n=!0;return R(g.$validators,(function(r,i){var o=r(e,t);n=n&&o,a(i,o)})),!!n||(R(g.$asyncValidators,(function(e,t){a(t,null)})),!1)}()?function(){var r=[],i=!0;R(g.$asyncValidators,(function(o,s){var c=o(e,t);if(!te(c))throw va("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",c);a(s,n),r.push(c.then((function(){a(s,!0)}),(function(e){i=!1,a(s,!1)})))})),r.length?u.all(r).then((function(){o(i)}),F):o(!0)}():o(!1)},this.$commitViewValue=function(){var e=g.$viewValue;s.cancel(v),(g.$$lastCommittedViewValue!==e||""===e&&g.$$hasNativeValidators)&&(g.$$lastCommittedViewValue=e,g.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){var t=g.$$lastCommittedViewValue;if(d=!U(t)||n)for(var r=0;r<g.$parsers.length;r++)if(U(t=g.$parsers[r](t))){d=!1;break}K(g.$modelValue)&&isNaN(g.$modelValue)&&(g.$modelValue=h(e));var i=g.$modelValue,a=g.$options&&g.$options.allowInvalid;function o(){g.$modelValue!==i&&g.$$writeModelToScope()}g.$$rawModelValue=t,a&&(g.$modelValue=t,o()),g.$$runValidators(t,g.$$lastCommittedViewValue,(function(e){a||(g.$modelValue=e?t:n,o())}))},this.$$writeModelToScope=function(){m(e,g.$modelValue),R(g.$viewChangeListeners,(function(e){try{e()}catch(e){t(e)}}))},this.$setViewValue=function(e,t){g.$viewValue=e,g.$options&&!g.$options.updateOnDefault||g.$$debounceViewValueCommit(t)},this.$$debounceViewValueCommit=function(t){var n,r=0,i=g.$options;i&&V(i.debounce)&&(K(n=i.debounce)?r=n:K(n[t])?r=n[t]:K(n.default)&&(r=n.default)),s.cancel(v),r?v=s((function(){g.$commitViewValue()}),r):c.$$phase?g.$commitViewValue():e.$apply((function(){g.$commitViewValue()}))},e.$watch((function(){var t=h(e);if(t!==g.$modelValue&&(g.$modelValue==g.$modelValue||t==t)){g.$modelValue=g.$$rawModelValue=t,d=n;for(var r=g.$formatters,i=r.length,a=t;i--;)a=r[i](a);g.$viewValue!==a&&(g.$viewValue=g.$$lastCommittedViewValue=a,g.$render(),g.$$runValidators(t,a,F))}return t}))}],ya=["$rootScope",function(e){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:ga,priority:1,compile:function(t){return t.addClass(pa).addClass("ng-untouched").addClass(da),{pre:function(e,t,n,r){var i=r[0],a=r[1]||i.$$parentForm;i.$$setOptions(r[2]&&r[2].$options),a.$addControl(i),n.$observe("name",(function(e){i.$name!==e&&i.$$parentForm.$$renameControl(i,e)})),e.$on("$destroy",(function(){i.$$parentForm.$removeControl(i)}))},post:function(t,n,r,i){var a=i[0];a.$options&&a.$options.updateOn&&n.on(a.$options.updateOn,(function(e){a.$$debounceViewValueCommit(e&&e.type)})),n.on("blur",(function(n){a.$touched||(e.$$phase?t.$evalAsync(a.$setTouched):t.$apply(a.$setTouched))}))}}}}}],ba=/(\s+|^)default(\s+|$)/,wa=function(){return{restrict:"A",controller:["$scope","$attrs",function(e,t){var n=this;this.$options=ue(e.$eval(t.ngModelOptions)),V(this.$options.updateOn)?(this.$options.updateOnDefault=!1,this.$options.updateOn=ie(this.$options.updateOn.replace(ba,(function(){return n.$options.updateOnDefault=!0," "})))):this.$options.updateOnDefault=!0}]}};function _a(e){var t=e.ctrl,r=e.$element,i={},a=e.set,o=e.unset,s=e.$animate;function c(e,t){t&&!i[e]?(s.addClass(r,e),i[e]=!0):!t&&i[e]&&(s.removeClass(r,e),i[e]=!1)}function u(e,t){e=e?"-"+Ae(e,"-"):"",c(da+e,!0===t),c(fa+e,!1===t)}i[fa]=!(i[da]=r.hasClass(da)),t.$setValidity=function(e,r,i){var s;U(r)?function(e,n,r){t[e]||(t[e]={}),a(t[e],n,r)}("$pending",e,i):function(e,r,i){t[e]&&o(t[e],r,i),ka(t[e])&&(t[e]=n)}("$pending",e,i),ee(r)?r?(o(t.$error,e,i),a(t.$$success,e,i)):(a(t.$error,e,i),o(t.$$success,e,i)):(o(t.$error,e,i),o(t.$$success,e,i)),t.$pending?(c(ma,!0),t.$valid=t.$invalid=n,u("",null)):(c(ma,!1),t.$valid=ka(t.$error),t.$invalid=!t.$valid,u("",t.$valid)),u(e,s=t.$pending&&t.$pending[e]?n:!t.$error[e]&&(!!t.$$success[e]||null)),t.$$parentForm.$setValidity(e,s,t)}}function ka(e){if(e)for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}var xa=bi({terminal:!0,priority:1e3}),Sa=c("ngOptions"),Ca=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,$a=["$compile","$parse",function(e,n){var r=t.createElement("option"),i=t.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","?ngModel"],link:{pre:function(e,t,n,r){r[0].registerOption=F},post:function(t,o,s,c){var u=c[1];if(u){for(var l,f=c[0],p=s.multiple,h=0,v=o.children(),g=v.length;h<g;h++)if(""===v[h].value){l=v.eq(h);break}var y,b=!!l,w=m(r.cloneNode(!1));w.val("?");var _=function(e,t,r){var i=e.match(Ca);if(!i)throw Sa("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",e,xe(t));var a=i[5]||i[7],o=i[6],s=/ as /.test(i[0])&&i[1],c=i[9],u=n(i[2]?i[1]:a),l=s&&n(s)||u,d=c&&n(c),f=c?function(e,t){return d(r,t)}:function(e){return At(e)},p=function(e,t){return f(e,b(e,t))},h=n(i[2]||i[1]),m=n(i[3]||""),v=n(i[4]||""),g=n(i[8]),y={},b=o?function(e,t){return y[o]=t,y[a]=e,y}:function(e){return y[a]=e,y};function w(e,t,n,r,i){this.selectValue=e,this.viewValue=t,this.label=n,this.group=r,this.disabled=i}function _(e){var t;if(!o&&$(e))t=e;else for(var n in t=[],e)e.hasOwnProperty(n)&&"$"!==n.charAt(0)&&t.push(n);return t}return{trackBy:c,getTrackByValue:p,getWatchables:n(g,(function(e){for(var t=[],n=_(e=e||[]),a=n.length,o=0;o<a;o++){var s=e===n?o:n[o],c=(e[s],b(e[s],s)),u=f(e[s],c);if(t.push(u),i[2]||i[1]){var l=h(r,c);t.push(l)}if(i[4]){var d=v(r,c);t.push(d)}}return t})),getOptions:function(){for(var e=[],t={},n=g(r)||[],i=_(n),a=i.length,o=0;o<a;o++){var s=n===i?o:i[o],u=n[s],d=b(u,s),y=l(r,d),k=f(y,d),x=new w(k,y,h(r,d),m(r,d),v(r,d));e.push(x),t[k]=x}return{items:e,selectValueMap:t,getOptionFromViewValue:function(e){return t[p(e)]},getViewValueFromOption:function(e){return c?S.copy(e.viewValue):e.viewValue}}}}}(s.ngOptions,o,t),k=function(){b||l.remove()},x=function(){w.remove()};p?(u.$isEmpty=function(e){return!e||0===e.length},f.writeValue=function(e){y.items.forEach((function(e){e.element.selected=!1})),e&&e.forEach((function(e){var t=y.getOptionFromViewValue(e);t&&!t.disabled&&(t.element.selected=!0)}))},f.readValue=function(){var e=[];return R(o.val()||[],(function(t){var n=y.selectValueMap[t];n&&!n.disabled&&e.push(y.getViewValueFromOption(n))})),e},_.trackBy&&t.$watchCollection((function(){if(W(u.$viewValue))return u.$viewValue.map((function(e){return _.getTrackByValue(e)}))}),(function(){u.$render()}))):(f.writeValue=function(e){var t=y.getOptionFromViewValue(e);t&&!t.disabled?(o[0].value!==t.selectValue&&(x(),k(),o[0].value=t.selectValue,t.element.selected=!0),t.element.setAttribute("selected","selected")):null===e||b?(x(),b||o.prepend(l),o.val(""),l.prop("selected",!0),l.attr("selected",!0)):(k(),o.prepend(w),o.val("?"),w.prop("selected",!0),w.attr("selected",!0))},f.readValue=function(){var e=y.selectValueMap[o.val()];return e&&!e.disabled?(k(),x(),y.getViewValueFromOption(e)):null},_.trackBy&&t.$watch((function(){return _.getTrackByValue(u.$viewValue)}),(function(){u.$render()}))),b?(l.remove(),e(l)(t),l.removeClass("ng-scope")):l=m(r.cloneNode(!1)),T(),t.$watchCollection(_.getWatchables,T)}function C(e,t){e.element=t,t.disabled=e.disabled,e.label!==t.label&&(t.label=e.label,t.textContent=e.label),e.value!==t.value&&(t.value=e.selectValue)}function M(e,t,n,r){var i;return t&&d(t.nodeName)===n?i=t:(i=r.cloneNode(!1),t?e.insertBefore(i,t):e.appendChild(i)),i}function P(e){for(var t;e;)t=e.nextSibling,Ct(e),e=t}function T(){var e=y&&f.readValue();y=_.getOptions();var t={},n=o[0].firstChild;if(b&&o.prepend(l),n=function(e){var t=l&&l[0],n=w&&w[0];if(t||n)for(;e&&(e===t||e===n||8===e.nodeType||"option"===se(e)&&""===e.value);)e=e.nextSibling;return e}(n),y.items.forEach((function(e){var a,s,c;e.group?((a=t[e.group])||(s=M(o[0],n,"optgroup",i),n=s.nextSibling,s.label=e.group,a=t[e.group]={groupElement:s,currentOptionElement:s.firstChild}),C(e,c=M(a.groupElement,a.currentOptionElement,"option",r)),a.currentOptionElement=c.nextSibling):(C(e,c=M(o[0],n,"option",r)),n=c.nextSibling)})),(0,a.default)(t).forEach((function(e){P(t[e].currentOptionElement)})),P(n),u.$render(),!u.$isEmpty(e)){var s=f.readValue();(_.trackBy||p?de(e,s):e===s)||(u.$setViewValue(s),u.$render())}}}}}}],Ra=["$locale","$interpolate","$log",function(e,t,n){var r=/{}/g,i=/^when(Minus)?(.+)$/;return{link:function(a,o,s){var c,u=s.count,l=s.$attr.when&&o.attr(s.$attr.when),f=s.offset||0,p=a.$eval(l)||{},h={},m=t.startSymbol(),v=t.endSymbol(),g=m+u+"-"+f+v,y=S.noop;function b(e){o.text(e||"")}R(s,(function(e,t){var n=i.exec(t);if(n){var r=(n[1]?"-":"")+d(n[2]);p[r]=o.attr(s.$attr[t])}})),R(p,(function(e,n){h[n]=t(e.replace(r,g))})),a.$watch(u,(function(t){var r=parseFloat(t),i=isNaN(r);if(i||r in p||(r=e.pluralCat(r-f)),r!==c&&!(i&&K(c)&&isNaN(c))){y();var o=h[r];U(o)?(null!=t&&n.debug("ngPluralize: no rule defined for '"+r+"' in "+l),y=F,b()):y=a.$watch(o,b),c=r}}))}}}],Ma=["$parse","$animate",function(e,r){var i=c("ngRepeat"),a=function(e,t,n,r,i,a,o){e[n]=r,i&&(e[i]=a),e.$index=t,e.$first=0===t,e.$last=t===o-1,e.$middle=!(e.$first||e.$last),e.$odd=!(e.$even=0==(1&t))},o=function(e){return e.clone[0]},s=function(e){return e.clone[e.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(c,u){var l=u.ngRepeat,d=t.createComment(" end ngRepeat: "+l+" "),p=l.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!p)throw i("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",l);var h=p[1],m=p[2],v=p[3],g=p[4];if(!(p=h.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/)))throw i("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",h);var y,b,w,_,k=p[3]||p[1],x=p[2];if(v&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(v)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(v)))throw i("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",v);var S={$id:At};return g?y=e(g):(w=function(e,t){return At(t)},_=function(e){return e}),function(e,t,c,u,p){y&&(b=function(t,n,r){return x&&(S[x]=t),S[k]=n,S.$index=r,y(e,S)});var h=Ve();e.$watchCollection(m,(function(c){var u,m,g,y,S,C,M,P,T,E,I,D,A=t[0],O=Ve();if(v&&(e[v]=c),$(c))T=c,P=b||w;else for(var L in P=b||_,T=[],c)f.call(c,L)&&"$"!==L.charAt(0)&&T.push(L);for(y=T.length,I=new Array(y),u=0;u<y;u++)if(S=c===T?u:T[u],C=c[S],M=P(S,C,u),h[M])E=h[M],delete h[M],O[M]=E,I[u]=E;else{if(O[M])throw R(I,(function(e){e&&e.scope&&(h[e.id]=e)})),i("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",l,M,C);I[u]={id:M,scope:n,clone:n},O[M]=!0}for(var F in h){if(D=Ue((E=h[F]).clone),r.leave(D),D[0].parentNode)for(u=0,m=D.length;u<m;u++)D[u].$$NG_REMOVED=!0;E.scope.$destroy()}for(u=0;u<y;u++)if(S=c===T?u:T[u],C=c[S],(E=I[u]).scope){g=A;do{g=g.nextSibling}while(g&&g.$$NG_REMOVED);o(E)!=g&&r.move(Ue(E.clone),null,A),A=s(E),a(E.scope,u,k,C,x,S,y)}else p((function(e,t){E.scope=t;var n=d.cloneNode(!1);e[e.length++]=n,r.enter(e,null,A),A=n,E.clone=e,O[E.id]=E,a(E.scope,u,k,C,x,S,y)}));h=O}))}}}}],Pa=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,r){t.$watch(r.ngShow,(function(t){e[t?"removeClass":"addClass"](n,"ng-hide",{tempClasses:"ng-hide-animate"})}))}}}],Ta=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,r){t.$watch(r.ngHide,(function(t){e[t?"addClass":"removeClass"](n,"ng-hide",{tempClasses:"ng-hide-animate"})}))}}}],Ea=bi((function(e,t,n){e.$watch(n.ngStyle,(function(e,n){n&&e!==n&&R(n,(function(e,n){t.css(n,"")})),e&&t.css(e)}),!0)})),Ia=["$animate",function(e){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,r,i,a){var o=i.ngSwitch||i.on,s=[],c=[],u=[],l=[],d=function(e,t){return function(){e.splice(t,1)}};n.$watch(o,(function(n){var r,i;for(r=0,i=u.length;r<i;++r)e.cancel(u[r]);for(u.length=0,r=0,i=l.length;r<i;++r){var o=Ue(c[r].clone);l[r].$destroy(),(u[r]=e.leave(o)).then(d(u,r))}c.length=0,l.length=0,(s=a.cases["!"+n]||a.cases["?"])&&R(s,(function(n){n.transclude((function(r,i){l.push(i);var a=n.element;r[r.length++]=t.createComment(" end ngSwitchWhen: ");var o={clone:r};c.push(o),e.enter(r,a.parent(),a)}))}))}))}}}],Da=bi({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,r,i){r.cases["!"+n.ngSwitchWhen]=r.cases["!"+n.ngSwitchWhen]||[],r.cases["!"+n.ngSwitchWhen].push({transclude:i,element:t})}}),Aa=bi({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,r,i){r.cases["?"]=r.cases["?"]||[],r.cases["?"].push({transclude:i,element:t})}}),Oa=bi({restrict:"EAC",link:function(e,t,n,r,i){if(!i)throw c("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",xe(t));i((function(e){t.empty(),t.append(e)}))}}),La=["$templateCache",function(e){return{restrict:"E",terminal:!0,compile:function(t,n){if("text/ng-template"==n.type){var r=n.id,i=t[0].text;e.put(r,i)}}}}],Fa={$setViewValue:F,$render:F},ja=["$element","$scope","$attrs",function(e,r,i){var a=this,o=new Ot;a.ngModelCtrl=Fa,a.unknownOption=m(t.createElement("option")),a.renderUnknownOption=function(t){var n="? "+At(t)+" ?";a.unknownOption.val(n),e.prepend(a.unknownOption),e.val(n)},r.$on("$destroy",(function(){a.renderUnknownOption=F})),a.removeUnknownOption=function(){a.unknownOption.parent()&&a.unknownOption.remove()},a.readValue=function(){return a.removeUnknownOption(),e.val()},a.writeValue=function(t){a.hasOption(t)?(a.removeUnknownOption(),e.val(t),""===t&&a.emptyOption.prop("selected",!0)):null==t&&a.emptyOption?(a.removeUnknownOption(),e.val("")):a.renderUnknownOption(t)},a.addOption=function(e,t){if(8!==t[0].nodeType){Ne(e,'"option value"'),""===e&&(a.emptyOption=t);var n=o.get(e)||0;o.put(e,n+1),a.ngModelCtrl.$render(),function(e){e[0].hasAttribute("selected")&&(e[0].selected=!0)}(t)}},a.removeOption=function(e){var t=o.get(e);t&&(1===t?(o.remove(e),""===e&&(a.emptyOption=n)):o.put(e,t-1))},a.hasOption=function(e){return!!o.get(e)},a.registerOption=function(e,t,n,r,i){var o;r?n.$observe("value",(function(e){V(o)&&a.removeOption(o),o=e,a.addOption(e,t)})):i?e.$watch(i,(function(e,r){n.$set("value",e),r!==e&&a.removeOption(r),a.addOption(e,t)})):a.addOption(n.value,t),t.on("$destroy",(function(){a.removeOption(n.value),a.ngModelCtrl.$render()}))}}],Na=function(){return{restrict:"E",require:["select","?ngModel"],controller:ja,priority:1,link:{pre:function(e,t,n,r){var i=r[1];if(i){var a=r[0];if(a.ngModelCtrl=i,t.on("change",(function(){e.$apply((function(){i.$setViewValue(a.readValue())}))})),n.multiple){a.readValue=function(){var e=[];return R(t.find("option"),(function(t){t.selected&&e.push(t.value)})),e},a.writeValue=function(e){var n=new Ot(e);R(t.find("option"),(function(e){e.selected=V(n.get(e.value))}))};var o,s=NaN;e.$watch((function(){s!==i.$viewValue||de(o,i.$viewValue)||(o=le(i.$viewValue),i.$render()),s=i.$viewValue})),i.$isEmpty=function(e){return!e||0===e.length}}}},post:function(e,t,n,r){var i=r[1];if(i){var a=r[0];i.$render=function(){a.writeValue(i.$viewValue)}}}}}},Ba=["$interpolate",function(e){return{restrict:"E",priority:100,compile:function(t,n){if(V(n.value))var r=e(n.value,!0);else{var i=e(t.text(),!0);i||n.$set("value",t.text())}return function(e,t,n){var a=t.parent(),o=a.data("$selectController")||a.parent().data("$selectController");o&&o.registerOption(e,t,n,r,i)}}}}],Ua=N({restrict:"E",terminal:!1}),Va=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){r&&(n.required=!0,r.$validators.required=function(e,t){return!n.required||!r.$isEmpty(t)},n.$observe("required",(function(){r.$validate()})))}}},qa=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,r,i){if(i){var a,o=r.ngPattern||r.pattern;r.$observe("pattern",(function(e){if(z(e)&&e.length>0&&(e=new RegExp("^"+e+"$")),e&&!e.test)throw c("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",o,e,xe(t));a=e||n,i.$validate()})),i.$validators.pattern=function(e,t){return i.$isEmpty(t)||U(a)||a.test(t)}}}}},Ha=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){if(r){var i=-1;n.$observe("maxlength",(function(e){var t=O(e);i=isNaN(t)?-1:t,r.$validate()})),r.$validators.maxlength=function(e,t){return i<0||r.$isEmpty(t)||t.length<=i}}}}},za=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){if(r){var i=0;n.$observe("minlength",(function(e){i=O(e)||0,r.$validate()})),r.$validators.minlength=function(e,t){return r.$isEmpty(t)||t.length>=i}}}}};e.angular.bootstrap?e.console&&console.log("WARNING: Tried to load angular more than once."):(function(){var t;if(!Le){var r=pe();(v=U(r)?e.jQuery:r?e[r]:n)&&v.fn.on?(m=v,D(v.fn,{scope:$t.scope,isolateScope:$t.isolateScope,controller:$t.controller,injector:$t.injector,inheritedData:$t.inheritedData}),t=v.cleanData,v.cleanData=function(e){var n;if(Oe)Oe=!1;else for(var r,i=0;null!=(r=e[i]);i++)(n=v._data(r,"events"))&&n.$destroy&&v(r).triggerHandler("$destroy");t(e)}):m=dt,S.element=m,Le=!0}}(),function(t){D(t,{bootstrap:Te,copy:ue,extend:D,merge:A,equals:de,element:m,forEach:R,injector:Vt,noop:F,bind:ve,toJson:ye,fromJson:be,identity:j,isUndefined:U,isDefined:V,isString:z,isFunction:J,isObject:q,isNumber:K,isElement:oe,isArray:W,version:ze,isDate:G,lowercase:d,uppercase:p,callbacks:{counter:0},getTestability:Ie,$$minErr:c,$$csp:fe,reloadWithDebugInfo:Ee}),(g=function(e){var t=c("$injector"),n=c("ng");function r(e,t,n){return e[t]||(e[t]=n())}var i=r(e,"angular",Object);return i.$$minErr=i.$$minErr||c,r(i,"module",(function(){var e={};return function(i,a,o){return function(e,t){if("hasOwnProperty"===e)throw n("badname","hasOwnProperty is not a valid {0} name","module")}(i),a&&e.hasOwnProperty(i)&&(e[i]=null),r(e,i,(function(){if(!a)throw t("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",i);var e=[],n=[],r=[],s=u("$injector","invoke","push",n),c={_invokeQueue:e,_configBlocks:n,_runBlocks:r,requires:a,name:i,provider:l("$provide","provider"),factory:l("$provide","factory"),service:l("$provide","service"),value:u("$provide","value"),constant:u("$provide","constant","unshift"),decorator:l("$provide","decorator"),animation:l("$animateProvider","register"),filter:l("$filterProvider","register"),controller:l("$controllerProvider","register"),directive:l("$compileProvider","directive"),config:s,run:function(e){return r.push(e),this}};return o&&s(o),c;function u(t,n,r,i){return i||(i=e),function(){return i[r||"push"]([t,n,arguments]),c}}function l(t,n){return function(r,a){return a&&J(a)&&(a.$$moduleName=i),e.push([t,n,arguments]),c}}}))}}))}(e))("ng",["ngLocale"],["$provide",function(e){e.provider({$$sanitizeUri:Ar}),e.provider("$compile",an).directive({a:wi,input:zi,textarea:zi,form:$i,script:La,select:Na,style:Ua,option:Ba,ngBind:Wi,ngBindHtml:Yi,ngBindTemplate:Ji,ngClass:Zi,ngClassEven:ta,ngClassOdd:ea,ngCloak:na,ngController:ra,ngForm:Ri,ngHide:Ta,ngIf:oa,ngInclude:sa,ngInit:ua,ngNonBindable:xa,ngPluralize:Ra,ngRepeat:Ma,ngShow:Pa,ngStyle:Ea,ngSwitch:Ia,ngSwitchWhen:Da,ngSwitchDefault:Aa,ngOptions:$a,ngTransclude:Oa,ngModel:ya,ngList:la,ngChange:Qi,pattern:qa,ngPattern:qa,required:Va,ngRequired:Va,minlength:za,ngMinlength:za,maxlength:Ha,ngMaxlength:Ha,ngValue:Gi,ngModelOptions:wa}).directive({ngInclude:ca}).directive(_i).directive(ia),e.provider({$anchorScroll:qt,$animate:Jt,$animateCss:Xt,$$animateJs:Gt,$$animateQueue:Wt,$$AnimateRunner:Qt,$$animateAsyncRun:Yt,$browser:en,$cacheFactory:tn,$controller:fn,$document:pn,$exceptionHandler:hn,$filter:Qr,$$forceReflow:mn,$interpolate:On,$interval:Ln,$http:En,$httpParamSerializer:Sn,$httpParamSerializerJQLike:Cn,$httpBackend:Dn,$xhrFactory:In,$location:Xn,$log:Zn,$parse:Mr,$rootScope:Dr,$q:Pr,$$q:Tr,$sce:Nr,$sceDelegate:jr,$sniffer:Br,$templateCache:nn,$templateRequest:Ur,$$testability:Vr,$timeout:qr,$window:Wr,$$rAF:Ir,$$jqLite:Dt,$$HashMap:Lt,$$cookieReader:Yr})}])}(S),S.module("ngLocale",[],["$provide",function(e){e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-Â¤",negSuf:"",posPre:"Â¤",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(e,t){var r=0|e,i=function(e,t){var r=t;n===r&&(r=Math.min(function(e){var t=(e+="").indexOf(".");return-1==t?0:e.length-t-1}(e),3));var i=Math.pow(10,r);return{v:r,f:(e*i|0)%i}}(e,t);return 1==r&&0==i.v?"one":"other"}})}]),m(t).ready((function(){!function(e,t){var n,r,i={};R(Pe,(function(t){var i=t+"app";!n&&e.hasAttribute&&e.hasAttribute(i)&&(n=e,r=e.getAttribute(i))})),R(Pe,(function(t){var i,a=t+"app";!n&&(i=e.querySelector("["+a.replace(":","\\:")+"]"))&&(n=i,r=i.getAttribute(a))})),n&&(i.strictDi=null!==function(e,t){var n,r,i=Pe.length;for(r=0;r<i;++r)if(n=Pe[r]+"strict-di",z(n=e.getAttribute(n)))return n;return null}(n),t(n,r?[r]:[],i))}(t,Te)})))}(window,document),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>')},function(e,t,n){"use strict";!function(e,t,n){function r(e){var t,n={};for(e=e.split(","),t=0;t<e.length;t++)n[e[t]]=!0;return n}function i(e){if(!e)return"";var t=R.exec(e);e=t[1];var n=t[3];return(t=t[2])&&($.innerHTML=t.replace(/</g,"&lt;"),t="textContent"in $?$.textContent:$.innerText),e+t+n}function a(e){return e.replace(/&/g,"&amp;").replace(v,(function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+((e=e.charCodeAt(1))-56320)+65536)+";"})).replace(g,(function(e){return"&#"+e.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function o(e,n){var r=!1,i=t.bind(e,e.push);return{start:function(e,o,s){e=t.lowercase(e),!r&&k[e]&&(r=e),r||!0!==x[e]||(i("<"),i(e),t.forEach(o,(function(r,o){var s=t.lowercase(o),c="img"===e&&"src"===s||"background"===s;!0!==C[s]||!0===S[s]&&!n(r,c)||(i(" "),i(o),i('="'),i(a(r)),i('"'))})),i(s?"/>":">"))},end:function(e){e=t.lowercase(e),r||!0!==x[e]||(i("</"),i(e),i(">")),e==r&&(r=!1)},chars:function(e){r||i(a(e))}}}var s=t.$$minErr("$sanitize"),c=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,u=/^<\/\s*([\w:-]+)[^>]*>/,l=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,d=/^</,f=/^<\//,p=/\x3c!--(.*?)--\x3e/g,h=/<!DOCTYPE([^>]*?)>/i,m=/<!\[CDATA\[(.*?)]]\x3e/g,v=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,g=/([^\#-~| |!])/g,y=r("area,br,col,hr,img,wbr");e=r("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),n=r("rp,rt");var b=t.extend({},n,e),w=t.extend({},e,r("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),_=t.extend({},n,r("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var"));e=r("animate,animateColor,animateMotion,animateTransform,circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,set,stop,svg,switch,text,title,tspan,use");var k=r("script,style"),x=t.extend({},y,w,_,b,e),S=r("background,cite,href,longdesc,src,usemap,xlink:href");e=r("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width"),n=r("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,attributeName,attributeType,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan");var C=t.extend({},S,n,e),$=document.createElement("pre"),R=/^(\s*)([\s\S]*?)(\s*)$/;t.module("ngSanitize",[]).provider("$sanitize",(function(){this.$get=["$$sanitizeUri",function(e){return function(n){var r=[];return function(e,n){function r(e,r,o,s){if(r=t.lowercase(r),w[r])for(;x.last()&&_[x.last()];)a(0,x.last());b[r]&&x.last()==r&&a(0,r),(s=y[r]||!!s)||x.push(r);var c={};o.replace(l,(function(e,t,n,r,a){c[t]=i(n||r||a||"")})),n.start&&n.start(r,c,s)}function a(e,r){var i,a=0;if(r=t.lowercase(r))for(a=x.length-1;0<=a&&x[a]!=r;a--);if(0<=a){for(i=x.length-1;i>=a;i--)n.end&&n.end(x[i]);x.length=a}}"string"!=typeof e&&(e=null==e?"":""+e);var o,v,g,x=[],S=e;for(x.last=function(){return x[x.length-1]};e;){if(g="",v=!0,x.last()&&k[x.last()]?(e=e.replace(new RegExp("(.*)<\\s*\\/\\s*"+x.last()+"[^>]*>","i"),(function(e,t){return t=t.replace(p,"$1").replace(m,"$1"),n.chars&&n.chars(i(t)),""})),a(0,x.last())):(0===e.indexOf("\x3c!--")?0<=(o=e.indexOf("--",4))&&e.lastIndexOf("--\x3e",o)===o&&(n.comment&&n.comment(e.substring(4,o)),e=e.substring(o+3),v=!1):h.test(e)?(o=e.match(h))&&(e=e.replace(o[0],""),v=!1):f.test(e)?(o=e.match(u))&&(e=e.substring(o[0].length),o[0].replace(u,a),v=!1):d.test(e)&&((o=e.match(c))?(o[4]&&(e=e.substring(o[0].length),o[0].replace(c,r)),v=!1):(g+="<",e=e.substring(1))),v&&(g+=0>(o=e.indexOf("<"))?e:e.substring(0,o),e=0>o?"":e.substring(o),n.chars&&n.chars(i(g)))),e==S)throw s("badparse",e);S=e}a()}(n,o(r,(function(t,n){return!/^unsafe/.test(e(t,n))}))),r.join("")}}]})),t.module("ngSanitize").filter("linky",["$sanitize",function(e){var n=/((ftp|https?):\/\/|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"]/,r=/^mailto:/;return function(i,a){function s(e){e&&p.push(function(e){var n=[];return o(n,t.noop).chars(e),n.join("")}(e))}function c(e,n){p.push("<a "),t.isDefined(a)&&(p.push('target="'),p.push(a),p.push('" ')),p.push('href="'),p.push(e),p.push('">'),s(n),p.push("</a>")}if(!i)return i;for(var u,l,d,f=i,p=[];u=f.match(n);)l=u[0],u[2]==u[3]&&(l="mailto:"+l),d=u.index,s(f.substr(0,d)),c(l,u[0].replace(r,"")),f=f.substring(d+u[0].length);return s(f),e(p.join(""))}}])}(window,window.angular)},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e:{default:e}}(n(27)),i=n(85);angular.module("myApp.init",["utilsService","loginInfo"]).controller("initController",["$scope","CustomLog","accountInfo","locals","invite","connect","$timeout",function(e,t,n,a,o,s,c){if(window.meetingSDK=ButelRTCSDK.CreateInstance(),e.getwayIP="brtc.butel.com",e.port="3000",e.appKey="616727c94be34418bc3951f35cf470cc",e.auth="https://brtc.butel.com:31001/BaikuUserCenterV2HongyunHuiyi",e.meeting="https://brtc.butel.com:31001/MeetingManageHongyunHuiyi",a.get("meetingSDKConfig")){var u=JSON.parse(a.get("meetingSDKConfig"));e.appKey=u.appKey,e.auth=u.auth,e.meeting=u.meeting,e.getwayIP=u.gw,e.port=u.gwListenPort}e.setResult="",e.setConfig=function(){meetingSDK.SetConfig({appKey:e.appKey,auth:e.auth,meeting:e.meeting,gw:e.getwayIP,gwListenPort:e.port}),e.setResult="è®¾ç½®éç½®æå",a.set("meetingSDKConfig",(0,r.default)({appKey:e.appKey,auth:e.auth,meeting:e.meeting,gw:e.getwayIP,gwListenPort:e.port}))},e.userName="",e.password="",e.result="æªåå§å",a.get("userName")&&(e.userName=a.get("userName")),a.get("password")&&(e.password=a.get("password")),e.init=function(){window.meetingSDK=ButelRTCSDK.CreateInstance(),e.setConfig(),meetingSDK.Init(e.userName,i(e.password),(function(){console.log("åå§åwebrtc sdkæå"),e.result="åå§åæå",c((function(){}),0)}),(function(t){console.log("åå§åwebrtc sdkå¤±è´¥,code:"+t.code),e.result="åå§åå¤±è´¥",c((function(){}),0)})),a.set("userName",e.userName),a.set("password",e.password),meetingSDK.on("onUserOpenShare",(function(e){console.log("onUserOpenShare",e)})),meetingSDK.on("onUserCloseShare",(function(e){console.log("onUserCloseShare",e)})),meetingSDK.on("onHostControl",(function(e){console.log("onHostControl",e)})),meetingSDK.on("onMeetingRestore",(function(e){console.log("onMeetingRestore",e)})),meetingSDK.on("onHostTransfer",(function(e){console.log("onHostTransfer",e)})),meetingSDK.on("onHostTransfer",(function(e){console.log("onHostTransfer",e)})),meetingSDK.on("onRecvUIMsg",(function(e){console.log("onRecvUIMsg",e)})),meetingSDK.on("onRemoteSpeakerForMaxVol",(function(e){console.log("onRemoteSpeakerForMaxVol",e)}))},e.release=function(){console.log("Release"),meetingSDK.Release(),e.result="æªåå§å",c((function(){}),0)}}])},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e:{default:e}}(n(27)),i=n(85);angular.module("myApp.meetingRoom",["ngSanitize"]).controller("meetingRoomController",["accountInfo","$location","$routeParams","$scope","$sce","CustomLog","connect","$timeout","locals",function(e,t,n,a,o,s,c,u,l){if(window.meetingSDK=ButelRTCSDK.CreateInstance(),a.meetingSDKVersion=ButelRTCSDK.version,a.getwayIP="brtc.butel.com",a.port="3000",a.appKey="616727c94be34418bc3951f35cf470cc",a.auth="https://brtc.butel.com:31001/BaikuUserCenterV2HongyunHuiyi",a.meeting="https://brtc.butel.com:31001/MeetingManageHongyunHuiyi",l.get("meetingSDKConfig")){var d=JSON.parse(l.get("meetingSDKConfig"));a.appKey=d.appKey,a.auth=d.auth,a.meeting=d.meeting,a.getwayIP=d.gw,a.port=d.gwListenPort}function f(e){a.toastMsg=e+"\n"+a.toastMsg,u((function(){}),0)}function p(e){1===e.mode?a.meetingModeName="èªç±æ¨¡å¼":a.meetingModeName="ä¸»ææ¨¡å¼",a.hostId=e.hostId+"/"+e.hostName,a.speakerList=e.speakerList,a.speakerList&&0!=a.speakerList.length&&a.speakerList.forEach((function(e,t){var n=document.getElementsByClassName("item_speak")[t],r=document.getElementsByClassName("item_speak_userid")[t];r.getElementsByClassName("nube")[0].innerHTML=e.userid,1===e.audiostate?(r.getElementsByClassName("lookMic_dis")[0].style.display="none",r.getElementsByClassName("lookMic")[0].style.display="block"):(r.getElementsByClassName("lookMic_dis")[0].style.display="block",r.getElementsByClassName("lookMic")[0].style.display="none"),1===e.videostate?(r.getElementsByClassName("lookCamera_dis")[0].style.display="none",r.getElementsByClassName("lookCamera")[0].style.display="block"):(r.getElementsByClassName("lookCamera_dis")[0].style.display="block",r.getElementsByClassName("lookCamera")[0].style.display="none"),meetingSDK.StartRemoteVideo(e.userid,n)})),u((function(){}),0)}function h(){meetingSDK.removeAllListeners(),meetingSDK.on("onStartSpeak",(function(e){console.log("onStartSpeak",e);var t=document.getElementById("local_video");meetingSDK.StartLocalPreview(t),a.local_device_state.isSpeak=!0,a.local_device_state.camera=1,a.local_device_state.mic=1,u((function(){}),0)})),meetingSDK.on("onStopSpeak",(function(e){console.log("onStopSpeak",e),meetingSDK.StopLocalPreview(),a.local_device_state.isSpeak=!1,a.local_device_state.camera=0,a.local_device_state.mic=0,u((function(){}),0)})),meetingSDK.on("onUserStartSpeak",(function(e){console.log("onUserStartSpeak",e);for(var t=document.getElementsByClassName("item_speak_userid"),n=null,r=document.getElementsByClassName("item_speak"),i=0;i<r.length;i++)if(!r[i].innerHTML){n=r[i],t[i].getElementsByClassName("nube")[0].innerHTML=e.userId;break}a.GetAllUsers(),e.userId&&meetingSDK.StartRemoteVideo(e.userId,n),u((function(){}),0)})),meetingSDK.on("onUserStopSpeak",(function(e){console.log("onUserStopSpeak",e);for(var t=document.getElementsByClassName("item_speak_userid"),n=0;n<t.length;n++)if(t[n].getElementsByClassName("nube")[0].innerHTML===e.userId){t[n].getElementsByClassName("nube")[0].innerHTML="",t[n].getElementsByClassName("lookCamera")[0].style.display="none",t[n].getElementsByClassName("lookCamera_dis")[0].style.display="none",t[n].getElementsByClassName("lookMic")[0].style.display="none",t[n].getElementsByClassName("lookMic_dis")[0].style.display="none";break}a.GetAllUsers(),e.userId&&meetingSDK.StopRemoteVideo(e.userId),u((function(){}),0)})),meetingSDK.on("onRaiseHand",(function(e){console.log("onRaiseHand",e),f("æ¶å°ç¨æ·ä¸¾æéç¥"+e.userId)})),meetingSDK.on("onMeetingEnd",(function(e){console.log("onMeetingEnd",e),f("ä¼è®®ç»æ"+e);for(var t=document.getElementsByClassName("item_speak_userid"),n=0;n<t.length;n++)t[n].getElementsByClassName("nube")[0].innerHTML="",t[n].getElementsByClassName("lookCamera")[0].style.display="none",t[n].getElementsByClassName("lookCamera_dis")[0].style.display="none",t[n].getElementsByClassName("lookMic")[0].style.display="none",t[n].getElementsByClassName("lookMic_dis")[0].style.display="none"})),meetingSDK.on("onKickout",(function(e){console.log("onKickout",e),f("è¢«è¸¢åºä¼è®®å®¤"+e.userId),meetingSDK.StopLocalPreview()})),meetingSDK.on("onUserJoin",(function(e){console.log("onUserJoin",e),a.notSpeaker.find((function(t){return t.userid===e.userId}))||a.notSpeaker.push({hostFlag:2,isRaiseHand:!1,isSpeaking:!1,nickname:e.nickName,userid:e.userId}),a.allUserList.find((function(t){return t.userid===e.userId}))||a.allUserList.push({hostFlag:2,isRaiseHand:!1,isSpeaking:!1,nickname:e.nickName,userid:e.userId}),u((function(){}),0),f("ç¨æ·å å¥ä¼è®®"+e.userId)})),meetingSDK.on("onUserLeave",(function(e){console.log("onUserLeave",e),a.notSpeaker=a.notSpeaker.filter((function(t){return t.userid!==e.userId})),a.allUserList=a.allUserList.filter((function(t){return t.userid!==e.userId})),u((function(){}),0),f("ç¨æ·ç¦»å¼ä¼è®®"+e.userId)})),meetingSDK.on("onUserOpenCamera",(function(e){console.log("onUserOpenCamera",e);for(var t=document.getElementsByClassName("item_speak_userid"),n=0;n<t.length;n++){var r=t[n];r.getElementsByClassName("nube")[0].innerHTML===e.userId&&(r.getElementsByClassName("lookCamera_dis")[0].style.display="none",r.getElementsByClassName("lookCamera")[0].style.display="block")}f("ç¨æ·æå¼æåå¤´"+e.userId)})),meetingSDK.on("onUserCloseCamera",(function(e){console.log("onUserCloseCamera",e);for(var t=document.getElementsByClassName("item_speak_userid"),n=0;n<t.length;n++){var r=t[n];r.getElementsByClassName("nube")[0].innerHTML===e.userId&&(r.getElementsByClassName("lookCamera_dis")[0].style.display="block",r.getElementsByClassName("lookCamera")[0].style.display="none")}f("ç¨æ·å³é­æåå¤´"+e.userId)})),meetingSDK.on("onUserOpenMic",(function(e){console.log("onUserOpenMic",e);for(var t=document.getElementsByClassName("item_speak_userid"),n=0;n<t.length;n++){var r=t[n];r.getElementsByClassName("nube")[0].innerHTML===e.userId&&(r.getElementsByClassName("lookMic_dis")[0].style.display="none",r.getElementsByClassName("lookMic")[0].style.display="block")}f("ç¨æ·æå¼éº¦åé£"+e.userId)})),meetingSDK.on("onUserCloseMic",(function(e){console.log("onUserCloseMic",e);for(var t=document.getElementsByClassName("item_speak_userid"),n=0;n<t.length;n++){var r=t[n];r.getElementsByClassName("nube")[0].innerHTML===e.userId&&(r.getElementsByClassName("lookMic_dis")[0].style.display="block",r.getElementsByClassName("lookMic")[0].style.display="none")}f("ç¨æ·å³é­éº¦åé£"+e.userId)})),meetingSDK.on("onMeetingModeChange",(function(e){console.log("onMeetingModeChange",e),a.meetingModeName=1===e?"èªç±æ¨¡å¼":"ä¸»ææ¨¡å¼",f(1===e?"ä¼è®®æ¨¡å¼ä¸ºèªç±æ¨¡å¼":"ä¼è®®æ¨¡å¼ä¸ºä¸»ææ¨¡å¼"+e)})),meetingSDK.on("onMeetingRestoreNotify",(function(e){console.log("onMeetingRestoreNotify",e),p(e)})),meetingSDK.on("onUserOpenShare",(function(e){console.log("onUserOpenShare",e)})),meetingSDK.on("onUserCloseShare",(function(e){console.log("onUserCloseShare",e)})),meetingSDK.on("onHostControl",(function(e){console.log("onHostControl",e)})),meetingSDK.on("onMeetingRestore",(function(e){console.log("onMeetingRestore",e)})),meetingSDK.on("onHostTransfer",(function(e){console.log("onHostTransfer",e)})),meetingSDK.on("onHostTransfer",(function(e){console.log("onHostTransfer",e)})),meetingSDK.on("onRecvUIMsg",(function(e){console.log("onRecvUIMsg",e)})),meetingSDK.on("onRemoteSpeakerForMaxVol",(function(e){console.log("onRemoteSpeakerForMaxVol",e)}))}a.setResult="",a.setConfig=function(){meetingSDK.SetConfig({appKey:a.appKey,auth:a.auth,meeting:a.meeting,gw:a.getwayIP,gwListenPort:a.port}),a.setResult="è®¾ç½®éç½®æå",l.set("meetingSDKConfig",(0,r.default)({appKey:a.appKey,auth:a.auth,meeting:a.meeting,gw:a.getwayIP,gwListenPort:a.port}))},a.userName="",a.password="",a.nube="",a.result="æªåå§å",l.get("userName")&&(a.userName=l.get("userName")),l.get("password")&&(a.password=l.get("password")),a.init=function(){window.meetingSDK=ButelRTCSDK.CreateInstance(),a.setConfig(),meetingSDK.Init(a.userName,i(a.password),(function(e){console.log("åå§åwebrtc sdkæå"),a.result="åå§åæå",a.nube=e.userId,u((function(){}),0)}),(function(e){console.log("åå§åwebrtc sdkå¤±è´¥,code:"+e.code),a.result="åå§åå¤±è´¥",u((function(){}),0)})),l.set("userName",a.userName),l.set("password",a.password),h()},a.release=function(){console.log("Release"),meetingSDK.Release(),a.result="æªåå§å",u((function(){}),0)},a.toastMsg="",a.meetingID="",a.nickName="",a.createMeetingBtnClicked=function(){meetingSDK.CreateMeeting((function(e){console.log("åå»ºä¼è®®æå ",e),f("åå»ºä¼è®®æå "+e),a.createStatue="åå»ºä¼è®®æå",a.createMeetingID=e,a.meetingID=e,u((function(){}),0)}),(function(e){a.createStatue="åå»ºä¼è®®å¤±è´¥",console.log("åå»ºä¼è®®å¤±è´¥ ",e),f("åå»ºä¼è®®æå"),u((function(){}),0)}))},l.get("meetingID")&&(a.meetingID=l.get("meetingID")),l.get("nickName")&&(a.nickName=l.get("nickName")),a.notSpeaker=[],a.allUserList=[],a.GetAllUsers=function(){meetingSDK.GetAllUsers((function(e){console.log("ä¼è®®å®¤äººååè¡¨æå",e),a.allUserList=e,a.notSpeaker=e.filter((function(e){return!e.isSpeaking})),u((function(){}),0)}),(function(e){console.log("ä¼è®®å®¤äººååè¡¨å¤±è´¥",e)}))},a.local_device_state={isSpeak:!1,camera:0,mic:0},a.speakerList=null,a.joinMeetingStatue="æªå å¥",a.joinMeetingBtnClicked=function(){a.joinMeetingStatue="å å¥ä¼è®®ä¸­...",console.log("init"),h(),a.GetDevices(),a.GetCurrentCameraInputDevice(),a.GetCurrentAudioInputDevice(),meetingSDK.JoinMeeting(String(a.meetingID),!0,a.nickName,(function(e){console.log("success",e),a.joinMeetingStatue="å å¥ä¼è®®æå",f("å å¥ä¼è®®æå"),a.GetAllUsers(),l.set("meetingID",a.meetingID),l.set("nickName",a.nickName),2===e.mode&&f("å½åä¼è®®ä¸ºä¸»ææ¨¡å¼ç¦æ­¢åè¨"),p(e)}),(function(e){console.log("error",e),a.joinMeetingStatue="å å¥ä¼è®®å¤±è´¥",f("å å¥ä¼è®®å¤±è´¥"),u((function(){}),0)}))},a.exitMeetingRoom=function(){meetingSDK.LeaveMeeting((function(){console.log("éåºä¼è®®æå"),a.joinMeetingStatue="æªå å¥",f("éåºä¼è®®æå");for(var e=document.getElementsByClassName("item_speak_userid"),t=0;t<e.length;t++)e[t].getElementsByClassName("nube")[0].innerHTML="",e[t].getElementsByClassName("lookCamera")[0].style.display="none",e[t].getElementsByClassName("lookCamera_dis")[0].style.display="none",e[t].getElementsByClassName("lookMic")[0].style.display="none",e[t].getElementsByClassName("lookMic_dis")[0].style.display="none";u((function(){}),0)}),(function(){console.log("éåºä¼è®®å¤±è´¥"),f("éåºä¼è®®å¤±è´¥")}))},a.startSpeak=function(){meetingSDK.AskForSpeak((function(){console.log("ç³è¯·åè¨æå"),f("ç³è¯·åè¨æå")}),(function(e){console.log("ç³è¯·åè¨å¤±è´¥",e),f("ç³è¯·åè¨å¤±è´¥")}))},a.cancelSpeak=function(){meetingSDK.AskForStopSpeak((function(){console.log("åæ¶åè¨æå"),f("åæ¶åè¨æå")}),(function(e){console.log("åæ¶åè¨å¤±è´¥",e),f("åæ¶åè¨å¤±è´¥")}))},a.handUp=function(){meetingSDK.RaiseHand((function(){console.log("ç¨æ·ä¸¾æè¯·æ±åè¨æå"),f("ç¨æ·ä¸¾æè¯·æ±åè¨æå")}),(function(e){console.log("ç¨æ·ä¸¾æè¯·æ±åè¨å¤±è´¥",e),f("ç¨æ·ä¸¾æè¯·æ±åè¨å¤±è´¥")}))},a.masterChangeMeetingModeToFree=function(){},a.masterChangeMeetingModeToMaster=function(){},a.setUserSpeak="",a.SetSpeaker=function(){meetingSDK.SetSpeaker(a.setUserSpeak,"",(function(){f("æå®åè¨æå"+a.setUserSpeak),console.log("æå®åè¨æå")}),(function(e){f("æå®åè¨å¤±è´¥"+a.setUserSpeak),console.log("æå®åè¨å¤±è´¥",e)}))},a.kickoutUserMeeting="",a.KickoutUser=function(){meetingSDK.KickoutUser(a.kickoutUserMeeting,(function(){console.log("è¯·åºä¼è®®å®¤æå"),f("è¯·åºä¼è®®å®¤æå"+a.kickoutUserMeeting);for(var e=document.getElementsByClassName("item_speak_userid"),t=0;t<e.length;t++)if(e[t].getElementsByClassName("nube")[0].innerHTML===a.kickoutUserMeeting){e[t].getElementsByClassName("nube")[0].innerHTML="",e[t].getElementsByClassName("lookCamera")[0].style.display="none",e[t].getElementsByClassName("lookCamera_dis")[0].style.display="none",e[t].getElementsByClassName("lookMic")[0].style.display="none",e[t].getElementsByClassName("lookMic_dis")[0].style.display="none";break}a.kickoutUserMeeting&&meetingSDK.StopRemoteVideo(a.kickoutUserMeeting)}),(function(e){console.log("error",e),f("è¯·åºä¼è®®å®¤å¤±è´¥"+a.kickoutUserMeeting)}))},a.cameraList=[],a.currentCameraid="",a.cameraItemClicked=function(e){console.log(e);var t=a.cameraList.find((function(t){return t.deviceId===e}));a.SwitchCamera(t.deviceId,t.deviceName)},a.voiceList=[],a.currAudioPlayDevice="",a.audioPlayItemClicked=function(e){console.log(e)},a.micList=[],a.currentMicid="",a.micItemClicked=function(e){console.log(e);var t=a.micList.find((function(t){return t.deviceId===e}));a.SwitchAudio(t.deviceId,t.deviceName)},a.GetDevices=function(){meetingSDK.GetDevices((function(e){console.log("è¯·æ±åªä½åè¡¨æå",e),a.cameraList=e.filter((function(e){return"videoinput"===e.kind})),a.micList=e.filter((function(e){return"audioinput"===e.kind})),a.voiceList=e.filter((function(e){return"audiooutput"===e.kind}))}),(function(e){console.log("è¯·æ±åªä½åè¡¨å¤±è´¥",e)}))},a.GetCurrentCameraInputDevice=function(){var e=meetingSDK.GetCurrentCameraInputDevice();console.log("è·åå½åæåå¤´ï¼",e),a.currentCameraid=e.deviceId},a.GetCurrentAudioInputDevice=function(){var e=meetingSDK.GetCurrentAudioInputDevice();console.log("è·åå½åéº¦åé£ï¼",e),a.currentMicid=e.deviceId},a.SwitchCamera=function(e,t){meetingSDK.SwitchCamera(e,t,(function(e){console.log("åæ¢æåå¤´æå",e)}),(function(e){console.log("åæ¢æåå¤´å¤±è´¥",e)}))},a.SwitchAudio=function(e,t){meetingSDK.SwitchAudio(e,t,(function(e){console.log("åæ¢éº¦åé£æå",e)}),(function(e){console.log("åæ¢éº¦åé£å¤±è´¥",e)}))},a.EnableCamera=function(e){meetingSDK.EnableCamera(e,(function(t){console.log(0===e?"å³é­æåå¤´æå":"æå¼æåå¤´æå",t),0===e?(a.local_device_state.camera=0,a.local_device_state.mic=1):a.local_device_state.camera=1,u((function(){}),0)}),(function(t){console.log(0===e?"å³é­æåå¤´å¤±è´¥":"æå¼æåå¤´å¤±è´¥",t)}))},a.EnableAudio=function(e){meetingSDK.EnableAudio(e,(function(t){console.log(0===e?"å³é­éº¦åé£æå":"æå¼éº¦åé£æå",t),a.local_device_state.mic=0===e?0:1,u((function(){}),0)}),(function(t){console.log(0===e?"å³é­éº¦åé£å¤±è´¥":"æå¼éº¦åé£å¤±è´¥",t)}))},a.videoQuality="0",a.videoQualityList=[{level:3,quality:"è¶æ¸"},{level:2,quality:"é«æ¸"},{level:1,quality:"æ æ¸"},{level:0,quality:"æµç"}],a.videoQualityChange=function(e){console.log("level",e),meetingSDK.SetUserVideoQuality(e)},a.masterChangeMeetingModeToFree=function(e){meetingSDK.SetMeetingMode(e,(function(){console.log(1===e?"åæ¢èªç±æ¨¡å¼æå":"åæ¢ä¸»ææ¨¡å¼æå",res),a.meetingModeName=1===e?"èªç±æ¨¡å¼":"ä¸»ææ¨¡å¼",f(1===e?"ä¼è®®æ¨¡å¼ä¸ºèªç±æ¨¡å¼":"ä¼è®®æ¨¡å¼ä¸ºä¸»ææ¨¡å¼",res),u((function(){}),0)}),(function(t){console.log(1===e?"åæ¢èªç±æ¨¡å¼å¤±è´¥":"åæ¢ä¸»ææ¨¡å¼å¤±è´¥",t),f(1===e?"åæ¢èªç±æ¨¡å¼å¤±è´¥":"åæ¢ä¸»ææ¨¡å¼å¤±è´¥")}))}}])},function(e,t,n){"use strict";angular.module("myApp.cameraSetting",[]).controller("cameraSettingController",["$scope",function(e){}])},function(e,t,n){"use strict";angular.module("myApp.audioSetting",[]).controller("audioSettingController",["$scope","$timeout",function(e,t){}])},function(e,t,n){"use strict";angular.module("myApp.networkDetection",[]).controller("networkDetectionController",["$scope",function(e){}])},function(e,t,n){"use strict";angular.module("myApp.networkOptimization",[]).controller("networkOptimizationController",["$scope",function(e){}])},function(e,t,n){"use strict";angular.module("myApp.inviteController",[]).controller("inviteController",["$scope","accountInfo",function(e,t){console.log("enter invite page")}])},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e:{default:e}}(n(27));angular.module("loginInfo",[]).service("accountInfo",[function(){this.setAccountInfo=function(e){this.accountInfo=e},this.getAccountInfo=function(){return this.accountInfo},this.md5Str=function(e){return function(e){x=function(e){for(nblk=1+(e.length+8>>6),blks=new Array(16*nblk),i=0;i<16*nblk;i++)blks[i]=0;for(i=0;i<e.length;i++)blks[i>>2]|=e.charCodeAt(i)<<i%4*8;return blks[i>>2]|=128<<i%4*8,blks[16*nblk-2]=8*e.length,blks}(e);var t=1732584193,n=-271733879,r=-1732584194,a=271733878;for(i=0;i<x.length;i+=16){var c=t,p=n,h=r,m=a;t=u(t,n,r,a,x[i+0],7,-680876936),a=u(a,t,n,r,x[i+1],12,-389564586),r=u(r,a,t,n,x[i+2],17,606105819),n=u(n,r,a,t,x[i+3],22,-1044525330),t=u(t,n,r,a,x[i+4],7,-176418897),a=u(a,t,n,r,x[i+5],12,1200080426),r=u(r,a,t,n,x[i+6],17,-1473231341),n=u(n,r,a,t,x[i+7],22,-45705983),t=u(t,n,r,a,x[i+8],7,1770035416),a=u(a,t,n,r,x[i+9],12,-1958414417),r=u(r,a,t,n,x[i+10],17,-42063),n=u(n,r,a,t,x[i+11],22,-1990404162),t=u(t,n,r,a,x[i+12],7,1804603682),a=u(a,t,n,r,x[i+13],12,-40341101),r=u(r,a,t,n,x[i+14],17,-1502002290),t=l(t,n=u(n,r,a,t,x[i+15],22,1236535329),r,a,x[i+1],5,-165796510),a=l(a,t,n,r,x[i+6],9,-1069501632),r=l(r,a,t,n,x[i+11],14,643717713),n=l(n,r,a,t,x[i+0],20,-373897302),t=l(t,n,r,a,x[i+5],5,-701558691),a=l(a,t,n,r,x[i+10],9,38016083),r=l(r,a,t,n,x[i+15],14,-660478335),n=l(n,r,a,t,x[i+4],20,-405537848),t=l(t,n,r,a,x[i+9],5,568446438),a=l(a,t,n,r,x[i+14],9,-1019803690),r=l(r,a,t,n,x[i+3],14,-187363961),n=l(n,r,a,t,x[i+8],20,1163531501),t=l(t,n,r,a,x[i+13],5,-1444681467),a=l(a,t,n,r,x[i+2],9,-51403784),r=l(r,a,t,n,x[i+7],14,1735328473),t=d(t,n=l(n,r,a,t,x[i+12],20,-1926607734),r,a,x[i+5],4,-378558),a=d(a,t,n,r,x[i+8],11,-2022574463),r=d(r,a,t,n,x[i+11],16,1839030562),n=d(n,r,a,t,x[i+14],23,-35309556),t=d(t,n,r,a,x[i+1],4,-1530992060),a=d(a,t,n,r,x[i+4],11,1272893353),r=d(r,a,t,n,x[i+7],16,-155497632),n=d(n,r,a,t,x[i+10],23,-1094730640),t=d(t,n,r,a,x[i+13],4,681279174),a=d(a,t,n,r,x[i+0],11,-358537222),r=d(r,a,t,n,x[i+3],16,-722521979),n=d(n,r,a,t,x[i+6],23,76029189),t=d(t,n,r,a,x[i+9],4,-640364487),a=d(a,t,n,r,x[i+12],11,-421815835),r=d(r,a,t,n,x[i+15],16,530742520),t=f(t,n=d(n,r,a,t,x[i+2],23,-995338651),r,a,x[i+0],6,-198630844),a=f(a,t,n,r,x[i+7],10,1126891415),r=f(r,a,t,n,x[i+14],15,-1416354905),n=f(n,r,a,t,x[i+5],21,-57434055),t=f(t,n,r,a,x[i+12],6,1700485571),a=f(a,t,n,r,x[i+3],10,-1894986606),r=f(r,a,t,n,x[i+10],15,-1051523),n=f(n,r,a,t,x[i+1],21,-2054922799),t=f(t,n,r,a,x[i+8],6,1873313359),a=f(a,t,n,r,x[i+15],10,-30611744),r=f(r,a,t,n,x[i+6],15,-1560198380),n=f(n,r,a,t,x[i+13],21,1309151649),t=f(t,n,r,a,x[i+4],6,-145523070),a=f(a,t,n,r,x[i+11],10,-1120210379),r=f(r,a,t,n,x[i+2],15,718787259),n=f(n,r,a,t,x[i+9],21,-343485551),t=s(t,c),n=s(n,p),r=s(r,h),a=s(a,m)}return o(t)+o(n)+o(r)+o(a)}(e)}}]).service("contactManagerSerice",[function(){this.setContactManager=function(e){this.contactManager=e},this.formatContacts=function(e){var t=[{groupIndex:"A",contacts:[]},{groupIndex:"B",contacts:[]},{groupIndex:"C",contacts:[]},{groupIndex:"D",contacts:[]},{groupIndex:"E",contacts:[]},{groupIndex:"F",contacts:[]},{groupIndex:"G",contacts:[]},{groupIndex:"H",contacts:[]},{groupIndex:"I",contacts:[]},{groupIndex:"J",contacts:[]},{groupIndex:"K",contacts:[]},{groupIndex:"L",contacts:[]},{groupIndex:"M",contacts:[]},{groupIndex:"N",contacts:[]},{groupIndex:"O",contacts:[]},{groupIndex:"P",contacts:[]},{groupIndex:"Q",contacts:[]},{groupIndex:"R",contacts:[]},{groupIndex:"S",contacts:[]},{groupIndex:"T",contacts:[]},{groupIndex:"U",contacts:[]},{groupIndex:"V",contacts:[]},{groupIndex:"W",contacts:[]},{groupIndex:"X",contacts:[]},{groupIndex:"Y",contacts:[]},{groupIndex:"Z",contacts:[]},{groupIndex:"#",contacts:[]}];console.log(e.length);for(var n=0;n<e.length;n++){var r=e[n];if("UNKNOWN"!==r.realName&&""!==r.realName||(r.nickName.length>0?r.realName=r.nickName:r.realName="æªå½å"),(0==r.headUrl.length||r.headUrl.indexOf("http")<0)&&(r.altHeadUrl=r.realName.charAt(0)),r.pinyin.length>0)switch(r.pinyin.charAt(0)){case"A":t[0].contacts.push(r);break;case"B":t[1].contacts.push(r);break;case"C":t[2].contacts.push(r);break;case"D":t[3].contacts.push(r);break;case"E":t[4].contacts.push(r);break;case"F":t[5].contacts.push(r);break;case"G":t[6].contacts.push(r);break;case"H":t[7].contacts.push(r);break;case"I":t[8].contacts.push(r);break;case"J":t[9].contacts.push(r);break;case"K":t[10].contacts.push(r);break;case"L":t[11].contacts.push(r);break;case"M":t[12].contacts.push(r);break;case"N":t[13].contacts.push(r);break;case"O":t[14].contacts.push(r);break;case"P":t[15].contacts.push(r);break;case"Q":t[16].contacts.push(r);break;case"R":t[17].contacts.push(r);break;case"S":t[18].contacts.push(r);break;case"T":t[19].contacts.push(r);break;case"U":t[20].contacts.push(r);break;case"V":t[21].contacts.push(r);break;case"W":t[22].contacts.push(r);break;case"X":t[23].contacts.push(r);break;case"Y":t[24].contacts.push(r);break;case"Z":t[25].contacts.push(r);break;default:t[26].contacts.push(r)}else t[26].contacts.push(r)}for(var i=0;i<t.length;i++)0==t[i].contacts.length&&(t.splice(i,1),i--);return t}}]).service("connect",[function(){this.setMeetingConnect=function(e){this.meetingConnect=e}}]).service("invite",[function(){this.setMeetingInvite=function(e){this.meetingInvite=e}}]).factory("locals",["$window",function(e){return{set:function(t,n){e.localStorage[t]=n},get:function(t,n){return e.localStorage[t]||n},setObject:function(t,n){e.localStorage[t]=(0,r.default)(n)},getObject:function(t){return JSON.parse(e.localStorage[t]||"[]")}}}]);var a="0123456789abcdef";function o(e){for(str="",j=0;j<=3;j++)str+=a.charAt(e>>8*j+4&15)+a.charAt(e>>8*j&15);return str}function s(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function c(e,t,n,r,i,a){return s(function(e,t){return e<<t|e>>>32-t}(s(s(t,e),s(r,a)),i),n)}function u(e,t,n,r,i,a,o){return c(t&n|~t&r,e,t,i,a,o)}function l(e,t,n,r,i,a,o){return c(t&r|n&~r,e,t,i,a,o)}function d(e,t,n,r,i,a,o){return c(t^n^r,e,t,i,a,o)}function f(e,t,n,r,i,a,o){return c(n^(t|~r),e,t,i,a,o)}},function(e,t,n){"use strict";angular.module("cacheService",[]).service("cache",[function(){this.userInfoArray=[]}])},function(e,t,n){"use strict";angular.module("utilsService",[]).service("CustomLog",[function(){this.d=function(e){},this.w=function(e){},this.i=function(e){},this.e=function(e){}}]).factory("anchorScroll",(function(){return{toView:function(e,t,n){var r=$(window).height();e=$(e),n=n>0?n:r/10,$("html, body").animate({scrollTop:t?e.offset().top-n:e.offset().top+e.outerHeight()+n-r},{duration:200,easing:"linear",complete:function(){e[0].scrollIntoView(!!t)}})},inView:function(e){e=$(e);var t=$(window),n=t.height(),r=e.offset().top,i=e.outerHeight(),a=t.scrollTop(),o=a+n;function s(e){return e>a&&e<o}return!!s(r+(i>n?n:i)/2)||i>n&&s(r+i-n/2)}}}))},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e:{default:e}}
/**
 * @license AngularJS v1.4.10
 * (c) 2010-2015 Google, Inc. http://angularjs.org
 * License: MIT
 */(n(33));
/**
 * @license AngularJS v1.4.10
 * (c) 2010-2015 Google, Inc. http://angularjs.org
 * License: MIT
 */!function(e,t,n){var i=t.module("ngRoute",["ng"]).provider("$route",(function(){function e(e,n){return t.extend((0,r.default)(e),n)}var n={};function i(e,t){var n=t.caseInsensitiveMatch,r={originalPath:e,regexp:e},i=r.keys=[];return e=e.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)(\*\?|[\?\*])?/g,(function(e,t,n,r){var a="?"===r||"*?"===r?"?":null,o="*"===r||"*?"===r?"*":null;return i.push({name:n,optional:!!a}),t=t||"",(a?"":t)+"(?:"+(a?t:"")+(o?"(.+?)":"([^/]+)")+(a||"")+")"+(a||"")})).replace(/([\/$\*])/g,"\\$1"),r.regexp=new RegExp("^"+e+"$",n?"i":""),r}this.when=function(e,r){var a=t.copy(r);if(t.isUndefined(a.reloadOnSearch)&&(a.reloadOnSearch=!0),t.isUndefined(a.caseInsensitiveMatch)&&(a.caseInsensitiveMatch=this.caseInsensitiveMatch),n[e]=t.extend(a,e&&i(e,a)),e){var o="/"==e[e.length-1]?e.substr(0,e.length-1):e+"/";n[o]=t.extend({redirectTo:e},i(o,a))}return this},this.caseInsensitiveMatch=!1,this.otherwise=function(e){return"string"==typeof e&&(e={redirectTo:e}),this.when(null,e),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce",function(r,i,o,s,c,u,l){var d,f,p=!1,h={routes:n,reload:function(){p=!0;var e={defaultPrevented:!1,preventDefault:function(){this.defaultPrevented=!0,p=!1}};r.$evalAsync((function(){m(e),e.defaultPrevented||v()}))},updateParams:function(e){if(!this.current||!this.current.$$route)throw a("norout","Tried updating route when with no current route");e=t.extend({},this.current.params,e),i.path(g(this.current.$$route.originalPath,e)),i.search(e)}};return r.$on("$locationChangeStart",m),r.$on("$locationChangeSuccess",v),h;function m(a){var o=h.current;d=function(){var r,a;return t.forEach(n,(function(n,o){!a&&(r=function(e,t){var n=t.keys,r={};if(!t.regexp)return null;var i=t.regexp.exec(e);if(!i)return null;for(var a=1,o=i.length;a<o;++a){var s=n[a-1],c=i[a];s&&c&&(r[s.name]=c)}return r}(i.path(),n))&&((a=e(n,{params:t.extend({},i.search(),r),pathParams:r})).$$route=n)})),a||n.null&&e(n.null,{params:{},pathParams:{}})}(),(f=d&&o&&d.$$route===o.$$route&&t.equals(d.pathParams,o.pathParams)&&!d.reloadOnSearch&&!p)||!o&&!d||r.$broadcast("$routeChangeStart",d,o).defaultPrevented&&a&&a.preventDefault()}function v(){var e=h.current,n=d;f?(e.params=n.params,t.copy(e.params,o),r.$broadcast("$routeUpdate",e)):(n||e)&&(p=!1,h.current=n,n&&n.redirectTo&&(t.isString(n.redirectTo)?i.path(g(n.redirectTo,n.params)).search(n.params).replace():i.url(n.redirectTo(n.pathParams,i.path(),i.search())).replace()),s.when(n).then((function(){if(n){var e,r,i=t.extend({},n.resolve);return t.forEach(i,(function(e,n){i[n]=t.isString(e)?c.get(e):c.invoke(e,null,null,n)})),t.isDefined(e=n.template)?t.isFunction(e)&&(e=e(n.params)):t.isDefined(r=n.templateUrl)&&(t.isFunction(r)&&(r=r(n.params)),t.isDefined(r)&&(n.loadedTemplateUrl=l.valueOf(r),e=u(r))),t.isDefined(e)&&(i.$template=e),s.all(i)}})).then((function(i){n==h.current&&(n&&(n.locals=i,t.copy(n.params,o)),r.$broadcast("$routeChangeSuccess",n,e))}),(function(t){n==h.current&&r.$broadcast("$routeChangeError",n,e,t)})))}function g(e,n){var r=[];return t.forEach((e||"").split(":"),(function(e,t){if(0===t)r.push(e);else{var i=e.match(/(\w+)(?:[?*])?(.*)/),a=i[1];r.push(n[a]),r.push(i[2]||""),delete n[a]}})),r.join("")}}]})),a=t.$$minErr("ngRoute");function o(e,n,r){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(i,a,o,s,c){var u,l,d,f=o.autoscroll,p=o.onload||"";function h(){d&&(r.cancel(d),d=null),u&&(u.$destroy(),u=null),l&&((d=r.leave(l)).then((function(){d=null})),l=null)}function m(){var o=e.current&&e.current.locals,s=o&&o.$template;if(t.isDefined(s)){var d=i.$new(),m=e.current,v=c(d,(function(e){r.enter(e,null,l||a).then((function(){!t.isDefined(f)||f&&!i.$eval(f)||n()})),h()}));l=v,(u=m.scope=d).$emit("$viewContentLoaded"),u.$eval(p)}else h()}i.$on("$routeChangeSuccess",m),m()}}}function s(e,t,n){return{restrict:"ECA",priority:-400,link:function(r,i){var a=n.current,o=a.locals;i.html(o.$template);var s=e(i.contents());if(a.controller){o.$scope=r;var c=t(a.controller,o);a.controllerAs&&(r[a.controllerAs]=c),i.data("$ngControllerController",c),i.children().data("$ngControllerController",c)}s(r)}}}i.provider("$routeParams",(function(){this.$get=function(){return{}}})),i.directive("ngView",o),i.directive("ngView",s),o.$inject=["$route","$anchorScroll","$animate"],s.$inject=["$compile","$controller","$route"]}(window,window.angular)},function(e,t){e.exports='<div ng-controller="initController">\n    \x3c!--åå§åè®¾ç½®--\x3e\n    <div id="tab4">\n        <div class="part_area">\n            <h3>éç½®ç®¡ç</h3>\n            <div>\n                <span>ç½å³å°åï¼ãã</span><input style="width: 155px;" type="text" placeholder="è¯·è¾å¥ç½å³å°å"ng-model="getwayIP">\n                <span>ç½å³ç«¯å£ï¼ãã</span><input style="width: 155px;" type="text" placeholder="è¯·è¾å¥ç«¯å£"ng-model="port"><br>\n                <span>appkeyï¼ããã</span><input style="width: 416px;" type="text" placeholder="è¯·è¾å¥appkey"ng-model="appKey"><br>\n                <span>ç¨æ·ä¸­å¿å°åï¼</span><input style="width: 416px;" type="text" placeholder="è¯·è¾å¥ç¨æ·ä¸­å¿å°å"ng-model="auth"><br>\n                <span>ä¼è®®æ¥å£å°åï¼</span><input style="width: 416px;" type="text" placeholder="è¯·è¾å¥ä¼è®®æ¥å£å°å"ng-model="meeting"><br>\n                \x3c!-- <button class="btn_blue"ng-click="setConfig()">ç¡®å®</button> --\x3e\n                <div class="state_tips">\n                    {{setResult}}\n                 </div>\n            </div>\n\n        </div>\n\n        <div class="part_area">\n            <h3>åå§åç®¡ç</h3>\n            <div>\n                <span>ç¨æ·åãï¼</span><input style="width: 155px;" type="text" placeholder="è¯·è¾å¥ç¨æ·å"ng-model="userName">\n                <span>å¯ç ããï¼</span><input style="width: 155px;" type="text" placeholder="è¯·è¾å¥å¯ç "ng-model="password">\n                \x3c!-- <button class="btn_blue"ng-click="login()">Login</button> --\x3e\n                <button class="btn_blue"ng-click="init()">Init</button>\n                <button class="btn_blue"ng-click="release()">Release</button>\n            </div>\n            <div>\n                \n            </div>\n            <div class="state_tips">\n                åå§åç¶æï¼{{result}}\n            </div>\n        </div>\n\n        \n    </div>\n\n    \x3c!--åå§åè®¾ç½®--\x3e\n    \x3c!-- <div id="tab5">\n        <div class="part_area">\n            <h3>éè¯·ä¿¡æ¯</h3>\n            <div>\n                <button class="btn_line" ng-click="initInviete()">Init</button>\n                <button class="btn_line" ng-click="releaseInvite()">Release</button>\n                <input ng-model="inviteContact" class="wth220" type="text" placeholder="è¾å¥è¢«éè¯·äºº">\n                <button class="btn_blue" ng-click="inviteOtherContact()">éè¯·</button>\n            </div>\n            <h4>éè¯·äººä¿¡æ¯</h4>\n            <div>éè¯·äººï¼<span class="gray">åç§°ä¿¡æ¯</span></div>\n            <div>éè¯·äººè§è®¯å·ï¼<span class="gray">åç§°ä¿¡æ¯</span></div>\n            <div>éè¯·äººIDï¼<span class="gray">åç§°ä¿¡æ¯</span></div>\n            <div>å½åç¶æ<span class="gray">{{inviteResult}}</span></div>\n        </div>\n        <div class="state_tips">\n            æä½ç¶æ:{{inviteResult}}\n        </div>\n    </div> --\x3e\n\n</div>'},function(e,t){e.exports='<div ng-controller="meetingRoomController">\n    <div id="tab4">\n        <div class="part_area">\n            <h3>éç½®ç®¡ç</h3>\n            <div>\n                <span>ç½å³å°åï¼ãã</span><input style="width: 155px;" type="text" placeholder="è¯·è¾å¥ç½å³å°å"ng-model="getwayIP">\n                <span>ç½å³ç«¯å£ï¼ãã</span><input style="width: 155px;" type="text" placeholder="è¯·è¾å¥ç«¯å£"ng-model="port"><br>\n                <span>appkeyï¼ããã</span><input style="width: 416px;" type="text" placeholder="è¯·è¾å¥appkey"ng-model="appKey"><br>\n                <span>ç¨æ·ä¸­å¿å°åï¼</span><input style="width: 416px;" type="text" placeholder="è¯·è¾å¥ç¨æ·ä¸­å¿å°å"ng-model="auth"><br>\n                <span>ä¼è®®æ¥å£å°åï¼</span><input style="width: 416px;" type="text" placeholder="è¯·è¾å¥ä¼è®®æ¥å£å°å"ng-model="meeting"><br>\n                \x3c!-- <button class="btn_blue"ng-click="setConfig()">ç¡®å®</button> --\x3e\n                <div class="state_tips">\n                    {{setResult}}\n                 </div>\n            </div>\n\n        </div>\n\n        <div class="part_area">\n            <h3>åå§åç®¡ç\n                <span class="meeting_modo">meetingSDKçæ¬å·ï¼<em>{{meetingSDKVersion}}</em></span>\n                <span class="meeting_modo">è§è®¯å·ï¼<em>{{nube}}/</em></span>\n            </h3>\n            <div>\n                <span>ç¨æ·åãï¼</span><input style="width: 155px;" type="text" placeholder="è¯·è¾å¥ç¨æ·å"ng-model="userName">\n                <span>å¯ç ããï¼</span><input style="width: 155px;" type="text" placeholder="è¯·è¾å¥å¯ç "ng-model="password">\n                \x3c!-- <button class="btn_blue"ng-click="login()">Login</button> --\x3e\n                <button class="btn_blue"ng-click="init()">Init</button>\n                <button class="btn_blue"ng-click="release()">Release</button>\n            </div>\n            <div>\n                \n            </div>\n            <div class="state_tips">\n                åå§åç¶æï¼{{result}}\n            </div>\n        </div>\n\n        \n    </div>\n    \x3c!--ä¼è®®ç®¡çè®¾ç½®--\x3e\n    <div id="tab4">\n        <div class="part_area">\n            <h3>åå»ºä¼è®®\n                <span class="meeting_modo">ä¼è®®æ¨¡å¼ï¼<em>{{meetingModeName}}</em></span>\n                <span class="meeting_modo">ä¸»æäººï¼<em>{{hostId}}</em></span>\n            </h3>\n            <div>\n                <button ng-click="createMeetingBtnClicked()" class="btn_blue">åå»ºä¼è®®</button>\n                <span class="label" ng-model="createStatue">ä¼è®®ç¶æï¼<i>{{createStatue}}</i></span>\n                <span class="label" ng-model="creatMeetingID">ä¼è®®å·ï¼<i>{{createMeetingID}}</i></span>\n                <br>\n                <button ng-click="joinMeetingBtnClicked()" class="btn_blue">å å¥ä¼è®®</button>\n                <span>ä¼è®®å·ï¼</span><input ng-model="meetingID" class="wth220" type="text" placeholder="è¯·è¾å¥ä¼è®®å·/æ¾ç¤ºä¼è®®å·">\n                <span>ç¨æ·æµç§°ï¼</span><input ng-model="nickName" class="wth220" type="text" placeholder="è¯·è¾å¥ç¨æ·æµç§°">\n                <span class="label" ng-model="joinMeetingStatue">ç¶æï¼<i>{{joinMeetingStatue}}</i></span>\n                <br>\n                <button ng-click="exitMeetingRoom()" class="btn_blue">éåºä¼è®®</button>\n            </div>\n            <div>\n                <button ng-click="startSpeak()" class="btn_line" title="åè¨">åè¨</button>\n                <button class="btn_line" title="åæ¶åè¨" ng-click="cancelSpeak()">åæ¶åè¨</button>\n                <button class="btn_line" title="ä¸¾æ" ng-click="handUp()">ä¸¾æ</button>\n                \x3c!-- <button ng-click="unLockMeetingClicked()" class="btn_line" title="è§£é">è§£é</button>\n                <button ng-click="lockMeetingClicked()" class="btn_line" title="å é">å é</button> --\x3e\n                <button ng-click="masterChangeMeetingModeToFree(1)" class="btn_line" title="åæ¢èªç±æ¨¡å¼">èªç±æ¨¡å¼</button>\n                <button ng-click="masterChangeMeetingModeToFree(2)" class="btn_line" title="åæ¢ä¸»æäººæ¨¡å¼">ä¸»æäººæ¨¡å¼</button></br>\n                <select class="btn_line" ng-model="setUserSpeak">\n                    <option value="">éæ©åè¨äºº</option>\n                    <option ng-repeat="item in notSpeaker" value="{{item.userid}}">{{item.userid}}</option>\n                </select>\n                <button ng-click="SetSpeaker()" class="btn_blue" title="">æå®åè¨</button></br>\n                <select class="btn_line" ng-model="kickoutUserMeeting">\n                    <option value="">éæ©è¯·åºäºº</option>\n                    <option ng-repeat="item in allUserList" value="{{item.userid}}">{{item.userid}}</option>\n                </select>\n                <button ng-click="KickoutUser()" class="btn_blue" title="">è¯·åºä¼è®®å®¤</button>\n            </div>\n        </div>\n        <div class="state_tips" style="height: 100px; overflow-y: auto">\n            <pre>{{toastMsg}}</pre>\n        </div>\n        <div class="part_area">\n            <h3>ä¼è®®å®¤å±ç¤º</h3>\n            <div class="meeting_box clearfix">\n                <div class="meeting_left">\n                    <div class="meeting_left_canvas" id="local_video"></div>\n                    <div class="local_device_state" style="height: 30px;">\n                        <p ng-show="local_device_state.isSpeak" ng-class="local_device_state.camera === 0 ? \'local_camera_dis\' : \'local_camera\'"></p>\n                        <p ng-show="local_device_state.isSpeak" ng-class="local_device_state.mic === 0 ? \'local_mic_dis\' : \'local_mic\'"></p>\n                        <p ng-show="local_device_state.isSpeak" class="nube">{{nube}}</p>\n                    </div>\n                    <p>æ¬å°æåå¤´</p>\n                </div>\n\n                <div class="meeting_right">\n                    <div class="c_one" id="vga_item1" ng-repeat="i in [1,2,3,4,5,6,7,8]">\n                        <div class="item_speak"></div>\n                        <div class="item_speak_userid" style="height: 30px;">\n                            <p class="lookCamera"></p>\n                            <p class="lookCamera_dis"></p>\n                            <p class="lookMic"></p>\n                            <p class="lookMic_dis"></p>\n                            <p class="nube"></p>\n                        </div>\n                    </div>\n\n                </div>\n            </div>\n        </div>\n        <div class="part_area">\n            <h3>ä¼è®®å®¤æä½</h3>\n            <div class="meeting_box clearfix">\n                <div class="title">\n                    <span style="width:205px;">æåå¤´è®¾ç½®</span>\n                </div>\n                <div>\n                    <select class="btn_line" ng-model="currentCameraid" ng-change="cameraItemClicked(currentCameraid)">\n                        <option ng-repeat="item in cameraList" value="{{item.deviceId}}">{{item.deviceName}}</option>\n                    </select>\n                    <button class="btn_blue" ng-click="EnableCamera(1)">æå¼æåå¤´</button>\n                    <button class="btn_blue" ng-click="EnableCamera(0)">å³é­æåå¤´</button>\n                </div>\n                \x3c!-- <div class="title">\n                    <span style="width:205px;">æ¬å£°å¨è®¾ç½®</span>\n                </div>\n                <div>\n                </div>\n                <select class="btn_line" ng-model="currAudioPlayDevice"\n                    ng-change="audioPlayItemClicked(currAudioPlayDevice)">\n                    <option ng-repeat="item in voiceList" value="{{item.deviceId}}">{{item.deviceName}}</option>\n                </select>\n                <button class="btn_blue" ng-click="openAudio()">æå¼æ¬å£°å¨</button>\n                <button class="btn_blue" ng-click="closeAudio()">å³é­æ¬å£°å¨</button> --\x3e\n                <div class="title">\n                    <span style="width:205px;">è®¾ç½®è§é¢è´¨éæ¡£ä½</span>\n                </div>\n                <div>\n                    <select class="btn_line" ng-model="videoQuality" ng-change="videoQualityChange(videoQuality)">\n                        <option ng-repeat="item in videoQualityList" value="{{item.level}}">{{item.quality}}</option>\n                    </select>\n                </div>\n\n                <div>\n                    <div class="title">\n                        <span style="width:205px;">éº¦åé£è®¾ç½®</span>\n                    </div>\n                    <div>\n                        <select class="btn_line" ng-model="currentMicid" ng-change="micItemClicked(currentMicid)">\n                            <option ng-repeat="item in micList" value="{{item.deviceId}}">{{item.deviceName}}</option>\n                        </select>\n                        <button class="btn_blue" ng-click="EnableAudio(1)">æå¼éº¦åé£</button>\n                        <button class="btn_blue" ng-click="EnableAudio(0)">å³é­éº¦åé£</button>\n                    </div>\n                    \n                </div>\n            </div>\n        </div>\n\n    </div>\n\n</div>'},function(e,t){e.exports='<div ng-controller="cameraSettingController">\n    \x3c!--å£°é³è®¾ç½®--\x3e\n    <div id="tab4">\n        <div class="part_area">\n            <h3>Cameraè®¾ç½®</h3>\n                \x3c!--<span class="label">æææåå¤´ï¼</span>\n                <select class="btn_line" ng-model="currCameraDevice"\n                        ng-options="device for device in allCameraDevices">\n                </select>--\x3e\n                \x3c!--<button class="btn_blue" ng-click="getAllCamera()">è·åæææåå¤´</button><br>--\x3e\n                <div>\n                    <button class="btn_blue" ng-click="getFaceCamera()">è·åææå¯éçäººåæåå¤´</button>\n                    <button class="btn_blue" ng-click="getDataCamera()">è·åææå¯éæ°æ®æåå¤´</button>\n                </div>\n                <span class="label">ææå¯éçäººåæåå¤´ï¼</span>\n                <select class="btn_line" ng-model="currFaceCameraDevice"\n                        ng-options="device for device in allFaceCameraDevices"\n                        ng-change="facecameraDeviceChange(currFaceCameraDevice)">\n                </select><br>\n                 <span class="label">ææå¯éæ°æ®æåå¤´ï¼</span>\n                 <select class="btn_line" ng-model="currDataCameraDevice"\n                ng-options="device for device in allDataCameraDevices"\n                ng-change="datacameraDeviceChange(currDataCameraDevice)">\n                </select>\n\n                <div>\n                    <button class="btn_blue" ng-click="getCurrFaceCameraDetail()">è·åå½åäººåæåå¤´è¯¦ç»ä¿¡æ¯:</button>\n                    <span class="label">{{faceCameraDetail}}</span>\n                </div>\n                <div>\n                    <button class="btn_blue" ng-click="getCurrDataCameraDetail()">è·åå½åæ°æ®æåå¤´è¯¦ç»ä¿¡æ¯:</button>\n                    <span class="label">{{dataCameraDetail}}</span>\n                </div>\n            <div>\n                <button class="btn_blue" ng-click="clearDataCamera()">æ¸é¤å½åè®¾ç½®æåå¤´</button>\n            </div>\n\n         </div>\n         <div class="part_area">\n                <h3>Cameraé¢è§</h3>\n                <div style="line-height:38px;"><span class="label">æåå¤´åç§°ï¼<i>{{previewCamera}}</i></span></div>\n                <div class="camera_box clearfix">\n                    <div class="camera_right">\n                        <span>é¢è²ç©ºé´</span>\n                        <select alt="é¢è²ç©ºé´" class="btn_line wth220" ng-model="currColorspace"\n                                ng-options="space for space in allColorSpaceName"\n                                ng-change="colorSpaceChange(currColorspace)">\n                        </select>\n                        <span>åè¾¨ç</span>\n                        <select alt="åè¾¨ç" class="btn_line wth220" ng-model="currResolution"\n                                ng-options="resolute for resolute in allResolution"\n                                ng-change="resolutionChange(currResolution)">\n                        </select>\n                        <span>è®¾ç½®å¸§æ°</span>\n                        <select alt="å¸§æ°" class="btn_line wth220" ng-model="currfps"\n                                ng-options="fps for fps in allfps"\n                                ng-change="fpsChange(currfps)">\n                        </select>\n                        <span>è®¾ç½®ç ç</span>\n                        <select alt="ç ç" class="btn_line wth220" ng-model="currBitrate"\n                                ng-options="bitrate for bitrate in allbitRate"\n                                ng-change="bitRateChange(currBitrate)">\n                        </select>\n\n                        <div>\n                            <button class="btn_blue" ng-click="setCameraParameter()">è®¾ç½®</button>\n                            <button class="btn_blue" ng-click="startLocalPreview()">é¢è§</button>\n                            <button class="btn_blue" ng-click="stopLocalPreview()">åæ­¢</button>\n                        </div>\n                    </div>\n                    <div class="camera_left">\n                        <canvas id="previewCanvas"  style="width: 100%;height: 100%"></canvas>\n                    </div>\n                </div>\n        </div>\n\n        <div class="state_tips">\n            {{execResult}}\n        </div>\n    </div>\n\n</div>'},function(e,t){e.exports='<div ng-controller="audioSettingController">\n    \x3c!--å£°é³è®¾ç½®--\x3e\n    <div id="tab4">\n        <div class="part_area">\n            <h3>å£°é³è®¾ç½®</h3>\n            <div>\n                <button class="btn_blue" ng-click="getAllDeviceAgain()">éæ°è·åææè®¾å¤</button><br>\n                <span class="label">æ¬å£°å¨ï¼</span>\n                <select class="btn_line" ng-model="currAudioPlayDevice"\n                        ng-options="device for device in allAudioPlayDevices"\n                        ng-change="playAudioDeviceChange(currAudioPlayDevice)">\n                </select>\n\n                <span class="label">éº¦åé£ï¼</span>\n                <select class="btn_line" ng-model="currAudioRecordDevice"\n                        ng-options="device for device in allAudioRecordDevices"\n                        ng-change="recordAudioDeviceChange(currAudioRecordDevice)">\n                </select>\n\n            </div>\n            <div>\n                <span class="label">å½å¶è®¾ç½®ï¼</span>\n                <button class="btn_line" ng-click="startRecordAudio()">å¼å§å½å¶</button>\n                <button class="btn_line" ng-click="stopRecordAudio()">åæ­¢å½å¶</button>\n                <span class="label">{{recordFilePath}}</span>\n            </div>\n            <div>\n                <span class="label">é»è®¤é³é¢ï¼</span>\n                <button class="btn_line" ng-click="startPlayAudio()">å¼å§æ­æ¾é»è®¤é³é¢</button>\n                <button class="btn_line" ng-click="stopPlayAudio()">åæ­¢æ­æ¾é»è®¤é³é¢</button>\n            </div>\n            <div>\n                <span class="label">å½å¶é³é¢ï¼</span>\n                <input type="text" placeholder="è¾å¥é³é¢æ¬å°ä½ç½®" style="width: 263px;" ng-model="recordFilePath">\n                <button class="btn_line" ng-click="startPlayAudioFromRecord()">å¼å§æ­æ¾å½å¶é³é¢</button>\n                <button class="btn_line" ng-click="stopPlayAudio()">åæ­¢æ­æ¾å½å¶é³é¢</button><br><br>\n            </div>\n            <div>\n                <button class="btn_blue" ng-click="getCurrentAudioPlayDevice()">è·åå½åæ¬å£°å¨</button>\n                <button class="btn_blue" ng-click="getCurrAudioRecordDevice()">è·åå½åéº¦åé£</button>\n            </div>\n\n        </div>\n\n        <div class="state_tips">\n            {{execResult}}\n        </div>\n    </div>\n</div>'},function(e,t){e.exports='<div ng-controller="networkDetectionController">\n    \x3c!--ç½ç»çæµè®¾ç½®--\x3e\n    <div id="tab4">\n        <div class="part_area">\n            <h3>ç½ç»çæµ</h3>\n            <div>\n                <button class="btn_blue" ng-click="startDetect()">å¼å§çæµ</button>\n                <button class="btn_blue" ng-click="stopDetect()">åæ­¢çæµ</button>\n            </div>\n            <h4>çæµç»æ</h4>\n            <div>ç½ç»è¿éæ§ï¼<span class="gray">{{netResult}}</span></div>\n            <div>ä¼è®®èéæ§ï¼<span class="gray">{{meetResult}}</span></div>\n            <div>ä¸è¡å¸¦å®½ï¼<span class="gray">{{upBandWidth}}</span></div>\n            <div>ä¸è¡å¸¦å®½ï¼<span class="gray">{{downBandWidth}}</span></div>\n        </div>\n\n        <div class="state_tips">\n            {{detectResult}}\n        </div>\n    </div>\n\n</div>'},function(e,t){e.exports='<div ng-controller="networkOptimizationController">\n    \x3c!--ç½ç»ä¼éè®¾ç½®--\x3e\n    <div id="tab4">\n        <div class="part_area">\n            <h3>ç½ç»ä¼é</h3>\n            <div>\n                <span class="label">relayListåè¡¨ï¼</span>\n                <select class="btn_line" ng-model="currSelectRelayId"\n                        ng-options="relayId for relayId in AllRelayIdList"\n                        ng-change="relayIdChange(currSelectRelayId)">\n                </select>\n                <button class="btn_blue" ng-click="getRelayList()">è·årelayList</button><br>\n                <span class="label">ä¿å­ relayIdï¼</span>\n                <input ng-model="inputRelayIds" class="wth220" type="text" placeholder="è¾å¥relayIdç±»ä¼¼1,2,3">\n                <button class="btn_blue" ng-click="saveRelayId()">ä¿å­ relayId</button>\n            </div>\n            <h4>Relayä¿¡æ¯</h4>\n            <div>Ipï¼&nbsp;&nbsp;<span class="gray">{{currIp}}</span></div>\n            <div>Portï¼<span class="gray">{{currPort}}</span></div>\n            <div>è¿è¥åï¼<span class="gray">{{currServer}}</span></div>\n            <div>\n                <button class="btn_blue" ng-click="startOptimizedDetect()">å¼å§çæµ</button>\n                <button class="btn_blue" ng-click="stopOptimizedDetect()">åæ­¢çæµ</button>\n            </div>\n\n        </div>\n\n        <div class="state_tips">\n            {{detectResult}}\n        </div>\n    </div>\n\n</div>'},function(e,t){e.exports='<div ng-controller="inviteController">\n    \x3c!--åå§åè®¾ç½®--\x3e\n    <div id="tab4">\n        <div class="part_area">\n            <h3>éè¯·ä¿¡æ¯</h3>\n            <div>\n                <button class="btn_line" ng-click="init()">Init</button>\n                <button class="btn_line" ng-click="release()">Release</button>\n                <input ng-model="inviteContact" class="wth220" type="text" placeholder="è¾å¥è¢«éè¯·äºº">\n                <button class="btn_blue" ng-click="inviteOtherContact()">éè¯·</button>\n            </div>\n            <h4>éè¯·äººä¿¡æ¯</h4>\n            <div>éè¯·äººï¼<span class="gray">åç§°ä¿¡æ¯</span></div>\n            <div>éè¯·äººè§è®¯å·ï¼<span class="gray">åç§°ä¿¡æ¯</span></div>\n            <div>éè¯·äººIDï¼<span class="gray">åç§°ä¿¡æ¯</span></div>\n            <div>å½åç¶æ<span class="gray">{{inviteResult}}</span></div>\n        </div>\n        <div class="state_tips">\n            æä½ç¶æ{{meetingInfo}}\n        </div>\n    </div>\n\n</div>'}]);