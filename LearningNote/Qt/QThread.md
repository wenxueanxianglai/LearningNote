# 进程和线程的概念
---
## 进程
### 程序是计算机及存储系统中的数据文件
#### 源代码程序
* 文本文件，描述程序行为和功能

#### 可执行程序
* 二进制文件，直接加载并执行

### 进程的概念
#### 广义概念
* 程序中关于某个数据集合的一次运行活动

#### 狭义概念
* 程序被加载到内存中执行后得到进程

### 进程和线程区别
#### 程序和硬盘中静态的文件
* 存储系统中的一段二进制表示

#### 进程是内存中动态地运行实体
* 数据段，代码段，PC指针，等

### 程序和进程的联系
#### 一个程序可能对应多个进程
* 一个程序多次运行，每个运行产生一个进程

#### 一个进程可能包含多个程序
* 一个程序依赖多个其他动态库

#### * Notice *
当代操作系统中，资源分配的基本单位是进程，而CPU调度执行的基本单位是线程！

---
## 线程
### 线程的概念
* 进程内的一个执行单元
* 操作系统中的一个可调度的实体
* 进程中相对独立的控制流序列
* 执行时的现场数据和其他调度所需的信息

### 再论main函数
C/C++程序被执行后从main函数开始运行，那么这中间经历了什么样的过程？
#### 可执行程序加载执行步骤
* 1. 系统分配资源（内存，IO，等）
* 2. 将PC指向main函数入口地址
* 3. 从PC指针包含的地址处开始执行(第一个线程)

**线程是进程使用CPU资源的基本单位**

### 深入理解进程和线程
* 进程中可以存在 **多个线程** 共享进程资源
* 线程是被调度的执行单元，而   **进程不是调度单元**
* **线程不能脱离进程单独存在**，只能依赖于进程进行
* 线程有生命期，有诞生和死亡
* 任意线程都可以创建其他新的线程
---
---
# Qt中的多线程编程
---
## Qt 中通过QThread直接支持多线程
* QThread 是一个跨平台的多线程解决方案
* QThread 以简洁易用的方式实现多线程编程

#### 注意：
* Qt中的线程 **以对象的形式** 被创建和使用
* 每一个线程对应着一个 QThread 对象

## QThread 中的关键成员函数
#### void run()
线程体函数，用于定义线程功能(执行流)

#### void start()
启动函数，将线程入口地址设置为run函数

#### void terminate()
强制结束线程(**不推荐**)

---
---
# 多线程间的同步
---
## 多线程的本质是什么？
* **并发性** 是多线程编程的本质
* 在宏观上，所有线程并行执行
* 多个线程间 **相对独立**，互不干涉

## 问题：线程间总是完全独立毫无依赖的吗？
* 在特殊情况下，多线程的执行在时序上存在依赖性


## 同步的概念
* 在特殊情况下，控制多线程间的相对执行顺序

## QThread 类直接支持线程间的同步
```C++
bool QThread::wait(unsigned long time = ULONG_MAX)

QThread t;
t.start(); //创建并启动子线程
t.wait(); //等待子线程并执行结束

```

## 小结
* 在默认情况下，各个线程独立存在，并行执行
* 在特殊情况下，多线程的执行存在时序上的依赖
* QThread 类直接支持线程间的同步(wait()成员函数)
* wait()停止当前线程的执行，等待目标线程执行结束

















0
